#!/bin/bash
# PostToolUse hook: inject somatic fusion state into Claude context (ADR-019)
# Reads /dev/shm/somatic_fusion (written by somatic fusion engine at 100Hz)
# Returns JSON with additionalContext field for Claude Code hook system
STATE=$(cat /dev/shm/somatic_fusion 2>/dev/null)
if [ -n "$STATE" ]; then
    printf '{"additionalContext":"[env: %s]"}' "$STATE"
fi
