<h1 id="error-code-e0691">Error code E0691</h1> <h4 id="note-this-error-code-is-no-longer-emitted-by-the-compiler">Note: this error code is no longer emitted by the compiler.</h4> <p>A struct, enum, or union with the <code>repr(transparent)</code> representation hint contains a zero-sized field that requires non-trivial alignment.</p> <p>Erroneous code example:</p> <pre data-language="rust">#![feature(repr_align)]

#[repr(align(32))]
struct ForceAlign32;

#[repr(transparent)]
struct Wrapper(f32, ForceAlign32); // error: zero-sized field in transparent
                                   //        struct has alignment of 32, which
                                   //        is larger than 1</pre> <p>A transparent struct, enum, or union is supposed to be represented exactly like the piece of data it contains. Zero-sized fields with different alignment requirements potentially conflict with this property. In the example above, <code>Wrapper</code> would have to be aligned to 32 bytes even though <code>f32</code> has a smaller alignment requirement.</p> <p>Consider removing the over-aligned zero-sized field:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[repr(transparent)]
struct Wrapper(f32);
}</pre> <p>Alternatively, <code>PhantomData&lt;T&gt;</code> has alignment 1 for all <code>T</code>, so you can use it if you need to keep the field for some reason:</p> <pre data-language="rust">#![allow(unused)]
#![feature(repr_align)]

fn main() {
use std::marker::PhantomData;

#[repr(align(32))]
struct ForceAlign32;

#[repr(transparent)]
struct Wrapper(f32, PhantomData&lt;ForceAlign32&gt;);
}</pre> <p>Note that empty arrays <code>[T; 0]</code> have the same alignment requirement as the element type <code>T</code>. Also note that the error is conservatively reported even when the alignment of the zero-sized type is less than or equal to the data field's alignment.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0691.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0691.html</a>
  </p>
</div>
