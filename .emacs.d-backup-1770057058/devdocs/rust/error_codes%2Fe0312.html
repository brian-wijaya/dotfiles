<h1 id="error-code-e0312">Error code E0312</h1> <h4 id="note-this-error-code-is-no-longer-emitted-by-the-compiler">Note: this error code is no longer emitted by the compiler.</h4> <p>Reference's lifetime of borrowed content doesn't match the expected lifetime.</p> <p>Erroneous code example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
pub fn opt_str&lt;'a&gt;(maybestr: &amp;'a Option&lt;String&gt;) -&gt; &amp;'static str {
    if maybestr.is_none() {
        "(none)"
    } else {
        let s: &amp;'a str = maybestr.as_ref().unwrap();
        s  // Invalid lifetime!
    }
}
}</pre> <p>To fix this error, either lessen the expected lifetime or find a way to not have to use this reference outside of its current scope (by running the code directly in the same block for example?):</p> <pre data-language="rust">#![allow(unused)]
fn main() {
// In this case, we can fix the issue by switching from "static" lifetime to 'a
pub fn opt_str&lt;'a&gt;(maybestr: &amp;'a Option&lt;String&gt;) -&gt; &amp;'a str {
    if maybestr.is_none() {
        "(none)"
    } else {
        let s: &amp;'a str = maybestr.as_ref().unwrap();
        s  // Ok!
    }
}
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0312.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0312.html</a>
  </p>
</div>
