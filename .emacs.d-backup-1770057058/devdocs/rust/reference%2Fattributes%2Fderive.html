 <h1 id="derive">Derive</h1>  <p>The <em><code>derive</code> <a href="../attributes#r-attributes">attribute</a></em> invokes one or more <a href="../procedural-macros#r-macro.proc.derive">derive macros</a>, allowing new <a href="../items">items</a> to be automatically generated for data structures. You can create <code>derive</code> macros with <a href="../procedural-macros#r-macro.proc.derive">procedural macros</a>.</p> <div class="alert alert-example"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p> <p>The <a href="https://doc.rust-lang.org/core/cmp/derive.PartialEq.html"><code>PartialEq</code></a> derive macro emits an <a href="../items/implementations">implementation</a> of <a href="https://doc.rust-lang.org/core/cmp/trait.PartialEq.html"><code>PartialEq</code></a> for <code>Foo&lt;T&gt; where T: PartialEq</code>. The <a href="https://doc.rust-lang.org/core/clone/derive.Clone.html"><code>Clone</code></a> derive macro does likewise for <a href="https://doc.rust-lang.org/core/clone/trait.Clone.html"><code>Clone</code></a>.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[derive(PartialEq, Clone)]
struct Foo&lt;T&gt; {
    a: i32,
    b: T,
}
}</pre> <p>The generated <code>impl</code> items are equivalent to:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Foo&lt;T&gt; { a: i32, b: T }
impl&lt;T: PartialEq&gt; PartialEq for Foo&lt;T&gt; {
    fn eq(&amp;self, other: &amp;Foo&lt;T&gt;) -&gt; bool {
        self.a == other.a &amp;&amp; self.b == other.b
    }
}

impl&lt;T: Clone&gt; Clone for Foo&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        Foo { a: self.a.clone(), b: self.b.clone() }
    }
}
}</pre> </blockquote> </div>  <p>The <code>derive</code> attribute uses the <a href="../attributes#grammar-MetaListPaths">MetaListPaths</a> syntax to specify a list of paths to <a href="../procedural-macros#r-macro.proc.derive">derive macros</a> to invoke.</p>  <p>The <code>derive</code> attribute may only be applied to <a href="../items/structs#r-items.struct">structs</a>, <a href="../items/enumerations#r-items.enum">enums</a>, and <a href="../items/unions#r-items.union">unions</a>.</p>  <p>The <code>derive</code> attribute may be used any number of times on an item. All derive macros listed in all attributes are invoked.</p>  <p>The <code>derive</code> attribute is exported in the standard library prelude as <a href="https://doc.rust-lang.org/core/macros/builtin/attr.derive.html"><code>core::prelude::v1::derive</code></a>.</p>  <p>Built-in derives are defined in the <a href="../names/preludes#r-names.preludes.lang">language prelude</a>. The list of built-in derives are:</p> <ul> <li><a href="https://doc.rust-lang.org/core/clone/trait.Clone.html"><code>Clone</code></a></li> <li><a href="https://doc.rust-lang.org/core/marker/trait.Copy.html"><code>Copy</code></a></li> <li><a href="https://doc.rust-lang.org/core/fmt/macros/derive.Debug.html"><code>Debug</code></a></li> <li><a href="https://doc.rust-lang.org/core/default/trait.Default.html"><code>Default</code></a></li> <li><a href="https://doc.rust-lang.org/core/cmp/trait.Eq.html"><code>Eq</code></a></li> <li><a href="https://doc.rust-lang.org/core/hash/macros/derive.Hash.html"><code>Hash</code></a></li> <li><a href="https://doc.rust-lang.org/core/cmp/trait.Ord.html"><code>Ord</code></a></li> <li><a href="https://doc.rust-lang.org/core/cmp/trait.PartialEq.html"><code>PartialEq</code></a></li> <li><a href="https://doc.rust-lang.org/core/cmp/trait.PartialOrd.html"><code>PartialOrd</code></a></li> </ul>  <p>The built-in derives include the <a href="derive#r-attributes.derive.automatically_derived"><code>automatically_derived</code> attribute</a> on the implementations they generate.</p>  <p>During macro expansion, for each element in the list of derives, the corresponding derive macro expands to zero or more <a href="../items">items</a>.</p>   <h2 id="the-automatically_derived-attribute">The <code id="">automatically_derived</code> attribute</h2>  <p>The <em><code>automatically_derived</code> <a href="../attributes#r-attributes">attribute</a></em> is used to annotate an <a href="../items/implementations">implementation</a> to indicate that it was automatically created by a <a href="../procedural-macros#r-macro.proc.derive">derive macro</a>. It has no direct effect, but it may be used by tools and diagnostic lints to detect these automatically generated implementations.</p> <div class="alert alert-example"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p> <p>Given <a href="https://doc.rust-lang.org/core/clone/derive.Clone.html"><code>#[derive(Clone)]</code></a> on <code>struct Example</code>, the <a href="../procedural-macros#r-macro.proc.derive">derive macro</a> may produce:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Example;
#[automatically_derived]
impl ::core::clone::Clone for Example {
    #[inline]
    fn clone(&amp;self) -&gt; Self {
        Example
    }
}
}</pre> </blockquote> </div>  <p>The <code>automatically_derived</code> attribute uses the <a href="../attributes#grammar-MetaWord">MetaWord</a> syntax.</p>  <p>The <code>automatically_derived</code> attribute may only be applied to an <a href="../items/implementations">implementation</a>.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p><code>rustc</code> ignores use in other positions but lints against it. This may become an error in the future.</p> </blockquote> </div>  <p>Using <code>automatically_derived</code> more than once on an implementation has the same effect as using it once.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p><code>rustc</code> lints against any use following the first.</p> </blockquote> </div>  <p>The <code>automatically_derived</code> attribute has no behavior.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/attributes/derive.html" class="_attribution-link">https://doc.rust-lang.org/reference/attributes/derive.html</a>
  </p>
</div>
