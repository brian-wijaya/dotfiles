 <h1 id="the-rust-runtime">The Rust runtime</h1> <p>This section documents features that define some aspects of the Rust runtime.</p>   <h2 id="the-global_allocator-attribute">The <code id="">global_allocator</code> attribute</h2>  <p>The <em><code>global_allocator</code> <a href="attributes#r-attributes">attribute</a></em> selects a <a href="../std/alloc/index">memory allocator</a>.</p> <div class="alert alert-example"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p> <pre data-language="rust">#![allow(unused)]
fn main() {
use core::alloc::{GlobalAlloc, Layout};
use std::alloc::System;

struct MyAllocator;

unsafe impl GlobalAlloc for MyAllocator {
    unsafe fn alloc(&amp;self, layout: Layout) -&gt; *mut u8 {
        unsafe { System.alloc(layout) }
    }
    unsafe fn dealloc(&amp;self, ptr: *mut u8, layout: Layout) {
        unsafe { System.dealloc(ptr, layout) }
    }
}

#[global_allocator]
static GLOBAL: MyAllocator = MyAllocator;
}</pre> </blockquote> </div>  <p>The <code>global_allocator</code> attribute uses the <a href="attributes#grammar-MetaWord">MetaWord</a> syntax.</p>  <p>The <code>global_allocator</code> attribute may only be applied to a <a href="items/static-items">static item</a> whose type implements the <a href="https://doc.rust-lang.org/core/alloc/global/trait.GlobalAlloc.html"><code>GlobalAlloc</code></a> trait.</p>  <p>The <code>global_allocator</code> attribute may only be used once on an item.</p>  <p>The <code>global_allocator</code> attribute may only be used once in the crate graph.</p>  <p>The <code>global_allocator</code> attribute is exported from the <a href="https://doc.rust-lang.org/core/prelude/v1/index.html">standard library prelude</a>.</p>   <h2 id="the-windows_subsystem-attribute">The <code id="">windows_subsystem</code> attribute</h2>  <p>The <em><code>windows_subsystem</code> <a href="attributes#r-attributes">attribute</a></em> sets the <a href="https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx">subsystem</a> when linking on a Windows target.</p> <div class="alert alert-example"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p> <pre data-language="rust">#![allow(unused)]
#![windows_subsystem = "windows"]
fn main() {
}</pre> </blockquote> </div>  <p>The <code>windows_subsystem</code> attribute uses the <a href="attributes#grammar-MetaNameValueStr">MetaNameValueStr</a> syntax. Accepted values are <code>"console"</code> and <code>"windows"</code>.</p>  <p>The <code>windows_subsystem</code> attribute may only be applied to the crate root.</p>  <p>Only the first use of <code>windows_subsystem</code> has effect.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p><code>rustc</code> lints against any use following the first. This may become an error in the future.</p> </blockquote> </div>  <p>The <code>windows_subsystem</code> attribute is ignored on non-Windows targets and non-<code>bin</code> <a href="linkage">crate types</a>.</p>  <p>The <code>"console"</code> subsystem is the default. If a console process is run from an existing console then it will be attached to that console; otherwise a new console window will be created.</p>  <p>The <code>"windows"</code> subsystem will run detached from any existing console.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p>The <code>"windows"</code> subsystem is commonly used by GUI applications that do not want to display a console window on startup.</p> </blockquote> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/runtime.html" class="_attribution-link">https://doc.rust-lang.org/reference/runtime.html</a>
  </p>
</div>
