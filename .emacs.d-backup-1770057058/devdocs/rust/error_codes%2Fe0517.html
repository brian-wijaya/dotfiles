<h1 id="error-code-e0517">Error code E0517</h1> <p>A <code>#[repr(..)]</code> attribute was placed on an unsupported item.</p> <p>Examples of erroneous code:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[repr(C)]
type Foo = u8;

#[repr(packed)]
enum Foo {Bar, Baz}

#[repr(u8)]
struct Foo {bar: bool, baz: bool}

#[repr(C)]
impl Foo {
    // ...
}
}</pre> <ul> <li>The <code>#[repr(C)]</code> attribute can only be placed on structs and enums.</li> <li>The <code>#[repr(packed)]</code> and <code>#[repr(simd)]</code> attributes only work on structs.</li> <li>The <code>#[repr(u8)]</code>, <code>#[repr(i16)]</code>, etc attributes only work on enums.</li> </ul> <p>These attributes do not work on typedefs, since typedefs are just aliases.</p> <p>Representations like <code>#[repr(u8)]</code>, <code>#[repr(i64)]</code> are for selecting the discriminant size for enums. For enums with no data fields on any of the variants, e.g. <code>enum Color {Red, Blue, Green}</code>, this effectively sets the size of the enum to the size of the provided type. Such an enum can be cast to a value of the same type as well. In short, <code>#[repr(u8)]</code> makes a field-less enum behave like an integer with a constrained set of allowed values.</p> <p>For a description of how <code>#[repr(C)]</code> and representations like <code>#[repr(u8)]</code> affect the layout of enums with data fields, see <a href="https://github.com/rust-lang/rfcs/blob/master/text/2195-really-tagged-unions.md">RFC 2195</a>.</p> <p>Only field-less enums can be cast to numerical primitives. Representations like <code>#[repr(u8)]</code> will not apply to structs.</p> <p><code>#[repr(packed)]</code> reduces padding to make the struct size smaller. The representation of enums isn't strictly defined in Rust, and this attribute won't work on enums.</p> <p><code>#[repr(simd)]</code> will give a struct consisting of a homogeneous series of machine types (i.e., <code>u8</code>, <code>i32</code>, etc) a representation that permits vectorization via SIMD. This doesn't make much sense for enums since they don't consist of a single list of data.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0517.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0517.html</a>
  </p>
</div>
