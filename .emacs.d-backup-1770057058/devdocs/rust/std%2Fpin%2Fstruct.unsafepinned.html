<h1 class="main-heading">Struct UnsafePinned </h1>
<pre class="rust item-decl" data-language="rust">pub struct UnsafePinned&lt;T&gt;where
    T: ?Sized,{ /* private fields */ }</pre>
<span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span><p>This type provides a way to entirely opt-out of typical aliasing rules; specifically, <code>&amp;mut UnsafePinned&lt;T&gt;</code> is not guaranteed to be a unique pointer. This also subsumes the effects of <code>UnsafeCell</code>, i.e., <code>&amp;UnsafePinned&lt;T&gt;</code> may point to data that is being mutated.</p> <p>However, even if you define your type like <code>pub struct Wrapper(UnsafePinned&lt;...&gt;)</code>, it is still very risky to have an <code>&amp;mut Wrapper</code> that aliases anything else. Many functions that work generically on <code>&amp;mut T</code> assume that the memory that stores <code>T</code> is uniquely owned (such as <code>mem::swap</code>). In other words, while having aliasing with <code>&amp;mut Wrapper</code> is not immediate Undefined Behavior, it is still unsound to expose such a mutable reference to code you do not control! Techniques such as pinning via <a href="struct.pin" title="struct std::pin::Pin"><code>Pin</code></a> are needed to ensure soundness.</p> <p>Similar to <a href="../cell/struct.unsafecell" title="struct std::cell::UnsafeCell"><code>UnsafeCell</code></a>, <code>UnsafePinned</code> will not usually show up in the public API of a library. It is an internal implementation detail of libraries that need to support aliasing mutable references.</p> <p>This type blocks niches the same way <code>UnsafeCell</code> does.</p> <h3 id="implementations" class="section-header">Implementations</h3>
<div id="implementations-list">
<summary><section id="impl-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#46">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; UnsafePinned&lt;T&gt;</pre></section></summary><div class="impl-items">
<summary><section id="method.new" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#54">Source</a><pre class="code-header" data-language="rust">pub const fn new(value: T) -&gt; UnsafePinned&lt;T&gt;</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Constructs a new instance of <code>UnsafePinned</code> which will wrap the specified value.</p> <p>All access to the inner value through <code>&amp;UnsafePinned&lt;T&gt;</code> or <code>&amp;mut UnsafePinned&lt;T&gt;</code> or <code>Pin&lt;&amp;mut UnsafePinned&lt;T&gt;&gt;</code> requires <code>unsafe</code> code.</p> </div>
<summary><section id="method.into_inner" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#63">Source</a><pre class="code-header" data-language="rust">pub const fn into_inner(self) -&gt; T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Unwraps the value, consuming this <code>UnsafePinned</code>.</p> </div>
</div>
<summary><section id="impl-UnsafePinned%3CT%3E-1" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#68">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; UnsafePinned&lt;T&gt;where
    T: ?Sized,</pre></section></summary><div class="impl-items">
<summary><section id="method.get_mut_pinned" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#73">Source</a><pre class="code-header" data-language="rust">pub const fn get_mut_pinned(self: Pin&lt;&amp;mut UnsafePinned&lt;T&gt;&gt;) -&gt; *mut T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Get read-write access to the contents of a pinned <code>UnsafePinned</code>.</p> </div>
<summary><section id="method.get_mut_unchecked" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#85">Source</a><pre class="code-header" data-language="rust">pub const fn get_mut_unchecked(&amp;mut self) -&gt; *mut T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Get read-write access to the contents of an <code>UnsafePinned</code>.</p> <p>You should usually be using <code>get_mut_pinned</code> instead to explicitly track the fact that this memory is ‚Äúpinned‚Äù due to there being aliases.</p> </div>
<summary><section id="method.get" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#110">Source</a><pre class="code-header" data-language="rust">pub const fn get(&amp;self) -&gt; *mut T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Get mutable access to the contents of a shared <code>UnsafePinned</code>.</p> <p>This can be cast to a pointer of any kind. When creating references, you must uphold the aliasing rules; see <a href="../cell/struct.unsafecell#aliasing-rules" title="struct std::cell::UnsafeCell"><code>UnsafeCell</code></a> for more discussion and caveats.</p> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">#![feature(unsafe_pinned)]
use std::pin::UnsafePinned;

unsafe {
    let mut x = UnsafePinned::new(0);
    let ptr = x.get();
    x.get_mut_unchecked().write(1);
    assert_eq!(ptr.read(), 1);
}</pre></div>
</div>
<summary><section id="method.raw_get" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#123">Source</a><pre class="code-header" data-language="rust">pub const fn raw_get(this: *const UnsafePinned&lt;T&gt;) -&gt; *mut T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Gets an immutable pointer to the wrapped value.</p> <p>The difference from <a href="struct.unsafepinned#method.get" title="method std::pin::UnsafePinned::get"><code>get</code></a> is that this function accepts a raw pointer, which is useful to avoid the creation of temporary references.</p> </div>
<summary><section id="method.raw_get_mut" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#137">Source</a><pre class="code-header" data-language="rust">pub const fn raw_get_mut(this: *mut UnsafePinned&lt;T&gt;) -&gt; *mut T</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">üî¨</span><span>This is a nightly-only experimental API. (<code>unsafe_pinned</code> <a href="https://github.com/rust-lang/rust/issues/125735">#125735</a>)</span>
</div></span></summary><div class="docblock">
<p>Gets a mutable pointer to the wrapped value.</p> <p>The difference from <a href="struct.unsafepinned#method.get_mut_pinned" title="method std::pin::UnsafePinned::get_mut_pinned"><code>get_mut_pinned</code></a> and <a href="struct.unsafepinned#method.get_mut_unchecked" title="method std::pin::UnsafePinned::get_mut_unchecked"><code>get_mut_unchecked</code></a> is that this function accepts a raw pointer, which is useful to avoid the creation of temporary references.</p> </div>
</div>
</div>
<h3 id="trait-implementations" class="section-header">Trait Implementations</h3>
<div id="trait-implementations-list">
<summary><section id="impl-Debug-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#160">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; Debug for UnsafePinned&lt;T&gt;where
    T: ?Sized,</pre></section></summary><div class="impl-items">
<summary><section id="method.fmt" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#161">Source</a><pre class="code-header" data-language="rust">fn fmt(&amp;self, f: &amp;mut Formatter&lt;'_&gt;) -&gt; Result&lt;(), Error&gt;</pre></section></summary><div class="docblock">Formats the value using the given formatter. <a href="../fmt/trait.debug#tymethod.fmt">Read more</a>
</div>
</div>
<summary><section id="impl-Default-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#143">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; Default for UnsafePinned&lt;T&gt;where
    T: Default,</pre></section></summary><div class="impl-items">
<summary><section id="method.default" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#145">Source</a><pre class="code-header" data-language="rust">fn default() -&gt; UnsafePinned&lt;T&gt;</pre></section></summary><div class="docblock">
<p>Creates an <code>UnsafePinned</code>, with the <code>Default</code> value for T.</p> </div>
</div>
<summary><section id="impl-From%3CT%3E-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#152">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; From&lt;T&gt; for UnsafePinned&lt;T&gt;</pre></section></summary><div class="impl-items">
<summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#154">Source</a><pre class="code-header" data-language="rust">fn from(value: T) -&gt; UnsafePinned&lt;T&gt;</pre></section></summary><div class="docblock">
<p>Creates a new <code>UnsafePinned&lt;T&gt;</code> containing the given value.</p> </div>
</div>
<section id="impl-CoerceUnsized%3CUnsafePinned%3CU%3E%3E-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#168">Source</a><pre class="code-header" data-language="rust">impl&lt;T, U&gt; CoerceUnsized&lt;UnsafePinned&lt;U&gt;&gt; for UnsafePinned&lt;T&gt;where
    T: CoerceUnsized&lt;U&gt;,</pre></section><section id="impl-DispatchFromDyn%3CUnsafePinned%3CU%3E%3E-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#180">Source</a><pre class="code-header" data-language="rust">impl&lt;T, U&gt; DispatchFromDyn&lt;UnsafePinned&lt;U&gt;&gt; for UnsafePinned&lt;T&gt;where
    T: DispatchFromDyn&lt;U&gt;,</pre></section><section id="impl-Sync-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#33">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; Sync for UnsafePinned&lt;T&gt;where
    T: Sync + ?Sized,</pre></section><section id="impl-Unpin-for-UnsafePinned%3CT%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/pin/unsafe_pinned.rs.html#39">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; !Unpin for UnsafePinned&lt;T&gt;where
    T: ?Sized,When this type is used, that almost certainly means safe APIs need to use pinning to avoid the
aliases from becoming invalidated. Therefore let‚Äôs mark this as !Unpin. You can always opt
back in to Unpin with an impl block, provided your API is still sound while unpinned.
</pre></section>
</div>
<h3 id="synthetic-implementations" class="section-header">Auto Trait Implementations</h3>
<div id="synthetic-implementations-list">
<section id="impl-Freeze-for-UnsafePinned%3CT%3E" class="impl"><pre class="code-header" data-language="rust">impl&lt;T&gt; !Freeze for UnsafePinned&lt;T&gt;</pre></section><section id="impl-RefUnwindSafe-for-UnsafePinned%3CT%3E" class="impl"><pre class="code-header" data-language="rust">impl&lt;T&gt; !RefUnwindSafe for UnsafePinned&lt;T&gt;</pre></section><section id="impl-Send-for-UnsafePinned%3CT%3E" class="impl"><pre class="code-header" data-language="rust">impl&lt;T&gt; Send for UnsafePinned&lt;T&gt;where
    T: Send + ?Sized,</pre></section><section id="impl-UnwindSafe-for-UnsafePinned%3CT%3E" class="impl"><pre class="code-header" data-language="rust">impl&lt;T&gt; UnwindSafe for UnsafePinned&lt;T&gt;where
    T: UnwindSafe + ?Sized,</pre></section>
</div>
<h3 id="blanket-implementations" class="section-header">Blanket Implementations</h3>
<div id="blanket-implementations-list">
<summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/any.rs.html#138">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; Any for Twhere
    T: 'static + ?Sized,</pre></section></summary><div class="impl-items">
<summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/any.rs.html#139">Source</a><pre class="code-header" data-language="rust">fn type_id(&amp;self) -&gt; TypeId</pre></section></summary><div class="docblock">Gets the <code>TypeId</code> of <code>self</code>. <a href="../any/trait.any#tymethod.type_id">Read more</a>
</div>
</div>
<summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/borrow.rs.html#212">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; Borrow&lt;T&gt; for Twhere
    T: ?Sized,</pre></section></summary><div class="impl-items">
<summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/borrow.rs.html#214">Source</a><pre class="code-header" data-language="rust">fn borrow(&amp;self) -&gt; &amp;T</pre></section></summary><div class="docblock">Immutably borrows from an owned value. <a href="../borrow/trait.borrow#tymethod.borrow">Read more</a>
</div>
</div>
<summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/borrow.rs.html#221">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; BorrowMut&lt;T&gt; for Twhere
    T: ?Sized,</pre></section></summary><div class="impl-items">
<summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/borrow.rs.html#222">Source</a><pre class="code-header" data-language="rust">fn borrow_mut(&amp;mut self) -&gt; &amp;mut T</pre></section></summary><div class="docblock">Mutably borrows from an owned value. <a href="../borrow/trait.borrowmut#tymethod.borrow_mut">Read more</a>
</div>
</div>
<summary><section id="impl-From%3C!%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#802">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; From&lt;!&gt; for T</pre></section></summary><div class="impl-items">
<summary><section id="method.from-2" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#803">Source</a><pre class="code-header" data-language="rust">fn from(t: !) -&gt; T</pre></section></summary><div class="docblock">Converts to this type from the input type.</div>
</div>
<summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#785">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; From&lt;T&gt; for T</pre></section></summary><div class="impl-items">
<summary><section id="method.from-1" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#788">Source</a><pre class="code-header" data-language="rust">fn from(t: T) -&gt; T</pre></section></summary><div class="docblock">
<p>Returns the argument unchanged.</p> </div>
</div>
<summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#767-769">Source</a><pre class="code-header" data-language="rust">impl&lt;T, U&gt; Into&lt;U&gt; for Twhere
    U: From&lt;T&gt;,</pre></section></summary><div class="impl-items">
<summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#777">Source</a><pre class="code-header" data-language="rust">fn into(self) -&gt; U</pre></section></summary><div class="docblock">
<p>Calls <code>U::from(self)</code>.</p> <p>That is, this conversion is whatever the implementation of <code><a href="../convert/trait.from" title="trait std::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p> </div>
</div>
<summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#827-829">Source</a><pre class="code-header" data-language="rust">impl&lt;T, U&gt; TryFrom&lt;U&gt; for Twhere
    U: Into&lt;T&gt;,</pre></section></summary><div class="impl-items">
<summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#831">Source</a><pre class="code-header" data-language="rust">type Error = Infallible</pre></section></summary><div class="docblock">The type returned in the event of a conversion error.</div>
<summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#834">Source</a><pre class="code-header" data-language="rust">fn try_from(value: U) -&gt; Result&lt;T, &lt;T as TryFrom&lt;U&gt;&gt;::Error&gt;</pre></section></summary><div class="docblock">Performs the conversion.</div>
</div>
<summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#811-813">Source</a><pre class="code-header" data-language="rust">impl&lt;T, U&gt; TryInto&lt;U&gt; for Twhere
    U: TryFrom&lt;T&gt;,</pre></section></summary><div class="impl-items">
<summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#815">Source</a><pre class="code-header" data-language="rust">type Error = &lt;U as TryFrom&lt;T&gt;&gt;::Error</pre></section></summary><div class="docblock">The type returned in the event of a conversion error.</div>
<summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/convert/mod.rs.html#818">Source</a><pre class="code-header" data-language="rust">fn try_into(self) -&gt; Result&lt;U, &lt;U as TryFrom&lt;T&gt;&gt;::Error&gt;</pre></section></summary><div class="docblock">Performs the conversion.</div>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/std/pin/struct.UnsafePinned.html" class="_attribution-link">https://doc.rust-lang.org/std/pin/struct.UnsafePinned.html</a>
  </p>
</div>
