<h1 id="error-code-e0764">Error code E0764</h1> <p>A mutable reference was used in a constant.</p> <p>Erroneous code example:</p> <pre data-language="rust">fn main() {
    const OH_NO: &amp;'static mut usize = &amp;mut 1; // error!
}</pre> <p>Mutable references (<code>&amp;mut</code>) can only be used in constant functions, not statics or constants. This limitation exists to prevent the creation of constants that have a mutable reference in their final value. If you had a constant of <code>&amp;mut i32</code> type, you could modify the value through that reference, making the constant essentially mutable.</p> <p>While there could be a more fine-grained scheme in the future that allows mutable references if they are not "leaked" to the final value, a more conservative approach was chosen for now. <code>const fn</code> do not have this problem, as the borrow checker will prevent the <code>const fn</code> from returning new mutable references.</p> <p>Remember: you cannot use a function call inside a constant or static. However, you can totally use it in constant functions:</p> <pre data-language="rust">const fn foo(x: usize) -&gt; usize {
    let mut y = 1;
    let z = &amp;mut y;
    *z += x;
    y
}

fn main() {
    const FOO: usize = foo(10); // ok!
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0764.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0764.html</a>
  </p>
</div>
