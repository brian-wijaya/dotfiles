 <h1 id="modules">Modules</h1>  <div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-Module"><a href="modules#railroad-Module">Module</a></span> → <br>
      <code class="grammar-literal">unsafe</code><sup>?</sup> <code class="grammar-literal">mod</code> <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> <code class="grammar-literal">;</code> <br>
    | <code class="grammar-literal">unsafe</code><sup>?</sup> <code class="grammar-literal">mod</code> <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> <code class="grammar-literal">{</code> <br>
        <span class="grammar-text"><a href="../attributes#grammar-InnerAttribute">InnerAttribute</a></span><sup>*</sup> <br>
        <span class="grammar-text"><a href="../items#grammar-Item">Item</a></span><sup>*</sup> <br>
      <code class="grammar-literal">}</code></p>

<details class="grammar-railroad grammar-hidden"><summary>Syntax diagram</summary> <div style="width: 822px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-Module">
<svg class="railroad" viewbox="0 0 822 145" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <rect class="railroad_canvas" height="100%" width="100%"></rect> <g class="verticalgrid"> <a class="link" xlink:href="modules#grammar-Module"> <text class="comment" x="36" y="25"> Module</text> </a> <g class="sequence"> <path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"></path> <g class="choice"> <path d=" M 35 66 h 24 m 318 0 h 410 m -202 0 l -5 -5 m 0 10 l 5 -5 m 202 0"></path> <g class="sequence"> <g class="optional"> <path d=" M 59 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 68 m -31 0 l -5 -5 m 0 10 l 5 -5 m 31 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="terminal"> <rect height="22" rx="10" ry="10" width="68" x="83" y="55"></rect> <text x="117" y="71"> unsafe</text> </g> </g> <g class="terminal"> <rect height="22" rx="10" ry="10" width="44" x="185" y="55"></rect> <text x="207" y="71"> mod</text> </g> <a class="link" xlink:href="../identifiers#railroad-IDENTIFIER"> <g class="nonterminal"> <rect height="22" width="100" x="239" y="55"></rect> <text x="289" y="71"> IDENTIFIER</text> </g> </a> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="349" y="55"></rect> <text x="363" y="71"> ;</text> </g> <path d=" M 175 66 h 10"></path> <path d=" M 229 66 h 10"></path> <path d=" M 339 66 h 10"></path> </g> <path d=" M 35 66 a 12 12 0 0 1 12 12 v 9 m 728 0 v -9 a 12 12 0 0 1 12 -12"></path> <path d=" M 47 87 v 12 a 12 12 0 0 0 12 12 m 704 0 h 0 a 12 12 0 0 0 12 -12 v -12"></path> <g class="sequence"> <g class="optional"> <path d=" M 59 111 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 68 m -31 0 l -5 -5 m 0 10 l 5 -5 m 31 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="terminal"> <rect height="22" rx="10" ry="10" width="68" x="83" y="100"></rect> <text x="117" y="116"> unsafe</text> </g> </g> <g class="terminal"> <rect height="22" rx="10" ry="10" width="44" x="185" y="100"></rect> <text x="207" y="116"> mod</text> </g> <a class="link" xlink:href="../identifiers#railroad-IDENTIFIER"> <g class="nonterminal"> <rect height="22" width="100" x="239" y="100"></rect> <text x="289" y="116"> IDENTIFIER</text> </g> </a> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="349" y="100"></rect> <text x="363" y="116"> {</text> </g> <g class="optional"> <path d=" M 387 111 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 156 m -75 0 l -5 -5 m 0 10 l 5 -5 m 75 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="repeat"> <path d=" M 411 111 h 12 m 132 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -132 m 69 0 l 5 -5 m 0 10 l -5 -5 m -69 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12"></path>  <a class="link" xlink:href="../attributes#railroad-InnerAttribute"> <g class="nonterminal"> <rect height="22" width="132" x="423" y="100"></rect> <text x="489" y="116"> InnerAttribute</text> </g> </a> </g> </g> <g class="optional"> <path d=" M 601 111 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 76 m -35 0 l -5 -5 m 0 10 l 5 -5 m 35 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="repeat"> <path d=" M 625 111 h 12 m 52 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -52 m 29 0 l 5 -5 m 0 10 l -5 -5 m -29 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12"></path>  <a class="link" xlink:href="../items#railroad-Item"> <g class="nonterminal"> <rect height="22" width="52" x="637" y="100"></rect> <text x="663" y="116"> Item</text> </g> </a> </g> </g> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="735" y="100"></rect> <text x="749" y="116"> }</text> </g> <path d=" M 175 111 h 10"></path> <path d=" M 229 111 h 10"></path> <path d=" M 339 111 h 10"></path> <path d=" M 377 111 h 10"></path> <path d=" M 591 111 h 10"></path> <path d=" M 725 111 h 10"></path> </g> </g> <path d=" M 797 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"></path> <path d=" M 25 66 h 10"></path> <path d=" M 787 66 h 10"></path> </g> </g> </svg> </div> </details>
</div>   <p>A module is a container for zero or more <a href="../items">items</a>.</p>  <p>A <em>module item</em> is a module, surrounded in braces, named, and prefixed with the keyword <code>mod</code>. A module item introduces a new, named module into the tree of modules making up a crate.</p>  <p>Modules can nest arbitrarily.</p> <p>An example of a module:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
mod math {
    type Complex = (f64, f64);
    fn sin(f: f64) -&gt; f64 {
        /* ... */
      unimplemented!();
    }
    fn cos(f: f64) -&gt; f64 {
        /* ... */
      unimplemented!();
    }
    fn tan(f: f64) -&gt; f64 {
        /* ... */
      unimplemented!();
    }
}
}</pre>  <p>Modules are defined in the <a href="../names/namespaces">type namespace</a> of the module or block where they are located.</p>  <p>It is an error to define multiple items with the same name in the same namespace within a module. See the <a href="../names/scopes">scopes chapter</a> for more details on restrictions and shadowing behavior.</p>  <p>The <code>unsafe</code> keyword is syntactically allowed to appear before the <code>mod</code> keyword, but it is rejected at a semantic level. This allows macros to consume the syntax and make use of the <code>unsafe</code> keyword, before removing it from the token stream.</p>  <h2 id="module-source-filenames">Module Source Filenames</h2>  <p>A module without a body is loaded from an external file. When the module does not have a <code>path</code> attribute, the path to the file mirrors the logical <a href="../paths">module path</a>.</p>  <p>Ancestor module path components are directories, and the module’s contents are in a file with the name of the module plus the <code>.rs</code> extension. For example, the following module structure can have this corresponding filesystem structure:</p> <div class="table-wrapper">
<table>
<thead><tr>
<th>Module Path</th>
<th>Filesystem Path</th>
<th>File Contents</th>
</tr></thead>
<tbody> <tr>
<td><code>crate</code></td>
<td><code>lib.rs</code></td>
<td><code>mod util;</code></td>
</tr> <tr>
<td><code>crate::util</code></td>
<td><code>util.rs</code></td>
<td><code>mod config;</code></td>
</tr> <tr>
<td><code>crate::util::config</code></td>
<td><code>util/config.rs</code></td>
<td></td>
</tr> </tbody>
</table> </div>
 <p>Module filenames may also be the name of the module as a directory with the contents in a file named <code>mod.rs</code> within that directory. The above example can alternately be expressed with <code>crate::util</code>’s contents in a file named <code>util/mod.rs</code>. It is not allowed to have both <code>util.rs</code> and <code>util/mod.rs</code>.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p>Prior to <code>rustc</code> 1.30, using <code>mod.rs</code> files was the way to load a module with nested children. It is encouraged to use the new naming convention as it is more consistent, and avoids having many files named <code>mod.rs</code> within a project.</p> </blockquote> </div>  <h3 id="the-path-attribute">The <code id="">path</code> attribute</h3>  <p>The directories and files used for loading external file modules can be influenced with the <code>path</code> attribute.</p>  <p>For <code>path</code> attributes on modules not inside inline module blocks, the file path is relative to the directory the source file is located. For example, the following code snippet would use the paths shown based on where it is located:</p>  <pre data-language="rust">#[path = "foo.rs"]
mod c;</pre> <div class="table-wrapper">
<table>
<thead><tr>
<th>Source File</th>
<th>
<code>c</code>’s File Location</th>
<th>
<code>c</code>’s Module Path</th>
</tr></thead>
<tbody> <tr>
<td><code>src/a/b.rs</code></td>
<td><code>src/a/foo.rs</code></td>
<td><code>crate::a::b::c</code></td>
</tr> <tr>
<td><code>src/a/mod.rs</code></td>
<td><code>src/a/foo.rs</code></td>
<td><code>crate::a::c</code></td>
</tr> </tbody>
</table> </div>
 <p>For <code>path</code> attributes inside inline module blocks, the relative location of the file path depends on the kind of source file the <code>path</code> attribute is located in. “mod-rs” source files are root modules (such as <code>lib.rs</code> or <code>main.rs</code>) and modules with files named <code>mod.rs</code>. “non-mod-rs” source files are all other module files. Paths for <code>path</code> attributes inside inline module blocks in a mod-rs file are relative to the directory of the mod-rs file including the inline module components as directories. For non-mod-rs files, it is the same except the path starts with a directory with the name of the non-mod-rs module. For example, the following code snippet would use the paths shown based on where it is located:</p>  <pre data-language="rust">mod inline {
    #[path = "other.rs"]
    mod inner;
}</pre> <div class="table-wrapper">
<table>
<thead><tr>
<th>Source File</th>
<th>
<code>inner</code>’s File Location</th>
<th>
<code>inner</code>’s Module Path</th>
</tr></thead>
<tbody> <tr>
<td><code>src/a/b.rs</code></td>
<td><code>src/a/b/inline/other.rs</code></td>
<td><code>crate::a::b::inline::inner</code></td>
</tr> <tr>
<td><code>src/a/mod.rs</code></td>
<td><code>src/a/inline/other.rs</code></td>
<td><code>crate::a::inline::inner</code></td>
</tr> </tbody>
</table> </div> <p>An example of combining the above rules of <code>path</code> attributes on inline modules and nested modules within (applies to both mod-rs and non-mod-rs files):</p>  <pre data-language="rust">#[path = "thread_files"]
mod thread {
    // Load the `local_data` module from `thread_files/tls.rs` relative to
    // this source file's directory.
    #[path = "tls.rs"]
    mod local_data;
}</pre>  <h2 id="attributes-on-modules">Attributes on Modules</h2>  <p>Modules, like all items, accept outer attributes. They also accept inner attributes: either after <code>{</code> for a module with a body, or at the beginning of the source file, after the optional BOM and shebang.</p>  <p>The built-in attributes that have meaning on a module are <a href="../conditional-compilation"><code>cfg</code></a>, <a href="../attributes/diagnostics#the-deprecated-attribute"><code>deprecated</code></a>, <a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html"><code>doc</code></a>, <a href="../attributes/diagnostics#lint-check-attributes">the lint check attributes</a>, <a href="#the-path-attribute"><code>path</code></a>, and <a href="../names/preludes#the-no_implicit_prelude-attribute"><code>no_implicit_prelude</code></a>. Modules also accept macro attributes.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/items/modules.html" class="_attribution-link">https://doc.rust-lang.org/reference/items/modules.html</a>
  </p>
</div>
