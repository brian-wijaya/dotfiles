<h1 id="error-code-e0798">Error code E0798</h1> <p>Functions marked as <code>cmse-nonsecure-call</code> place restrictions on their inputs and outputs.</p> <ul> <li>inputs must fit in the 4 available 32-bit argument registers. Alignment is relevant.</li> <li>outputs must either fit in 4 bytes, or be a foundational type of size 8 (<code>i64</code>, <code>u64</code>, <code>f64</code>).</li> <li>no generics can be used in the signature</li> </ul> <p>For more information, see <a href="https://github.com/ARM-software/abi-aa/releases">arm's aapcs32</a>.</p> <p>Erroneous code example:</p> <pre data-language="rust">#![feature(abi_cmse_nonsecure_call)]

#[no_mangle]
pub fn test(
    f: extern "cmse-nonsecure-call" fn(u32, u32, u32, u32, u32) -&gt; u32,
) -&gt; u32 {
    f(1, 2, 3, 4, 5)
}</pre> <p>Arguments' alignment is respected. In the example below, padding is inserted so that the <code>u64</code> argument is passed in registers r2 and r3. There is then no room left for the final <code>f32</code> argument</p> <pre data-language="rust">#![feature(abi_cmse_nonsecure_call)]

#[no_mangle]
pub fn test(
    f: extern "cmse-nonsecure-call" fn(u32, u64, f32) -&gt; u32,
) -&gt; u32 {
    f(1, 2, 3.0)
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0798.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0798.html</a>
  </p>
</div>
