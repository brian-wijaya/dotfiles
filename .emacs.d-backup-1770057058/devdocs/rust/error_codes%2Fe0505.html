<h1 id="error-code-e0505">Error code E0505</h1> <p>A value was moved out while it was still borrowed.</p> <p>Erroneous code example:</p> <pre data-language="rust">struct Value {}

fn borrow(val: &amp;Value) {}

fn eat(val: Value) {}

fn main() {
    let x = Value{};
    let _ref_to_val: &amp;Value = &amp;x;
    eat(x);
    borrow(_ref_to_val);
}</pre> <p>Here, the function <code>eat</code> takes ownership of <code>x</code>. However, <code>x</code> cannot be moved because the borrow to <code>_ref_to_val</code> needs to last till the function <code>borrow</code>. To fix that you can do a few different things:</p> <ul> <li>Try to avoid moving the variable.</li> <li>Release borrow before move.</li> <li>Implement the <code>Copy</code> trait on the type.</li> </ul> <p>Examples:</p> <pre data-language="rust">struct Value {}

fn borrow(val: &amp;Value) {}

fn eat(val: &amp;Value) {}

fn main() {
    let x = Value{};

    let ref_to_val: &amp;Value = &amp;x;
    eat(&amp;x); // pass by reference, if it's possible
    borrow(ref_to_val);
}</pre> <p>Or:</p> <pre data-language="rust">struct Value {}

fn borrow(val: &amp;Value) {}

fn eat(val: Value) {}

fn main() {
    let x = Value{};

    let ref_to_val: &amp;Value = &amp;x;
    borrow(ref_to_val);
    // ref_to_val is no longer used.
    eat(x);
}</pre> <p>Or:</p> <pre data-language="rust">#[derive(Clone, Copy)] // implement Copy trait
struct Value {}

fn borrow(val: &amp;Value) {}

fn eat(val: Value) {}

fn main() {
    let x = Value{};
    let ref_to_val: &amp;Value = &amp;x;
    eat(x); // it will be copied here.
    borrow(ref_to_val);
}</pre> <p>For more information on Rust's ownership system, take a look at the <a href="../book/ch04-02-references-and-borrowing">References &amp; Borrowing</a> section of the Book.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/error_codes/E0505.html" class="_attribution-link">https://doc.rust-lang.org/error_codes/E0505.html</a>
  </p>
</div>
