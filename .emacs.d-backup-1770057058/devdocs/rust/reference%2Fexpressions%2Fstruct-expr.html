 <h1 id="struct-expressions">Struct expressions</h1>  <div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-StructExpression"><a href="struct-expr#railroad-StructExpression">StructExpression</a></span> → <br>
    <span class="grammar-text"><a href="../paths#grammar-PathInExpression">PathInExpression</a></span> <code class="grammar-literal">{</code> ( <span class="grammar-text"><a href="struct-expr#grammar-StructExprFields">StructExprFields</a></span> | <span class="grammar-text"><a href="struct-expr#grammar-StructBase">StructBase</a></span> )<sup>?</sup> <code class="grammar-literal">}</code></p>
<p><span class="grammar-text grammar-production" id="grammar-StructExprFields"><a href="struct-expr#railroad-StructExprFields">StructExprFields</a></span> → <br>
    <span class="grammar-text"><a href="struct-expr#grammar-StructExprField">StructExprField</a></span> ( <code class="grammar-literal">,</code> <span class="grammar-text"><a href="struct-expr#grammar-StructExprField">StructExprField</a></span> )<sup>*</sup> ( <code class="grammar-literal">,</code> <span class="grammar-text"><a href="struct-expr#grammar-StructBase">StructBase</a></span> | <code class="grammar-literal">,</code><sup>?</sup> )</p>
<p><span class="grammar-text grammar-production" id="grammar-StructExprField"><a href="struct-expr#railroad-StructExprField">StructExprField</a></span> → <br>
    <span class="grammar-text"><a href="../attributes#grammar-OuterAttribute">OuterAttribute</a></span><sup>*</sup> <br>
    ( <br>
        <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> <br>
      | ( <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> | <span class="grammar-text"><a href="../tokens#grammar-TUPLE_INDEX">TUPLE_INDEX</a></span> ) <code class="grammar-literal">:</code> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span> <br>
    )</p>
<p><span class="grammar-text grammar-production" id="grammar-StructBase"><a href="struct-expr#railroad-StructBase">StructBase</a></span> → <code class="grammar-literal">..</code> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span></p>

<details class="grammar-railroad grammar-hidden"><summary>Syntax diagram</summary> <div style="width: 548px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExpression">
<svg class="railroad" viewbox="0 0 548 120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <rect class="railroad_canvas" height="100%" width="100%"></rect> <g class="verticalgrid"> <a class="link" xlink:href="struct-expr#grammar-StructExpression"> <text class="comment" x="71" y="25"> StructExpression</text> </a> <g class="sequence"> <path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"></path> <g class="sequence"> <a class="link" xlink:href="../paths#railroad-PathInExpression"> <g class="nonterminal"> <rect height="22" width="148" x="35" y="55"></rect> <text x="109" y="71"> PathInExpression</text> </g> </a> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="193" y="55"></rect> <text x="207" y="71"> {</text> </g> <g class="optional"> <path d=" M 231 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 196 m -95 0 l -5 -5 m 0 10 l 5 -5 m 95 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="choice"> <path d=" M 255 66 h 24 m 148 0 h 24"></path> <a class="link" xlink:href="struct-expr#railroad-StructExprFields"> <g class="nonterminal"> <rect height="22" width="148" x="279" y="55"></rect> <text x="353" y="71"> StructExprFields</text> </g> </a> <path d=" M 255 66 a 12 12 0 0 1 12 12 v 9 m 172 0 v -9 a 12 12 0 0 1 12 -12"></path> <path d=" M 267 87 v 0 a 12 12 0 0 0 12 12 m 100 0 h 48 a 12 12 0 0 0 12 -12 v 0"></path> <a class="link" xlink:href="struct-expr#railroad-StructBase"> <g class="nonterminal"> <rect height="22" width="100" x="279" y="88"></rect> <text x="329" y="104"> StructBase</text> </g> </a> </g> </g> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="485" y="55"></rect> <text x="499" y="71"> }</text> </g> <path d=" M 183 66 h 10"></path> <path d=" M 221 66 h 10"></path> <path d=" M 475 66 h 10"></path> </g> <path d=" M 523 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"></path> <path d=" M 25 66 h 10"></path> <path d=" M 513 66 h 10"></path> </g> </g> </svg> </div> <div style="width: 666px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExprFields">
<svg class="railroad" viewbox="0 0 666 132" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <rect class="railroad_canvas" height="100%" width="100%"></rect> <g class="verticalgrid"> <a class="link" xlink:href="struct-expr#grammar-StructExprFields"> <text class="comment" x="71" y="25"> StructExprFields</text> </a> <g class="sequence"> <path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"></path> <g class="sequence"> <a class="link" xlink:href="struct-expr#railroad-StructExprField"> <g class="nonterminal"> <rect height="22" width="140" x="35" y="55"></rect> <text x="105" y="71"> StructExprField</text> </g> </a> <g class="optional"> <path d=" M 185 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 202 m -98 0 l -5 -5 m 0 10 l 5 -5 m 98 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="repeat"> <path d=" M 209 66 h 12 m 178 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -178 m 92 0 l 5 -5 m 0 10 l -5 -5 m -92 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12"></path>  <g class="sequence"> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="221" y="55"></rect> <text x="235" y="71"> ,</text> </g> <a class="link" xlink:href="struct-expr#railroad-StructExprField"> <g class="nonterminal"> <rect height="22" width="140" x="259" y="55"></rect> <text x="329" y="71"> StructExprField</text> </g> </a> <path d=" M 249 66 h 10"></path> </g> </g> </g> <g class="choice"> <path d=" M 445 66 h 24 m 138 0 h 24"></path> <g class="sequence"> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="469" y="55"></rect> <text x="483" y="71"> ,</text> </g> <a class="link" xlink:href="struct-expr#railroad-StructBase"> <g class="nonterminal"> <rect height="22" width="100" x="507" y="55"></rect> <text x="557" y="71"> StructBase</text> </g> </a> <path d=" M 497 66 h 10"></path> </g> <path d=" M 445 66 a 12 12 0 0 1 12 12 v 9 m 162 0 v -9 a 12 12 0 0 1 12 -12"></path> <path d=" M 457 87 v 12 a 12 12 0 0 0 12 12 m 76 0 h 62 m -28 0 l -5 -5 m 0 10 l 5 -5 m 28 0 a 12 12 0 0 0 12 -12 v -12"></path> <g class="optional"> <path d=" M 469 111 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 28 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="493" y="100"></rect> <text x="507" y="116"> ,</text> </g> </g> </g> <path d=" M 175 66 h 10"></path> <path d=" M 435 66 h 10"></path> </g> <path d=" M 641 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"></path> <path d=" M 25 66 h 10"></path> <path d=" M 631 66 h 10"></path> </g> </g> </svg> </div> <div style="width: 636px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExprField">
<svg class="railroad" viewbox="0 0 636 153" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <rect class="railroad_canvas" height="100%" width="100%"></rect> <g class="verticalgrid"> <a class="link" xlink:href="struct-expr#grammar-StructExprField"> <text class="comment" x="67" y="25"> StructExprField</text> </a> <g class="sequence"> <path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"></path> <g class="sequence"> <g class="optional"> <path d=" M 35 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 156 m -75 0 l -5 -5 m 0 10 l 5 -5 m 75 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"></path> <g class="repeat"> <path d=" M 59 66 h 12 m 132 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -132 m 69 0 l 5 -5 m 0 10 l -5 -5 m -69 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12"></path>  <a class="link" xlink:href="../attributes#railroad-OuterAttribute"> <g class="nonterminal"> <rect height="22" width="132" x="71" y="55"></rect> <text x="137" y="71"> OuterAttribute</text> </g> </a> </g> </g> <g class="choice"> <path d=" M 249 66 h 24 m 100 0 h 228 m -111 0 l -5 -5 m 0 10 l 5 -5 m 111 0"></path> <g class="sequence"> <a class="link" xlink:href="../identifiers#railroad-IDENTIFIER"> <g class="nonterminal"> <rect height="22" width="100" x="273" y="55"></rect> <text x="323" y="71"> IDENTIFIER</text> </g> </a> </g> <path d=" M 249 66 a 12 12 0 0 1 12 12 v 9 m 328 0 v -9 a 12 12 0 0 1 12 -12"></path> <path d=" M 261 87 v 0 a 12 12 0 0 0 12 12 m 304 0 h 0 a 12 12 0 0 0 12 -12 v 0"></path> <g class="sequence"> <g class="choice"> <path d=" M 273 99 h 24 m 100 0 h 32"></path> <a class="link" xlink:href="../identifiers#railroad-IDENTIFIER"> <g class="nonterminal"> <rect height="22" width="100" x="297" y="88"></rect> <text x="347" y="104"> IDENTIFIER</text> </g> </a> <path d=" M 273 99 a 12 12 0 0 1 12 12 v 9 m 132 0 v -9 a 12 12 0 0 1 12 -12"></path> <path d=" M 285 120 v 0 a 12 12 0 0 0 12 12 m 108 0 h 0 a 12 12 0 0 0 12 -12 v 0"></path> <a class="link" xlink:href="../tokens#railroad-TUPLE_INDEX"> <g class="nonterminal"> <rect height="22" width="108" x="297" y="121"></rect> <text x="351" y="137"> TUPLE_INDEX</text> </g> </a> </g> <g class="terminal"> <rect height="22" rx="10" ry="10" width="28" x="439" y="88"></rect> <text x="453" y="104"> :</text> </g> <a class="link" xlink:href="../expressions#railroad-Expression"> <g class="nonterminal"> <rect height="22" width="100" x="477" y="88"></rect> <text x="527" y="104"> Expression</text> </g> </a> <path d=" M 429 99 h 10"></path> <path d=" M 467 99 h 10"></path> </g> </g> <path d=" M 239 66 h 10"></path> </g> <path d=" M 611 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"></path> <path d=" M 25 66 h 10"></path> <path d=" M 601 66 h 10"></path> </g> </g> </svg> </div> <div style="width: 216px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructBase">
<svg class="railroad" viewbox="0 0 216 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <rect class="railroad_canvas" height="100%" width="100%"></rect> <g class="verticalgrid"> <a class="link" xlink:href="struct-expr#grammar-StructBase"> <text class="comment" x="50" y="25"> StructBase</text> </a> <g class="sequence"> <path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"></path> <g class="sequence"> <g class="terminal"> <rect height="22" rx="10" ry="10" width="36" x="35" y="42"></rect> <text x="53" y="58"> ..</text> </g> <a class="link" xlink:href="../expressions#railroad-Expression"> <g class="nonterminal"> <rect height="22" width="100" x="81" y="42"></rect> <text x="131" y="58"> Expression</text> </g> </a> <path d=" M 71 53 h 10"></path> </g> <path d=" M 191 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"></path> <path d=" M 25 53 h 10"></path> <path d=" M 181 53 h 10"></path> </g> </g> </svg> </div> </details>
</div>   <p>A <em>struct expression</em> creates a struct, enum, or union value. It consists of a path to a <a href="../items/structs">struct</a>, <a href="../items/enumerations">enum variant</a>, or <a href="../items/unions">union</a> item followed by the values for the fields of the item.</p> <p>The following are examples of struct expressions:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point { x: f64, y: f64 }
struct NothingInMe { }
mod game { pub struct User&lt;'a&gt; { pub name: &amp;'a str, pub age: u32, pub score: usize } }
enum Enum { Variant {} }
Point {x: 10.0, y: 20.0};
NothingInMe {};
let u = game::User {name: "Joe", age: 35, score: 100_000};
Enum::Variant {};
}</pre> <div class="alert alert-note"> <blockquote> <p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p> <p>Tuple structs and tuple enum variants are typically instantiated using a <a href="call-expr#r-expr.call">call expression</a> referring to the <a href="../items/structs#r-items.struct.tuple">constructor in the value namespace</a>. These are distinct from a struct expression using curly braces referring to the constructor in the type namespace.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Position(i32, i32, i32);
Position(0, 0, 0);  // Typical way of creating a tuple struct.
let c = Position;  // `c` is a function that takes 3 arguments.
let pos = c(8, 6, 7);  // Creates a `Position` value.

enum Version { Triple(i32, i32, i32) };
Version::Triple(0, 0, 0);
let f = Version::Triple;
let ver = f(8, 6, 7);
}</pre> <p>The last segment of the call path cannot refer to a type alias:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
trait Tr { type T; }
impl&lt;T&gt; Tr for T { type T = T; }

struct Tuple();
enum Enum { Tuple() }

// &lt;Unit as Tr&gt;::T(); // causes an error -- `::T` is a type, not a value
&lt;Enum as Tr&gt;::T::Tuple(); // OK
}</pre>  <p>Unit structs and unit enum variants are typically instantiated using a <a href="path-expr#r-expr.path">path expression</a> referring to the <a href="../items/structs#r-items.struct.unit">constant in the value namespace</a>.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Gamma;
// Gamma unit value, referring to the const in the value namespace.
let a = Gamma;
// Exact same value as `a`, but constructed using a struct expression
// referring to the type namespace.
let b = Gamma {};

enum ColorSpace { Oklch }
let c = ColorSpace::Oklch;
let d = ColorSpace::Oklch {};
}</pre> </blockquote> </div>  <h2 id="field-struct-expression">Field struct expression</h2>  <p>A struct expression with fields enclosed in curly braces allows you to specify the value for each individual field in any order. The field name is separated from its value with a colon.</p>  <p>A value of a <a href="../items/unions">union</a> type can only be created using this syntax, and it must specify exactly one field.</p>  <h2 id="functional-update-syntax">Functional update syntax</h2>  <p>A struct expression that constructs a value of a struct type can terminate with the syntax <code>..</code> followed by an expression to denote a functional update.</p>  <p>The expression following <code>..</code> (the base) must have the same struct type as the new struct type being formed.</p>  <p>The entire expression uses the given values for the fields that were specified and moves or copies the remaining fields from the base expression.</p>  <p>As with all struct expressions, all of the fields of the struct must be <a href="../visibility-and-privacy">visible</a>, even those not explicitly named.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point3d { x: i32, y: i32, z: i32 }
let mut base = Point3d {x: 1, y: 2, z: 3};
let y_ref = &amp;mut base.y;
Point3d {y: 0, z: 10, .. base}; // OK, only base.x is accessed
drop(y_ref);
}</pre>  <p>Struct expressions can’t be used directly in a <a href="loop-expr">loop</a> or <a href="if-expr#if-expressions">if</a> expression’s head, or in the <a href="../glossary#scrutinee">scrutinee</a> of an <a href="if-expr#if-let-patterns">if let</a> or <a href="match-expr">match</a> expression. However, struct expressions can be used in these situations if they are within another expression, for example inside <a href="grouped-expr">parentheses</a>.</p>  <p>The field names can be decimal integer values to specify indices for constructing tuple structs. This can be used with base structs to fill out the remaining indices not specified:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Color(u8, u8, u8);
let c1 = Color(0, 0, 0);  // Typical way of creating a tuple struct.
let c2 = Color{0: 255, 1: 127, 2: 0};  // Specifying fields by index.
let c3 = Color{1: 0, ..c2};  // Fill out all other fields using a base struct.
}</pre>  <h3 id="struct-field-init-shorthand">Struct field init shorthand</h3> <p>When initializing a data structure (struct, enum, union) with named (but not numbered) fields, it is allowed to write <code>fieldname</code> as a shorthand for <code>fieldname: fieldname</code>. This allows a compact syntax with less duplication. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point3d { x: i32, y: i32, z: i32 }
let x = 0;
let y_value = 0;
let z = 0;
Point3d { x: x, y: y_value, z: z };
Point3d { x, y: y_value, z };
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/expressions/struct-expr.html" class="_attribution-link">https://doc.rust-lang.org/reference/expressions/struct-expr.html</a>
  </p>
</div>
