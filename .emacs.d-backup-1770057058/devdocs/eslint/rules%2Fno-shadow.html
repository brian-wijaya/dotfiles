<h1>no-shadow</h1> 
<p>Disallow variable declarations from shadowing variables declared in the outer scope</p>   <p>Shadowing is the process by which a local variable shares the same name as a variable in its containing scope. For example:</p> <div class="code-wrapper"> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <button class="copy-btn" aria-labelledby="copy-button-label"> <span hidden id="copy-button-label">Copy code to clipboard</span>  </button> </div> <p>In this case, the variable <code>a</code> inside of <code>b()</code> is shadowing the variable <code>a</code> in the global scope. This can cause confusion while reading the code and itâ€™s impossible to access the global variable.</p> <h2 id="rule-details" tabindex="-1">Rule Details</h2> <p>This rule aims to eliminate shadowed variable declarations.</p> <p>Examples of <strong>incorrect</strong> code for this rule:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBcImVycm9yXCIqL1xuXG5jb25zdCBhID0gMztcbmZ1bmN0aW9uIGIoKSB7XG4gICAgY29uc3QgYSA9IDEwO1xufVxuXG5jb25zdCBjID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGEgPSAxMDtcbn1cblxuZnVuY3Rpb24gZChhKSB7XG4gICAgYSA9IDEwO1xufVxuZChhKTtcblxuaWYgKHRydWUpIHtcbiAgICBjb25zdCBhID0gNTtcbn0ifQ==" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: "error"*/</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'a' is already declared in the upper scope on line 3 column 7.">a</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">c</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'a' is already declared in the upper scope on line 3 column 7.">a</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token eslint-marked eslint-message-id-1" title="'a' is already declared in the upper scope on line 3 column 7."><span class="token parameter">a</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">d</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'a' is already declared in the upper scope on line 3 column 7.">a</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h2 id="options" tabindex="-1">Options</h2> <p>This rule takes one option, an object, with properties <code>"builtinGlobals"</code>, <code>"hoist"</code>, <code>"allow"</code> and <code>"ignoreOnInitialization"</code>.</p> <div class="code-wrapper"> <pre class="language-json line-numbers-mode"><code><span class="token punctuation">{</span>
    <span class="token property">"no-shadow"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">"builtinGlobals"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token property">"hoist"</span><span class="token operator">:</span> <span class="token string">"functions"</span><span class="token punctuation">,</span> <span class="token property">"allow"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">"ignoreOnInitialization"</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <button class="copy-btn" aria-labelledby="copy-button-label"> <span hidden id="copy-button-label">Copy code to clipboard</span>  </button> </div> <h3 id="builtinglobals" tabindex="-1">builtinGlobals</h3> <p>The <code>builtinGlobals</code> option is <code>false</code> by default. If it is <code>true</code>, the rule prevents shadowing of built-in global variables: <code>Object</code>, <code>Array</code>, <code>Number</code>, and so on.</p> <p>Examples of <strong>incorrect</strong> code for the <code>{ "builtinGlobals": true }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiYnVpbHRpbkdsb2JhbHNcIjogdHJ1ZSB9XSovXG5cbmZ1bmN0aW9uIGZvbygpIHtcbiAgICBjb25zdCBPYmplY3QgPSAwO1xufSJ9" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "builtinGlobals": true }]*/</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'Object' is already a global variable.">Object</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h3 id="hoist" tabindex="-1">hoist</h3> <p>The <code>hoist</code> option has three settings:</p> <ul> <li>
<code>functions</code> (by default) - reports shadowing before the outer functions are defined.</li> <li>
<code>all</code> - reports all shadowing before the outer variables/functions are defined.</li> <li>
<code>never</code> - never report shadowing before the outer variables/functions are defined.</li> </ul> <h4 id="hoist-functions" tabindex="-1">hoist: functions</h4> <p>Examples of <strong>incorrect</strong> code for the default <code>{ "hoist": "functions" }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaG9pc3RcIjogXCJmdW5jdGlvbnNcIiB9XSovXG5cbmlmICh0cnVlKSB7XG4gICAgY29uc3QgYiA9IDY7XG59XG5cbmZ1bmN0aW9uIGIoKSB7fSJ9" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "hoist": "functions" }]*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'b' is already declared in the upper scope on line 7 column 10.">b</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</div>
<p>Although <code>const b</code> in the <code>if</code> statement is before the <em>function</em> declaration in the outer scope, it is incorrect.</p> <p>Examples of <strong>correct</strong> code for the default <code>{ "hoist": "functions" }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaG9pc3RcIjogXCJmdW5jdGlvbnNcIiB9XSovXG5cbmlmICh0cnVlKSB7XG4gICAgY29uc3QgYSA9IDM7XG59XG5cbmNvbnN0IGEgPSA1OyJ9" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "hoist": "functions" }]*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre>
</div>
<p>Because <code>const a</code> in the <code>if</code> statement is before the <em>variable</em> declaration in the outer scope, it is correct.</p> <h4 id="hoist-all" tabindex="-1">hoist: all</h4> <p>Examples of <strong>incorrect</strong> code for the <code>{ "hoist": "all" }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaG9pc3RcIjogXCJhbGxcIiB9XSovXG5cbmlmICh0cnVlKSB7XG4gICAgY29uc3QgYSA9IDM7XG4gICAgY29uc3QgYiA9IDY7XG59XG5cbmNvbnN0IGEgPSA1O1xuZnVuY3Rpb24gYigpIHt9In0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "hoist": "all" }]*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-1" title="'a' is already declared in the upper scope on line 8 column 7.">a</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token eslint-marked eslint-message-id-2" title="'b' is already declared in the upper scope on line 9 column 10.">b</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</div>
<h4 id="hoist-never" tabindex="-1">hoist: never</h4> <p>Examples of <strong>correct</strong> code for the <code>{ "hoist": "never" }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaG9pc3RcIjogXCJuZXZlclwiIH1dKi9cblxuaWYgKHRydWUpIHtcbiAgICBjb25zdCBhID0gMztcbiAgICBjb25zdCBiID0gNjtcbn1cblxuY29uc3QgYSA9IDU7XG5mdW5jdGlvbiBiKCkge30ifQ==" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "hoist": "never" }]*/</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
</div>
<p>Because <code>const a</code> and <code>const b</code> in the <code>if</code> statement are before the declarations in the outer scope, they are correct.</p> <h3 id="allow" tabindex="-1">allow</h3> <p>The <code>allow</code> option is an array of identifier names for which shadowing is allowed. For example, <code>"resolve"</code>, <code>"reject"</code>, <code>"done"</code>, <code>"cb"</code>.</p> <p>Examples of <strong>correct</strong> code for the <code>{ "allow": ["done"] }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiYWxsb3dcIjogW1wiZG9uZVwiXSB9XSovXG5cbmltcG9ydCBhc3luYyBmcm9tICdhc3luYyc7XG5cbmZ1bmN0aW9uIGZvbyhkb25lKSB7XG4gIGFzeW5jLm1hcChbMSwgMl0sIGZ1bmN0aW9uIChlLCBkb25lKSB7XG4gICAgZG9uZShudWxsLCBlICogMilcbiAgfSwgZG9uZSk7XG59XG5cbmZvbyhmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgY29uc29sZS5sb2coeyBlcnIsIHJlc3VsdCB9KTtcbn0pOyJ9" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "allow": ["done"] }]*/</span>

<span class="token keyword">import</span> <span class="token keyword">async</span> <span class="token keyword">from</span> <span class="token string">'async'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  async<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> e <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> done<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> err<span class="token punctuation">,</span> result <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<h3 id="ignoreoninitialization" tabindex="-1">ignoreOnInitialization</h3> <p>The <code>ignoreOnInitialization</code> option is <code>false</code> by default. If it is <code>true</code>, it prevents reporting shadowing of variables in their initializers when the shadowed variable is presumably still uninitialized.</p> <p>The shadowed variable must be on the left side. The shadowing variable must be on the right side and declared in a callback function or in an IIFE.</p> <p>Examples of <strong>incorrect</strong> code for the <code>{ "ignoreOnInitialization": "true" }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaWdub3JlT25Jbml0aWFsaXphdGlvblwiOiB0cnVlIH1dKi9cblxuY29uc3QgeCA9IHggPT4geDsifQ==" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "ignoreOnInitialization": true }]*/</span>

<span class="token keyword">const</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="'x' is already declared in the upper scope on line 3 column 7."><span class="token parameter">x</span></span> <span class="token operator">=&gt;</span> x<span class="token punctuation">;</span>
</code></pre>
</div>
<p>Because the shadowing variable <code>x</code> will shadow the already initialized shadowed variable <code>x</code>.</p> <p>Examples of <strong>correct</strong> code for the <code>{ "ignoreOnInitialization": true }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJ0ZXh0IjoiLyplc2xpbnQgbm8tc2hhZG93OiBbXCJlcnJvclwiLCB7IFwiaWdub3JlT25Jbml0aWFsaXphdGlvblwiOiB0cnVlIH1dKi9cblxuY29uc3QgeCA9IGZvbyh4ID0+IHgpXG5cbmNvbnN0IHkgPSAoeSA9PiB5KSgpIn0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-shadow: ["error", { "ignoreOnInitialization": true }]*/</span>

<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span>

<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">y</span> <span class="token operator">=&gt;</span> y<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div>
<p>The rationale for callback functions is the assumption that they will be called during the initialization, so that at the time when the shadowing variable will be used, the shadowed variable has not yet been initialized.</p> <h2 id="related-rules">Related Rules</h2> <ul class="related-rules__list" role="list"> <li class="related-rules__list__item"> <a href="no-shadow-restricted-names"> <span>no-shadow-restricted-names</span>  </a> </li> </ul> <h2 id="version">Version</h2> <p>This rule was introduced in ESLint v0.0.9.</p> <h2 id="further-reading">Further Reading</h2> <article class="resource">  <div class="resource__content"> <a href="https://en.wikipedia.org/wiki/Variable_shadowing" class="resource__title"> Variable shadowing - Wikipedia </a><br>  </div>  </article> <h2 id="resources">Resources</h2> <ul> <li><a href="https://github.com/eslint/eslint/blob/main/lib/rules/no-shadow.js">Rule source</a></li> <li><a href="https://github.com/eslint/eslint/blob/main/tests/lib/rules/no-shadow.js">Tests source</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; OpenJS Foundation and other contributors<br>Licensed under the MIT License.<br>
    <a href="https://eslint.org/docs/latest/rules/no-shadow" class="_attribution-link">https://eslint.org/docs/latest/rules/no-shadow</a>
  </p>
</div>
