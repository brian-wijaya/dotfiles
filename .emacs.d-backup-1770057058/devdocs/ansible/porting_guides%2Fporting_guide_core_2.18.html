<section id="ansible-core-2-18-porting-guide"> <h1 id="porting-2-18-guide-core">Ansible-core 2.18 Porting Guide</h1> <p>This section discusses the behavioral changes between <code>ansible-core</code> 2.17 and <code>ansible-core</code> 2.18.</p> <p>It is intended to assist in updating your playbooks, plugins and other parts of your Ansible infrastructure so they will work with this version of Ansible.</p> <p>We suggest you read this page along with <a class="reference external" href="https://github.com/ansible/ansible/blob/stable-2.18/changelogs/CHANGELOG-v2.18.rst">ansible-core Changelog for 2.18</a> to understand what updates you may need to make.</p> <p>This document is part of a collection on porting. The complete list of porting guides can be found at <a class="reference internal" href="porting_guides#porting-guides"><span class="std std-ref">porting guides</span></a>.</p>   <ul> <li><a class="reference internal" href="#playbook" id="id2">Playbook</a></li> <li><a class="reference internal" href="#command-line" id="id3">Command Line</a></li> <li><a class="reference internal" href="#deprecated" id="id4">Deprecated</a></li> <li>
<p><a class="reference internal" href="#modules" id="id5">Modules</a></p> <ul> <li><a class="reference internal" href="#modules-removed" id="id6">Modules removed</a></li> <li><a class="reference internal" href="#deprecation-notices" id="id7">Deprecation notices</a></li> <li><a class="reference internal" href="#noteworthy-module-changes" id="id8">Noteworthy module changes</a></li> </ul> </li> <li><a class="reference internal" href="#plugins" id="id9">Plugins</a></li> <li><a class="reference internal" href="#porting-custom-scripts" id="id10">Porting custom scripts</a></li> <li><a class="reference internal" href="#networking" id="id11">Networking</a></li> </ul>
  <section id="playbook"> <h2>Playbook</h2> <p>No notable changes</p> </section> <section id="command-line"> <h2>Command Line</h2> <ul class="simple"> <li>Python 3.10 is a no longer supported control node version. Python 3.11+ is now required for running Ansible.</li> <li>Python 3.7 is a no longer supported remote version. Python 3.8+ is now required for target execution.</li> </ul> </section> <section id="deprecated"> <h2>Deprecated</h2> <p>No notable changes</p> </section> <section id="modules"> <h2>Modules</h2> <p>No notable changes</p> <section id="modules-removed"> <h3>Modules removed</h3> <p>The following modules no longer exist:</p> <ul class="simple"> <li>No notable changes</li> </ul> </section> <section id="deprecation-notices"> <h3>Deprecation notices</h3> <p>No notable changes</p> </section> <section id="noteworthy-module-changes"> <h3>Noteworthy module changes</h3> <p>No notable changes</p> </section> </section> <section id="plugins"> <h2>Plugins</h2> <ul> <li>
<p>The <code>ssh</code> connection plugin now officially supports targeting Windows hosts. A breaking change that has been made as part of this official support is the low level command execution done by plugins like <code>ansible.builtin.raw</code> and action plugins calling <code>_low_level_execute_command</code> is no longer wrapped with a <code>powershell.exe</code> wrapped invocation. These commands will now be executed directly on the target host using the default shell configuration set on the Windows host. This change is done to simplify the configuration required on the Ansible side, make module execution more efficient, and to remove the need to decode stderr CLIXML output. A consequence of this change is that <code>ansible.builtin.raw</code> commands are no longer guaranteed to be run through a PowerShell shell and with the output encoding of UTF-8. To run a command through PowerShell and with UTF-8 output support, use the <code>ansible.windows.win_shell</code> or <code>ansible.windows.win_powershell</code> module instead.</p> <pre data-language="yaml">- name: Run with win_shell
  ansible.windows.win_shell: Write-Host "Hello, Café"

- name: Run with win_powershell
  ansible.windows.win_powershell:
    script: Write-Host "Hello, Café"
</pre> </li> </ul> </section> <section id="porting-custom-scripts"> <h2>Porting custom scripts</h2> <p>No notable changes</p> </section> <section id="networking"> <h2>Networking</h2> <p>No notable changes</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2025 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/porting_guides/porting_guide_core_2.18.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/porting_guides/porting_guide_core_2.18.html</a>
  </p>
</div>
