<section id="community-proxmox-proxmox-module-management-of-instances-in-proxmox-ve-cluster"> <h1>community.proxmox.proxmox module – Management of instances in Proxmox VE cluster</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/proxmox/">community.proxmox collection</a> (version 1.3.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.proxmox</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.proxmox.proxmox</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Allows you to create/delete/stop instances in Proxmox VE cluster.</li> <li>The module automatically detects containerization type (lxc for PVE 4, openvz for older).</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-proxmox-proxmox-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>proxmoxer &gt;= 2.0</li> <li>requests</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-host"><strong>api_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the target host of the Proxmox VE cluster.</p> <p>Uses the <code>PROXMOX_HOST</code> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-password"><strong>api_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the password to authenticate with.</p> <p>Uses the <a class="reference internal" href="../../environment_variables#envvar-PROXMOX_PASSWORD"><code>PROXMOX_PASSWORD</code></a> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-port"><strong>api_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the target port of the Proxmox VE cluster.</p> <p>Uses the <code>PROXMOX_PORT</code> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-token-id"><strong>api_token_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token ID.</p> <p>Uses the <a class="reference internal" href="../../environment_variables#envvar-PROXMOX_TOKEN_ID"><code>PROXMOX_TOKEN_ID</code></a> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-token-secret"><strong>api_token_secret</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token secret.</p> <p>Uses the <a class="reference internal" href="../../environment_variables#envvar-PROXMOX_TOKEN_SECRET"><code>PROXMOX_TOKEN_SECRET</code></a> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-api-user"><strong>api_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the user to authenticate with.</p> <p>Uses the <a class="reference internal" href="../../environment_variables#envvar-PROXMOX_USER"><code>PROXMOX_USER</code></a> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-clone"><strong>clone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of the container to be cloned.</p> <p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-description"><span class="std std-ref">description</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-hostname"><span class="std std-ref">hostname</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-pool"><span class="std std-ref">pool</span></a></strong></code> will be copied from the cloned container if not specified.</p> <p>The type of clone created is defined by the <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-clone-type"><span class="std std-ref">clone_type</span></a></strong></code> parameter.</p> <p>This operator is only supported for Proxmox clusters that use LXC containerization (PVE version &gt;= 4).</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-clone-type"><strong>clone_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Type of the clone created.</p> <p><code>full</code> creates a full clone, and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-storage"><span class="std std-ref">storage</span></a></strong></code> must be specified.</p> <p><code>linked</code> creates a linked clone, and the cloned container must be a template container.</p> <p><code>opportunistic</code> creates a linked clone if the cloned container is a template container, and a full clone if not. <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-storage"><span class="std std-ref">storage</span></a></strong></code> may be specified, if not it will fall back to the default.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"full"</code></li> <li><code>"linked"</code></li> <li>
<code><strong>"opportunistic"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-cores"><strong>cores</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify number of cores per socket.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-cpus"><strong>cpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of allocated cpus for instance.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-cpuunits"><strong>cpuunits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>CPU weight for a VM.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the description for the container. Only used on the configuration web interface.</p> <p>This is saved as a comment inside the configuration file.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk"><strong>disk</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option was previously described as “hard disk size in GB for instance” however several formats describing a lxc mount are permitted.</p> <p>Older versions of Proxmox will accept a numeric value for size using the <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-storage"><span class="std std-ref">storage</span></a></strong></code> parameter to automatically choose which storage to allocate from, however new versions enforce the <code>&lt;STORAGE&gt;:&lt;SIZE&gt;</code> syntax.</p> <p>Additional options are available by using some combination of the following key-value pairs as a comma-delimited list <code>[volume=]&lt;volume&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;]</code>.</p> <p>See <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container">https://pve.proxmox.com/wiki/Linux_Container</a> for a full description.</p> <p>This option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume"><span class="std std-ref">disk_volume</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume"><strong>disk_volume</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a hash/dictionary of the <code>rootfs</code> disk.</p> <p>See <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container#pct_mount_points">https://pve.proxmox.com/wiki/Linux_Container#pct_mount_points</a> for a full description.</p> <p>This option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-storage"><span class="std std-ref">storage</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk"><span class="std std-ref">disk</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-host-path"><strong>host_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-host-path"><span class="std std-ref">disk_volume.host_path</span></a></strong></code> defines a bind or device path on the PVE host to use for the <code>rootfs</code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-storage"><span class="std std-ref">disk_volume.storage</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-volume"><span class="std std-ref">disk_volume.volume</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-size"><span class="std std-ref">disk_volume.size</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-options"><strong>options</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-options"><span class="std std-ref">disk_volume.options</span></a></strong></code> is a dict of extra options.</p> <p>The value of any given option must be a string, for example <code>"1"</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-size"><strong>size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-size"><span class="std std-ref">disk_volume.size</span></a></strong></code> is the size of the storage to use.</p> <p>The size is given in GiB.</p> <p>Required only if <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-storage"><span class="std std-ref">disk_volume.storage</span></a></strong></code> is defined, and mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-host-path"><span class="std std-ref">disk_volume.host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-storage"><span class="std std-ref">disk_volume.storage</span></a></strong></code> is the storage identifier of the storage to use for the <code>rootfs</code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-host-path"><span class="std std-ref">disk_volume.host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-volume"><strong>volume</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-volume"><span class="std std-ref">disk_volume.volume</span></a></strong></code> is the name of an existing volume.</p> <p>If not defined, the module will check if one exists. If not, a new volume will be created.</p> <p>If defined, the volume must exist under that name.</p> <p>Required only if <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-storage"><span class="std std-ref">disk_volume.storage</span></a></strong></code> is defined, and mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume-host-path"><span class="std std-ref">disk_volume.host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-features"><strong>features</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies a list of features to be enabled. For valid options, see <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container#pct_options">https://pve.proxmox.com/wiki/Linux_Container#pct_options</a>.</p> <p>Some features require the use of a privileged container.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Forcing operations.</p> <p>Can be used only with states <code>absent</code>, <code>present</code>, <code>stopped</code>, and <code>restarted</code>.</p> <p>With <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=present</span></a></code> force option allow to overwrite existing container.</p> <p>With <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=absent</span></a></code> force option will force stop the container before deletion.</p> <p>With states <code>stopped</code>, <code>restarted</code> allow to force stop instance.</p> <p>When specifying <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-force"><span class="std std-ref">force</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-update"><span class="std std-ref">update</span></a></strong></code> must not be specified.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-hookscript"><strong>hookscript</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Script that will be executed during various steps in the containers lifetime.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The instance hostname.</p> <p>Required only for <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p>Must be unique if vmid is not passed.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-ip-address"><strong>ip_address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the address the container will be assigned.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-memory"><strong>memory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Memory size in MB for instance.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes"><strong>mount_volumes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify additional mounts (separate disks) for the container. As a hash/dictionary defining mount points.</p> <p>See <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container#pct_mount_points">https://pve.proxmox.com/wiki/Linux_Container#pct_mount_points</a> for a full description.</p> <p>This Option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mounts"><span class="std std-ref">mounts</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-host-path"><strong>host_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-host-path"><span class="std std-ref">mount_volumes[].host_path</span></a></strong></code> defines a bind or device path on the PVE host to use for the <code>rootfs</code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-storage"><span class="std std-ref">mount_volumes[].storage</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-volume"><span class="std std-ref">mount_volumes[].volume</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-size"><span class="std std-ref">mount_volumes[].size</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-id"><span class="std std-ref">mount_volumes[].id</span></a></strong></code> is the identifier of the mount point written as <code>mp[n]</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-mountpoint"><strong>mountpoint</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-mountpoint"><span class="std std-ref">mount_volumes[].mountpoint</span></a></strong></code> is the mount point of the volume.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-options"><strong>options</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-options"><span class="std std-ref">mount_volumes[].options</span></a></strong></code> is a dict of extra options.</p> <p>The value of any given option must be a string, for example <code>"1"</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-size"><strong>size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-size"><span class="std std-ref">mount_volumes[].size</span></a></strong></code> is the size of the storage to use.</p> <p>The size is given in GiB.</p> <p>Required only if <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-storage"><span class="std std-ref">mount_volumes[].storage</span></a></strong></code> is defined and mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-host-path"><span class="std std-ref">mount_volumes[].host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-storage"><span class="std std-ref">mount_volumes[].storage</span></a></strong></code> is the storage identifier of the storage to use.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-host-path"><span class="std std-ref">mount_volumes[].host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-volume"><strong>volume</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-volume"><span class="std std-ref">mount_volumes[].volume</span></a></strong></code> is the name of an existing volume.</p> <p>If not defined, the module will check if one exists. If not, a new volume will be created.</p> <p>If defined, the volume must exist under that name.</p> <p>Required only if <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-storage"><span class="std std-ref">mount_volumes[].storage</span></a></strong></code> is defined and mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes-host-path"><span class="std std-ref">mount_volumes[].host_path</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-mounts"><strong>mounts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies additional mounts (separate disks) for the container. As a hash/dictionary defining mount points as strings.</p> <p>This Option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes"><span class="std std-ref">mount_volumes</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-nameserver"><strong>nameserver</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets DNS server IP address for a container.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-netif"><strong>netif</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies network interfaces for the container. As a hash/dictionary defining interfaces.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-node"><strong>node</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Proxmox VE node on which to operate.</p> <p>Only required for <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p>For every other states it will be autodiscovered.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-onboot"><strong>onboot</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies whether a VM will be started during system bootup.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-ostemplate"><strong>ostemplate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The template for VM creating.</p> <p>Required only for <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-ostype"><strong>ostype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the <code>ostype</code> of the LXC container.</p> <p>If set to <code>auto</code>, no <code>ostype</code> will be provided on instance creation.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"auto"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"debian"</code></li> <li><code>"devuan"</code></li> <li><code>"ubuntu"</code></li> <li><code>"centos"</code></li> <li><code>"fedora"</code></li> <li><code>"opensuse"</code></li> <li><code>"archlinux"</code></li> <li><code>"alpine"</code></li> <li><code>"gentoo"</code></li> <li><code>"nixos"</code></li> <li><code>"unmanaged"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The instance root password.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-pool"><strong>pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add the new VM to the specified pool.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-pubkey"><strong>pubkey</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Public key to add to /root/.ssh/authorized_keys. This was added on Proxmox 4.2, it is ignored for earlier versions.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-purge"><strong>purge</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Remove container from all related configurations.</p> <p>For example backup jobs, replication jobs, or HA.</p> <p>Related ACLs and Firewall entries will always be removed.</p> <p>Used with <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-searchdomain"><strong>searchdomain</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets DNS search domain for a container.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-startup"><strong>startup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the startup order of the container.</p> <p>Use <code>order=#</code> where <code>#</code> is a non-negative number to define the general startup order. Shutdown in done with reverse ordering.</p> <p>Use <code>up=#</code> where <code>#</code> is in seconds, to specify a delay to wait before the next VM is started.</p> <p>Use <code>down=#</code> where <code>#</code> is in seconds, to specify a delay to wait before the next VM is stopped.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicate desired state of the instance.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"started"</code></li> <li><code>"absent"</code></li> <li><code>"stopped"</code></li> <li><code>"restarted"</code></li> <li><code>"template"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Target storage.</p> <p>This option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-disk-volume"><span class="std std-ref">disk_volume</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-mount-volumes"><span class="std std-ref">mount_volumes</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"local"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-swap"><strong>swap</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Swap memory size in MB for instance.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-tags"><strong>tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of tags to apply to the container.</p> <p>Tags must start with <code>[a-z0-9_]</code> followed by zero or more of the following characters <code>[a-z0-9_-+.]</code>.</p> <p>Tags are only available in Proxmox 7+.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout for operations.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>30</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-timezone"><strong>timezone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Timezone used by the container, accepts values like <code>Europe/Paris</code>.</p> <p>The special value <code>host</code> configures the same timezone used by Proxmox host.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-unprivileged"><strong>unprivileged</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicate if the container should be unprivileged.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-update"><strong>update</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>true</code>, the container will be updated with new values. This only happens if <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-state"><span class="std std-ref">state=present</span></a></code>, <code><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-force"><span class="std std-ref">force=false</span></a></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-proxmox-proxmox-module-parameter-clone"><span class="std std-ref">clone</span></a></strong></code> is not specified.</p> <p>If <code>false</code>, it will not be updated.</p> <p>The default changed from <code>false</code> to <code>true</code> in community.proxmox 1.0.0.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, SSL certificates will not be validated.</p> <p>This should only be used on personally controlled sites using self-signed certificates.</p> <p>Uses the <code>PROXMOX_VALIDATE_CERTS</code> environment variable if not specified.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-parameter-vmid"><strong>vmid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the instance ID.</p> <p>If not set the next available ID will be fetched from ProxmoxAPI.</p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-attribute-action-group"><strong>action_group</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Action group:</strong> <strong class="ansible-attribute-support-full">community.proxmox.proxmox</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Use <code>group/community.proxmox.proxmox</code> in <code>module_defaults</code> to set defaults for this module.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-proxmox-proxmox-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="proxmox_vm_info_module#ansible-collections-community-proxmox-proxmox-vm-info-module"><span class="std std-ref">community.proxmox.proxmox_vm_info</span></a></dt>
<dd>
<p>Retrieve information about one or more Proxmox VE virtual machines.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create new container with minimal options
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with minimal options specifying disk storage location and size
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    disk: 'local-lvm:20'

- name: Create new container with minimal options specifying disk storage location and size via disk_volume
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    disk_volume:
      storage: local
      size: 20

- name: Create new container with hookscript and description
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    hookscript: 'local:snippets/vm_hook.sh'
    description: created with ansible

- name: Create new container automatically selecting the next available vmid.
  community.proxmox.proxmox:
    node: 'uk-mc02'
    api_user: 'root@pam'
    api_password: '1q2w3e'
    api_host: 'node1'
    password: '123456'
    hostname: 'example.org'
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with minimal options with force(it will rewrite existing container)
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    force: true

- name: Create new container with minimal options use environment PROXMOX_PASSWORD variable(you should export it before)
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with minimal options defining network interface with dhcp
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    netif:
      net0: "name=eth0,ip=dhcp,ip6=dhcp,bridge=vmbr0"

- name: Create new container with minimal options defining network interface with static ip
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    netif:
      net0: "name=eth0,gw=192.168.0.1,ip=192.168.0.2/24,bridge=vmbr0"

- name: Create new container with more options defining network interface with static ip4 and ip6 with vlan-tag and mtu
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    netif:
      net0: "name=eth0,gw=192.168.0.1,ip=192.168.0.2/24,ip6=fe80::1227/64,gw6=fe80::1,bridge=vmbr0,firewall=1,tag=934,mtu=1500"

- name: Create new container with minimal options defining a mount with 8GB
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    mounts:
      mp0: "local:8,mp=/mnt/test/"

- name: Create new container with minimal options defining a mount with 8GB using mount_volumes
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    mount_volumes:
      - id: mp0
        storage: local
        size: 8
        mountpoint: /mnt/test

- name: Create new container with minimal options defining a cpu core limit
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    cores: 2

- name: Create new container with minimal options and same timezone as proxmox host
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    timezone: host

- name: Create a new container with nesting enabled and allows the use of CIFS/NFS inside the container.
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    features:
      - nesting=1
      - mount=cifs,nfs

- name: &gt;
    Create a linked clone of the template container with id 100. The newly created container with be a
    linked clone, because no storage parameter is defined
  community.proxmox.proxmox:
    vmid: 201
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    clone: 100
    hostname: clone.example.org

- name: Create a full clone of the container with id 100
  community.proxmox.proxmox:
    vmid: 201
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    clone: 100
    hostname: clone.example.org
    storage: local

- name: Update container configuration
  community.proxmox.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    netif:
      net0: "name=eth0,gw=192.168.0.1,ip=192.168.0.3/24,bridge=vmbr0"
    update: true

- name: Start container
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: started

- name: &gt;
    Start container with mount. You should enter a 90-second timeout because servers
    with additional disks take longer to boot
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: started
    timeout: 90

- name: Stop container
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: stopped

- name: Stop container with force
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    force: true
    state: stopped

- name: Restart container(stopped or mounted container you can't restart)
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: restarted

- name: Convert container to template
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: template

- name: Convert container to template (stop container if running)
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: template
    force: true

- name: Remove container
  community.proxmox.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: absent

- name: &gt;-
    Create a new container automatically selecting the next available vmid
    using a non-root API token
  community.proxmox.proxmox:
    node: 'uk-mc02'
    api_token_id: 'svc-tkn'
    api_token_secret: '81c09a2a-0359-4ba1-8153-8cb3cd02509b'
    api_user: 'remoteapiuser@pam'
    api_host: 'node1'
    password: '123456'
    hostname: 'example.org'
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: &gt;-
    Create a new container automatically selecting the next available vmid
    and providing a public key for the root account the Ansible host can use
    to connect to the new container
  community.proxmox.proxmox:
    node: 'uk-mc02'
    api_user: 'root@pam'
    api_password: '1q2w3e'
    api_host: 'node1'
    password: '123456'
    hostname: 'example.org'
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    pubkey: 'ssh-ed25519 AAAAC3NzaC1...hBWA ansibleuser@ansiblehost'
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Sergei Antipov (@UnderGreen)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.proxmox/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.proxmox" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.proxmox/issues/new/choose" rel="noopener external" target="_blank">Report an issue</a></span></li> <li><span><a class="reference internal" href="index#communication-for-community-proxmox"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2025 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/proxmox/proxmox_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/proxmox/proxmox_module.html</a>
  </p>
</div>
