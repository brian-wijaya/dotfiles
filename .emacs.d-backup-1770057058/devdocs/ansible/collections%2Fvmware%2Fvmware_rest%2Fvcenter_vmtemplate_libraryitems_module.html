<section id="vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-creates-a-library-item-in-content-library-from-a-virtual-machine"> <h1>vmware.vmware_rest.vcenter_vmtemplate_libraryitems module – Creates a library item in content library from a virtual machine</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/vmware/vmware_rest/">vmware.vmware_rest collection</a> (version 4.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install vmware.vmware_rest</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>vmware.vmware_rest.vcenter_vmtemplate_libraryitems</code>.</p> </div> <p class="ansible-version-added">New in vmware.vmware_rest 2.2.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Creates a library item in content library from a virtual machine. This operation creates a library item in content library whose content is a virtual machine template created from the source virtual machine, using the supplied create specification. The virtual machine template is stored in a newly created library item.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>vSphere 7.0.3 or greater</li> <li>python &gt;= 3.6</li> <li>aiohttp</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Description of the deployed virtual machine.</p> <p>If unset, the deployed virtual machine has the same description as the source library item.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-disk-storage"><strong>disk_storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Storage specification for the deployed virtual machine’s disks.</p> <p>If both <em>disk_storage_overrides</em> and <em>disk_storage</em> are unset, the deployed virtual machine’s disks are created with the same storage spec as the corresponding disks in the source virtual machine template contained in the library item.</p> <p>If <em>disk_storage_overrides</em> is unset and <em>disk_storage</em> is specified, all of the deployed virtual machine’s disks are created with the storage spec specified by <em>disk_storage</em>.</p> <p>If <em>disk_storage_overrides</em> is specified and <em>disk_storage</em> is unset, disks with identifiers that are not in <em>disk_storage_overrides</em> are created with the same storage spec as the corresponding disks in the source virtual machine template contained in the library item.</p> <p>If both <em>disk_storage_overrides</em> and <em>disk_storage</em> are specified, disks with identifiers that are not in <em>disk_storage_overrides</em> are created with the storage spec specified by <em>disk_storage</em>.</p> <p>Valid attributes are:</p> <ul class="simple"> <li>
<code>datastore</code> (str): Identifier for the datastore associated the deployed virtual machine’s disk.</li> </ul> <p>This field is currently required.</p> <p>If <em>storage_policy</em> is also specified and is incompatible with the <em>datastore</em>, then the disk will be flagged as being out of compliance with the specified storage policy.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_datastore_info_module#ansible-collections-vmware-vmware-rest-vcenter-datastore-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_datastore_info</span></a>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>
<code>storage_policy</code> (dict): Storage policy for the deployed virtual machine’s disk.</li> </ul> <p>If unset, <em>datastore</em> must be specified and the deployed virtual machine’s disk is created with the default storage policy associated with the <em>datastore</em>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>Accepted keys:</li> <li>type (string): Policy type for a virtual machine template’s disk.</li> </ul> <p>Accepted value for this field:</p> <ul class="simple"> <li><code>USE_SPECIFIED_POLICY</code></li> <li>policy (string): Identifier for the storage policy to use.</li> </ul> <p>This field is optional and it is only relevant when the value of <em>type</em> is USE_SPECIFIED_POLICY.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_storage_policies_info_module#ansible-collections-vmware-vmware-rest-vcenter-storage-policies-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_storage_policies_info</span></a>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-disk-storage-overrides"><strong>disk_storage_overrides</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Storage specification for individual disks in the deployed virtual machine. This is specified as a mapping between disk identifiers in the source virtual machine template contained in the library item and their storage specifications.</p> <p>If both <em>disk_storage_overrides</em> and <em>disk_storage</em> are unset, the deployed virtual machine’s disks are created with the same storage spec as the corresponding disks in the source virtual machine template contained in the library item.</p> <p>If <em>disk_storage_overrides</em> is unset and <em>disk_storage</em> is specified, all of the deployed virtual machine’s disks are created with the storage spec specified by <em>disk_storage</em>.</p> <p>If <em>disk_storage_overrides</em> is specified and <em>disk_storage</em> is unset, disks with identifiers that are not in <em>disk_storage_overrides</em> are created with the same storage spec as the corresponding disks in the source virtual machine template contained in the library item.</p> <p>If both <em>disk_storage_overrides</em> and <em>disk_storage</em> are specified, disks with identifiers that are not in <em>disk_storage_overrides</em> are created with the storage spec specified by <em>disk_storage</em>.</p> <p>When clients pass a value of this structure as a parameter, the key in the field map must be the id of a resource returned by <a class="reference internal" href="vcenter_vm_hardware_disk_module#ansible-collections-vmware-vmware-rest-vcenter-vm-hardware-disk-module"><span class="std std-ref">vmware.vmware_rest.vcenter_vm_hardware_disk</span></a>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-guest-customization"><strong>guest_customization</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Guest customization spec to apply to the deployed virtual machine.</p> <p>If unset, the guest operating system is not customized after deployment.</p> <p>Valid attributes are:</p> <ul class="simple"> <li>
<code>name</code> (str): Name of the customization specification.</li> </ul> <p>If unset, no guest customization is performed. ([‘deploy’])</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-hardware-customization"><strong>hardware_customization</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Hardware customization spec which specifies updates to the deployed virtual machine.</p> <p>If unset, the deployed virtual machine has the same hardware configuration as the source virtual machine template contained in the library item.</p> <p>Valid attributes are:</p> <ul class="simple"> <li>
<code>nics</code> (dict): Map of Ethernet network adapters to update.</li> </ul> <p>If unset, all Ethernet adapters will remain connected to the same network as they were in the source virtual machine template. An Ethernet adapter with a MacAddressType of MANUAL will not change. An Ethernet adapter with a MacAddressType of GENERATED or ASSIGNED will receive a new address.</p> <p>When clients pass a value of this structure as a parameter, the key in the field map must be the id of a resource returned by <a class="reference internal" href="vcenter_vm_hardware_ethernet_module#ansible-collections-vmware-vmware-rest-vcenter-vm-hardware-ethernet-module"><span class="std std-ref">vmware.vmware_rest.vcenter_vm_hardware_ethernet</span></a>. ([‘deploy’])</p> <ul class="simple"> <li>
<code>disks_to_remove</code> (list): Idenfiers of disks to remove from the deployed virtual machine.</li> </ul> <p>If unset, all disks will be copied.</p> <p>When clients pass a value of this structure as a parameter, the field must contain the id of resources returned by <a class="reference internal" href="vcenter_vm_hardware_disk_module#ansible-collections-vmware-vmware-rest-vcenter-vm-hardware-disk-module"><span class="std std-ref">vmware.vmware_rest.vcenter_vm_hardware_disk</span></a>. ([‘deploy’])</p> <ul class="simple"> <li>
<code>disks_to_update</code> (dict): Disk update specification for individual disks in the deployed virtual machine.</li> </ul> <p>If unset, disks in the deployed virtual machine will have the same settings as the corresponding disks in the source virtual machine template contained in the library item.</p> <p>When clients pass a value of this structure as a parameter, the key in the field map must be the id of a resource returned by <a class="reference internal" href="vcenter_vm_hardware_disk_module#ansible-collections-vmware-vmware-rest-vcenter-vm-hardware-disk-module"><span class="std std-ref">vmware.vmware_rest.vcenter_vm_hardware_disk</span></a>. ([‘deploy’])</p> <ul class="simple"> <li>
<code>cpu_update</code> (dict): CPU update specification for the deployed virtual machine.</li> </ul> <p>If <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#b6cd909585818d909583848d9095828e8dc2d3c4db909582808dc3d8c5d3c2">{<span>@</span>term<span>.</span>unset</a>}, the deployed virtual machine has the same CPU settings as the source virtual machine template contained in the library item. ([‘deploy’])</p> <ul class="simple"> <li>Accepted keys:</li> <li>num_cpus (integer): Number of virtual processors in the deployed virtual machine.</li> </ul> <p>If <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#b1ca979282868a979284838a979285898ac5d4c3dc979285878ac4dfc2d4c5">{<span>@</span>term<span>.</span>unset</a>}, the deployed virtual machine has the same CPU count as the source virtual machine template contained in the library item.</p> <ul class="simple"> <li>num_cores_per_socket (integer): Number of cores among which to distribute CPUs in the deployed virtual machine.</li> </ul> <p>If <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#2a510c09191d110c091f18110c091e12115e4f58470c091e1c115f44594f5e">{<span>@</span>term<span>.</span>unset</a>}, the deployed virtual machine has the same number of cores per socket as the source virtual machine template contained in the library item.</p> <ul class="simple"> <li>
<code>memory_update</code> (dict): Memory update specification for the deployed virtual machine.</li> </ul> <p>If <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#542f727767636f727761666f7277606c6f20312639727760626f213a273120">{<span>@</span>term<span>.</span>unset</a>}, the deployed virtual machine has the same memory settings as the source virtual machine template contained in the library item. ([‘deploy’])</p> <ul class="simple"> <li>Accepted keys:</li> <li>memory (integer): Size of a virtual machine’s memory in MB.</li> </ul> <p>If <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#ef94c9ccdcd8d4c9ccdaddd4c9ccdbd7d49b8a9d82c9ccdbd9d49a819c8a9b">{<span>@</span>term<span>.</span>unset</a>}, the deployed virtual machine has the same memory size as the source virtual machine template.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-library"><strong>library</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Identifier of the library in which the new library item should be created.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="content_library_info_module#ansible-collections-vmware-vmware-rest-content-library-info-module"><span class="std std-ref">vmware.vmware_rest.content_library_info</span></a>. Required with <em>state=[‘present’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the deployed virtual machine. This parameter is mandatory.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-placement"><strong>placement</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Information used to place the deployed virtual machine.</p> <p>This field is currently required. In the future, if this field is unset, the system will use the values from the source virtual machine template contained in the library item.</p> <p>If specified, each field will be used for placement. If the fields result in disjoint placement, the operation will fail. If the fields along with the placement values of the source virtual machine template result in disjoint placement, the operation will fail.</p> <p>Valid attributes are:</p> <ul class="simple"> <li>
<code>folder</code> (str): Virtual machine folder into which the deployed virtual machine should be placed.</li> </ul> <p>This field is currently required.</p> <p>If unset, the system will attempt to choose a suitable folder for the virtual machine; if a folder cannot be chosen, the virtual machine deployment operation will fail.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_folder_info_module#ansible-collections-vmware-vmware-rest-vcenter-folder-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_folder_info</span></a>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>
<code>resource_pool</code> (str): Resource pool into which the deployed virtual machine should be placed.</li> </ul> <p>If unset, the system will attempt to choose a suitable resource pool for the virtual machine; if a resource pool cannot be chosen, the virtual machine deployment operation will fail.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_resourcepool_info_module#ansible-collections-vmware-vmware-rest-vcenter-resourcepool-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_resourcepool_info</span></a>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>
<code>host</code> (str): Host onto which the virtual machine should be placed. If <em>host</em> and <em>resource_pool</em> are both specified, <em>resource_pool</em> must belong to <em>host</em>. If <em>host</em> and <em>cluster</em> are both specified, <em>host</em> must be a member of <em>cluster</em>.</li> </ul> <p>This field may be unset if <em>resource_pool</em> or <em>cluster</em> is specified. If unset, the system will attempt to choose a suitable host for the virtual machine; if a host cannot be chosen, the virtual machine deployment operation will fail.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_host_info_module#ansible-collections-vmware-vmware-rest-vcenter-host-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_host_info</span></a>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>
<code>cluster</code> (str): Cluster onto which the deployed virtual machine should be placed. If <em>cluster</em> and <em>resource_pool</em> are both specified, <em>resource_pool</em> must belong to <em>cluster</em>. If <em>cluster</em> and <em>host</em> are both specified, <em>host</em> must be a member of <em>cluster</em>.</li> </ul> <p>If <em>resource_pool</em> or <em>host</em> is specified, it is recommended that this field be unset.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_cluster_info_module#ansible-collections-vmware-vmware-rest-vcenter-cluster-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_cluster_info</span></a>. ([‘deploy’, ‘present’])</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-powered-on"><strong>powered_on</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies whether the deployed virtual machine should be powered on after deployment.</p> <p>If unset, the virtual machine will not be powered on after deployment.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-session-timeout"><strong>session_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> <p><em class="ansible-option-versionadded">added in vmware.vmware_rest 2.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout settings for client session.</p> <p>The maximal number of seconds for the whole operation including connection establishment, request sending and response.</p> <p>The default value is 300s.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-source-vm"><strong>source_vm</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Identifier of the source virtual machine to create the library item from.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_vm_info_module#ansible-collections-vmware-vmware-rest-vcenter-vm-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_vm_info</span></a>. Required with <em>state=[‘present’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"deploy"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-template-library-item"><strong>template_library_item</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>identifier of the content library item containing the source virtual machine template to be deployed.</p> <p>The parameter must be the id of a resource returned by <a class="reference internal" href="content_library_item_info_module#ansible-collections-vmware-vmware-rest-content-library-item-info-module"><span class="std std-ref">vmware.vmware_rest.content_library_item_info</span></a>. Required with <em>state=[‘deploy’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vcenter-hostname"><strong>vcenter_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The hostname or IP address of the vSphere vCenter</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_HOST</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vcenter-password"><strong>vcenter_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The vSphere vCenter password</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PASSWORD</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vcenter-rest-log-file"><strong>vcenter_rest_log_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>You can use this optional parameter to set the location of a log file.</p> <p>This file will be used to record the HTTP REST interaction.</p> <p>The file will be stored on the host that runs the module.</p> <p>If the value is not specified in the task, the value of</p> <p>environment variable <code>VMWARE_REST_LOG_FILE</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vcenter-username"><strong>vcenter_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The vSphere vCenter username</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_USER</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vcenter-validate-certs"><strong>vcenter_validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows connection when SSL certificates are not valid. Set to <code>false</code> when certificates are not trusted.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_VALIDATE_CERTS</code> will be used instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-parameter-vm-home-storage"><strong>vm_home_storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Storage location for the virtual machine template’s configuration and log files.</p> <p>If unset, the virtual machine template’s configuration and log files are placed on the default storage backing associated with the library specified by </p> <p>Valid attributes are:</p> <ul class="simple"> <li>
<code>datastore</code> (str): Identifier of the datastore for the deployed virtual machine’s configuration and log files.</li> </ul> <p>This field is currently required.</p> <p>When <em>storage_policy</em> is also specified and is incompatible with the <em>datastore</em>, then the deployed virtual machine will be flagged as being out of compliance with the specified storage policy.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_datastore_info_module#ansible-collections-vmware-vmware-rest-vcenter-datastore-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_datastore_info</span></a>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>
<code>storage_policy</code> (dict): Storage policy for the deployed virtual machine’s configuration and log files.</li> </ul> <p>If unset, <em>datastore</em> must be specified and the deployed virtual machine’s configuration and log files are created with the default storage policy associated with the <em>datastore</em>. ([‘deploy’, ‘present’])</p> <ul class="simple"> <li>Accepted keys:</li> <li>type (string): Policy type for the virtual machine template’s configuration and log files.</li> </ul> <p>Accepted value for this field:</p> <ul class="simple"> <li><code>USE_SPECIFIED_POLICY</code></li> <li>policy (string): Identifier for the storage policy to use.</li> </ul> <p>This field is optional and it is only relevant when the value of <em>type</em> is USE_SPECIFIED_POLICY.</p> <p>When clients pass a value of this structure as a parameter, the field must be the id of a resource returned by <a class="reference internal" href="vcenter_storage_policies_info_module#ansible-collections-vmware-vmware-rest-vcenter-storage-policies-info-module"><span class="std std-ref">vmware.vmware_rest.vcenter_storage_policies_info</span></a>.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Tested on vSphere 7.0.3</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create a VM
  vmware.vmware_rest.vcenter_vm:
    placement:
      cluster: "{{ lookup('vmware.vmware_rest.cluster_moid', '/my_dc/host/my_cluster') }}"
      datastore: "{{ lookup('vmware.vmware_rest.datastore_moid', '/my_dc/datastore/local') }}"
      folder: "{{ lookup('vmware.vmware_rest.folder_moid', '/my_dc/vm') }}"
      resource_pool: "{{ lookup('vmware.vmware_rest.resource_pool_moid', '/my_dc/host/my_cluster/Resources') }}"
    name: test_vm1
    guest_OS: RHEL_7_64
    hardware_version: VMX_11
    memory:
      hot_add_enabled: true
      size_MiB: 1024
  register: my_vm

- name: Create a content library based on a DataStore
  vmware.vmware_rest.content_locallibrary:
    name: my_library_on_datastore
    description: automated
    publish_info:
      published: true
      authentication_method: NONE
    storage_backings:
    - datastore_id: "{{ lookup('vmware.vmware_rest.datastore_moid', '/my_dc/datastore/local') }}"
      type: DATASTORE
    state: present
  register: nfs_lib

- name: Create a VM template on the library
  vmware.vmware_rest.vcenter_vmtemplate_libraryitems:
    name: golden-template
    library: '{{ nfs_lib.id }}'
    source_vm: '{{ my_vm.id }}'
    placement:
      cluster: "{{ lookup('vmware.vmware_rest.cluster_moid', '/my_dc/host/my_cluster') }}"
      folder: "{{ lookup('vmware.vmware_rest.folder_moid', '/my_dc/vm') }}"
      resource_pool: "{{ lookup('vmware.vmware_rest.resource_pool_moid', '/my_dc/host/my_cluster/Resources') }}"
  register: mylib_item

- name: Deploy a new VM based on the template
  vmware.vmware_rest.vcenter_vmtemplate_libraryitems:
    name: vm-from-template
    library: '{{ nfs_lib.id }}'
    template_library_item: '{{ mylib_item.id }}'
    placement:
      cluster: "{{ lookup('vmware.vmware_rest.cluster_moid', '/my_dc/host/my_cluster') }}"
      folder: "{{ lookup('vmware.vmware_rest.folder_moid', '/my_dc/vm') }}"
      resource_pool: "{{ lookup('vmware.vmware_rest.resource_pool_moid', '/my_dc/host/my_cluster/Resources') }}"
    state: deploy
  register: my_new_vm
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-return-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>moid of the resource</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> On success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"9c6df1f5-faba-490c-a8e6-edb72f787ab8"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-vmtemplate-libraryitems-module-return-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a VM template on the library</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> On success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"cpu": {"cores_per_socket": 1, "count": 1}, "disks": {"16000": {"capacity": 32000000000, "disk_storage": {"datastore": "datastore-3036"}}}, "guest_OS": "RHEL_7_64", "memory": {"size_MiB": 1024}, "nics": {}, "vm_home_storage": {"datastore": "datastore-3036"}, "vm_template": "vm-77006"}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Ansible Cloud Team (@ansible-collections)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/vmware.vmware_rest/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/vmware.vmware_rest" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2025 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/vmware/vmware_rest/vcenter_vmtemplate_libraryitems_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/vmware/vmware_rest/vcenter_vmtemplate_libraryitems_module.html</a>
  </p>
</div>
