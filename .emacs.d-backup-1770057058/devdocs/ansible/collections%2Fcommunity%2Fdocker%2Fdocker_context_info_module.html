<section id="community-docker-docker-context-info-module-retrieve-information-on-docker-contexts-for-the-current-user"> <h1>community.docker.docker_context_info module – Retrieve information on Docker contexts for the current user</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/docker/">community.docker collection</a> (version 4.7.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.docker</code>.</p> <p>To use it in a playbook, specify: <code>community.docker.docker_context_info</code>.</p> </div> <p class="ansible-version-added">New in community.docker 4.4.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id3">Attributes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Return information on Docker contexts.</li> <li>This includes some generic information, as well as a <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts-config"><span class="std std-ref">contexts[].config</span></a></code> dictionary that can be used for module defaults for all community.docker modules that use the <code>community.docker.docker</code> module defaults group.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-parameter-cli-context"><strong>cli_context</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Override for the default context’s name.</p> <p>This is preferably used for context selection when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-only-current"><span class="std std-ref">only_current=true</span></a></code>, and it is used to compute the return values <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts-current"><span class="std std-ref">contexts[].current</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-current-context-name"><span class="std std-ref">current_context_name</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A specific Docker CLI context to query.</p> <p>The module will fail if this context does not exist. If you simply want to query whether a context exists, do not specify this parameter and use Jinja2 to search the resulting list for a context of the given name instead.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-only-current"><span class="std std-ref">only_current</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-parameter-only-current"><strong>only_current</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If set to <code>true</code>, <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts"><span class="std std-ref">contexts</span></a></code> will just contain the current context and none else.</p> <p>If set to <code>false</code> (default), <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts"><span class="std std-ref">contexts</span></a></code> will list all contexts, unless <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-name"><span class="std std-ref">name</span></a></strong></code> is specified.</p> <p>Mutually exclusive to <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-name"><span class="std std-ref">name</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> <p>This action does not modify state.</p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong> <span class="ansible-attribute-support-na">N/A</span></p> <p>This action does not modify state.</p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-attribute-idempotent"><strong>idempotent</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> <p>This action does not modify state.</p> </div></td> <td><div class="ansible-option-cell">
<p>When run twice in a row outside check mode, with the same arguments, the second invocation indicates no change.</p> <p>This assumes that the system controlled/queried by the module has not changed in a relevant way.</p> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Get infos on contexts
  community.docker.docker_context_info:
  register: result

- name: Show all contexts
  ansible.builtin.debug:
    msg: "{{ result.contexts }}"

- name: Get current context
  community.docker.docker_context_info:
    only_current: true
  register: docker_current_context

- name: Run community.docker modules with current context
  module_defaults:
    group/community.docker.docker: "{{ docker_current_context.contexts[0].config }}"
  block:
    - name: Task using the current context
      community.docker.docker_container:
        image: ubuntu:latest
        name: ubuntu
        state: started
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts"><strong>contexts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of all contexts (<code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-only-current"><span class="std std-ref">only_current=false</span></a></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-name"><span class="std std-ref">name</span></a></strong></code> not specified), only the current context (<code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-only-current"><span class="std std-ref">only_current=true</span></a></code>), or the requested context (<code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-parameter-name"><span class="std std-ref">name</span></a></strong></code> specified).</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config"><strong>config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>In case the context is for Docker, contains option values to configure the community.docker modules to use this context.</p> <p>Note that the exact values returned here and their values might change over time if incompatibilities to existing modules are found. The goal is that this configuration works fine with all modules in this collection, but we do not have the capabilities to test all possible configuration options at the moment.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{}</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The CA certificate used to validate the Docker daemon’s certificate.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success, context is for Docker, TLS config is present, and CA cert is present</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/ca-cert.pem"</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-client-cert"><strong>client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The client certificate to authenticate with to the Docker daemon.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success, context is for Docker, TLS config is present, and client cert info is present</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/client-cert.pem"</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-client-key"><strong>client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The client certificate’s key to authenticate with to the Docker daemon.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success, context is for Docker, TLS config is present, and client cert info is present</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/client-key.pem"</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-docker-host"><strong>docker_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The Docker daemon to connect to.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success and context is for Docker</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"unix:///var/run/docker.sock"</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-tls"><strong>tls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Whether the Docker context should use an unvalidated TLS connection.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success and context is for Docker</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>false</code></p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-config-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Whether the Docker context should use a validated TLS connection.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success, context is for Docker, and TLS config is present</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-current"><strong>current</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Whether this context is the current one.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The context’s description, if available.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"My context"</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-meta-path"><strong>meta_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The path to the context’s meta directory.</p> <p>Not present for <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts-name"><span class="std std-ref">contexts[].name=default</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/home/felix/.docker/contexts/meta/0123456789abcdef01234567890abcdef0123456789abcdef0123456789abcde"</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The context’s name.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"default"</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-contexts-tls-path"><strong>tls_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The path to the context’s TLS config directory.</p> <p>Not present for <code><a class="reference internal" href="#ansible-collections-community-docker-docker-context-info-module-return-contexts-name"><span class="std std-ref">contexts[].name=default</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/home/user/.docker/contexts/tls/0123456789abcdef01234567890abcdef0123456789abcdef0123456789abcde/"</code></p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-context-info-module-return-current-context-name"><strong>current_context_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the current Docker context.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"default"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Felix Fontein (@felixfontein)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker" rel="noopener external" target="_blank">Ask for help (Docker)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker-compose" rel="noopener external" target="_blank">Ask for help (Docker Compose)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker-swarm" rel="noopener external" target="_blank">Ask for help (Docker Swarm)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index#communication-for-community-docker"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2025 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/docker/docker_context_info_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/docker/docker_context_info_module.html</a>
  </p>
</div>
