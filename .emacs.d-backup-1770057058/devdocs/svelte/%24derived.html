<header> <h1>$derived</h1></header> <aside class="on-this-page svelte-wtnkd6"><label class="svelte-wtnkd6"> <h3 class="svelte-wtnkd6">On this page</h3></label> <nav class="svelte-wtnkd6"><ul class="svelte-wtnkd6">
<li class="svelte-wtnkd6"><a href="$derived" class="svelte-wtnkd6 active">$derived</a></li> <li class="svelte-wtnkd6"><a href="#$derived.by" class="svelte-wtnkd6">$derived.by</a></li>
<li class="svelte-wtnkd6"><a href="#Understanding-dependencies" class="svelte-wtnkd6">Understanding dependencies</a></li>
<li class="svelte-wtnkd6"><a href="#Overriding-derived-values" class="svelte-wtnkd6">Overriding derived values</a></li>
<li class="svelte-wtnkd6"><a href="#Deriveds-and-reactivity" class="svelte-wtnkd6">Deriveds and reactivity</a></li>
<li class="svelte-wtnkd6"><a href="#Destructuring" class="svelte-wtnkd6">Destructuring</a></li>
<li class="svelte-wtnkd6"><a href="#Update-propagation" class="svelte-wtnkd6">Update propagation</a></li>
</ul></nav></aside> <div class="text content"><div class="text svelte-zb31s9">
<p>Derived state is declared with the <code>$derived</code> rune:</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">&lt;script&gt;
	let count = $state(0);
	let doubled = $derived(count * 2);
&lt;/script&gt;

&lt;button onclick={() =&gt; count++}&gt;
	{doubled}
&lt;/button&gt;

&lt;p&gt;{count} doubled is {doubled}&lt;/p&gt;</pre>
</div>
<p>The expression inside <code>$derived(...)</code> should be free of side-effects. Svelte will disallow state changes (e.g. <code>count++</code>) inside derived expressions.</p> <p>As with <code>$state</code>, you can mark class fields as <code>$derived</code>.</p> <blockquote class="note">
<p> Code in Svelte components is only executed once at creation. Without the <code>$derived</code> rune, <code>doubled</code> would maintain its original value even when <code>count</code> changes.</p> </blockquote>
<h2 id="$derived.by">
<span>$derived.by</span>
</h2>
<p>Sometimes you need to create complex derivations that donâ€™t fit inside a short expression. In these cases, you can use <code>$derived.by</code> which accepts a function as its argument.</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">&lt;script&gt;
	let numbers = $state([1, 2, 3]);
	let total = $derived.by(() =&gt; {
		let total = 0;
		for (const n of numbers) {
			total += n;
		}
		return total;
	});
&lt;/script&gt;

&lt;button onclick={() =&gt; numbers.push(numbers.length + 1)}&gt;
	{numbers.join(' + ')} = {total}
&lt;/button&gt;</pre>
</div>
<p>In essence, <code>$derived(expression)</code> is equivalent to <code>$derived.by(() =&gt; expression)</code>.</p> <h2 id="Understanding-dependencies">
<span>Understanding dependencies</span>
</h2>
<p>Anything read synchronously inside the <code>$derived</code> expression (or <code>$derived.by</code> function body) is considered a <em>dependency</em> of the derived state. When the state changes, the derived will be marked as <em>dirty</em> and recalculated when it is next read.</p> <p>To exempt a piece of state from being treated as a dependency, use <a href="svelte#untrack"><code>untrack</code></a>.</p> <h2 id="Overriding-derived-values">
<span>Overriding derived values</span>
</h2>
<p>Derived expressions are recalculated when their dependencies change, but you can temporarily override their values by reassigning them (unless they are declared with <code>const</code>). This can be useful for things like <em>optimistic UI</em>, where a value is derived from the â€˜source of truthâ€™ (such as data from your server) but youâ€™d like to show immediate feedback to the user:</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">&lt;script&gt;
	let { post, like } = $props();

	let likes = $derived(post.likes);

	async function onclick() {
		// increment the `likes` count immediately...
		likes += 1;

		// and tell the server, which will eventually update `post`
		try {
			await like();
		} catch {
			// failed! roll back the change
			likes -= 1;
		}
	}
&lt;/script&gt;

&lt;button {onclick}&gt;ðŸ§¡ {likes}&lt;/button&gt;</pre>
</div>
<blockquote class="note">
<p> Prior to Svelte 5.25, deriveds were read-only.</p> </blockquote>
<h2 id="Deriveds-and-reactivity">
<span>Deriveds and reactivity</span>
</h2>
<p>Unlike <code>$state</code>, which converts objects and arrays to <a href="$state#Deep-state">deeply reactive proxies</a>, <code>$derived</code> values are left as-is. For example, <a href="https://svelte.dev/playground/untitled#H4sIAAAAAAAAE4VU22rjMBD9lUHd3aaQi9PdstS1A3t5XvpQ2Ic4D7I1iUUV2UjjNMX431eS7TRdSosxgjMzZ45mjt0yzffIYibvy0ojFJWqDKCQVBk2ZVup0LJ43TJ6rn2aBxw-FP2o67k9oCKP5dziW3hRaUJNjoYltjCyplWmM1JIIAn3FlL4ZIkTTtYez6jtj4w8WwyXv9GiIXiQxLVs9pfTMR7EuoSLIuLFbX7Z4930bZo_nBrD1bs834tlfvsBz9_SyX6PZXu9XaL4gOWn4sXjeyzftv4ZWfyxubpzxzg6LfD4MrooxELEosKCUPigQCMPKCZh0OtQE1iSxcsmdHuBvCiHZXALLXiN08EL3RRkaJ_kDVGle0HcSD5TPEeVtj67O4Nrg9aiSNtBY5oODJkrL5QsHtN2cgXp6nSJMWzpWWGasdlsGEMbzi5jPr5KFr0Ep7pdeM2-TCelCddIhDxAobi1jqF3cMaC1RKp64bAW9iFAmXGIHfd4wNXDabtOLN53w8W53VvJoZLh7xk4Rr3CoL-UNoLhWHrT1JQGcM17u96oES5K-kc2XOzkzqGCKL5De79OUTyyrg1zgwXsrEx3ESfx4Bz0M5UjVMHB24mw9SuXtXFoN13fYKOM1tyUT3FbvbWmSWCZX2Er-41u5xPoml45svRahl9Wb9aasbINJixDZwcPTbyTLZSUsAvrg_cPuCR7s782_WU8343Y72Qtlb8OYatwuOQvuN13M_hJKNfxann1v1U_B1KZ_D_mzhzhz24fw85CSz2irtN9w9HshBK7AQAAA==">in a case like this</a>...</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">let items = $state([...]);

let index = $state(0);
let selected = $derived(items[index]);</pre>
</div>
<p>...you can change (or <code>bind:</code> to) properties of <code>selected</code> and it will affect the underlying <code>items</code> array. If <code>items</code> was <em>not</em> deeply reactive, mutating <code>selected</code> would have no effect.</p> <h2 id="Destructuring">
<span>Destructuring</span>
</h2>
<p>If you use destructuring with a <code>$derived</code> declaration, the resulting variables will all be reactive â€” this...</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables twoslash lsp" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">let { a, b, c } = $derived(stuff());</pre>
</div>
<p>...is roughly equivalent to this:</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables twoslash lsp" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">let _stuff = $derived(stuff());
let a = $derived(_stuff.a);
let b = $derived(_stuff.b);
let c = $derived(_stuff.c);</pre>
</div>
<h2 id="Update-propagation">
<span>Update propagation</span>
</h2>
<p>Svelte uses something called <em>push-pull reactivity</em> â€” when state is updated, everything that depends on the state (whether directly or indirectly) is immediately notified of the change (the â€˜pushâ€™), but derived values are not re-evaluated until they are actually read (the â€˜pullâ€™).</p> <p>If the new value of a derived is referentially identical to its previous value, downstream updates will be skipped. In other words, Svelte will only update the text inside the button when <code>large</code> changes, not when <code>count</code> changes, even though <code>large</code> depends on <code>count</code>:</p> <div class="code-block">

<pre data-language="typescript" class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)">&lt;script&gt;
	let count = $state(0);
	let large = $derived(count &gt; 10);
&lt;/script&gt;

&lt;button onclick={() =&gt; count++}&gt;
	{large}
&lt;/button&gt;</pre>
</div>
</div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016â€“2025 Rich Harris and contributors<br>Licensed under the MIT License.<br>
    <a href="https://svelte.dev/docs/svelte/$derived" class="_attribution-link">https://svelte.dev/docs/svelte/$derived</a>
  </p>
</div>
