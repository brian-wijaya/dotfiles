<mdn-survey></mdn-survey> <h1>Error.captureStackTrace()</h1> <section class="content-section"> <p>The <code>Error.captureStackTrace()</code> static method installs stack trace information on a provided object as the <a href="stack"><code>stack</code></a> property.</p> </section>    <section class="content-section" aria-labelledby="syntax"> <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">Error.captureStackTrace(object)
Error.captureStackTrace(object, constructor)
</pre></div> </section><section class="content-section" aria-labelledby="parameters"> <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="object"><a href="#object"><code>object</code></a></dt> <dd> <p>The object on which to add the <code>stack</code> property.</p> </dd> <dt id="constructor"><a href="#constructor"><code>constructor</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>A function, typically the constructor where the <code>object</code> was created. When collecting the stack trace, all frames above the topmost call to this function, including that call, are left out of the stack trace.</p> </dd> </dl> </section><section class="content-section" aria-labelledby="return_value"> <h3 id="return_value" class="heading">Return value</h3> <p>None (<a href="../undefined"><code>undefined</code></a>).</p> <p>The <code>object</code> is modified in-place with an extra own property called <code>stack</code> defined, whose string value follows the same format as <a href="stack"><code>Error.prototype.stack</code></a>. This property is non-enumerable and configurable. In V8, it is a getter-setter pair. In SpiderMonkey and JavaScriptCore, it is a data property that is writable.</p> </section><section class="content-section" aria-labelledby="examples"> <h2 id="examples" class="heading">Examples</h2> &gt; </section><section class="content-section" aria-labelledby="using_error.capturestacktrace"> <h3 id="using_error.capturestacktrace" class="heading">Using Error.captureStackTrace()</h3> <p>The <code>getStack()</code> utility function returns the current stack trace at the point it is called, removing itself from the stack. This serves the same debugging purpose as <a href="https://developer.mozilla.org/en-US/docs/Web/API/console/trace_static"><code>console.trace()</code></a>, but allows you to output the string elsewhere. Note that it does not construct an <code>Error</code> instance for this purpose, but installs <code>stack</code> on a plain object, which would be more efficient for our purposes. Normally, you would call <code>Error.captureStackTrace</code> on objects intended to be thrown as errors, as shown in the next example.</p> <div class="code-example"><pre data-language="js">function getStack() {
  const obj = {};
  if ("captureStackTrace" in Error) {
    // Avoid getStack itself in the stack trace
    Error.captureStackTrace(obj, getStack);
  }
  return obj.stack;
}

function foo() {
  console.log(getStack());
}

foo();
// Error
//     at foo (&lt;anonymous&gt;:8:15)
//     at &lt;anonymous&gt;:11:1
</pre></div> </section><section class="content-section" aria-labelledby="installing_stack_trace_on_a_custom_error_object"> <h3 id="installing_stack_trace_on_a_custom_error_object" class="heading">Installing stack trace on a custom error object</h3> <p>The main use case for <code>Error.captureStackTrace()</code> is to install a stack trace on a custom error object. Typically, you define <a href="../error#custom_error_types">custom errors</a> by extending the <code>Error</code> class, which automatically makes the <code>stack</code> property available via inheritance. However, the problem with the default stack trace is that it includes the constructor call itself, which leaks implementation details. You can avoid this by using <code>Error.captureStackTrace()</code>, which allows the stack trace to be installed even for custom errors that do not inherit from <code>Error</code>.</p> <div class="code-example"><pre data-language="js">class MyError extends Error {
  constructor(message, options) {
    super(message, options);
    if ("captureStackTrace" in Error) {
      // Avoid MyError itself in the stack trace
      Error.captureStackTrace(this, MyError);
    }
  }
}

const myError = new MyError("Something went wrong");
console.log(myError.stack);
// Error: Something went wrong
//     at &lt;anonymous&gt;:8:17
</pre></div> <p>Note that even if you don't call <code>Error.captureStackTrace()</code> here, some engines are still smart enough to avoid <code>MyError</code> in the stack trace if the constructor inherits from <code>Error</code>. Calling <code>Error.captureStackTrace()</code> is more important for custom errors that, for some reason, do not inherit from <code>Error</code>.</p> <div class="code-example"><pre data-language="js">class MyError {
  constructor(message) {
    this.message = message;
    if ("captureStackTrace" in Error) {
      // Avoid MyError itself in the stack trace
      Error.captureStackTrace(this, MyError);
    }
  }
}

const myError = new MyError("Something went wrong");
console.log(myError.stack);
// Error: Something went wrong
//     at &lt;anonymous&gt;:8:17
</pre></div> </section><section class="content-section" aria-labelledby="specifications"> <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://github.com/tc39/proposal-error-capturestacktrace?tab=readme-ov-file#errorcapturestacktrace-1" rel="noopener" target="_blank">Unknown specification&gt;<br># errorcapturestacktrace-1&gt;</a></td> </tr> </tbody> </table></div> </section><section class="content-section" aria-labelledby="browser_compatibility"> <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
<th colspan="3">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
<th>Bun</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody><tr>
<th><code>captureStackTrace</code></th>
<td class="bc-supports-yes"><abbr title="Release date: 2009-09-15">3</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2020-01-15">79</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-04-29">138</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2013-07-02">15</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2023-12-11">17.2</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2012-06-27">18</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-04-29">138</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2013-05-21">14</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2023-12-11">17.2</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2013-04-27">1.0</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2013-12-09">4.4</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2023-12-11">17.2</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2023-09-08">1.0.0</abbr></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><abbr title="Release date: 2013-03-11">0.10.0</abbr></td>
</tr></tbody>
</table></div> </section><section class="content-section" aria-labelledby="see_also"> <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="stack"><code>Error.prototype.stack</code></a></li> <li><a href="stacktracelimit"><code>Error.stackTraceLimit</code></a></li> <li>
<a href="https://v8.dev/docs/stack-trace-api" target="_blank">Stack trace API</a> in the V8 docs</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/captureStackTrace" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/captureStackTrace</a>
  </p>
</div>
