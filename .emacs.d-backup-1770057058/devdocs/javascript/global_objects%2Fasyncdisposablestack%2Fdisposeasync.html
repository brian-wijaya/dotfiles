<mdn-survey></mdn-survey> <h1>AsyncDisposableStack.prototype.disposeAsync()</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>   </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p> <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FAsyncDisposableStack%2FdisposeAsync&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details><section class="content-section"> <p>The <code>disposeAsync()</code> method of <a href="../asyncdisposablestack"><code>AsyncDisposableStack</code></a> instances disposes this stack by calling all disposers registered to it in reverse order of registration, awaiting for each one's completion before calling the next one. If the stack is already disposed, this method does nothing.</p> <p>It performs the same action as <code>await using disposer = new AsyncDisposableStack()</code> at scope exit. It can be used if you need to clean up at a point other than scope exit.</p> </section>    <section class="content-section" aria-labelledby="syntax"> <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">disposeAsync()
</pre></div> </section><section class="content-section" aria-labelledby="parameters"> <h3 id="parameters" class="heading">Parameters</h3> <p>None.</p> </section><section class="content-section" aria-labelledby="return_value"> <h3 id="return_value" class="heading">Return value</h3> <p>A new <a href="../promise"><code>Promise</code></a> that resolves with <code>undefined</code> when all registered disposers have completed in sequence.</p> </section><section class="content-section" aria-labelledby="exceptions"> <h3 id="exceptions" class="heading">Exceptions</h3> <p><code>disposeAsync()</code> never synchronously throws an error. The returned promise may reject with one of the following errors:</p> <dl> <dt id="suppressederror"><a href="../suppressederror"><code>SuppressedError</code></a></dt> <dd> <p>Thrown if multiple disposers in the stack threw an error. If only one error is thrown, it is rethrown as-is. Otherwise, for each additional error, a new <a href="../suppressederror"><code>SuppressedError</code></a> is created, with the original error as the <code>suppressed</code> property, and the new error as the <code>error</code> property.</p> </dd> </dl> </section><section class="content-section" aria-labelledby="examples"> <h2 id="examples" class="heading">Examples</h2> &gt; </section><section class="content-section" aria-labelledby="disposing_a_stack"> <h3 id="disposing_a_stack" class="heading">Disposing a stack</h3> <p>Here we push three disposers to the stack, using the <a href="use"><code>use()</code></a>, <a href="adopt"><code>adopt()</code></a>, and <a href="defer"><code>defer()</code></a> methods. When <code>disposeAsync()</code> is called, the disposers are called in reverse order of registration.</p> <p>Note that usually you don't need to call <code>disposeAsync()</code> manually. Declare the stack with <a href="../../statements/await_using"><code>await using</code></a>, and its <a href="symbol.asyncdispose"><code>[Symbol.asyncDispose]()</code></a> method will be automatically called when the stack goes out of scope.</p> <div class="code-example"><pre data-language="js">class Resource {
  #doDisposal() {
    // Imagine more meaningful disposal logic here
    return new Promise((resolve) =&gt; {
      setTimeout(resolve, 1000);
    });
  }
  async dispose() {
    await this.#doDisposal();
    console.log("Resource disposed");
  }
  async [Symbol.asyncDispose]() {
    await this.#doDisposal();
    console.log("Resource disposed via Symbol.asyncDispose");
  }
}

async function doSomething() {
  const disposer = new AsyncDisposableStack();
  const resource = disposer.use(new Resource());
  const resource2 = disposer.adopt(new Resource(), (resource) =&gt;
    resource.dispose(),
  );
  disposer.defer(() =&gt; console.log("Deferred disposer"));
  disposer.disposeAsync();
  // Logs in order:
  // Deferred disposer
  // Resource disposed
  // Resource disposed via Symbol.dispose
}

doSomething();
</pre></div> </section><section class="content-section" aria-labelledby="specifications"> <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://tc39.es/proposal-async-explicit-resource-management/#sec-asyncdisposablestack.prototype.disposeAsync" rel="noopener" target="_blank">ECMAScript Async Explicit Resource Management&gt;<br># sec-asyncdisposablestack.prototype.disposeAsync&gt;</a></td> </tr> </tbody> </table></div> </section><section class="content-section" aria-labelledby="browser_compatibility"> <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
<th colspan="3">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
<th>Bun</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody><tr>
<th><code>disposeAsync</code></th>
<td class="bc-supports-yes"><abbr title="Release date: 2025-03-04">134</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-03-06">134</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-07-22">141</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-05-13">119</abbr></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-03-04">134</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-07-22">141</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-03-19">88</abbr></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-10-25">29.0</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-03-04">134</abbr></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-10-10">1.3.0</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-04-15">2.2.10</abbr></td>
<td class="bc-supports-yes"><abbr title="Release date: 2025-05-06">24.0.0</abbr></td>
</tr></tbody>
</table></div> </section><section class="content-section" aria-labelledby="see_also"> <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Resource_management">JavaScript resource management</a></li> <li><a href="../asyncdisposablestack"><code>AsyncDisposableStack</code></a></li> <li><a href="adopt"><code>AsyncDisposableStack.prototype.adopt()</code></a></li> <li><a href="defer"><code>AsyncDisposableStack.prototype.defer()</code></a></li> <li><a href="use"><code>AsyncDisposableStack.prototype.use()</code></a></li> <li><a href="symbol.asyncdispose"><code>AsyncDisposableStack.prototype[Symbol.asyncDispose]()</code></a></li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncDisposableStack/disposeAsync" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncDisposableStack/disposeAsync</a>
  </p>
</div>
