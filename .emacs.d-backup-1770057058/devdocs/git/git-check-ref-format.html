<h1>git-check-ref-format</h1>  <h2 id="_name">Name</h2> <div class="sectionbody">  <p>git-check-ref-format - Ensures that a reference name is well formed</p>  </div>   <h2 id="_synopsis">Synopsis</h2> <div class="sectionbody"> <div class="verseblock"> <pre class="content" data-language="shell">git check-ref-format [--normalize]
       [--[no-]allow-onelevel] [--refspec-pattern]
       &lt;refname&gt;
git check-ref-format --branch &lt;branchname-shorthand&gt;</pre> </div> </div>   <h2 id="_description">Description</h2> <div class="sectionbody">  <p>Checks if a given <code>refname</code> is acceptable, and exits with a non-zero status if it is not.</p>   <p>A reference is used in Git to specify branches and tags. A branch head is stored in the <span class="synopsis"><code>refs/heads</code></span> hierarchy, while a tag is stored in the <span class="synopsis"><code>refs/tags</code></span> hierarchy of the ref namespace (typically in <span class="synopsis"><code>$GIT_DIR/refs/heads</code></span> and <span class="synopsis"><code>$GIT_DIR/refs/tags</code></span> directories or, as entries in file <span class="synopsis"><code>$GIT_DIR/packed-refs</code></span> if refs are packed by <span class="synopsis"><code>git</code> <code>gc</code></span>).</p>   <p>Git imposes the following rules on how references are named:</p>  <div class="olist arabic"> <ol class="arabic"> <li> <p>They can include slash <span class="synopsis"><code>/</code></span> for hierarchical (directory) grouping, but no slash-separated component can begin with a dot <span class="synopsis"><code>.</code></span> or end with the sequence <span class="synopsis"><code>.lock</code></span>.</p> </li> <li> <p>They must contain at least one <span class="synopsis"><code>/</code></span>. This enforces the presence of a category like <span class="synopsis"><code>heads/</code></span>, <span class="synopsis"><code>tags/</code></span> etc. but the actual names are not restricted. If the <span class="synopsis"><code>--allow-onelevel</code></span> option is used, this rule is waived.</p> </li> <li> <p>They cannot have two consecutive dots <span class="synopsis"><code>..</code></span> anywhere.</p> </li> <li> <p>They cannot have ASCII control characters (i.e. bytes whose values are lower than \040, or \177 <span class="synopsis"><code>DEL</code></span>), space, tilde <span class="synopsis"><code>~</code></span>, caret <span class="synopsis"><code>^</code></span>, or colon <span class="synopsis"><code>:</code></span> anywhere.</p> </li> <li> <p>They cannot have question-mark <span class="synopsis"><em>?</em></span>, asterisk <span class="synopsis"><code>*</code></span>, or open bracket <span class="synopsis">[</span> anywhere. See the <span class="synopsis"><code>--refspec-pattern</code></span> option below for an exception to this rule.</p> </li> <li> <p>They cannot begin or end with a slash <span class="synopsis"><code>/</code></span> or contain multiple consecutive slashes (see the <span class="synopsis"><code>--normalize</code></span> option below for an exception to this rule).</p> </li> <li> <p>They cannot end with a dot <span class="synopsis"><code>.</code></span>.</p> </li> <li> <p>They cannot contain a sequence <span class="synopsis"><code>@{</code></span>.</p> </li> <li> <p>They cannot be the single character <span class="synopsis"><code>@</code></span>.</p> </li> <li> <p>They cannot contain a <span class="synopsis"><em>\</em></span>.</p> </li> </ol> </div>  <p>These rules make it easy for shell script based tools to parse reference names, pathname expansion by the shell when a reference name is used unquoted (by mistake), and also avoid ambiguities in certain reference name expressions (see <a href="gitrevisions">gitrevisions[7]</a>):</p>  <div class="olist arabic"> <ol class="arabic"> <li> <p>A double-dot <span class="synopsis"><code>..</code></span> is often used as in <span class="synopsis"><code>ref1..ref2</code></span>, and in some contexts this notation means <span class="synopsis"><code>^ref1</code> <code>ref2</code></span> (i.e. not in <span class="synopsis"><code>ref1</code></span> and in <span class="synopsis"><code>ref2</code></span>).</p> </li> <li> <p>A tilde <span class="synopsis"><code>~</code></span> and caret <span class="synopsis"><code>^</code></span> are used to introduce the postfix <code>nth parent</code> and <code>peel onion</code> operation.</p> </li> <li> <p>A colon <span class="synopsis"><code>:</code></span> is used as in <span class="synopsis"><code>srcref:dstref</code></span> to mean "use srcref’s value and store it in dstref" in fetch and push operations. It may also be used to select a specific object such as with 'git cat-file': "git cat-file blob v1.3.3:refs.c".</p> </li> <li> <p>at-open-brace <span class="synopsis"><code>@{</code></span> is used as a notation to access a reflog entry.</p> </li> </ol> </div>  <p>With the <span class="synopsis"><code>--branch</code></span> option, the command takes a name and checks if it can be used as a valid branch name (e.g. when creating a new branch). But be cautious when using the previous checkout syntax that may refer to a detached HEAD state. The rule <span class="synopsis"><code>git</code> <code>check-ref-format</code> <code>--branch</code> <code>$name</code></span> implements may be stricter than what <span class="synopsis"><code>git</code> <code>check-ref-format</code> <code>refs/heads/$name</code></span> says (e.g. a dash may appear at the beginning of a ref component, but it is explicitly forbidden at the beginning of a branch name). When run with the <span class="synopsis"><code>--branch</code></span> option in a repository, the input is first expanded for the “previous checkout syntax” <span class="synopsis"><code>@{-n}</code></span>. For example, <span class="synopsis"><code>@{-1}</code></span> is a way to refer the last thing that was checked out using "git switch" or "git checkout" operation. This option should be used by porcelains to accept this syntax anywhere a branch name is expected, so they can act as if you typed the branch name. As an exception note that, the “previous checkout operation” might result in a commit object name when the N-th last thing checked out was not a branch.</p>  </div>   <h2 id="_options">Options</h2> <div class="sectionbody"> <div class="dlist"> <dl> <dt class="hdlist1" id="Documentation/git-check-ref-format.txt---allow-onelevel">
--allow-onelevel </dt> <dt class="hdlist1" id="Documentation/git-check-ref-format.txt---no-allow-onelevel">
--no-allow-onelevel </dt> <dd> <p>Controls whether one-level refnames are accepted (i.e., refnames that do not contain multiple <span class="synopsis"><code>/</code></span>-separated components). The default is <span class="synopsis"><code>--no-allow-onelevel</code></span>.</p> </dd> <dt class="hdlist1" id="Documentation/git-check-ref-format.txt---refspec-pattern">
--refspec-pattern </dt> <dd> <p>Interpret &lt;refname&gt; as a reference name pattern for a refspec (as used with remote repositories). If this option is enabled, &lt;refname&gt; is allowed to contain a single <span class="synopsis"><code>*</code></span> in the refspec (e.g., <span class="synopsis"><code>foo/bar*/baz</code></span> or <span class="synopsis"><code>foo/bar*baz/</code></span> but not <span class="synopsis"><code>foo/bar*/baz*</code></span>).</p> </dd> <dt class="hdlist1" id="Documentation/git-check-ref-format.txt---normalize">
--normalize </dt> <dd> <p>Normalize <code>refname</code> by removing any leading slash (<span class="synopsis"><code>/</code></span>) characters and collapsing runs of adjacent slashes between name components into a single slash. If the normalized refname is valid then print it to standard output and exit with a status of 0, otherwise exit with a non-zero status. (<span class="synopsis"><code>--print</code></span> is a deprecated way to spell <span class="synopsis"><code>--normalize</code></span>.)</p> </dd> </dl> </div> </div>   <h2 id="_examples">Examples</h2> <div class="sectionbody"> <div class="ulist"> <ul> <li> <p>Print the name of the previous thing checked out:</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ git check-ref-format --branch @{-1}</pre> </div> </div> </li> <li> <p>Determine the reference name to use for a new branch:</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ ref=$(git check-ref-format --normalize "refs/heads/$newbranch")||
{ echo "we do not like '$newbranch' as a branch name." &gt;&amp;2 ; exit 1 ; }</pre> </div> </div> </li> </ul> </div> </div>      <h3 hidden="true" data-pagefind-weight="7">check-ref-format</h3><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 Linus Torvalds and others<br>Licensed under the GNU General Public License version 2.<br>
    <a href="https://git-scm.com/docs/git-check-ref-format" class="_attribution-link">https://git-scm.com/docs/git-check-ref-format</a>
  </p>
</div>
