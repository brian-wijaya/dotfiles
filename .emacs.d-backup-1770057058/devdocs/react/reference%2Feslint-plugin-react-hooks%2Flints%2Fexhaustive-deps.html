<h1>exhaustive-deps<a href="#undefined" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h1>
<div><p>Validates that dependency arrays for React hooks contain all necessary dependencies.</p></div> <h2 id="rule-details">Rule Details <a href="#rule-details" aria-label="Link for Rule Details " title="Link for Rule Details "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>React hooks like <code dir="ltr">useEffect</code>, <code dir="ltr">useMemo</code>, and <code dir="ltr">useCallback</code> accept dependency arrays. When a value referenced inside these hooks isn’t included in the dependency array, React won’t re-run the effect or recalculate the value when that dependency changes. This causes stale closures where the hook uses outdated values.</p> <h2 id="common-violations">Common Violations <a href="#common-violations" aria-label="Link for Common Violations " title="Link for Common Violations "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>This error often happens when you try to “trick” React about dependencies to control when an effect runs. Effects should synchronize your component with external systems. The dependency array tells React which values the effect uses, so React knows when to re-synchronize.</p> <p>If you find yourself fighting with the linter, you likely need to restructure your code. See <a href="../../../learn/removing-effect-dependencies">Removing Effect Dependencies</a> to learn how.</p> <h3 id="invalid">Invalid <a href="#invalid" aria-label="Link for Invalid " title="Link for Invalid "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Examples of incorrect code for this rule:</p> <pre data-language="jsx"><code><span>// ❌ Missing dependency</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>count</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span> <span>// Missing 'count'</span>

<span>// ❌ Missing prop</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>fetchUser</span><span>(</span><span>userId</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span> <span>// Missing 'userId'</span>

<span>// ❌ Incomplete dependencies</span>
<span>useMemo</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>return</span> <span>items</span>.<span>sort</span><span>(</span><span>sortOrder</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>items</span><span>]</span><span>)</span><span>;</span> <span>// Missing 'sortOrder'</span></code></pre> <h3 id="valid">Valid <a href="#valid" aria-label="Link for Valid " title="Link for Valid "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Examples of correct code for this rule:</p> <pre data-language="jsx"><code><span>// ✅ All dependencies included</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>count</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>count</span><span>]</span><span>)</span><span>;</span>

<span>// ✅ All dependencies included</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>fetchUser</span><span>(</span><span>userId</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>userId</span><span>]</span><span>)</span><span>;</span></code></pre> <h2 id="troubleshooting">Troubleshooting <a href="#troubleshooting" aria-label="Link for Troubleshooting " title="Link for Troubleshooting "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <h3 id="function-dependency-loops">Adding a function dependency causes infinite loops <a href="#function-dependency-loops" aria-label="Link for Adding a function dependency causes infinite loops " title="Link for Adding a function dependency causes infinite loops "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>You have an effect, but you’re creating a new function on every render:</p> <pre data-language="jsx"><code><span>// ❌ Causes infinite loop</span>
<span>const</span> <span>logItems</span> = <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>items</span><span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>logItems</span><span>(</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>logItems</span><span>]</span><span>)</span><span>;</span> <span>// Infinite loop!</span></code></pre> <p>In most cases, you don’t need the effect. Call the function where the action happens instead:</p> <pre data-language="jsx"><code><span>// ✅ Call it from the event handler</span>
<span>const</span> <span>logItems</span> = <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>items</span><span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>return</span> <span>&lt;</span><span>button</span> <span>onClick</span>=<span>{</span><span>logItems</span><span>}</span><span>&gt;</span>Log<span>&lt;/</span><span>button</span><span>&gt;</span><span>;</span>

<span>// ✅ Or derive during render if there's no side effect</span>
<span>items</span>.<span>forEach</span><span>(</span><span>item</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>item</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span></code></pre> <p>If you genuinely need the effect (for example, to subscribe to something external), make the dependency stable:</p> <pre data-language="jsx"><code><span>// ✅ useCallback keeps the function reference stable</span>
<span>const</span> <span>logItems</span> = <span>useCallback</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>items</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>items</span><span>]</span><span>)</span><span>;</span>

<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>logItems</span><span>(</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>logItems</span><span>]</span><span>)</span><span>;</span>

<span>// ✅ Or move the logic straight into the effect</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span>.<span>log</span><span>(</span><span>items</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>items</span><span>]</span><span>)</span><span>;</span></code></pre> <h3 id="effect-on-mount">Running an effect only once <a href="#effect-on-mount" aria-label="Link for Running an effect only once " title="Link for Running an effect only once "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>You want to run an effect once on mount, but the linter complains about missing dependencies:</p> <pre data-language="jsx"><code><span>// ❌ Missing dependency</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>sendAnalytics</span><span>(</span><span>userId</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span> <span>// Missing 'userId'</span></code></pre> <p>Either include the dependency (recommended) or use a ref if you truly need to run once:</p> <pre data-language="jsx"><code><span>// ✅ Include dependency</span>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>sendAnalytics</span><span>(</span><span>userId</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>userId</span><span>]</span><span>)</span><span>;</span>

<span>// ✅ Or use a ref guard inside an effect</span>
<span>const</span> <span>sent</span> = <span>useRef</span><span>(</span><span>false</span><span>)</span><span>;</span>

<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>if</span> <span>(</span><span>sent</span>.<span>current</span><span>)</span> <span>{</span>
    <span>return</span><span>;</span>
  <span>}</span>

  <span>sent</span>.<span>current</span> = <span>true</span><span>;</span>
  <span>sendAnalytics</span><span>(</span><span>userId</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>[</span><span>userId</span><span>]</span><span>)</span><span>;</span></code></pre> <h2 id="options">Options <a href="#options" aria-label="Link for Options " title="Link for Options "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>You can configure custom effect hooks using shared ESLint settings (available in <code dir="ltr">eslint-plugin-react-hooks</code> 6.1.1 and later):</p> <pre data-language="jsx"><code><span>{</span>
  <span>"settings"</span><span>:</span> <span>{</span>
    <span>"react-hooks"</span><span>:</span> <span>{</span>
      <span>"additionalEffectHooks"</span><span>:</span> <span>"(useMyEffect|useCustomEffect)"</span>
    <span>}</span>
  <span>}</span>
<span>}</span></code></pre> <ul> <li>
<code dir="ltr">additionalEffectHooks</code>: Regex pattern matching custom hooks that should be checked for exhaustive dependencies. This configuration is shared across all <code dir="ltr">react-hooks</code> rules.</li> </ul> <p>For backward compatibility, this rule also accepts a rule-level option:</p> <pre data-language="jsx"><code><span>{</span>
  <span>"rules"</span><span>:</span> <span>{</span>
    <span>"react-hooks/exhaustive-deps"</span><span>:</span> <span>[</span><span>"warn"</span><span>,</span> <span>{</span>
      <span>"additionalHooks"</span><span>:</span> <span>"(useMyCustomHook|useAnotherHook)"</span>
    <span>}</span><span>]</span>
  <span>}</span>
<span>}</span></code></pre> <ul> <li>
<code dir="ltr">additionalHooks</code>: Regex for hooks that should be checked for exhaustive dependencies. <strong>Note:</strong> If this rule-level option is specified, it takes precedence over the shared <code dir="ltr">settings</code> configuration.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps" class="_attribution-link">https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps</a>
  </p>
</div>
