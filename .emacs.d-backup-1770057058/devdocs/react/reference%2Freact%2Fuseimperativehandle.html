<h1>useImperativeHandle<a href="#undefined" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h1>
<div>
<p><code dir="ltr">useImperativeHandle</code> is a React Hook that lets you customize the handle exposed as a <a href="../../learn/manipulating-the-dom-with-refs">ref.</a></p>
<pre data-language="jsx"><code><span>useImperativeHandle</span><span>(</span><span>ref</span><span>,</span> <span>createHandle</span><span>,</span> <span>dependencies</span>?<span>)</span></code></pre>
</div> <ul>
<li>
<a href="#reference">Reference </a><ul><li><a href="#useimperativehandle"><code dir="ltr">useImperativeHandle(ref, createHandle, dependencies?)</code> </a></li></ul>
</li>
<li>
<a href="#usage">Usage </a><ul>
<li><a href="#exposing-a-custom-ref-handle-to-the-parent-component">Exposing a custom ref handle to the parent component </a></li>
<li><a href="#exposing-your-own-imperative-methods">Exposing your own imperative methods </a></li>
</ul>
</li>
</ul> <hr> <h2 id="reference">Reference <a href="#reference" aria-label="Link for Reference " title="Link for Reference "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <h3 id="useimperativehandle">
<code dir="ltr">useImperativeHandle(ref, createHandle, dependencies?)</code> <a href="#useimperativehandle" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Call <code dir="ltr">useImperativeHandle</code> at the top level of your component to customize the ref handle it exposes:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>useImperativeHandle</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>

<span>function</span> <span>MyInput</span><span>(</span><span>{</span> <span>ref</span> <span>}</span><span>)</span> <span>{</span>
  <span>useImperativeHandle</span><span>(</span><span>ref</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>return</span> <span>{</span>
      <span>// ... your methods ...</span>
    <span>}</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>
  <span>// ...</span></code></pre> <p><a href="#usage">See more examples below.</a></p> <h4 id="parameters">Parameters <a href="#parameters" aria-label="Link for Parameters " title="Link for Parameters "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h4> <ul> <li> <p><code dir="ltr">ref</code>: The <code dir="ltr">ref</code> you received as a prop to the <code dir="ltr">MyInput</code> component.</p> </li> <li> <p><code dir="ltr">createHandle</code>: A function that takes no arguments and returns the ref handle you want to expose. That ref handle can have any type. Usually, you will return an object with the methods you want to expose.</p> </li> <li> <p><strong>optional</strong> <code dir="ltr">dependencies</code>: The list of all reactive values referenced inside of the <code dir="ltr">createHandle</code> code. Reactive values include props, state, and all the variables and functions declared directly inside your component body. If your linter is <a href="../../learn/editor-setup#linting">configured for React</a>, it will verify that every reactive value is correctly specified as a dependency. The list of dependencies must have a constant number of items and be written inline like <code dir="ltr">[dep1, dep2, dep3]</code>. React will compare each dependency with its previous value using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="nofollow noopener noreferrer"><code dir="ltr">Object.is</code></a> comparison. If a re-render resulted in a change to some dependency, or if you omitted this argument, your <code dir="ltr">createHandle</code> function will re-execute, and the newly created handle will be assigned to the ref.</p> </li> </ul> <div class="note note-green">
<h4>Note</h4>
<div><p>Starting with React 19, <a href="https://react.dev/blog/2024/12/05/react-19#ref-as-a-prop"><code dir="ltr">ref</code> is available as a prop.</a> In React 18 and earlier, it was necessary to get the <code dir="ltr">ref</code> from <a href="forwardref"><code dir="ltr">forwardRef</code>.</a></p></div>
</div> <h4 id="returns">Returns <a href="#returns" aria-label="Link for Returns " title="Link for Returns "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h4> <p><code dir="ltr">useImperativeHandle</code> returns <code dir="ltr">undefined</code>.</p> <hr> <h2 id="usage">Usage <a href="#usage" aria-label="Link for Usage " title="Link for Usage "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <h3 id="exposing-a-custom-ref-handle-to-the-parent-component">Exposing a custom ref handle to the parent component <a href="#exposing-a-custom-ref-handle-to-the-parent-component" aria-label="Link for Exposing a custom ref handle to the parent component " title="Link for Exposing a custom ref handle to the parent component "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>To expose a DOM node to the parent element, pass in the <code dir="ltr">ref</code> prop to the node.</p> <pre data-language="jsx"><code><span>function</span> <span>MyInput</span><span>(</span><span>{</span> <span>ref</span> <span>}</span><span>)</span> <span>{</span>
  <span>return</span> <span>&lt;</span><span>input</span> <span>ref</span>=<span>{</span><span>ref</span><span>}</span> <span>/&gt;</span><span>;</span>
<span>}</span><span>;</span></code></pre> <p>With the code above, <a href="../../learn/manipulating-the-dom-with-refs">a ref to <code dir="ltr">MyInput</code> will receive the <code dir="ltr">&lt;input&gt;</code> DOM node.</a> However, you can expose a custom value instead. To customize the exposed handle, call <code dir="ltr">useImperativeHandle</code> at the top level of your component:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>useImperativeHandle</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>

<span>function</span> <span>MyInput</span><span>(</span><span>{</span> <span>ref</span> <span>}</span><span>)</span> <span>{</span>
  <span>useImperativeHandle</span><span>(</span><span>ref</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>return</span> <span>{</span>
      <span>// ... your methods ...</span>
    <span>}</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>&lt;</span><span>input</span> <span>/&gt;</span><span>;</span>
<span>}</span><span>;</span></code></pre> <p>Note that in the code above, the <code dir="ltr">ref</code> is no longer passed to the <code dir="ltr">&lt;input&gt;</code>.</p> <p>For example, suppose you don’t want to expose the entire <code dir="ltr">&lt;input&gt;</code> DOM node, but you want to expose two of its methods: <code dir="ltr">focus</code> and <code dir="ltr">scrollIntoView</code>. To do this, keep the real browser DOM in a separate ref. Then use <code dir="ltr">useImperativeHandle</code> to expose a handle with only the methods that you want the parent component to call:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>useRef</span><span>,</span> <span>useImperativeHandle</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>

<span>function</span> <span>MyInput</span><span>(</span><span>{</span> <span>ref</span> <span>}</span><span>)</span> <span>{</span>
  <span>const</span> <span>inputRef</span> = <span>useRef</span><span>(</span><span>null</span><span>)</span><span>;</span>

  <span>useImperativeHandle</span><span>(</span><span>ref</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>return</span> <span>{</span>
      <span>focus</span><span>(</span><span>)</span> <span>{</span>
        <span>inputRef</span>.<span>current</span>.<span>focus</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span>
      <span>scrollIntoView</span><span>(</span><span>)</span> <span>{</span>
        <span>inputRef</span>.<span>current</span>.<span>scrollIntoView</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span>
    <span>}</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>&lt;</span><span>input</span> <span>ref</span>=<span>{</span><span>inputRef</span><span>}</span> <span>/&gt;</span><span>;</span>
<span>}</span><span>;</span></code></pre> <p>Now, if the parent component gets a ref to <code dir="ltr">MyInput</code>, it will be able to call the <code dir="ltr">focus</code> and <code dir="ltr">scrollIntoView</code> methods on it. However, it will not have full access to the underlying <code dir="ltr">&lt;input&gt;</code> DOM node.</p> 
<pre data-language="jsx"><span>import</span> <span>{</span> <span>useRef</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>
<span>import</span> <span>MyInput</span> <span>from</span> <span>'./MyInput.js'</span><span>;</span>

<span>export</span> <span>default</span> <span>function</span> <span>Form</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>ref</span> = <span>useRef</span><span>(</span><span>null</span><span>)</span><span>;</span>

  <span>function</span> <span>handleClick</span><span>(</span><span>)</span> <span>{</span>
    <span>ref</span>.<span>current</span>.<span>focus</span><span>(</span><span>)</span><span>;</span>
    <span>// This won't work because the DOM node isn't exposed:</span>
    <span>// ref.current.style.opacity = 0.5;</span>
  <span>}</span>

  <span>return</span> <span>(</span>
    <span>&lt;</span><span>form</span><span>&gt;</span>
      <span>&lt;</span><span>MyInput</span> <span>placeholder</span>=<span>"Enter your name"</span> <span>ref</span>=<span>{</span><span>ref</span><span>}</span> <span>/&gt;</span>
      <span>&lt;</span><span>button</span> <span>type</span>=<span>"button"</span> <span>onClick</span>=<span>{</span><span>handleClick</span><span>}</span><span>&gt;</span>
        Edit
      <span>&lt;/</span><span>button</span><span>&gt;</span>
    <span>&lt;/</span><span>form</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

</pre> <hr> <h3 id="exposing-your-own-imperative-methods">Exposing your own imperative methods <a href="#exposing-your-own-imperative-methods" aria-label="Link for Exposing your own imperative methods " title="Link for Exposing your own imperative methods "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>The methods you expose via an imperative handle don’t have to match the DOM methods exactly. For example, this <code dir="ltr">Post</code> component exposes a <code dir="ltr">scrollAndFocusAddComment</code> method via an imperative handle. This lets the parent <code dir="ltr">Page</code> scroll the list of comments <em>and</em> focus the input field when you click the button:</p> 
<pre data-language="jsx"><span>import</span> <span>{</span> <span>useRef</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>
<span>import</span> <span>Post</span> <span>from</span> <span>'./Post.js'</span><span>;</span>

<span>export</span> <span>default</span> <span>function</span> <span>Page</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>postRef</span> = <span>useRef</span><span>(</span><span>null</span><span>)</span><span>;</span>

  <span>function</span> <span>handleClick</span><span>(</span><span>)</span> <span>{</span>
    <span>postRef</span>.<span>current</span>.<span>scrollAndFocusAddComment</span><span>(</span><span>)</span><span>;</span>
  <span>}</span>

  <span>return</span> <span>(</span>
    <span>&lt;</span><span>&gt;</span>
      <span>&lt;</span><span>button</span> <span>onClick</span>=<span>{</span><span>handleClick</span><span>}</span><span>&gt;</span>
        Write a comment
      <span>&lt;/</span><span>button</span><span>&gt;</span>
      <span>&lt;</span><span>Post</span> <span>ref</span>=<span>{</span><span>postRef</span><span>}</span> <span>/&gt;</span>
    <span>&lt;/</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

</pre> <div class="note note-orange">
<h4>Pitfall</h4>
<div>
<p><strong>Do not overuse refs.</strong> You should only use refs for <em>imperative</em> behaviors that you can’t express as props: for example, scrolling to a node, focusing a node, triggering an animation, selecting text, and so on.</p>
<p><strong>If you can express something as a prop, you should not use a ref.</strong> For example, instead of exposing an imperative handle like <code dir="ltr">{ open, close }</code> from a <code dir="ltr">Modal</code> component, it is better to take <code dir="ltr">isOpen</code> as a prop like <code dir="ltr">&lt;Modal isOpen={isOpen} /&gt;</code>. <a href="../../learn/synchronizing-with-effects">Effects</a> can help you expose imperative behaviors via props.</p>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://react.dev/reference/react/useImperativeHandle" class="_attribution-link">https://react.dev/reference/react/useImperativeHandle</a>
  </p>
</div>
