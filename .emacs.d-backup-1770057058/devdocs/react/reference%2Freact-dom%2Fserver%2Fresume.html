<h1>resume<a href="#undefined" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h1>
<div>
<p><code dir="ltr">resume</code> streams a pre-rendered React tree to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="nofollow noopener noreferrer">Readable Web Stream.</a></p>
<pre data-language="jsx"><code><span>const</span> <span>stream</span> = <span>await</span> <span>resume</span><span>(</span><span>reactNode</span><span>,</span> <span>postponedState</span><span>,</span> <span>options</span>?<span>)</span></code></pre>
</div> <ul>
<li>
<a href="#reference">Reference </a><ul><li><a href="#resume"><code dir="ltr">resume(node, postponedState, options?)</code> </a></li></ul>
</li>
<li>
<a href="#usage">Usage </a><ul>
<li><a href="#resuming-a-prerender">Resuming a prerender </a></li>
<li><a href="#further-reading">Further reading </a></li>
</ul>
</li>
</ul> <div class="note note-green">
<h4>Note</h4>
<div><p>This API depends on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API" target="_blank" rel="nofollow noopener noreferrer">Web Streams.</a> For Node.js, use <a href="rendertopipeablestream"><code dir="ltr">resumeToNodeStream</code></a> instead.</p></div>
</div> <hr> <h2 id="reference">Reference <a href="#reference" aria-label="Link for Reference " title="Link for Reference "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <h3 id="resume">
<code dir="ltr">resume(node, postponedState, options?)</code> <a href="#resume" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Call <code dir="ltr">resume</code> to resume rendering a pre-rendered React tree as HTML into a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="nofollow noopener noreferrer">Readable Web Stream.</a></p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>resume</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>
<span>import</span> <span>{</span><span>getPostponedState</span><span>}</span> <span>from</span> <span>'./storage'</span><span>;</span>

<span>async</span> <span>function</span> <span>handler</span><span>(</span><span>request</span><span>,</span> <span>writable</span><span>)</span> <span>{</span>
  <span>const</span> <span>postponed</span> = <span>await</span> <span>getPostponedState</span><span>(</span><span>request</span><span>)</span><span>;</span>
  <span>const</span> <span>resumeStream</span> = <span>await</span> <span>resume</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>,</span> <span>postponed</span><span>)</span><span>;</span>
  <span>return</span> <span>resumeStream</span>.<span>pipeTo</span><span>(</span><span>writable</span><span>)</span>
<span>}</span></code></pre> <p><a href="#usage">See more examples below.</a></p> <h4 id="parameters">Parameters <a href="#parameters" aria-label="Link for Parameters " title="Link for Parameters "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h4> <ul> <li>
<code dir="ltr">reactNode</code>: The React node you called <code dir="ltr">prerender</code> with. For example, a JSX element like <code dir="ltr">&lt;App /&gt;</code>. It is expected to represent the entire document, so the <code dir="ltr">App</code> component should render the <code dir="ltr">&lt;html&gt;</code> tag.</li> <li>
<code dir="ltr">postponedState</code>: The opaque <code dir="ltr">postpone</code> object returned from a <a href="../static/index">prerender API</a>, loaded from wherever you stored it (e.g. redis, a file, or S3).</li> <li>
<strong>optional</strong> <code dir="ltr">options</code>: An object with streaming options. <ul> <li>
<strong>optional</strong> <code dir="ltr">nonce</code>: A <a target="_blank" rel="nofollow noopener noreferrer" href="http://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#nonce"><code dir="ltr">nonce</code></a> string to allow scripts for <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src" target="_blank" rel="nofollow noopener noreferrer"><code dir="ltr">script-src</code> Content-Security-Policy</a>.</li> <li>
<strong>optional</strong> <code dir="ltr">signal</code>: An <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal" target="_blank" rel="nofollow noopener noreferrer">abort signal</a> that lets you <a href="#aborting-server-rendering">abort server rendering</a> and render the rest on the client.</li> <li>
<strong>optional</strong> <code dir="ltr">onError</code>: A callback that fires whenever there is a server error, whether <a href="rendertoreadablestream#recovering-from-errors-outside-the-shell">recoverable</a> or <a href="rendertoreadablestream#recovering-from-errors-inside-the-shell">not.</a> By default, this only calls <code dir="ltr">console.error</code>. If you override it to <a href="rendertoreadablestream#logging-crashes-on-the-server">log crash reports,</a> make sure that you still call <code dir="ltr">console.error</code>.</li> </ul> </li> </ul> <h4 id="returns">Returns <a href="#returns" aria-label="Link for Returns " title="Link for Returns "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h4> <p><code dir="ltr">resume</code> returns a Promise:</p> <ul> <li>If <code dir="ltr">resume</code> successfully produced a <a href="rendertoreadablestream#specifying-what-goes-into-the-shell">shell</a>, that Promise will resolve to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="nofollow noopener noreferrer">Readable Web Stream.</a> that can be piped to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/WritableStream" target="_blank" rel="nofollow noopener noreferrer">Writable Web Stream.</a>.</li> <li>If an error happens in the shell, the Promise will reject with that error.</li> </ul> <p>The returned stream has an additional property:</p> <ul> <li>
<code dir="ltr">allReady</code>: A Promise that resolves when all rendering is complete. You can <code dir="ltr">await stream.allReady</code> before returning a response <a href="rendertoreadablestream#waiting-for-all-content-to-load-for-crawlers-and-static-generation">for crawlers and static generation.</a> If you do that, you won’t get any progressive loading. The stream will contain the final HTML.</li> </ul> <h4 id="caveats">Caveats <a href="#caveats" aria-label="Link for Caveats " title="Link for Caveats "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h4> <ul> <li>
<code dir="ltr">resume</code> does not accept options for <code dir="ltr">bootstrapScripts</code>, <code dir="ltr">bootstrapScriptContent</code>, or <code dir="ltr">bootstrapModules</code>. Instead, you need to pass these options to the <code dir="ltr">prerender</code> call that generates the <code dir="ltr">postponedState</code>. You can also inject bootstrap content into the writable stream manually.</li> <li>
<code dir="ltr">resume</code> does not accept <code dir="ltr">identifierPrefix</code> since the prefix needs to be the same in both <code dir="ltr">prerender</code> and <code dir="ltr">resume</code>.</li> <li>Since <code dir="ltr">nonce</code> cannot be provided to prerender, you should only provide <code dir="ltr">nonce</code> to <code dir="ltr">resume</code> if you’re not providing scripts to prerender.</li> <li>
<code dir="ltr">resume</code> re-renders from the root until it finds a component that was not fully pre-rendered. Only fully prerendered Components (the Component and its children finished prerendering) are skipped entirely.</li> </ul> <h2 id="usage">Usage <a href="#usage" aria-label="Link for Usage " title="Link for Usage "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <h3 id="resuming-a-prerender">Resuming a prerender <a href="#resuming-a-prerender" aria-label="Link for Resuming a prerender " title="Link for Resuming a prerender "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> 
<pre data-language="jsx"><span>import</span> <span>{</span>
  <span>flushReadableStreamToFrame</span><span>,</span>
  <span>getUser</span><span>,</span>
  <span>Postponed</span><span>,</span>
  <span>sleep</span><span>,</span>
<span>}</span> <span>from</span> <span>"./demo-helpers"</span><span>;</span>
<span>import</span> <span>{</span> <span>StrictMode</span><span>,</span> <span>Suspense</span><span>,</span> <span>use</span><span>,</span> <span>useEffect</span> <span>}</span> <span>from</span> <span>"react"</span><span>;</span>
<span>import</span> <span>{</span> <span>prerender</span> <span>}</span> <span>from</span> <span>"react-dom/static"</span><span>;</span>
<span>import</span> <span>{</span> <span>resume</span> <span>}</span> <span>from</span> <span>"react-dom/server"</span><span>;</span>
<span>import</span> <span>{</span> <span>hydrateRoot</span> <span>}</span> <span>from</span> <span>"react-dom/client"</span><span>;</span>

<span>function</span> <span>Header</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>&lt;</span><span>header</span><span>&gt;</span>Me and my descendants can be prerendered<span>&lt;/</span><span>header</span><span>&gt;</span><span>;</span>
<span>}</span>

<span>const</span> <span>{</span> <span>promise</span><span>:</span> <span>cookies</span><span>,</span> <span>resolve</span><span>:</span> <span>resolveCookies</span> <span>}</span> = <span>Promise</span>.<span>withResolvers</span><span>(</span><span>)</span><span>;</span>

<span>function</span> <span>Main</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>{</span> <span>sessionID</span> <span>}</span> = <span>use</span><span>(</span><span>cookies</span><span>)</span><span>;</span>
  <span>const</span> <span>user</span> = <span>getUser</span><span>(</span><span>sessionID</span><span>)</span><span>;</span>

  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>console</span>.<span>log</span><span>(</span><span>"reached interactivity!"</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span>&lt;</span><span>main</span><span>&gt;</span>
      Hello, <span>{</span><span>user</span>.<span>name</span><span>}</span>!
      <span>&lt;</span><span>button</span> <span>onClick</span>=<span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>console</span>.<span>log</span><span>(</span><span>"hydrated!"</span><span>)</span><span>}</span><span>&gt;</span>
        Clicking me requires hydration.
      <span>&lt;/</span><span>button</span><span>&gt;</span>
    <span>&lt;/</span><span>main</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>Shell</span><span>(</span><span>{</span> <span>children</span> <span>}</span><span>)</span> <span>{</span>
  <span>// In a real app, this is where you would put your html and body.</span>
  <span>// We're just using tags here we can include in an existing body for demonstration purposes</span>
  <span>return</span> <span>(</span>
    <span>&lt;</span><span>html</span><span>&gt;</span>
      <span>&lt;</span><span>body</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;/</span><span>body</span><span>&gt;</span>
    <span>&lt;/</span><span>html</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span>&lt;</span><span>Shell</span><span>&gt;</span>
      <span>&lt;</span><span>Suspense</span> <span>fallback</span>=<span>"loading header"</span><span>&gt;</span>
        <span>&lt;</span><span>Header</span> <span>/&gt;</span>
      <span>&lt;/</span><span>Suspense</span><span>&gt;</span>
      <span>&lt;</span><span>Suspense</span> <span>fallback</span>=<span>"loading main"</span><span>&gt;</span>
        <span>&lt;</span><span>Main</span> <span>/&gt;</span>
      <span>&lt;/</span><span>Suspense</span><span>&gt;</span>
    <span>&lt;/</span><span>Shell</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

<span>async</span> <span>function</span> <span>main</span><span>(</span><span>frame</span><span>)</span> <span>{</span>
  <span>// Layer 1</span>
  <span>const</span> <span>controller</span> = <span>new</span> <span>AbortController</span><span>(</span><span>)</span><span>;</span>
  <span>const</span> <span>prerenderedApp</span> = <span>prerender</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>,</span> <span>{</span>
    <span>signal</span><span>:</span> <span>controller</span>.<span>signal</span><span>,</span>
    <span>onError</span><span>(</span><span>error</span><span>)</span> <span>{</span>
      <span>if</span> <span>(</span><span>error</span> <span>instanceof</span> <span>Postponed</span><span>)</span> <span>{</span>
      <span>}</span> <span>else</span> <span>{</span>
        <span>console</span>.<span>error</span><span>(</span><span>error</span><span>)</span><span>;</span>
      <span>}</span>
    <span>}</span><span>,</span>
  <span>}</span><span>)</span><span>;</span>
  <span>// We're immediately aborting in a macrotask.</span>
  <span>// Any data fetching that's not available synchronously, or in a microtask, will not have finished.</span>
  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>controller</span>.<span>abort</span><span>(</span><span>new</span> <span>Postponed</span><span>(</span><span>)</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>const</span> <span>{</span> <span>prelude</span><span>,</span> <span>postponed</span> <span>}</span> = <span>await</span> <span>prerenderedApp</span><span>;</span>
  <span>await</span> <span>flushReadableStreamToFrame</span><span>(</span><span>prelude</span><span>,</span> <span>frame</span><span>)</span><span>;</span>

  <span>// Layer 2</span>
  <span>// Just waiting here for demonstration purposes.</span>
  <span>// In a real app, the prelude and postponed state would've been serialized in Layer 1 and Layer would deserialize them.</span>
  <span>// The prelude content could be flushed immediated as plain HTML while</span>
  <span>// React is continuing to render from where the prerender left off.</span>
  <span>await</span> <span>sleep</span><span>(</span><span>2000</span><span>)</span><span>;</span>

  <span>// You would get the cookies from the incoming HTTP request</span>
  <span>resolveCookies</span><span>(</span><span>{</span> <span>sessionID</span><span>:</span> <span>"abc"</span> <span>}</span><span>)</span><span>;</span>

  <span>const</span> <span>stream</span> = <span>await</span> <span>resume</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>,</span> <span>postponed</span><span>)</span><span>;</span>

  <span>await</span> <span>flushReadableStreamToFrame</span><span>(</span><span>stream</span><span>,</span> <span>frame</span><span>)</span><span>;</span>

  <span>// Layer 3</span>
  <span>// Just waiting here for demonstration purposes.</span>
  <span>await</span> <span>sleep</span><span>(</span><span>2000</span><span>)</span><span>;</span>

  <span>hydrateRoot</span><span>(</span><span>frame</span>.<span>contentWindow</span>.<span>document</span><span>,</span> <span>&lt;</span><span>App</span> <span>/&gt;</span><span>)</span><span>;</span>
<span>}</span>

<span>main</span><span>(</span><span>document</span>.<span>getElementById</span><span>(</span><span>"container"</span><span>)</span><span>)</span><span>;</span>

</pre> <h3 id="further-reading">Further reading <a href="#further-reading" aria-label="Link for Further reading " title="Link for Further reading "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Resuming behaves like <code dir="ltr">renderToReadableStream</code>. For more examples, check out the <a href="rendertoreadablestream#usage">usage section of <code dir="ltr">renderToReadableStream</code></a>. The <a href="../static/prerender#usage">usage section of <code dir="ltr">prerender</code></a> includes examples of how to use <code dir="ltr">prerender</code> specifically.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://react.dev/reference/react-dom/server/resume" class="_attribution-link">https://react.dev/reference/react-dom/server/resume</a>
  </p>
</div>
