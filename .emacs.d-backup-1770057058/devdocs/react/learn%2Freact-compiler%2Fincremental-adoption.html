<h1>Incremental Adoption<a href="#undefined" aria-label="Link for this heading" title="Link for this heading"><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h1>
<div><p>React Compiler can be adopted incrementally, allowing you to try it on specific parts of your codebase first. This guide shows you how to gradually roll out the compiler in existing projects.</p></div> <div class="note">
<h4>You will learn</h4>
<ul> <li>Why incremental adoption is recommended</li> <li>Using Babel overrides for directory-based adoption</li> <li>Using the “use memo” directive for opt-in compilation</li> <li>Using the “use no memo” directive to exclude components</li> <li>Runtime feature flags with gating</li> <li>Monitoring your adoption progress</li> </ul>
</div> <h2 id="why-incremental-adoption">Why Incremental Adoption? <a href="#why-incremental-adoption" aria-label="Link for Why Incremental Adoption? " title="Link for Why Incremental Adoption? "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>React Compiler is designed to optimize your entire codebase automatically, but you don’t have to adopt it all at once. Incremental adoption gives you control over the rollout process, letting you test the compiler on small parts of your app before expanding to the rest.</p> <p>Starting small helps you build confidence in the compiler’s optimizations. You can verify that your app behaves correctly with compiled code, measure performance improvements, and identify any edge cases specific to your codebase. This approach is especially valuable for production applications where stability is critical.</p> <p>Incremental adoption also makes it easier to address any Rules of React violations the compiler might find. Instead of fixing violations across your entire codebase at once, you can tackle them systematically as you expand compiler coverage. This keeps the migration manageable and reduces the risk of introducing bugs.</p> <p>By controlling which parts of your code get compiled, you can also run A/B tests to measure the real-world impact of the compiler’s optimizations. This data helps you make informed decisions about full adoption and demonstrates the value to your team.</p> <h2 id="approaches-to-incremental-adoption">Approaches to Incremental Adoption <a href="#approaches-to-incremental-adoption" aria-label="Link for Approaches to Incremental Adoption " title="Link for Approaches to Incremental Adoption "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>There are three main approaches to adopt React Compiler incrementally:</p> <ol> <li>
<strong>Babel overrides</strong> - Apply the compiler to specific directories</li> <li>
<strong>Opt-in with “use memo”</strong> - Only compile components that explicitly opt in</li> <li>
<strong>Runtime gating</strong> - Control compilation with feature flags</li> </ol> <p>All approaches allow you to test the compiler on specific parts of your application before full rollout.</p> <h2 id="directory-based-adoption">Directory-Based Adoption with Babel Overrides <a href="#directory-based-adoption" aria-label="Link for Directory-Based Adoption with Babel Overrides " title="Link for Directory-Based Adoption with Babel Overrides "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>Babel’s <code dir="ltr">overrides</code> option lets you apply different plugins to different parts of your codebase. This is ideal for gradually adopting React Compiler directory by directory.</p> <h3 id="basic-configuration">Basic Configuration <a href="#basic-configuration" aria-label="Link for Basic Configuration " title="Link for Basic Configuration "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Start by applying the compiler to a specific directory:</p> <pre data-language="jsx"><code><span>// babel.config.js</span>
<span>module</span>.<span>exports</span> = <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>// Global plugins that apply to all files</span>
  <span>]</span><span>,</span>
  <span>overrides</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>test</span><span>:</span> <span>'./src/modern/**/*.{js,jsx,ts,tsx}'</span><span>,</span>
      <span>plugins</span><span>:</span> <span>[</span>
        <span>'babel-plugin-react-compiler'</span>
      <span>]</span>
    <span>}</span>
  <span>]</span>
<span>}</span><span>;</span></code></pre> <h3 id="expanding-coverage">Expanding Coverage <a href="#expanding-coverage" aria-label="Link for Expanding Coverage " title="Link for Expanding Coverage "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>As you gain confidence, add more directories:</p> <pre data-language="jsx"><code><span>// babel.config.js</span>
<span>module</span>.<span>exports</span> = <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>// Global plugins</span>
  <span>]</span><span>,</span>
  <span>overrides</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>test</span><span>:</span> <span>[</span><span>'./src/modern/**/*.{js,jsx,ts,tsx}'</span><span>,</span> <span>'./src/features/**/*.{js,jsx,ts,tsx}'</span><span>]</span><span>,</span>
      <span>plugins</span><span>:</span> <span>[</span>
        <span>'babel-plugin-react-compiler'</span>
      <span>]</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>test</span><span>:</span> <span>'./src/legacy/**/*.{js,jsx,ts,tsx}'</span><span>,</span>
      <span>plugins</span><span>:</span> <span>[</span>
        <span>// Different plugins for legacy code</span>
      <span>]</span>
    <span>}</span>
  <span>]</span>
<span>}</span><span>;</span></code></pre> <h3 id="with-compiler-options">With Compiler Options <a href="#with-compiler-options" aria-label="Link for With Compiler Options " title="Link for With Compiler Options "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>You can also configure compiler options per override:</p> <pre data-language="jsx"><code><span>// babel.config.js</span>
<span>module</span>.<span>exports</span> = <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>overrides</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>test</span><span>:</span> <span>'./src/experimental/**/*.{js,jsx,ts,tsx}'</span><span>,</span>
      <span>plugins</span><span>:</span> <span>[</span>
        <span>[</span><span>'babel-plugin-react-compiler'</span><span>,</span> <span>{</span>
          <span>// options ...</span>
        <span>}</span><span>]</span>
      <span>]</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>test</span><span>:</span> <span>'./src/production/**/*.{js,jsx,ts,tsx}'</span><span>,</span>
      <span>plugins</span><span>:</span> <span>[</span>
        <span>[</span><span>'babel-plugin-react-compiler'</span><span>,</span> <span>{</span>
          <span>// options ...</span>
        <span>}</span><span>]</span>
      <span>]</span>
    <span>}</span>
  <span>]</span>
<span>}</span><span>;</span></code></pre> <h2 id="opt-in-mode-with-use-memo">Opt-in Mode with “use memo” <a href="#opt-in-mode-with-use-memo" aria-label="Link for Opt-in Mode with “use memo” " title="Link for Opt-in Mode with “use memo” "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>For maximum control, you can use <code dir="ltr">compilationMode: 'annotation'</code> to only compile components and hooks that explicitly opt in with the <code dir="ltr">"use memo"</code> directive.</p> <div class="note note-green">
<h4>Note</h4>
<div><p>This approach gives you fine-grained control over individual components and hooks. It’s useful when you want to test the compiler on specific components without affecting entire directories.</p></div>
</div> <h3 id="annotation-mode-configuration">Annotation Mode Configuration <a href="#annotation-mode-configuration" aria-label="Link for Annotation Mode Configuration " title="Link for Annotation Mode Configuration "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <pre data-language="jsx"><code><span>// babel.config.js</span>
<span>module</span>.<span>exports</span> = <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>[</span><span>'babel-plugin-react-compiler'</span><span>,</span> <span>{</span>
      <span>compilationMode</span><span>:</span> <span>'annotation'</span><span>,</span>
    <span>}</span><span>]</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span></code></pre> <h3 id="using-the-directive">Using the Directive <a href="#using-the-directive" aria-label="Link for Using the Directive " title="Link for Using the Directive "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Add <code dir="ltr">"use memo"</code> at the beginning of functions you want to compile:</p> <pre data-language="jsx"><code><span>function</span> <span>TodoList</span><span>(</span><span>{</span> <span>todos</span> <span>}</span><span>)</span> <span>{</span>
  <span>"use memo"</span><span>;</span> <span>// Opt this component into compilation</span>

  <span>const</span> <span>sortedTodos</span> = <span>todos</span>.<span>slice</span><span>(</span><span>)</span>.<span>sort</span><span>(</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span>&lt;</span><span>ul</span><span>&gt;</span>
      <span>{</span><span>sortedTodos</span>.<span>map</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>(</span>
        <span>&lt;</span><span>TodoItem</span> <span>key</span>=<span>{</span><span>todo</span>.<span>id</span><span>}</span> <span>todo</span>=<span>{</span><span>todo</span><span>}</span> <span>/&gt;</span>
      <span>)</span><span>)</span><span>}</span>
    <span>&lt;/</span><span>ul</span><span>&gt;</span>
  <span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>useSortedData</span><span>(</span><span>data</span><span>)</span> <span>{</span>
  <span>"use memo"</span><span>;</span> <span>// Opt this hook into compilation</span>

  <span>return</span> <span>data</span>.<span>slice</span><span>(</span><span>)</span>.<span>sort</span><span>(</span><span>)</span><span>;</span>
<span>}</span></code></pre> <p>With <code dir="ltr">compilationMode: 'annotation'</code>, you must:</p> <ul> <li>Add <code dir="ltr">"use memo"</code> to every component you want optimized</li> <li>Add <code dir="ltr">"use memo"</code> to every custom hook</li> <li>Remember to add it to new components</li> </ul> <p>This gives you precise control over which components are compiled while you evaluate the compiler’s impact.</p> <h2 id="runtime-feature-flags-with-gating">Runtime Feature Flags with Gating <a href="#runtime-feature-flags-with-gating" aria-label="Link for Runtime Feature Flags with Gating " title="Link for Runtime Feature Flags with Gating "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>The <code dir="ltr">gating</code> option enables you to control compilation at runtime using feature flags. This is useful for running A/B tests or gradually rolling out the compiler based on user segments.</p> <h3 id="how-gating-works">How Gating Works <a href="#how-gating-works" aria-label="Link for How Gating Works " title="Link for How Gating Works "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>The compiler wraps optimized code in a runtime check. If the gate returns <code dir="ltr">true</code>, the optimized version runs. Otherwise, the original code runs.</p> <h3 id="gating-configuration">Gating Configuration <a href="#gating-configuration" aria-label="Link for Gating Configuration " title="Link for Gating Configuration "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <pre data-language="jsx"><code><span>// babel.config.js</span>
<span>module</span>.<span>exports</span> = <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>[</span><span>'babel-plugin-react-compiler'</span><span>,</span> <span>{</span>
      <span>gating</span><span>:</span> <span>{</span>
        <span>source</span><span>:</span> <span>'ReactCompilerFeatureFlags'</span><span>,</span>
        <span>importSpecifierName</span><span>:</span> <span>'isCompilerEnabled'</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>]</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span></code></pre> <h3 id="implementing-the-feature-flag">Implementing the Feature Flag <a href="#implementing-the-feature-flag" aria-label="Link for Implementing the Feature Flag " title="Link for Implementing the Feature Flag "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h3> <p>Create a module that exports your gating function:</p> <pre data-language="jsx"><code><span>// ReactCompilerFeatureFlags.js</span>
<span>export</span> <span>function</span> <span>isCompilerEnabled</span><span>(</span><span>)</span> <span>{</span>
  <span>// Use your feature flag system</span>
  <span>return</span> <span>getFeatureFlag</span><span>(</span><span>'react-compiler-enabled'</span><span>)</span><span>;</span>
<span>}</span></code></pre> <h2 id="troubleshooting-adoption">Troubleshooting Adoption <a href="#troubleshooting-adoption" aria-label="Link for Troubleshooting Adoption " title="Link for Troubleshooting Adoption "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <p>If you encounter issues during adoption:</p> <ol> <li>Use <code dir="ltr">"use no memo"</code> to temporarily exclude problematic components</li> <li>Check the <a href="debugging">debugging guide</a> for common issues</li> <li>Fix Rules of React violations identified by the ESLint plugin</li> <li>Consider using <code dir="ltr">compilationMode: 'annotation'</code> for more gradual adoption</li> </ol> <h2 id="next-steps">Next Steps <a href="#next-steps" aria-label="Link for Next Steps " title="Link for Next Steps "><svg width="1em" height="1em" viewbox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z"></path></g></svg></a>
</h2> <ul> <li>Read the <a href="../../reference/react-compiler/configuration">configuration guide</a> for more options</li> <li>Learn about <a href="debugging">debugging techniques</a>
</li> <li>Check the <a href="../../reference/react-compiler/configuration">API reference</a> for all compiler options</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://react.dev/learn/react-compiler/incremental-adoption" class="_attribution-link">https://react.dev/learn/react-compiler/incremental-adoption</a>
  </p>
</div>
