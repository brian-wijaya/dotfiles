<h1 id="anonymous-analytics">Anonymous Analytics</h1> <p>Homebrew gathers anonymous analytics using InfluxDB. You will be notified the first time you run <code class="language-plaintext highlighter-rouge">brew update</code> or install Homebrew. Analytics are not enabled until after this notice is shown, to ensure that you can <a href="analytics#opting-out">opt out</a> without ever sending analytics data.</p> <h2 id="why">Why?</h2> <p>Homebrew is provided free of charge and run entirely by volunteers in their spare time. As a result, we do not have the resources to do detailed user studies of Homebrew users to decide on how best to design future features and prioritise current work. Anonymous analytics allow us to prioritise fixes and features based on how, where and when people use Homebrew. For example:</p> <ul> <li>If a formula is widely used and is failing often it will enable us to prioritise fixing that formula over others.</li> <li>Collecting the OS version allows us to decide which versions of macOS to prioritise for support and identify build failures that occur only on single versions.</li> <li>If a command is not widely used, it can be deprecated.</li> </ul> <h2 id="how-long">How Long?</h2> <p>Homebrew’s anonymous analytics has a 365 day retention period in InfluxDB.</p> <h2 id="what">What?</h2> <p>Homebrew’s analytics record some shared information for every formula or cask event:</p> <ul> <li>Whether the data is being sent from CI, e.g. <code class="language-plaintext highlighter-rouge">true</code> if the CI environment variable is set.</li> <li>Whether you are using the default install prefix (e.g. <code class="language-plaintext highlighter-rouge">/opt/homebrew</code>) or a custom one (e.g. <code class="language-plaintext highlighter-rouge">/home/mike/.brew</code>). If your prefix is custom, it will be sent as <code class="language-plaintext highlighter-rouge">custom-prefix</code> to preserve anonymity.</li> <li>Whether you are a Homebrew Developer, e.g. <code class="language-plaintext highlighter-rouge">true</code> if the <code class="language-plaintext highlighter-rouge">HOMEBREW_DEVELOPER</code> environment variable is set.</li> <li>Whether <code class="language-plaintext highlighter-rouge">devcmdrun</code> is set, e.g. <code class="language-plaintext highlighter-rouge">true</code> if you have ever run one of Homebrew’s developer commands.</li> <li>Your CPU’s architecture, e.g. <code class="language-plaintext highlighter-rouge">x86_64</code>.</li> <li>The OS you are using and its version number, e.g. <code class="language-plaintext highlighter-rouge">macOS 13</code>.</li> <li>The version of Homebrew, e.g. <code class="language-plaintext highlighter-rouge">4.0.0</code>.</li> </ul> <p>All analytics data previously sent to Google Analytics has been destroyed.</p> <p>Homebrew’s analytics records the following different events:</p> <ul> <li>The <code class="language-plaintext highlighter-rouge">install</code> event category and the Homebrew formula from a non-private GitHub tap you install plus any used options (e.g. <code class="language-plaintext highlighter-rouge">wget --HEAD</code>) as the action. This allows us to identify which formulae where work should be prioritised, as well as how to handle possible deprecation or removal of any.</li> <li>The <code class="language-plaintext highlighter-rouge">install_on_request</code> event category and the Homebrew formula from a non-private GitHub tap you have requested to install (e.g. when explicitly named with a <code class="language-plaintext highlighter-rouge">brew install</code>) plus options. This allows us to differentiate the formulae that users intend to install from those pulled in as dependencies.</li> <li>The <code class="language-plaintext highlighter-rouge">cask_install</code> event category and the Homebrew cask from a non-private GitHub tap you install as the action. This allows us to identify which casks where work should be prioritised, as well as how to handle possible deprecation or removal of any.</li> <li>The <code class="language-plaintext highlighter-rouge">build_error</code> event category and the Homebrew formula plus options that failed to install as the action, e.g. <code class="language-plaintext highlighter-rouge">wget --HEAD</code>. This allows us to identify formulae that may need fixing. The details or logs of the build error are not sent.</li> <li>The <code class="language-plaintext highlighter-rouge">command_run</code> event category and the command and flags you run as the action. This allows us to identify which commands and flags are most commonly used and which are not used at all.</li> <li>The <code class="language-plaintext highlighter-rouge">test_bot_test</code> event category is only used in Homebrew’s CI environment and is used to record the results of running tests on pull requests.</li> </ul> <p>You can also view all the information that is sent by Homebrew’s analytics by setting <code class="language-plaintext highlighter-rouge">HOMEBREW_ANALYTICS_DEBUG=1</code> in your environment. Please note this will also stop any analytics from being sent.</p> <p>It is impossible for the Homebrew developers to match any particular event to any particular user. We do not store or receive IP addresses.</p> <h2 id="whenwhere">When/Where?</h2> <p>Homebrew’s analytics are sent throughout Homebrew’s execution to InfluxDB over HTTPS.</p> <h2 id="who">Who?</h2> <p>Aggregates of analytics events are <a href="https://formulae.brew.sh/analytics/">publicly available</a>. A JSON API is also available. The majority of Homebrew maintainers are not granted more detailed analytics data beyond these public resources.</p> <h2 id="how">How?</h2> <p>The code is viewable in <a href="https://github.com/Homebrew/brew/blob/HEAD/Library/Homebrew/utils/analytics.rb"><code class="language-plaintext highlighter-rouge">analytics.rb</code></a> and <a href="https://github.com/Homebrew/brew/blob/HEAD/Library/Homebrew/utils/analytics.sh"><code class="language-plaintext highlighter-rouge">analytics.sh</code></a>. They are done in a separate background process and fail fast to avoid delaying any execution. They will fail immediately and silently if you have no network connection.</p> <h2 id="opting-out">Opting out</h2> <p>Homebrew analytics helps us maintainers and leaving it on is appreciated. However, if you want to opt out of Homebrew’s analytics, you can set this variable in your environment:</p> <pre data-language="bash">export HOMEBREW_NO_ANALYTICS=1</pre> <p>Alternatively, this will prevent analytics from ever being sent:</p> <pre data-language="bash">brew analytics off</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Analytics" class="_attribution-link">https://docs.brew.sh/Analytics</a>
  </p>
</div>
