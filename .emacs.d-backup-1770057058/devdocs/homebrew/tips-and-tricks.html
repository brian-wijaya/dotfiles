<h1 id="tips-and-tricks">Tips and Tricks</h1> <h2 id="install-previous-versions-of-formulae">Install previous versions of formulae</h2> <p>Some formulae in <code class="language-plaintext highlighter-rouge">homebrew/core</code> are made available as <a href="versions">versioned formulae</a> using a special naming format, e.g. <code class="language-plaintext highlighter-rouge">gcc@9</code>. If the version you‚Äôre looking for isn‚Äôt available, consider using <code class="language-plaintext highlighter-rouge">brew extract</code>.</p> <h2 id="quickly-remove-something-from-homebrews-prefix">Quickly remove something from Homebrew‚Äôs prefix</h2> <pre data-language="bash">brew unlink &lt;formula&gt;</pre> <p>This can be useful if a package can‚Äôt build against the version of something you have linked into Homebrew‚Äôs prefix.</p> <p>And of course, you can simply <code class="language-plaintext highlighter-rouge">brew link &lt;formula&gt;</code> again afterwards!</p> <h2 id="pre-download-a-file-for-a-formula">Pre-download a file for a formula</h2> <p>Sometimes it‚Äôs faster to download a file via means other than the strategies that are available as part of Homebrew. For example, Erlang provides a torrent that‚Äôll let you download at 4‚Äì5√ó compared to the normal HTTP method.</p> <p>Downloads are saved in the <code class="language-plaintext highlighter-rouge">downloads</code> subdirectory of Homebrew‚Äôs cache directory (as specified by <code class="language-plaintext highlighter-rouge">brew --cache</code>, e.g. <code class="language-plaintext highlighter-rouge">~/Library/Caches/Homebrew</code>) and renamed as <code class="language-plaintext highlighter-rouge">&lt;url-hash&gt;--&lt;formula&gt;-&lt;version&gt;</code>. The command <code class="language-plaintext highlighter-rouge">brew --cache --build-from-source &lt;formula&gt;</code> will print the expected path of the cached download, so after downloading the file, you can run <code class="language-plaintext highlighter-rouge">mv the_tarball "$(brew --cache --build-from-source &lt;formula&gt;)"</code> to relocate it to the cache.</p> <p>You can also pre-cache the download by using the command <code class="language-plaintext highlighter-rouge">brew fetch &lt;formula&gt;</code> which also displays its SHA-256 hash. This can be useful for updating formulae to new versions.</p> <h2 id="install-stuff-without-the-xcode-clt">Install stuff without the Xcode CLT</h2> <pre data-language="bash">brew sh          # or: eval "$(brew --env)"
gem install ronn # or c-programs</pre> <p>This imports the <code class="language-plaintext highlighter-rouge">brew</code> environment into your existing shell; <code class="language-plaintext highlighter-rouge">gem</code> will pick up the environment variables and be able to build. As a bonus, <code class="language-plaintext highlighter-rouge">brew</code>‚Äôs automatically determined optimization flags are set.</p> <h2 id="install-only-a-formulas-dependencies-not-the-formula">Install only a formula‚Äôs dependencies (not the formula)</h2> <pre data-language="bash">brew install --only-dependencies &lt;formula&gt;</pre> <h2 id="use-the-interactive-homebrew-shell">Use the interactive Homebrew shell</h2> <pre data-language="console">$ brew irb
==&gt; Interactive Homebrew Shell
Example commands available with: `brew irb --examples`
brew(main):001&gt; Formulary.factory("ace").methods - Object.methods
=&gt;
[:test,
 :install,
 :valid_platform?,
...
 :debug?,
 :verbose?,
 :quiet?]
 [:install, :test, :test_defined?, :sbin, :pkgshare, :elisp,
brew(main):002&gt;</pre> <h2 id="hide-the-beer-mug-emoji-when-finishing-a-build">Hide the beer mug emoji when finishing a build</h2> <pre data-language="bash">export HOMEBREW_NO_EMOJI=1</pre> <p>This sets the <code class="language-plaintext highlighter-rouge">HOMEBREW_NO_EMOJI</code> environment variable, causing Homebrew to hide all emoji.</p> <p>The beer emoji can also be replaced with other character(s):</p> <pre data-language="bash">export HOMEBREW_INSTALL_BADGE="‚òïÔ∏è üê∏"</pre> <h2 id="migrate-a-homebrew-installation-to-a-new-location">Migrate a Homebrew installation to a new location</h2> <p>Running <code class="language-plaintext highlighter-rouge">brew bundle dump</code> will record an installation to a <code class="language-plaintext highlighter-rouge">Brewfile</code> and <code class="language-plaintext highlighter-rouge">brew bundle install</code> will install from a <code class="language-plaintext highlighter-rouge">Brewfile</code>. See <code class="language-plaintext highlighter-rouge">brew bundle --help</code> for more details.</p> <h2 id="appoint-homebrew-cask-to-manage-a-manually-installed-app">Appoint Homebrew Cask to manage a manually-installed app</h2> <p>Run <code class="language-plaintext highlighter-rouge">brew install --cask</code> with the <code class="language-plaintext highlighter-rouge">--adopt</code> switch:</p> <pre data-language="console">$ brew install --cask --adopt textmate
==&gt; Downloading https://github.com/textmate/textmate/releases/download/v2.0.23/TextMate_2.0.23.tbz
...
==&gt; Installing Cask textmate
==&gt; Adopting existing App at '/Applications/TextMate.app'
==&gt; Linking Binary 'mate' to '/opt/homebrew/bin/mate'
üç∫  textmate was successfully installed!</pre> <h2 id="define-aliases-for-homebrew-commands">Define aliases for Homebrew commands</h2> <p>Use <a href="manpage#alias---edit-aliasaliascommand"><code class="language-plaintext highlighter-rouge">brew alias</code></a> to define custom commands that run other commands in <code class="language-plaintext highlighter-rouge">brew</code> or your shell, similar to the <code class="language-plaintext highlighter-rouge">alias</code> shell builtin.</p> <pre data-language="shell"># Add aliases
$ brew alias ug='upgrade'
$ brew alias i='install'

# Print all aliases
$ brew alias

# Print one alias
$ brew alias i

# Use your aliases like any other command
$ brew i git

# Remove an alias
$ brew unalias i

# Aliases can include other aliases
$ brew alias show='info'
$ brew alias print='show'
$ brew print git # will run `brew info git`</pre> <p>Note that names of stock Homebrew commands can‚Äôt be used as aliases.</p> <p>All aliased commands are prefixed with <code class="language-plaintext highlighter-rouge">brew</code>, unless they start with <code class="language-plaintext highlighter-rouge">!</code> or <code class="language-plaintext highlighter-rouge">%</code>:</p> <pre data-language="shell">$ brew alias ug='upgrade'
# `brew ug` ‚Üí `brew upgrade`

$ brew alias status='!git status'
# `brew status` ‚Üí `git status`</pre> <p>You may need single quotes to prevent your shell from interpreting <code class="language-plaintext highlighter-rouge">!</code>, but <code class="language-plaintext highlighter-rouge">%</code> will work for both quote types.</p> <pre data-language="shell"># Use shell expansion to preserve a local variable
$ mygit=/path/to/my/git
$ brew alias git="%$mygit"
# `brew git status` ‚Üí `/path/to/my/git status`</pre> <p>Aliases can be opened in <code class="language-plaintext highlighter-rouge">$EDITOR</code> with the <code class="language-plaintext highlighter-rouge">--edit</code> flag.</p> <pre data-language="shell"># Edit alias 'brew foo', creating if necessary
$ brew alias --edit foo
# Create and edit alias 'brew foo'
$ brew alias --edit foo=bar

# This works too
$ brew alias foo --edit
$ brew alias foo=bar --edit

# Open all aliases in $EDITOR
$ brew alias --edit</pre> <h2 id="editor-plugins">Editor plugins</h2> <h3 id="visual-studio-code">Visual Studio Code</h3> <ul> <li> <p><a href="https://marketplace.visualstudio.com/items?itemName=sharat.vscode-brewfile">Brewfile</a> adds Ruby syntax highlighting for <code class="language-plaintext highlighter-rouge">brew bundle</code>‚Äôs <code class="language-plaintext highlighter-rouge">Brewfile</code>s.</p> </li> <li> <p><a href="https://marketplace.visualstudio.com/items?itemName=beauallison.brew-services">Brew Services</a> is an extension for starting and stopping Homebrew services.</p> </li> </ul> <h3 id="sublime-text">Sublime Text</h3> <ul> <li>
<a href="https://github.com/samueljohn/Homebrew-formula-syntax">Homebrew-formula-syntax</a> can be installed with Package Control in Sublime Text 2/3, which adds highlighting for inline patches.</li> </ul> <h3 id="vim">Vim</h3> <ul> <li>
<a href="https://github.com/xu-cheng/brew.vim">brew.vim</a> adds highlighting to inline patches in Vim.</li> </ul> <h3 id="emacs">Emacs</h3> <ul> <li> <p><a href="https://github.com/dunn/homebrew-mode">homebrew-mode</a> provides syntax highlighting for inline patches as well as a number of helper functions for editing formula files.</p> </li> <li> <p><a href="https://github.com/hiddenlotus/pcmpl-homebrew">pcmpl-homebrew</a> provides completion for emacs shell-mode and eshell-mode.</p> </li> </ul> <h2 id="macos-terminalapp-enable-the-open-man-page-contextual-menu-item">macOS Terminal.app: Enable the ‚ÄúOpen man Page‚Äù contextual menu item</h2> <p>In the macOS Terminal, you can right-click on a command name (like <code class="language-plaintext highlighter-rouge">ls</code> or <code class="language-plaintext highlighter-rouge">tar</code>) and pop open its manpage in a new window by selecting ‚ÄúOpen man Page‚Äù.</p> <p>Terminal needs an extra hint on where to find manpages installed by Homebrew because it doesn‚Äôt load normal dotfiles like <code class="language-plaintext highlighter-rouge">~/.bash_profile</code> or <code class="language-plaintext highlighter-rouge">~/.zshrc</code>.</p> <pre data-language="bash">sudo mkdir -p /usr/local/etc/man.d
echo "MANPATH $(brew --prefix)/share/man" | sudo tee -a /usr/local/etc/man.d/homebrew.man.conf</pre> <p>If you‚Äôre using Homebrew on macOS Intel, you should also fix permissions afterwards with:</p> <pre data-language="bash">sudo chown -R "${USER}" /usr/local/etc</pre> <h2 id="use-a-caching-proxy-or-mirror-for-homebrew-bottles">Use a caching proxy or mirror for Homebrew bottles</h2> <p>You can configure Homebrew to retrieve bottles from a caching proxy or mirror.</p> <p>For example, in JFrog‚Äôs Artifactory, accessible at <code class="language-plaintext highlighter-rouge">https://artifacts.example.com</code>, configure a new ‚Äúremote‚Äù repository with <code class="language-plaintext highlighter-rouge">homebrew</code> as the ‚Äúrepository key‚Äù and <code class="language-plaintext highlighter-rouge">https://ghcr.io</code> as the URL.</p> <p>Then, set these environment variables for Homebrew to retrieve from the caching proxy.</p> <pre data-language="bash">export HOMEBREW_ARTIFACT_DOMAIN=https://artifacts.example.com/artifactory/homebrew/
export HOMEBREW_ARTIFACT_DOMAIN_NO_FALLBACK=1
export HOMEBREW_DOCKER_REGISTRY_BASIC_AUTH_TOKEN="$(printf 'anonymous:' | base64)"</pre> <h2 id="load-homebrew-from-the-same-dotfiles-on-different-operating-systems">Load Homebrew from the same dotfiles on different operating systems</h2> <p>Some users may want to use the same shell initialization files on macOS and Linux. Use this to detect the likely Homebrew installation directory and load Homebrew when it‚Äôs found. You may need to adapt this to your particular shell or other particulars of your environment.</p> <pre data-language="bash">command -v brew || export PATH="/opt/homebrew/bin:/home/linuxbrew/.linuxbrew/bin:/usr/local/bin"
command -v brew &amp;&amp; eval "$(brew shellenv)"</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Tips-and-Tricks" class="_attribution-link">https://docs.brew.sh/Tips-and-Tricks</a>
  </p>
</div>
