<h1 id="how-to-create-and-maintain-a-tap">How to Create and Maintain a Tap</h1> <p><a href="taps">Taps</a> are external sources of Homebrew formulae, casks and/or external commands. They can be created by anyone to provide their own formulae, casks and/or external commands to any Homebrew user.</p> <h2 id="creating-a-tap">Creating a tap</h2> <p>A tap is usually a Git repository available online, but you can use anything as long as it’s a protocol that Git understands, or even just a directory with files in it. If hosted on GitHub, we recommend that the repository’s name start with <code class="language-plaintext highlighter-rouge">homebrew-</code> so the short <code class="language-plaintext highlighter-rouge">brew tap</code> command can be used. See the <a href="manpage"><code class="language-plaintext highlighter-rouge">brew</code> manual page</a> for more information on repository naming.</p> <p>The <code class="language-plaintext highlighter-rouge">brew tap-new</code> command can be used to create a new tap along with some template files:</p> <pre data-language="console">$ brew tap-new $YOUR_GITHUB_USERNAME/homebrew-tap
Initialized empty Git repository in /opt/homebrew/Library/Taps/$YOUR_GITHUB_USERNAME/homebrew-tap/.git/
...
==&gt; Created $YOUR_GITHUB_USERNAME/tap
/opt/homebrew/Library/Taps/$YOUR_GITHUB_USERNAME/homebrew-tap</pre> <p>This creates a local tap with the proper directory structure. Next, you can push it to a new GitHub repository by running (from any directory):</p> <pre data-language="console">$ brew install gh
...
$ gh repo create $YOUR_GITHUB_USERNAME/homebrew-tap --push --public --source "$(brew --repository $YOUR_GITHUB_USERNAME/homebrew-tap)"
✓ Created repository $YOUR_GITHUB_USERNAME/homebrew-tap on github.com
  https://github.com/$YOUR_GITHUB_USERNAME/homebrew-tap
✓ Added remote https://github.com/$YOUR_GITHUB_USERNAME/homebrew-tap.git
...
✓ Pushed commits to https://github.com/$YOUR_GITHUB_USERNAME/homebrew-tap.git</pre> <p>Assuming you leave the default <code class="language-plaintext highlighter-rouge">.github/workflows</code> files in place, <a href="https://brew.sh/2020/11/18/homebrew-tap-with-bottles-uploaded-to-github-releases">“bottles” (binary packages) will be built and uploaded to GitHub Releases</a>.</p> <p>If you run <code class="language-plaintext highlighter-rouge">brew tap-new --github-packages</code>, you can upload to GitHub Packages instead.</p> <p>Tap formulae follow the same format as the core’s ones, and can be added under either the <code class="language-plaintext highlighter-rouge">Formula</code> subdirectory, the <code class="language-plaintext highlighter-rouge">HomebrewFormula</code> subdirectory or the repository’s root. The first available directory is used, other locations will be ignored. We recommend the use of subdirectories because it makes the repository organisation easier to grasp, and top-level files are not mixed with formulae.</p> <p>See <a href="https://github.com/Homebrew/homebrew-core">homebrew/core</a> for an example of a tap with a <code class="language-plaintext highlighter-rouge">Formula</code> subdirectory.</p> <h3 id="creating-your-formula-or-cask">Creating your formula or cask</h3> <p>Run <code class="language-plaintext highlighter-rouge">brew create</code> to create a formula or cask file in your tap and open it in your text editor:</p> <pre data-language="console">$ brew create https://mirror.ibcp.fr/pub/gnu/wget/wget-1.25.0.tar.gz --tap $YOUR_GITHUB_USERNAME/homebrew-tap --set-name $YOUR_GITHUB_USERNAME-wget
==&gt; Downloading from https://mirror.ibcp.fr/pub/gnu/wget/wget-1.25.0.tar.gz
...
Editing /opt/homebrew/Library/Taps/$YOUR_GITHUB_USERNAME/homebrew-tap/Formula/$YOUR_GITHUB_USERNAME-wget.rb</pre> <p>After that, follow the <a href="adding-software-to-homebrew">Adding Software to Homebrew</a> guide to create your formula or cask file.</p> <p>Finally, <code class="language-plaintext highlighter-rouge">git add</code>, <code class="language-plaintext highlighter-rouge">git commit</code> and <code class="language-plaintext highlighter-rouge">git push</code> your formula or cask to your tap and others can use it too.</p> <h3 id="naming-your-formulae-to-avoid-clashes">Naming your formulae to avoid clashes</h3> <p>If a formula in your tap has the same name as a Homebrew/homebrew-core formula they cannot be installed side-by-side. If you wish to create a different version of a formula that’s in Homebrew/homebrew-core (e.g. with <code class="language-plaintext highlighter-rouge">option</code>s) consider giving it a different name; e.g. <code class="language-plaintext highlighter-rouge">nginx-full</code> for a more full-featured <code class="language-plaintext highlighter-rouge">nginx</code> formula. This will allow both <code class="language-plaintext highlighter-rouge">nginx</code> and <code class="language-plaintext highlighter-rouge">nginx-full</code> to be installed at the same time (assuming one is <a href="faq#what-does-keg-only-mean">keg-only</a> or the linked files do not clash).</p> <h2 id="installing">Installing</h2> <p>There are two ways users can install formulae from your tap:</p> <h3 id="direct-installation-recommended">Direct installation (recommended)</h3> <p>Users can install any of your formulae directly with <code class="language-plaintext highlighter-rouge">brew install user/repository/formula</code>. Homebrew will automatically add your tap before installing the formula:</p> <pre data-language="console">$ brew install alice/homebrew-tap/my-script
==&gt; Tapping alice/homebrew-tap
Cloning into '/opt/homebrew/Library/Taps/alice/homebrew-tap'...
...
==&gt; Installing my-script from alice/homebrew-tap</pre> <p>This is the most convenient method for users as it requires only one command.</p> <h3 id="manual-tap-installation">Manual tap installation</h3> <p>To install your tap without installing any formula at the same time, users can add it with the <a href="taps"><code class="language-plaintext highlighter-rouge">brew tap</code> command</a>:</p> <pre data-language="console"># For GitHub repositories
$ brew tap user/repository

# For repositories hosted elsewhere
$ brew tap user/repo &lt;URL&gt;</pre> <p>Where <code class="language-plaintext highlighter-rouge">user</code> is your GitHub username, <code class="language-plaintext highlighter-rouge">repository</code> is your repository name, and <code class="language-plaintext highlighter-rouge">&lt;URL&gt;</code> is your Git clone URL for non-GitHub repositories.</p> <p>After tapping, users can install your formulae either with:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">brew install foo</code> if there’s no core formula with the same name</li> <li>
<code class="language-plaintext highlighter-rouge">brew install user/repository/foo</code> to avoid conflicts with core formulae</li> </ul> <h2 id="maintaining-a-tap">Maintaining a tap</h2> <p>A tap is just a Git repository so you don’t have to do anything specific when making modifications, apart from committing and pushing your changes.</p> <h3 id="updating">Updating</h3> <p>Once your tap is installed, Homebrew will update it each time a user runs <code class="language-plaintext highlighter-rouge">brew update</code>. Outdated formulae will be upgraded when a user runs <code class="language-plaintext highlighter-rouge">brew upgrade</code>, like core formulae.</p> <h3 id="best-practices">Best practices</h3> <ul> <li>
<strong>Keep your tap up to date</strong>: Regularly update your formulae to the latest versions of the software you’re packaging</li> <li>
<strong>Test your formulae</strong>: Before pushing changes, test your formulae locally with <code class="language-plaintext highlighter-rouge">brew install --build-from-source user/repository/formula</code>
</li> <li>
<strong>Use semantic versioning</strong>: Tag your releases with version numbers (e.g. <code class="language-plaintext highlighter-rouge">1.0.0</code>) to make it easier for users to track changes</li> <li>
<strong>Provide clear documentation</strong>: Include a <code class="language-plaintext highlighter-rouge">README</code> in your tap repository explaining what your formulae do and how to use them</li> <li>
<strong>Handle dependencies</strong>: Make sure your formulae properly declare all dependencies using <code class="language-plaintext highlighter-rouge">depends_on</code>
</li> </ul> <h3 id="troubleshooting">Troubleshooting</h3> <ul> <li>
<strong>Formula not found after installation</strong>: Make sure your formula file is in the correct location (<code class="language-plaintext highlighter-rouge">Formula/</code> subdirectory) and has the right file extension (<code class="language-plaintext highlighter-rouge">.rb</code>).</li> <li> <p><strong>Installation fails</strong>: Check that your formula’s <code class="language-plaintext highlighter-rouge">url</code> and <code class="language-plaintext highlighter-rouge">sha256</code> values are correct. You can verify the SHA256 with:</p> <pre data-language="console">curl -L &lt;URL&gt; | shasum -a 256</pre> </li> <li>
<strong>Tap not updating</strong>: Users may need to run <code class="language-plaintext highlighter-rouge">brew untap user/repository &amp;&amp; brew tap user/repository</code> to force a fresh clone of your tap.</li> <li>
<strong>Conflicts with core formulae</strong>: If your formula conflicts with a core formula, consider renaming it or making it <a href="faq#what-does-keg-only-mean">keg-only</a>.</li> </ul> <h2 id="casks">Casks</h2> <p>Casks can also be installed from a tap. Casks can be included in taps with formulae, or in a tap with just casks. Place any cask files you wish to make available in a <code class="language-plaintext highlighter-rouge">Casks</code> directory at the top level of your tap.</p> <p>See <a href="https://github.com/Homebrew/homebrew-cask">homebrew/cask</a> for an example of a tap with a <code class="language-plaintext highlighter-rouge">Casks</code> subdirectory.</p> <h3 id="naming">Naming</h3> <p>Unlike formulae, casks must have globally unique names to avoid clashes. This can be achieved by e.g. prepending the cask name with your GitHub username: <code class="language-plaintext highlighter-rouge">username-formula-name</code>.</p> <h2 id="external-commands">External commands</h2> <p>You can provide your tap users with custom <code class="language-plaintext highlighter-rouge">brew</code> commands by adding them in a <code class="language-plaintext highlighter-rouge">cmd</code> subdirectory. <a href="external-commands">Read more on external commands</a>.</p> <h2 id="upstream-taps">Upstream taps</h2> <p>Some upstream software providers like to package their software in their own Homebrew tap. When their software is <a href="acceptable-formulae">eligible for Homebrew/homebrew-core</a> we prefer to maintain software there for ease of updates, improved discoverability and use of tools such as <a href="https://formulae.brew.sh/">formulae.brew.sh</a>.</p> <p>We are not willing to remove software packaged in Homebrew/homebrew-core in favour of an upstream tap. We are not willing to instruct users of our formulae to use an upstream tap instead. If upstream projects have issues with how Homebrew packages your software: please file issues (or, ideally, pull requests) to address these problems.</p> <p>There’s an increasing desire in commercial open source about “maintaining control” e.g. defining exactly what binaries are shipping to users. Not supporting users (or even software distributions) to build-from-source is antithetical to the values of open source. If you think Homebrew’s perspective is annoying on this: try and see how Debian responds to requests to ship your binaries.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/How-to-Create-and-Maintain-a-Tap" class="_attribution-link">https://docs.brew.sh/How-to-Create-and-Maintain-a-Tap</a>
  </p>
</div>
