<h1 id="cask-cookbook">Cask Cookbook</h1> <p>Each cask is a Ruby block, beginning with a special header line. The cask definition itself is always enclosed in a <code class="language-plaintext highlighter-rouge">do … end</code> block. Example:</p> <pre data-language="ruby">cask "anybar" do
  version "0.2.3"
  sha256 "c87dbc6aff5411676a471e84905d69c671b62b93b1210bd95c9d776d087de95c"

  url "https://github.com/tonsky/AnyBar/releases/download/#{version}/AnyBar-#{version}.zip"
  name "AnyBar"
  desc "Menu bar status indicator"
  homepage "https://github.com/tonsky/AnyBar"

  app "AnyBar.app"
end</pre> <ul id="markdown-toc"> <li><a href="#the-cask-language-is-declarative" id="markdown-toc-the-cask-language-is-declarative">The cask language is declarative</a></li> <li><a href="#header-line-details" id="markdown-toc-header-line-details">Header line details</a></li> <li><a href="#stanza-order" id="markdown-toc-stanza-order">Stanza order</a></li> <li>
<a href="#stanzas" id="markdown-toc-stanzas">Stanzas</a> <ul> <li><a href="#required-stanzas" id="markdown-toc-required-stanzas">Required stanzas</a></li> <li><a href="#at-least-one-artifact-stanza-is-also-required" id="markdown-toc-at-least-one-artifact-stanza-is-also-required">At least one artifact stanza is also required</a></li> <li><a href="#optional-stanzas" id="markdown-toc-optional-stanzas">Optional stanzas</a></li> </ul> </li> <li>
<a href="#stanza-descriptions" id="markdown-toc-stanza-descriptions">Stanza descriptions</a> <ul> <li><a href="#stanza-app" id="markdown-toc-stanza-app">Stanza: <code class="language-plaintext highlighter-rouge">app</code></a></li> <li><a href="#stanza-binary" id="markdown-toc-stanza-binary">Stanza: <code class="language-plaintext highlighter-rouge">binary</code></a></li> <li><a href="#stanza-rename" id="markdown-toc-stanza-rename">Stanza: <code class="language-plaintext highlighter-rouge">rename</code></a></li> <li><a href="#stanza-caveats" id="markdown-toc-stanza-caveats">Stanza: <code class="language-plaintext highlighter-rouge">caveats</code></a></li> <li><a href="#stanza-conflicts_with" id="markdown-toc-stanza-conflicts_with">Stanza: <code class="language-plaintext highlighter-rouge">conflicts_with</code></a></li> <li><a href="#stanza-depends_on" id="markdown-toc-stanza-depends_on">Stanza: <code class="language-plaintext highlighter-rouge">depends_on</code></a></li> <li><a href="#stanza-deprecate--disable" id="markdown-toc-stanza-deprecate--disable">Stanza: <code class="language-plaintext highlighter-rouge">deprecate!</code> / <code class="language-plaintext highlighter-rouge">disable!</code></a></li> <li><a href="#stanza-desc" id="markdown-toc-stanza-desc">Stanza: <code class="language-plaintext highlighter-rouge">desc</code></a></li> <li><a href="#stanza-flight" id="markdown-toc-stanza-flight">Stanza: <code class="language-plaintext highlighter-rouge">*flight</code></a></li> <li><a href="#stanza-installer" id="markdown-toc-stanza-installer">Stanza: <code class="language-plaintext highlighter-rouge">installer</code></a></li> <li><a href="#stanza-language" id="markdown-toc-stanza-language">Stanza: <code class="language-plaintext highlighter-rouge">language</code></a></li> <li><a href="#stanza-livecheck" id="markdown-toc-stanza-livecheck">Stanza: <code class="language-plaintext highlighter-rouge">livecheck</code></a></li> <li><a href="#stanza-no_autobump" id="markdown-toc-stanza-no_autobump">Stanza: <code class="language-plaintext highlighter-rouge">no_autobump!</code></a></li> <li><a href="#stanza-name" id="markdown-toc-stanza-name">Stanza: <code class="language-plaintext highlighter-rouge">name</code></a></li> <li><a href="#stanza-pkg" id="markdown-toc-stanza-pkg">Stanza: <code class="language-plaintext highlighter-rouge">pkg</code></a></li> <li><a href="#stanza-sha256" id="markdown-toc-stanza-sha256">Stanza: <code class="language-plaintext highlighter-rouge">sha256</code></a></li> <li><a href="#stanza-suite" id="markdown-toc-stanza-suite">Stanza: <code class="language-plaintext highlighter-rouge">suite</code></a></li> <li><a href="#stanza-uninstall" id="markdown-toc-stanza-uninstall">Stanza: <code class="language-plaintext highlighter-rouge">uninstall</code></a></li> <li><a href="#stanza-url" id="markdown-toc-stanza-url">Stanza: <code class="language-plaintext highlighter-rouge">url</code></a></li> <li><a href="#stanza-version" id="markdown-toc-stanza-version">Stanza: <code class="language-plaintext highlighter-rouge">version</code></a></li> <li><a href="#stanza-zap" id="markdown-toc-stanza-zap">Stanza: <code class="language-plaintext highlighter-rouge">zap</code></a></li> </ul> </li> <li>
<a href="#conditional-statements" id="markdown-toc-conditional-statements">Conditional statements</a> <ul> <li><a href="#handling-different-system-configurations" id="markdown-toc-handling-different-system-configurations">Handling different system configurations</a></li> <li><a href="#switch-between-languages-or-regions" id="markdown-toc-switch-between-languages-or-regions">Switch between languages or regions</a></li> </ul> </li> <li><a href="#arbitrary-ruby-methods" id="markdown-toc-arbitrary-ruby-methods">Arbitrary Ruby methods</a></li> <li>
<a href="#token-reference" id="markdown-toc-token-reference">Token reference</a> <ul> <li><a href="#purpose" id="markdown-toc-purpose">Purpose</a></li> <li><a href="#finding-the-simplified-name-of-the-vendors-distribution" id="markdown-toc-finding-the-simplified-name-of-the-vendors-distribution">Finding the simplified name of the vendor’s distribution</a></li> <li><a href="#converting-the-simplified-name-to-a-token" id="markdown-toc-converting-the-simplified-name-to-a-token">Converting the simplified name to a token</a></li> <li><a href="#cask-filenames" id="markdown-toc-cask-filenames">Cask filenames</a></li> <li><a href="#cask-headers" id="markdown-toc-cask-headers">Cask headers</a></li> <li><a href="#cask-token-examples" id="markdown-toc-cask-token-examples">Cask token examples</a></li> <li><a href="#special-affixes" id="markdown-toc-special-affixes">Special affixes</a></li> </ul> </li> </ul> <h2 id="the-cask-language-is-declarative">The cask language is declarative</h2> <p>Each cask contains a series of stanzas (or “fields”) which <em>declare</em> how the software is to be obtained and installed. In a declarative language, the author does not need to worry about <strong>order</strong>. As long as all the needed fields are present, Homebrew Cask will figure out what needs to be done at install time.</p> <p>To make maintenance easier, the most-frequently-updated stanzas are usually placed at the top. But that’s a convention, not a rule.</p> <p>Exception: <code class="language-plaintext highlighter-rouge">do</code> blocks such as <code class="language-plaintext highlighter-rouge">postflight</code> may enclose a block of pure Ruby code. Lines within that block follow a procedural (order-dependent) paradigm.</p> <h2 id="header-line-details">Header line details</h2> <p>The cask name (<a href="#token-reference"><code class="language-plaintext highlighter-rouge">&lt;cask-token&gt;</code></a>) on the header line <code class="language-plaintext highlighter-rouge">cask &lt;cask-token&gt; do</code> should match the cask filename, without the <code class="language-plaintext highlighter-rouge">.rb</code> extension, enclosed in double quotes.</p> <p>There are currently some arbitrary limitations on cask tokens which are in the process of being removed. GitHub Actions will catch any errors during the transition.</p> <h2 id="stanza-order">Stanza order</h2> <p>Having a common order for stanzas makes casks easier to update and parse. Below is the complete stanza sequence (no cask will have all stanzas). The empty lines shown here are also important, as they help to visually delimit information.</p> <pre data-language="plaintext">arch
os

version
sha256

language

url
name
desc
homepage

livecheck

no_autobump!

deprecate!
disable!

auto_updates
conflicts_with
depends_on
container

rename

suite
app
pkg
installer
binary
manpage
bash_completion
fish_completion
zsh_completion
colorpicker
dictionary
font
input_method
internet_plugin
keyboard_layout
prefpane
mdimporter
screen_saver
service
audio_unit_plugin
vst_plugin
vst3_plugin
artifact, target: # target: shown here as is required with `artifact`
stage_only

preflight

postflight

uninstall_preflight

uninstall_postflight

uninstall

zap

caveats</pre> <p>Note that every stanza that has additional parameters (<code class="language-plaintext highlighter-rouge">:symbols</code> after a <code class="language-plaintext highlighter-rouge">,</code>) shall have them on separate lines, one per line, in alphabetical order. An exception is <code class="language-plaintext highlighter-rouge">target:</code> which typically consists of short lines.</p> <h2 id="stanzas">Stanzas</h2> <h3 id="required-stanzas">Required stanzas</h3> <p>Each of the following stanzas is required for every cask.</p> <table> <thead> <tr> <th>name</th> <th style="text-align: center">multiple occurrences allowed?</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><a href="#stanza-version"><code class="language-plaintext highlighter-rouge">version</code></a></td> <td style="text-align: center">no</td> <td>Application version, or the special value <code class="language-plaintext highlighter-rouge">:latest</code>.</td> </tr> <tr> <td><a href="#stanza-sha256"><code class="language-plaintext highlighter-rouge">sha256</code></a></td> <td style="text-align: center">no</td> <td>SHA-256 checksum of the file downloaded from <code class="language-plaintext highlighter-rouge">url</code> as calculated by the command <code class="language-plaintext highlighter-rouge">shasum -a 256 &lt;file&gt;</code>, or the special value <code class="language-plaintext highlighter-rouge">:no_check</code>.</td> </tr> <tr> <td><a href="#stanza-url"><code class="language-plaintext highlighter-rouge">url</code></a></td> <td style="text-align: center">no</td> <td>URL to the <code class="language-plaintext highlighter-rouge">.dmg</code>/<code class="language-plaintext highlighter-rouge">.zip</code>/<code class="language-plaintext highlighter-rouge">.tgz</code> file (or other common archive formats) that contains the application. A <a href="#when-url-and-homepage-domains-differ-add-verified">comment</a> should be added if the domains in the <code class="language-plaintext highlighter-rouge">url</code> and <code class="language-plaintext highlighter-rouge">homepage</code> stanzas differ.</td> </tr> <tr> <td><a href="#stanza-name"><code class="language-plaintext highlighter-rouge">name</code></a></td> <td style="text-align: center">yes</td> <td>String providing the full and proper name defined by the vendor.</td> </tr> <tr> <td><a href="#stanza-desc"><code class="language-plaintext highlighter-rouge">desc</code></a></td> <td style="text-align: center">no</td> <td>One-line description of the cask. Shown when running <code class="language-plaintext highlighter-rouge">brew info</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">homepage</code></td> <td style="text-align: center">no</td> <td>Application homepage; used for the <code class="language-plaintext highlighter-rouge">brew home</code> command.</td> </tr> <tr> <td><a href="#stanza-livecheck"><code class="language-plaintext highlighter-rouge">livecheck</code></a></td> <td style="text-align: center">no</td> <td>Ruby block describing how to find updates for this cask. Supersedes <code class="language-plaintext highlighter-rouge">appcast</code>.</td> </tr> <tr> <td><a href="#stanza-depends_on"><code class="language-plaintext highlighter-rouge">depends_on</code></a></td> <td style="text-align: center">yes</td> <td>List of dependencies and requirements for this cask.</td> </tr> <tr> <td><a href="#stanza-zap"><code class="language-plaintext highlighter-rouge">zap</code></a></td> <td style="text-align: center">yes</td> <td>Additional procedures for a more complete uninstall, including user files and shared resources.</td> </tr> </tbody> </table> <h3 id="at-least-one-artifact-stanza-is-also-required">At least one artifact stanza is also required</h3> <p>Each cask must declare one or more <a href="https://rubydoc.brew.sh/Cask/Artifact">artifacts</a> (i.e. something to install).</p> <table> <thead> <tr> <th>name</th> <th style="text-align: center">multiple occurrences allowed?</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><a href="#stanza-app"><code class="language-plaintext highlighter-rouge">app</code></a></td> <td style="text-align: center">yes</td> <td>Relative path to an <code class="language-plaintext highlighter-rouge">.app</code> that should be moved into the <code class="language-plaintext highlighter-rouge">/Applications</code> folder on installation.</td> </tr> <tr> <td><a href="#stanza-suite"><code class="language-plaintext highlighter-rouge">suite</code></a></td> <td style="text-align: center">yes</td> <td>Relative path to a containing directory that should be moved into the <code class="language-plaintext highlighter-rouge">/Applications</code> folder on installation.</td> </tr> <tr> <td><a href="#stanza-pkg"><code class="language-plaintext highlighter-rouge">pkg</code></a></td> <td style="text-align: center">yes</td> <td>Relative path to a <code class="language-plaintext highlighter-rouge">.pkg</code> file containing the distribution.</td> </tr> <tr> <td><a href="#stanza-installer"><code class="language-plaintext highlighter-rouge">installer</code></a></td> <td style="text-align: center">yes</td> <td>Describes an executable which must be run to complete the installation.</td> </tr> <tr> <td><a href="#stanza-binary"><code class="language-plaintext highlighter-rouge">binary</code></a></td> <td style="text-align: center">yes</td> <td>Relative path to a Binary that should be linked into the <code class="language-plaintext highlighter-rouge">$(brew --prefix)/bin</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">manpage</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Man Page that should be linked into the respective man page folder on installation, e.g. <code class="language-plaintext highlighter-rouge">/opt/homebrew/share/man/man3</code> for <code class="language-plaintext highlighter-rouge">my_app.3</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">bash_completion</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Bash completion file that should be linked into the <code class="language-plaintext highlighter-rouge">$(brew --prefix)/etc/bash_completion.d</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">fish_completion</code></td> <td style="text-align: center">yes</td> <td>Relative path to a fish completion file that should be linked into the <code class="language-plaintext highlighter-rouge">$(brew --prefix)/share/fish/vendor_completions.d</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">zsh_completion</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Zsh completion file that should be linked into the <code class="language-plaintext highlighter-rouge">$(brew --prefix)/share/zsh/site-functions</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">colorpicker</code></td> <td style="text-align: center">yes</td> <td>Relative path to a ColorPicker plugin that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/ColorPickers</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">dictionary</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Dictionary that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Dictionaries</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">font</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Font that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Fonts</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">input_method</code></td> <td style="text-align: center">yes</td> <td>Relative path to an Input Method that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Input Methods</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">internet_plugin</code></td> <td style="text-align: center">yes</td> <td>Relative path to an Internet Plugin that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Internet Plug-Ins</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">keyboard_layout</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Keyboard Layout that should be moved into the <code class="language-plaintext highlighter-rouge">/Library/Keyboard Layouts</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">prefpane</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Preference Pane that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/PreferencePanes</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">mdimporter</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Spotlight Metadata Importer that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Spotlight</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">screen_saver</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Screen Saver that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Screen Savers</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">service</code></td> <td style="text-align: center">yes</td> <td>Relative path to a Service that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Services</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">audio_unit_plugin</code></td> <td style="text-align: center">yes</td> <td>Relative path to an Audio Unit Plugin that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Audio/Components</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">vst_plugin</code></td> <td style="text-align: center">yes</td> <td>Relative path to a VST Plugin that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Audio/VST</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">vst3_plugin</code></td> <td style="text-align: center">yes</td> <td>Relative path to a VST3 Plugin that should be moved into the <code class="language-plaintext highlighter-rouge">~/Library/Audio/VST3</code> folder on installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">artifact</code></td> <td style="text-align: center">yes</td> <td>Relative path to an arbitrary path that should be moved on installation. Must provide an absolute path as a <code class="language-plaintext highlighter-rouge">target</code>. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/b3c438d608d9702380edf10d5495e0727cf17108/Casks/f/free-gpgmail.rb#L44">free-gpgmail.rb</a>) This is only for unusual cases; the <code class="language-plaintext highlighter-rouge">app</code> stanza is strongly preferred when moving <code class="language-plaintext highlighter-rouge">.app</code> bundles.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">stage_only</code></td> <td style="text-align: center">no</td> <td>
<code class="language-plaintext highlighter-rouge">true</code>. Asserts that the cask contains no activatable artifacts.</td> </tr> </tbody> </table> <h3 id="optional-stanzas">Optional stanzas</h3> <table> <thead> <tr> <th>name</th> <th style="text-align: center">multiple occurrences allowed?</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><a href="#stanza-uninstall"><code class="language-plaintext highlighter-rouge">uninstall</code></a></td> <td style="text-align: center">yes</td> <td>Procedures to uninstall a cask. Optional unless a <code class="language-plaintext highlighter-rouge">pkg</code> or <code class="language-plaintext highlighter-rouge">installer</code> artifact stanza is used.</td> </tr> <tr> <td><a href="#stanza-conflicts_with"><code class="language-plaintext highlighter-rouge">conflicts_with</code></a></td> <td style="text-align: center">yes</td> <td>List of conflicts with this cask.</td> </tr> <tr> <td><a href="#stanza-caveats"><code class="language-plaintext highlighter-rouge">caveats</code></a></td> <td style="text-align: center">yes</td> <td>String or Ruby block providing the user with cask-specific information at install time.</td> </tr> <tr> <td><a href="#stanza-deprecate--disable"><code class="language-plaintext highlighter-rouge">deprecate!</code></a></td> <td style="text-align: center">no</td> <td>Date as a string in <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code> format and a string or symbol providing a reason.</td> </tr> <tr> <td><a href="#stanza-deprecate--disable"><code class="language-plaintext highlighter-rouge">disable!</code></a></td> <td style="text-align: center">no</td> <td>Date as a string in <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code> format and a string or symbol providing a reason.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">preflight</code></td> <td style="text-align: center">yes</td> <td>Ruby block containing preflight install operations (needed only in very rare cases).</td> </tr> <tr> <td><a href="#stanza-flight"><code class="language-plaintext highlighter-rouge">postflight</code></a></td> <td style="text-align: center">yes</td> <td>Ruby block containing postflight install operations.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">uninstall_preflight</code></td> <td style="text-align: center">yes</td> <td>Ruby block containing preflight uninstall operations (needed only in very rare cases).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">uninstall_postflight</code></td> <td style="text-align: center">yes</td> <td>Ruby block containing postflight uninstall operations.</td> </tr> <tr> <td><a href="#stanza-language"><code class="language-plaintext highlighter-rouge">language</code></a></td> <td style="text-align: center">required</td> <td>Ruby block, called with language code parameters, containing other stanzas and/or a return value.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">container nested:</code></td> <td style="text-align: center">no</td> <td>Relative path to an inner container that must be extracted before moving on with the installation. This allows for support of <code class="language-plaintext highlighter-rouge">.dmg</code> inside <code class="language-plaintext highlighter-rouge">.tar</code>, <code class="language-plaintext highlighter-rouge">.zip</code> inside <code class="language-plaintext highlighter-rouge">.dmg</code>, etc. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/b/blocs.rb#L17-L19">blocs.rb</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">container type:</code></td> <td style="text-align: center">no</td> <td>Symbol to override container-type autodetect. May be one of: <code class="language-plaintext highlighter-rouge">:air</code>, <code class="language-plaintext highlighter-rouge">:bz2</code>, <code class="language-plaintext highlighter-rouge">:cab</code>, <code class="language-plaintext highlighter-rouge">:dmg</code>, <code class="language-plaintext highlighter-rouge">:generic_unar</code>, <code class="language-plaintext highlighter-rouge">:gzip</code>, <code class="language-plaintext highlighter-rouge">:otf</code>, <code class="language-plaintext highlighter-rouge">:pkg</code>, <code class="language-plaintext highlighter-rouge">:rar</code>, <code class="language-plaintext highlighter-rouge">:seven_zip</code>, <code class="language-plaintext highlighter-rouge">:sit</code>, <code class="language-plaintext highlighter-rouge">:tar</code>, <code class="language-plaintext highlighter-rouge">:ttf</code>, <code class="language-plaintext highlighter-rouge">:xar</code>, <code class="language-plaintext highlighter-rouge">:zip</code>, <code class="language-plaintext highlighter-rouge">:naked</code>. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/p/parse.rb#L10">parse.rb</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">auto_updates</code></td> <td style="text-align: center">no</td> <td>
<code class="language-plaintext highlighter-rouge">true</code>. Asserts that the cask artifacts auto-update. Use if <code class="language-plaintext highlighter-rouge">Check for Updates…</code> or similar is present in an app menu, but not if it only opens a webpage and does not do the download and installation for you.</td> </tr> <tr> <td><a href="#stanza-no_autobump"><code class="language-plaintext highlighter-rouge">no_autobump!</code></a></td> <td style="text-align: center">no</td> <td>Allowed symbol or a string. Excludes cask from autobumping if set.</td> </tr> <tr> <td><a href="#stanza-rename"><code class="language-plaintext highlighter-rouge">rename</code></a></td> <td style="text-align: center">yes</td> <td>A pair of strings.</td> </tr> </tbody> </table> <h2 id="stanza-descriptions">Stanza descriptions</h2> <h3 id="stanza-app">Stanza: <code class="language-plaintext highlighter-rouge">app</code>
</h3> <p>In the simple case of a string argument to <code class="language-plaintext highlighter-rouge">app</code>, the source file is moved to the target <code class="language-plaintext highlighter-rouge">/Applications</code> directory. For example:</p> <pre data-language="ruby">app "Alfred 2.app"</pre> <p>by default moves the source to:</p> <pre data-language="bash">/Applications/Alfred 2.app</pre> <h4 id="renaming-the-target">Renaming the target</h4> <p>You can rename the target which appears in your <code class="language-plaintext highlighter-rouge">/Applications</code> directory by adding a <code class="language-plaintext highlighter-rouge">target:</code> key to <code class="language-plaintext highlighter-rouge">app</code>. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/s/scala-ide.rb#L24">scala-ide.rb</a>):</p> <pre data-language="ruby">app "eclipse.app", target: "Scala IDE.app"</pre> <h4 id="target-may-contain-an-absolute-path">
<em>target</em> may contain an absolute path</h4> <p>If <code class="language-plaintext highlighter-rouge">target:</code> has a leading slash, it is interpreted as an absolute path. The containing directory for the absolute path will be created if it does not already exist. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/s/sapmachine-jdk.rb#L21">sapmachine-jdk.rb</a>):</p> <pre data-language="ruby">artifact "sapmachine-jdk-#{version}.jdk", target: "/Library/Java/JavaVirtualMachines/sapmachine-jdk-#{version}.jdk"</pre> <h4 id="target-works-on-most-artifact-types">
<em>target</em> works on most artifact types</h4> <p>The <code class="language-plaintext highlighter-rouge">target:</code> key works similarly for most cask artifacts, such as <code class="language-plaintext highlighter-rouge">app</code>, <code class="language-plaintext highlighter-rouge">binary</code>, <code class="language-plaintext highlighter-rouge">bash_completion</code>, <code class="language-plaintext highlighter-rouge">fish_completion</code>, <code class="language-plaintext highlighter-rouge">zsh_completion</code>, <code class="language-plaintext highlighter-rouge">colorpicker</code>, <code class="language-plaintext highlighter-rouge">dictionary</code>, <code class="language-plaintext highlighter-rouge">font</code>, <code class="language-plaintext highlighter-rouge">input_method</code>, <code class="language-plaintext highlighter-rouge">internet_plugin</code>, <code class="language-plaintext highlighter-rouge">keyboard_layout</code>, <code class="language-plaintext highlighter-rouge">prefpane</code>, <code class="language-plaintext highlighter-rouge">mdimporter</code>, <code class="language-plaintext highlighter-rouge">screen_saver</code>, <code class="language-plaintext highlighter-rouge">service</code>, <code class="language-plaintext highlighter-rouge">suite</code>, <code class="language-plaintext highlighter-rouge">audio_unit_plugin</code>, <code class="language-plaintext highlighter-rouge">vst_plugin</code>, <code class="language-plaintext highlighter-rouge">vst3_plugin</code>, and <code class="language-plaintext highlighter-rouge">artifact</code>.</p> <h4 id="target-should-only-be-used-in-select-cases">
<em>target</em> should only be used in select cases</h4> <p>Don’t use <code class="language-plaintext highlighter-rouge">target:</code> for aesthetic reasons, like removing version numbers (<code class="language-plaintext highlighter-rouge">app "Slack #{version}.app", target: "Slack.app"</code>). Use it when it makes sense functionally and document your reason clearly in the cask, using one of the templates: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/i/imagemin.rb#L10">for clarity</a>; <a href="https://github.com/Homebrew/homebrew-cask/blob/8be96e3658ff7ab66ca40723c3018fc5e35e3735/Casks/x-moto.rb#L16">for consistency</a>; <a href="https://github.com/Homebrew/homebrew-cask/blob/4472df441468e2aa657005550e2b951c2ef817f4/Casks/t/telegram-desktop.rb#L20">to prevent conflicts</a>; <a href="https://github.com/Homebrew/homebrew-cask/blob/ff3e9c4a6623af44b8a071027e8dcf3f4edfc6d9/Casks/kivy.rb#L12">due to developer suggestion</a>.</p> <h3 id="stanza-binary">Stanza: <code class="language-plaintext highlighter-rouge">binary</code>
</h3> <p>In the simple case of a string argument to <code class="language-plaintext highlighter-rouge">binary</code>, the source file is linked into the <code class="language-plaintext highlighter-rouge">$(brew --prefix)/bin</code> directory on installation. For example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/326c44e93aeb8d4dd73acea14a99ae215c75fdd6/Casks/o/operadriver.rb#L15">operadriver.rb</a>):</p> <pre data-language="ruby">binary "operadriver_mac64/operadriver"</pre> <p>creates a symlink to:</p> <pre data-language="bash">$(brew --prefix)/bin/operadriver</pre> <p>from a source file such as:</p> <pre data-language="bash">$(brew --caskroom)/operadriver/106.0.5249.119/operadriver_mac64/operadriver</pre> <p>A binary (or multiple) can also be contained in an application bundle:</p> <pre data-language="ruby">app "Atom.app"
binary "#{appdir}/Atom.app/Contents/Resources/app/apm/bin/apm"</pre> <p>You can rename the target which appears in your binaries directory by adding a <code class="language-plaintext highlighter-rouge">target:</code> key to <code class="language-plaintext highlighter-rouge">binary</code>:</p> <pre data-language="ruby">binary "#{appdir}/Atom.app/Contents/Resources/app/atom.sh", target: "atom"</pre> <p>Behaviour and usage of <code class="language-plaintext highlighter-rouge">target:</code> is <a href="#renaming-the-target">the same as with <code class="language-plaintext highlighter-rouge">app</code></a>. However, for <code class="language-plaintext highlighter-rouge">binary</code> the select cases don’t apply as rigidly. It’s fine to take extra liberties with <code class="language-plaintext highlighter-rouge">target:</code> to be consistent with other command-line tools, like <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/g/godot.rb#L19">changing case</a>, <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/f/filebot.rb#L19">removing an extension</a>, or <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/f/fig.rb#L21">cleaning up the name</a>.</p> <h3 id="stanza-rename">Stanza: <code class="language-plaintext highlighter-rouge">rename</code>
</h3> <p>The <code class="language-plaintext highlighter-rouge">rename</code> stanza provides a convenience method to rename files to provide more practical access to them. This stanza should be used sparingly, and is reserved for scenarios where a the path of a file/directory is impossible to pre-determine.</p> <p>The example below can be used when the <code class="language-plaintext highlighter-rouge">pkg</code> path has a value such as timestamp that can’t be detected without extracting the archive it is distributed within.</p> <pre data-language="ruby"># Upstream provides a `pkg` - "foobar-&lt;timestamp&gt;.pkg"
rename "foobar-*.pkg", "foobar.pkg"</pre> <h3 id="stanza-caveats">Stanza: <code class="language-plaintext highlighter-rouge">caveats</code>
</h3> <p>Sometimes there are particularities with the installation of a piece of software that cannot or should not be handled programmatically by Homebrew Cask. In those instances, <code class="language-plaintext highlighter-rouge">caveats</code> is the way to inform the user. Information in <code class="language-plaintext highlighter-rouge">caveats</code> is displayed when a cask is invoked with either <code class="language-plaintext highlighter-rouge">install</code> or <code class="language-plaintext highlighter-rouge">info</code>.</p> <p>To avoid flooding users with too many messages (thus desensitising them to the important ones), <code class="language-plaintext highlighter-rouge">caveats</code> should be used sparingly and exclusively for installation-related matters. If you’re not sure whether a <code class="language-plaintext highlighter-rouge">caveat</code> you find pertinent is installation-related or not, ask a maintainer. As a general rule, if your case isn’t already covered in our comprehensive <a href="#caveats-mini-dsl"><code class="language-plaintext highlighter-rouge">caveats mini-DSL</code></a>, it’s unlikely to be accepted.</p> <h4 id="caveats-as-a-string">
<code class="language-plaintext highlighter-rouge">caveats</code> as a string</h4> <p>When <code class="language-plaintext highlighter-rouge">caveats</code> is a string, it is evaluated at compile time. The following methods are available for interpolation if <code class="language-plaintext highlighter-rouge">caveats</code> is placed in its customary position at the end of the cask:</p> <table> <thead> <tr> <th>method</th> <th>description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">token</code></td> <td>the cask token</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">version</code></td> <td>the cask version</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">homepage</code></td> <td>the cask homepage</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">caskroom_path</code></td> <td>the containing directory for this cask: <code class="language-plaintext highlighter-rouge">$(brew --caskroom)/&lt;token&gt;</code> (only available with block form)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">staged_path</code></td> <td>the staged location for this cask, including version number: <code class="language-plaintext highlighter-rouge">$(brew --caskroom)/&lt;token&gt;/&lt;version&gt;</code> (only available with block form)</td> </tr> </tbody> </table> <p>Example:</p> <pre data-language="ruby">caveats "Using #{token} may be hazardous to your health."</pre> <h4 id="caveats-as-a-block">
<code class="language-plaintext highlighter-rouge">caveats</code> as a block</h4> <p>When <code class="language-plaintext highlighter-rouge">caveats</code> is a Ruby block, evaluation is deferred until install time. Within a block you may refer to the <code class="language-plaintext highlighter-rouge">@cask</code> instance variable, and invoke <a href="https://rubydoc.brew.sh/Cask/Cask">any method available on <code class="language-plaintext highlighter-rouge">@cask</code></a>.</p> <h4 id="caveats-mini-dsl">
<code class="language-plaintext highlighter-rouge">caveats</code> mini-DSL</h4> <p>There is a mini-DSL available within <code class="language-plaintext highlighter-rouge">caveats</code> blocks.</p> <p>The following methods may be called to generate standard warning messages:</p> <table> <thead> <tr> <th>method</th> <th>description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">path_environment_variable "path"</code></td> <td>Users should make sure <code class="language-plaintext highlighter-rouge">path</code> is in their <code class="language-plaintext highlighter-rouge">PATH</code> environment variable.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">zsh_path_helper "path"</code></td> <td>
<code class="language-plaintext highlighter-rouge">zsh</code> users must take additional steps to make sure <code class="language-plaintext highlighter-rouge">path</code> is in their <code class="language-plaintext highlighter-rouge">PATH</code> environment variable.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">depends_on_java "version"</code></td> <td>Users should make sure they have the specified version of Java installed. <code class="language-plaintext highlighter-rouge">version</code> can be exact (e.g. <code class="language-plaintext highlighter-rouge">6</code>), a minimum (e.g. <code class="language-plaintext highlighter-rouge">7+</code>), or omitted (when any version works).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">requires_rosetta</code></td> <td>The cask requires Rosetta 2 for it to run on Apple Silicon.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">logout</code></td> <td>Users should log out and log back in to complete installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">reboot</code></td> <td>Users should reboot to complete installation.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">files_in_usr_local</code></td> <td>The cask installs files to <code class="language-plaintext highlighter-rouge">/usr/local</code>, which may confuse Homebrew.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">kext</code></td> <td>Users may need to enable their kexts in <em>System Settings → Privacy &amp; Security</em> (or <em>System Preferences → Security &amp; Privacy → General</em> in earlier macOS versions).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">unsigned_accessibility</code></td> <td>Users will need to re-enable the app on each update in <em>System Settings → Privacy &amp; Security</em> (or <em>System Preferences → Security &amp; Privacy → Privacy</em> in earlier macOS versions) as it is unsigned.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">license "web_page"</code></td> <td>Users may find the software’s usage license at <code class="language-plaintext highlighter-rouge">web_page</code>.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">free_license "web_page"</code></td> <td>Users may obtain an official license to use the software at <code class="language-plaintext highlighter-rouge">web_page</code>.</td> </tr> </tbody> </table> <p>Example:</p> <pre data-language="ruby">caveats do
  path_environment_variable "/usr/texbin"
end</pre> <h3 id="stanza-conflicts_with">Stanza: <code class="language-plaintext highlighter-rouge">conflicts_with</code>
</h3> <p><code class="language-plaintext highlighter-rouge">conflicts_with</code> is used to declare conflicts that prevent a cask from installing or working correctly.</p> <h4 id="conflicts_with-cask">
<code class="language-plaintext highlighter-rouge">conflicts_with</code> <em>cask</em>
</h4> <p>The value should be another cask token.</p> <p>Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/m/macfuse.rb#L17">macFUSE</a>, which conflicts with <code class="language-plaintext highlighter-rouge">macfuse-dev</code>.</p> <pre data-language="ruby">conflicts_with cask: "macfuse-dev"</pre> <h3 id="stanza-depends_on">Stanza: <code class="language-plaintext highlighter-rouge">depends_on</code>
</h3> <p><code class="language-plaintext highlighter-rouge">depends_on</code> is used to declare dependencies and requirements for a cask. <code class="language-plaintext highlighter-rouge">depends_on</code> is not consulted until <code class="language-plaintext highlighter-rouge">install</code> is attempted.</p> <table> <thead> <tr> <th>key</th> <th>description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">cask:</code></td> <td>required Homebrew cask tokens as string or array</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">formula:</code></td> <td>required Homebrew formula names as string or array</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">macos:</code></td> <td>macOS release requirements as symbol, array or string comparison expression</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">arch:</code></td> <td>hardware requirements as symbol or array</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">java:</code></td> <td><em>stub - not yet functional</em></td> </tr> </tbody> </table> <h4 id="depends_on-cask">
<code class="language-plaintext highlighter-rouge">depends_on</code> <em>cask</em>
</h4> <p>The value should be one or more tokens of casks needed by the current cask, as a string or array of strings.</p> <p>Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/n/ntfstool.rb#L11">NTFSTool</a>, which depends on macFUSE.</p> <pre data-language="ruby">depends_on cask: "macfuse"</pre> <h4 id="depends_on-formula">
<code class="language-plaintext highlighter-rouge">depends_on</code> <em>formula</em>
</h4> <p>The value should be one or more names of formulae needed by the current cask, as a string or array of strings.</p> <p>Example: some distributions are contained in archive formats such as <code class="language-plaintext highlighter-rouge">7z</code> which are not supported by stock Apple tools. For these cases, a more capable archive reader may be pulled in at install time by declaring a dependency on the <code class="language-plaintext highlighter-rouge">unar</code> formula:</p> <pre data-language="ruby">depends_on formula: "unar"</pre> <h4 id="depends_on-macos">
<code class="language-plaintext highlighter-rouge">depends_on</code> <em>macos</em>
</h4> <h5 id="requiring-an-exact-macos-release">Requiring an exact macOS release</h5> <p>The value for <code class="language-plaintext highlighter-rouge">depends_on macos:</code> may be a symbol or an array of symbols, listing the exact compatible macOS releases. The values for supported macOS releases can be found in the <a href="https://rubydoc.brew.sh/MacOSVersion"><code class="language-plaintext highlighter-rouge">MacOSVersion</code> class</a> documentation.</p> <p>Only major releases are covered (10.x numbers containing a single dot or whole numbers since macOS 11). The symbol form is used for readability. The following are all valid ways to enumerate the exact macOS release requirements for a cask:</p> <pre data-language="ruby">depends_on macos: :big_sur
depends_on macos: [
  :catalina,
  :big_sur,
]</pre> <h5 id="setting-a-minimum-macos-release">Setting a minimum macOS release</h5> <p><code class="language-plaintext highlighter-rouge">depends_on macos:</code> can also accept a string starting with a comparison operator such as <code class="language-plaintext highlighter-rouge">&gt;=</code>, followed by a macOS release in the form above. The following is a valid expression meaning “at least macOS Big Sur (11.0)”:</p> <pre data-language="ruby">depends_on macos: "&gt;= :big_sur"</pre> <p>A comparison expression cannot be combined with any other form of <code class="language-plaintext highlighter-rouge">depends_on macos:</code>.</p> <h4 id="depends_on-arch">
<code class="language-plaintext highlighter-rouge">depends_on</code> <em>arch</em>
</h4> <p>The value for <code class="language-plaintext highlighter-rouge">depends_on arch:</code> may be a symbol or an array of symbols, listing the hardware compatibility requirements for a cask. The requirement is satisfied at install time if any one of the provided <code class="language-plaintext highlighter-rouge">arch:</code> values matches the user’s hardware.</p> <p>The available symbols for hardware are:</p> <table> <thead> <tr> <th>symbol</th> <th>meaning</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">:arm64</code></td> <td>Apple Silicon</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">:x86_64</code></td> <td>64-bit Intel</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">:intel</code></td> <td>64-bit Intel</td> </tr> </tbody> </table> <p>The following are all valid expressions:</p> <pre data-language="ruby">depends_on arch: :arm64
depends_on arch: :intel
depends_on arch: :x86_64            # same meaning as above
depends_on arch: [:x86_64]          # same meaning as above</pre> <h3 id="stanza-deprecate--disable">Stanza: <code class="language-plaintext highlighter-rouge">deprecate!</code> / <code class="language-plaintext highlighter-rouge">disable!</code>
</h3> <p><code class="language-plaintext highlighter-rouge">deprecate!</code> and <code class="language-plaintext highlighter-rouge">disable!</code> are used to declare that a cask is no longer functional or supported. Casks that contain a <code class="language-plaintext highlighter-rouge">deprecate!</code> stanza can still be installed, but will print a warning message when they are installed or upgraded. Casks that contain a <code class="language-plaintext highlighter-rouge">disable!</code> stanza cannot be installed or upgraded and will print an error message.</p> <p>The syntax for both stanzas is the same:</p> <pre data-language="ruby">deprecate! date: "YYYY-MM-DD", because: "is ..."
disable! date: "YYYY-MM-DD", because: "is ..."

# Or with a preset reason and suggested replacement (see the parameter sections below)
deprecate! date: "YYYY-MM-DD", because: :discontinued, replacement_formula: "another"
disable! date: "YYYY-MM-DD", because: :unmaintained, replacement_cask: "alternative"</pre> <h4 id="date-parameter">
<code class="language-plaintext highlighter-rouge">date:</code> parameter</h4> <p>The <code class="language-plaintext highlighter-rouge">date:</code> parameter controls when the deprecation or disabling will take effect. Casks that have a <code class="language-plaintext highlighter-rouge">deprecate!</code> stanza with a date in the future will not be treated as being deprecated until that date. Casks that have a <code class="language-plaintext highlighter-rouge">disable!</code> stanza with a date in the future will be automatically deprecated until that date, at which point they will become disabled.</p> <h4 id="because-parameter">
<code class="language-plaintext highlighter-rouge">because:</code> parameter</h4> <p>The <code class="language-plaintext highlighter-rouge">because:</code> parameter accepts a reason for the cask being deprecated or disabled. The info message will be <code class="language-plaintext highlighter-rouge">&lt;cask&gt; is deprecated because it &lt;reason&gt;!</code>, so format the reason to fit that sentence. For example, <code class="language-plaintext highlighter-rouge">because: "is broken"</code> will result in <code class="language-plaintext highlighter-rouge">&lt;cask&gt; is deprecated because it is broken!</code>.</p> <p>The <code class="language-plaintext highlighter-rouge">because:</code> parameter can also accept a symbol that corresponds to a preset reason, for example:</p> <pre data-language="ruby">deprecate! date: "YYYY-MM-DD", because: :discontinued</pre> <p>A complete list of allowable symbols can be found in the <a href="https://rubydoc.brew.sh/DeprecateDisable"><code class="language-plaintext highlighter-rouge">DeprecateDisable</code> module</a> documentation.</p> <h4 id="replacement_formula--replacement_cask-parameter">
<code class="language-plaintext highlighter-rouge">replacement_formula:</code> / <code class="language-plaintext highlighter-rouge">replacement_cask:</code> parameter</h4> <p>The <code class="language-plaintext highlighter-rouge">replacement_formula:</code> and <code class="language-plaintext highlighter-rouge">replacement_cask:</code> parameters accept a string for suggesting a replacement formula or cask to the user.</p> <p>Refer to <a href="deprecating-disabling-and-removing-casks">Deprecating, Disabling and Removing Casks</a> for more information about the deprecation process for casks.</p> <h3 id="stanza-desc">Stanza: <code class="language-plaintext highlighter-rouge">desc</code>
</h3> <p><code class="language-plaintext highlighter-rouge">desc</code> accepts a single-line UTF-8 string containing a short description of the software. As it’s used to help with searchability and disambiguation, it must concisely describe what the software does (or what you can accomplish with it).</p> <p><code class="language-plaintext highlighter-rouge">desc</code> is not for app slogans! Vendors’ descriptions tend to be filled with generic adjectives such as “modern” and “lightweight”. Those are meaningless marketing fluff (do you ever see apps proudly describing themselves as outdated and bulky?) which must be deleted. It’s fine to use the information on the software’s website as a starting point, but it will require editing in almost all cases.</p> <h4 id="dos-and-donts">Dos and Don’ts</h4> <ul> <li> <p><strong>Do</strong> start with an uppercase letter.</p> <pre data-language="diff">- desc "sound and music editor"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do</strong> be brief, i.e. use less than 80 characters.</p> <pre data-language="diff">- desc "Sound and music editor which comes with effects, instruments, sounds and all kinds of creative features"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do</strong> describe what the software does or is.</p> <pre data-language="diff">- desc "Development of musical ideas made easy"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do not</strong> include the platform. Casks always work on macOS, so this is redundant information.</p> <pre data-language="diff">- desc "Sound and music editor for macOS"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do not</strong> include the cask’s <a href="#stanza-name">name</a>.</p> <pre data-language="diff">- desc "Ableton Live is a sound and music editor"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do not</strong> include the vendor. This should be added to the cask’s <a href="#stanza-name">name</a> instead.</p> <pre data-language="diff">- desc "Sound and music editor made by Ableton"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do not</strong> add user pronouns.</p> <pre data-language="diff">- desc "Edit your music files"
+ desc "Sound and music editor"</pre> </li> <li> <p><strong>Do not</strong> use empty marketing jargon.</p> <pre data-language="diff">- desc "Beautiful and powerful modern sound and music editor"
+ desc "Sound and music editor"</pre> </li> </ul> <h3 id="stanza-flight">Stanza: <code class="language-plaintext highlighter-rouge">*flight</code>
</h3> <p>The stanzas <code class="language-plaintext highlighter-rouge">preflight</code>, <code class="language-plaintext highlighter-rouge">postflight</code>, <code class="language-plaintext highlighter-rouge">uninstall_preflight</code>, and <code class="language-plaintext highlighter-rouge">uninstall_postflight</code> define operations to be run before or after installation or uninstallation.</p> <h4 id="evaluation-of-blocks-is-always-deferred">Evaluation of blocks is always deferred</h4> <p>The Ruby blocks defined by these stanzas are not evaluated until install time or uninstall time. Within a block you may refer to the <code class="language-plaintext highlighter-rouge">@cask</code> instance variable, and invoke <a href="https://rubydoc.brew.sh/Cask/Cask">any method available on <code class="language-plaintext highlighter-rouge">@cask</code></a>.</p> <h4 id="flight-mini-dsl">
<code class="language-plaintext highlighter-rouge">*flight</code> mini-DSL</h4> <p>There is a mini-DSL available within these blocks.</p> <p>The following methods may be called to perform standard tasks:</p> <table> <thead> <tr> <th>method</th> <th>availability</th> <th>description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">set_ownership(paths)</code></td> <td>
<code class="language-plaintext highlighter-rouge">preflight</code>, <code class="language-plaintext highlighter-rouge">postflight</code>, <code class="language-plaintext highlighter-rouge">uninstall_preflight</code>
</td> <td>Set user and group ownership of <code class="language-plaintext highlighter-rouge">paths</code>. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/d/docker-toolbox.rb#L42">docker-toolbox.rb</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">set_permissions(paths, permissions_str)</code></td> <td>
<code class="language-plaintext highlighter-rouge">preflight</code>, <code class="language-plaintext highlighter-rouge">postflight</code>, <code class="language-plaintext highlighter-rouge">uninstall_preflight</code>
</td> <td>Set permissions in <code class="language-plaintext highlighter-rouge">paths</code> to <code class="language-plaintext highlighter-rouge">permissions_str</code>. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/41d91ff669d85343175202adf568e2328486205f/Casks/n/ngrok.rb#L30">ngrok.rb</a>)</td> </tr> </tbody> </table> <p><code class="language-plaintext highlighter-rouge">set_ownership(paths)</code> defaults to setting user and group ownership to the current user and <code class="language-plaintext highlighter-rouge">staff</code>. These can be changed by passing in extra options: <code class="language-plaintext highlighter-rouge">set_ownership(paths, user: "user", group: "group")</code>. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/h/hummingbird.rb#L24">hummingbird.rb</a>)</p> <h3 id="stanza-installer">Stanza: <code class="language-plaintext highlighter-rouge">installer</code>
</h3> <p>This stanza must always be accompanied by <a href="#stanza-uninstall"><code class="language-plaintext highlighter-rouge">uninstall</code></a>.</p> <p>The <code class="language-plaintext highlighter-rouge">installer</code> stanza takes a series of key-value pairs, the first key of which must be <code class="language-plaintext highlighter-rouge">manual:</code> or <code class="language-plaintext highlighter-rouge">script:</code>.</p> <h4 id="installer-manual">
<code class="language-plaintext highlighter-rouge">installer</code> <em>manual</em>
</h4> <p><code class="language-plaintext highlighter-rouge">installer manual:</code> takes a single string value for the path to an interactive installer which must be run by the user at a later time. The path may be absolute, or relative to the cask. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/r/rubymotion.rb#L15">rubymotion.rb</a>):</p> <pre data-language="ruby">installer manual: "RubyMotion Installer.app"</pre> <h4 id="installer-script">
<code class="language-plaintext highlighter-rouge">installer</code> <em>script</em>
</h4> <p><code class="language-plaintext highlighter-rouge">installer script:</code> takes a series of key-value pairs describing a command which will automate completion of the install. <strong>It should never be used for interactive installations.</strong> The form is similar to <a href="#uninstall-script"><code class="language-plaintext highlighter-rouge">uninstall script:</code></a>:</p> <table> <thead> <tr> <th>key</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">executable:</code></td> <td>path to an install script to be run</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">args:</code></td> <td>array of arguments to the install script</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">input:</code></td> <td>array of lines of input to be sent to <code class="language-plaintext highlighter-rouge">stdin</code> of the script</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">must_succeed:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> if the script is allowed to fail</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">print_stderr:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> to suppress <code class="language-plaintext highlighter-rouge">stderr</code> output</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">print_stdout:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> to suppress <code class="language-plaintext highlighter-rouge">stdout</code> output</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">sudo:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">true</code> if the script needs <em>sudo</em>
</td> </tr> </tbody> </table> <p>The path may be absolute, or relative to the cask. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/864f623e2cd17dbde5987a7b3923fdb0b4ac9ee5/Casks/m/miniforge.rb#L23-L26">miniforge.rb</a>):</p> <pre data-language="ruby">installer script: {
  executable: "Miniforge3-#{version}-MacOSX-x86_64.sh",
  args:       ["-b", "-p", "#{caskroom_path}/base"],
}</pre> <p>If the <code class="language-plaintext highlighter-rouge">installer script:</code> does not require any of the key-value pairs, it can be given just the path to the install script:</p> <pre data-language="ruby">installer script: "#{staged_path}/install.sh"</pre> <h3 id="stanza-language">Stanza: <code class="language-plaintext highlighter-rouge">language</code>
</h3> <p>The <code class="language-plaintext highlighter-rouge">language</code> stanza can match <a href="https://en.wikipedia.org/wiki/ISO_639-1">ISO 639-1</a> language codes, script codes (<a href="https://en.wikipedia.org/wiki/ISO_15924">ISO 15924</a>) and regional identifiers (<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 Alpha 2</a>), or a combination thereof.</p> <p>US English should always be used as the default language:</p> <pre data-language="ruby">language "zh", "CN" do
  "zh_CN"
end

language "de" do
  "de_DE"
end

language "en-GB" do
  "en_GB"
end

language "en", default: true do
  "en_US"
end</pre> <p>Note that the following are not the same:</p> <pre data-language="ruby">language "en", "GB" do
  # matches all locales containing "en" or "GB"
end

language "en-GB" do
  # matches only locales containing "en" and "GB"
end</pre> <p>The return value of the matching <code class="language-plaintext highlighter-rouge">language</code> block can be accessed by simply calling <code class="language-plaintext highlighter-rouge">language</code>.</p> <pre data-language="ruby">homepage "https://example.org/#{language}"</pre> <p>Examples: <a href="https://github.com/Homebrew/homebrew-cask/blob/939b4331dc2a6860350d66a1b2c7b3f22442cc08/Casks/f/firefox.rb#L4-L207">firefox.rb</a>, <a href="https://github.com/Homebrew/homebrew-cask/blob/e039d079560cf2f77b671f7dda4752a053341180/Casks/b/battle-net.rb#L5-L10">battle-net.rb</a></p> <h4 id="installation">Installation</h4> <p>To install a cask in a specific language, you can pass the <code class="language-plaintext highlighter-rouge">--language=</code> option to <code class="language-plaintext highlighter-rouge">brew install</code>:</p> <pre data-language="bash">brew install firefox --language=it</pre> <h3 id="stanza-livecheck">Stanza: <code class="language-plaintext highlighter-rouge">livecheck</code>
</h3> <p>The <code class="language-plaintext highlighter-rouge">livecheck</code> stanza is used to automatically fetch the latest version of a cask from changelogs, release notes, appcasts, etc.</p> <p>Every <code class="language-plaintext highlighter-rouge">livecheck</code> block must contain a <code class="language-plaintext highlighter-rouge">url</code>, which can be either a string or a symbol pointing to other URLs in the cask (<code class="language-plaintext highlighter-rouge">:url</code> or <code class="language-plaintext highlighter-rouge">:homepage</code>).</p> <p>Refer to the <a href="brew-livecheck"><code class="language-plaintext highlighter-rouge">brew livecheck</code></a> documentation for how to write a <code class="language-plaintext highlighter-rouge">livecheck</code> block.</p> <h3 id="stanza-no_autobump">Stanza: <code class="language-plaintext highlighter-rouge">no_autobump!</code>
</h3> <p>The <code class="language-plaintext highlighter-rouge">no_autobump!</code> stanza excludes a cask from the autobump list. This means all updates are to be handled manually by submitting pull requests to the <code class="language-plaintext highlighter-rouge">Homebrew/homebrew-cask</code> repository.</p> <p><code class="language-plaintext highlighter-rouge">no_autobump!</code> requires a reason to be provided with the <code class="language-plaintext highlighter-rouge">because:</code> paramater. It accepts a string or a symbol that corresponds to a preset reason, for example:</p> <pre data-language="ruby">no_autobump! because: :incompatible_version_format</pre> <p>A complete list of allowed symbols can be found in <a href="https://rubydoc.brew.sh/top-level-namespace#NO_AUTOBUMP_REASONS_LIST-constant"><code class="language-plaintext highlighter-rouge">NO_AUTOBUMP_REASONS_LIST</code></a>.</p> <p>Casks that use <code class="language-plaintext highlighter-rouge">strategy :extract_plist</code> in their <code class="language-plaintext highlighter-rouge">livecheck</code> block or have <code class="language-plaintext highlighter-rouge">version :latest</code> are always excluded from the autobump list and do not require <code class="language-plaintext highlighter-rouge">no_autobump!</code> to be declared.</p> <p>Refer to the <a href="autobump">Autobump</a> page for more information about the autobump process in Homebrew.</p> <h3 id="stanza-name">Stanza: <code class="language-plaintext highlighter-rouge">name</code>
</h3> <p><code class="language-plaintext highlighter-rouge">name</code> accepts a UTF-8 string defining the name of the software, including capitalization and punctuation. It is used to help with searchability and disambiguation.</p> <p>Unlike the <a href="#token-reference">token</a>, which is simplified and reduced to a limited set of characters, the <code class="language-plaintext highlighter-rouge">name</code> stanza can include the proper capitalization, spacing and punctuation to match the official name of the software. For disambiguation purposes, it is recommended to spell out the name of the application, including the vendor name if necessary. A good example is the <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/p/pycharm-ce.rb#L9-L10"><code class="language-plaintext highlighter-rouge">pycharm-ce</code></a> cask, whose name is spelled out as <code class="language-plaintext highlighter-rouge">Jetbrains PyCharm Community Edition</code>, even though it is likely never referenced as such anywhere.</p> <p>Additional details about the software can be provided in the <a href="#stanza-desc"><code class="language-plaintext highlighter-rouge">desc</code></a> stanza.</p> <p>The <code class="language-plaintext highlighter-rouge">name</code> stanza can be repeated multiple times if there are useful alternative names. The first instance should use the Latin alphabet. For example, see the <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/c/cave-story.rb#L58-L60"><code class="language-plaintext highlighter-rouge">cave-story</code></a> cask, whose original name does not use the Latin alphabet.</p> <h3 id="stanza-pkg">Stanza: <code class="language-plaintext highlighter-rouge">pkg</code>
</h3> <p>This stanza must always be accompanied by <a href="#stanza-uninstall"><code class="language-plaintext highlighter-rouge">uninstall</code></a>.</p> <p>The first argument to the <code class="language-plaintext highlighter-rouge">pkg</code> stanza should be a relative path to the <code class="language-plaintext highlighter-rouge">.pkg</code> file to be installed. Example:</p> <pre data-language="ruby">pkg "Unity.pkg"</pre> <p>Subsequent arguments to <code class="language-plaintext highlighter-rouge">pkg</code> are key-value pairs which modify the install process. Currently supported keys are <code class="language-plaintext highlighter-rouge">allow_untrusted:</code> and <code class="language-plaintext highlighter-rouge">choices:</code>.</p> <h4 id="pkg-allow_untrusted">
<code class="language-plaintext highlighter-rouge">pkg</code> <em>allow_untrusted</em>
</h4> <p><code class="language-plaintext highlighter-rouge">pkg allow_untrusted: true</code> can be used to install a <code class="language-plaintext highlighter-rouge">.pkg</code> containing an untrusted certificate by passing <code class="language-plaintext highlighter-rouge">-allowUntrusted</code> to <code class="language-plaintext highlighter-rouge">/usr/sbin/installer</code>.</p> <p>This option is not permitted in official Homebrew Cask taps; it is only provided for use in third-party taps or local casks.</p> <p>Historical example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/312ae841f1f1b2ec07f4d88b7dfdd7fbdf8d4f94/Casks/alinof-timer.rb#L10">alinof-timer.rb</a>):</p> <pre data-language="ruby">pkg "AlinofTimer.pkg", allow_untrusted: true</pre> <h4 id="pkg-choices">
<code class="language-plaintext highlighter-rouge">pkg</code> <em>choices</em>
</h4> <p><code class="language-plaintext highlighter-rouge">pkg choices:</code> can be used to override a <code class="language-plaintext highlighter-rouge">.pkg</code>’s default install options via <code class="language-plaintext highlighter-rouge">-applyChoiceChangesXML</code>. It uses a deserialized version of the <code class="language-plaintext highlighter-rouge">choiceChanges</code> property list (refer to the <code class="language-plaintext highlighter-rouge">CHOICE CHANGES FILE</code> section of the <code class="language-plaintext highlighter-rouge">installer</code> manual page by running <code class="language-plaintext highlighter-rouge">man -P 'less --pattern "^CHOICE CHANGES FILE"' installer</code>).</p> <p>Running this macOS <code class="language-plaintext highlighter-rouge">installer</code> command:</p> <pre data-language="bash">installer -showChoicesXML -pkg '/path/to/my.pkg'</pre> <p>will output XML that you can use to extract the <code class="language-plaintext highlighter-rouge">choices:</code> values, as well as their equivalents to the GUI options.</p> <p>See <a href="https://github.com/Homebrew/homebrew-cask/pull/26997">this pull request for wireshark-chmodbpf</a> and <a href="https://github.com/Homebrew/homebrew-cask/pull/27937">this one for wine-staging</a> for some examples of the procedure.</p> <p>Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/l/lando.rb#L21-L33">lando.rb</a>):</p> <pre data-language="ruby">pkg "LandoInstaller.pkg",
    choices: [
      {
        "choiceIdentifier" =&gt; "choiceDocker",
        "choiceAttribute"  =&gt; "selected",
        "attributeSetting" =&gt; 0,
      },
      {
        "choiceIdentifier" =&gt; "choiceLando",
        "choiceAttribute"  =&gt; "selected",
        "attributeSetting" =&gt; 1,
      },
    ]</pre> <p>Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/56cabc6cec8be8f8a2fd06bc0b88f851d3b075d7/Casks/m/microsoft-office.rb#L30-L37">microsoft-office.rb</a>):</p> <pre data-language="ruby">pkg "Microsoft_365_and_Office_#{version}_Installer.pkg",
    choices: [
      {
        "choiceIdentifier" =&gt; "com.microsoft.autoupdate", # Office16_all_autoupdate.pkg
        "choiceAttribute"  =&gt; "selected",
        "attributeSetting" =&gt; 0,
      },
    ]</pre> <h3 id="stanza-sha256">Stanza: <code class="language-plaintext highlighter-rouge">sha256</code>
</h3> <h4 id="calculating-the-sha-256">Calculating the SHA-256</h4> <p>The <code class="language-plaintext highlighter-rouge">sha256</code> value is usually calculated by the <code class="language-plaintext highlighter-rouge">shasum</code> command:</p> <pre data-language="bash">shasum --algorithm 256 &lt;file&gt;</pre> <h4 id="special-value-no_check">Special value <code class="language-plaintext highlighter-rouge">:no_check</code>
</h4> <p>The special value <code class="language-plaintext highlighter-rouge">sha256 :no_check</code> is used to turn off SHA checking whenever checksumming is impractical due to the upstream configuration, e.g. when <code class="language-plaintext highlighter-rouge">url</code> does not change between releases.</p> <p><code class="language-plaintext highlighter-rouge">sha256 :no_check</code> is required by <a href="#special-value-latest"><code class="language-plaintext highlighter-rouge">version :latest</code></a>, and this pairing is common. However, <code class="language-plaintext highlighter-rouge">sha256 :no_check</code> does not require <code class="language-plaintext highlighter-rouge">version :latest</code>.</p> <p>We use a checksum whenever possible.</p> <h3 id="stanza-suite">Stanza: <code class="language-plaintext highlighter-rouge">suite</code>
</h3> <p>Some distributions provide a suite of multiple applications, or an application with required data, to be installed together in a subdirectory of <code class="language-plaintext highlighter-rouge">/Applications</code>.</p> <p>For these casks, use the <code class="language-plaintext highlighter-rouge">suite</code> stanza to define the directory containing the application suite. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/e65e45e94d27d14a78e1bd02b584b0c89c8f9e8b/Casks/r/racket.rb#L18">racket.rb</a>):</p> <pre data-language="ruby">suite "Racket v#{version}"</pre> <p>The value of <code class="language-plaintext highlighter-rouge">suite</code> is never an <code class="language-plaintext highlighter-rouge">.app</code> bundle, but a plain directory.</p> <h3 id="stanza-uninstall">Stanza: <code class="language-plaintext highlighter-rouge">uninstall</code>
</h3> <blockquote> <p>If you cannot design a working <code class="language-plaintext highlighter-rouge">uninstall</code> stanza, please submit your cask anyway. The maintainers can help you write an <code class="language-plaintext highlighter-rouge">uninstall</code> stanza, just ask!</p> </blockquote> <h4 id="uninstall-is-required-for-casks-that-install-using-pkg-or-installer">
<code class="language-plaintext highlighter-rouge">uninstall</code> is required for casks that install using <code class="language-plaintext highlighter-rouge">pkg</code> or <code class="language-plaintext highlighter-rouge">installer</code>
</h4> <p>For most casks, uninstall actions are determined automatically, and an explicit <code class="language-plaintext highlighter-rouge">uninstall</code> stanza is not needed. However, a cask which uses the <a href="#stanza-pkg"><code class="language-plaintext highlighter-rouge">pkg</code></a> or <a href="#stanza-installer"><code class="language-plaintext highlighter-rouge">installer</code></a> stanzas will <strong>not</strong> know how to uninstall correctly unless an <code class="language-plaintext highlighter-rouge">uninstall</code> stanza is given.</p> <p>So, while the <a href="#required-stanzas">cask DSL</a> does not enforce the requirement, it is much better for users if every <code class="language-plaintext highlighter-rouge">pkg</code> and <code class="language-plaintext highlighter-rouge">installer</code> has a corresponding <code class="language-plaintext highlighter-rouge">uninstall</code>.</p> <p>The <code class="language-plaintext highlighter-rouge">uninstall</code> stanza is available for other artifact types, and is useful for a few corner cases. However, the documentation below concerns the typical case of using <code class="language-plaintext highlighter-rouge">uninstall</code> to define procedures for a <code class="language-plaintext highlighter-rouge">pkg</code>.</p> <h4 id="there-are-multiple-uninstall-techniques">There are multiple uninstall techniques</h4> <p>Since <code class="language-plaintext highlighter-rouge">pkg</code> installers can do arbitrary things, different techniques are needed to uninstall in each case. You may need to specify one, or several, of the following key-value pairs as arguments to <code class="language-plaintext highlighter-rouge">uninstall</code>.</p> <h5 id="uninstall-pkgutil-is-the-easiest-and-most-useful">
<code class="language-plaintext highlighter-rouge">uninstall pkgutil:</code> is the easiest and most useful</h5> <p>The easiest and most useful <code class="language-plaintext highlighter-rouge">uninstall</code> directive is <a href="#uninstall-pkgutil"><code class="language-plaintext highlighter-rouge">pkgutil:</code></a>. It should cover most use cases.</p> <h4 id="summary-of-keys">Summary of keys</h4> <ul> <li>
<strong><code class="language-plaintext highlighter-rouge">early_script:</code></strong> (string or hash) - like <a href="#uninstall-script"><code class="language-plaintext highlighter-rouge">script:</code></a>, but runs early (for special cases, best avoided)</li> <li>
<a href="#uninstall-launchctl"><code class="language-plaintext highlighter-rouge">launchctl:</code></a> (string or array) - IDs of <code class="language-plaintext highlighter-rouge">launchd</code> jobs to remove</li> <li>
<a href="#uninstall-quit"><code class="language-plaintext highlighter-rouge">quit:</code></a> (string or array) - bundle IDs of running applications to quit (does not run when uninstall is initiated by <code class="language-plaintext highlighter-rouge">brew upgrade</code> or <code class="language-plaintext highlighter-rouge">brew reinstall</code>)</li> <li>
<a href="#uninstall-signal"><code class="language-plaintext highlighter-rouge">signal:</code></a> (array of arrays) - signal numbers and bundle IDs of running applications to send a Unix signal to, for when <code class="language-plaintext highlighter-rouge">quit:</code> does not work (does not run when uninstall is initiated by <code class="language-plaintext highlighter-rouge">brew upgrade</code> or <code class="language-plaintext highlighter-rouge">brew reinstall</code>)</li> <li>
<a href="#uninstall-login_item"><code class="language-plaintext highlighter-rouge">login_item:</code></a> (string or array) - names of login items to remove</li> <li>
<a href="#uninstall-kext"><code class="language-plaintext highlighter-rouge">kext:</code></a> (string or array) - bundle IDs of kexts to unload from the system</li> <li>
<a href="#uninstall-script"><code class="language-plaintext highlighter-rouge">script:</code></a> (string or hash) - relative path to an uninstall script to be run via <em>sudo</em>; use hash if args are needed</li> <li>
<a href="#uninstall-pkgutil"><code class="language-plaintext highlighter-rouge">pkgutil:</code></a> (string, regexp or array of strings and regexps) - strings or regexps matching bundle IDs of packages to uninstall using <code class="language-plaintext highlighter-rouge">pkgutil</code>
</li> <li>
<a href="#uninstall-delete"><code class="language-plaintext highlighter-rouge">delete:</code></a> (string or array) - double-quoted, absolute paths of files or directory trees to remove. Should only be used as a last resort; <code class="language-plaintext highlighter-rouge">pkgutil:</code> is strongly preferred.</li> <li>
<strong><code class="language-plaintext highlighter-rouge">rmdir:</code></strong> (string or array) - double-quoted, absolute paths of directories to remove if empty; works recursively</li> <li>
<a href="#uninstall-trash"><code class="language-plaintext highlighter-rouge">trash:</code></a> (string or array) - double-quoted, absolute paths of files or directory trees to move to Trash</li> </ul> <p>Each <code class="language-plaintext highlighter-rouge">uninstall</code> technique is applied according to the order above. The order in which <code class="language-plaintext highlighter-rouge">uninstall</code> keys appear in the cask file is ignored.</p> <p>For assistance filling in the right values for <code class="language-plaintext highlighter-rouge">uninstall</code> keys, there are several <a href="https://github.com/Homebrew/homebrew-cask/tree/HEAD/developer/bin">helper scripts found under <code class="language-plaintext highlighter-rouge">developer/bin</code></a> in the Homebrew Cask repository. Each of these scripts responds to the <code class="language-plaintext highlighter-rouge">-help</code> option with additional documentation.</p> <p>Working out an <code class="language-plaintext highlighter-rouge">uninstall</code> stanza is easiest when done on a system where the package is currently installed and operational. To operate on an uninstalled <code class="language-plaintext highlighter-rouge">.pkg</code> file, see <a href="#working-with-a-pkg-file-manually">Working with a <code class="language-plaintext highlighter-rouge">.pkg</code> file manually</a>, below.</p> <h4 id="uninstall-pkgutil">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>pkgutil</em>
</h4> <p>This is the most useful uninstall key. <code class="language-plaintext highlighter-rouge">pkgutil:</code> is often sufficient to completely uninstall a <code class="language-plaintext highlighter-rouge">pkg</code>, and is strongly preferred over <code class="language-plaintext highlighter-rouge">delete:</code>.</p> <p>IDs for the most recently installed packages can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_recent_pkg_ids"><code class="language-plaintext highlighter-rouge">list_recent_pkg_ids</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_recent_pkg_ids"</pre> <p><code class="language-plaintext highlighter-rouge">pkgutil:</code> also accepts a regular expression to match against multiple package IDs. The regular expressions are somewhat nonstandard. To test a <code class="language-plaintext highlighter-rouge">pkgutil:</code> regular expression against currently installed packages, use <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_pkg_ids_by_regexp"><code class="language-plaintext highlighter-rouge">list_pkg_ids_by_regexp</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_pkg_ids_by_regexp" &lt;regular-expression&gt;</pre> <h4 id="list-files-associated-with-a-package-id">List files associated with a package ID</h4> <p>Once you know the ID for an installed package (see above), you can list all files on your system associated with that package ID using the macOS <code class="language-plaintext highlighter-rouge">pkgutil</code> command:</p> <pre data-language="bash">pkgutil --files &lt;package.id.goes.here&gt;</pre> <p>Listing the associated files can help you assess whether the package included any <code class="language-plaintext highlighter-rouge">launchd</code> jobs or kernel extensions (kexts).</p> <h4 id="uninstall-launchctl">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>launchctl</em>
</h4> <p>IDs for currently loaded <code class="language-plaintext highlighter-rouge">launchd</code> jobs can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_loaded_launchjob_ids"><code class="language-plaintext highlighter-rouge">list_loaded_launchjob_ids</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_loaded_launchjob_ids"</pre> <p>IDs for all installed <code class="language-plaintext highlighter-rouge">launchd</code> jobs can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_installed_launchjob_ids"><code class="language-plaintext highlighter-rouge">list_installed_launchjob_ids</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_installed_launchjob_ids"</pre> <h4 id="uninstall-quit">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>quit</em>
</h4> <p>Bundle IDs for currently running applications can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_running_app_ids"><code class="language-plaintext highlighter-rouge">list_running_app_ids</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_running_app_ids"</pre> <p>Bundle IDs inside an application bundle on disk can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_ids_in_app"><code class="language-plaintext highlighter-rouge">list_ids_in_app</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_ids_in_app" '/path/to/application.app'</pre> <h4 id="uninstall-signal">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>signal</em>
</h4> <p><code class="language-plaintext highlighter-rouge">signal:</code> should only be needed in the rare case that a process does not respond to <code class="language-plaintext highlighter-rouge">quit:</code>.</p> <p>Bundle IDs for <code class="language-plaintext highlighter-rouge">signal:</code> targets may be obtained in the same way as for <code class="language-plaintext highlighter-rouge">quit:</code>. The value for <code class="language-plaintext highlighter-rouge">signal:</code> is an array of arrays, with each cell containing two elements: the desired Unix signal followed by the corresponding bundle ID.</p> <p>The Unix signal may be given in numeric or string form (see the <code class="language-plaintext highlighter-rouge">kill</code>(1) man page for more details).</p> <p>The elements of the <code class="language-plaintext highlighter-rouge">signal:</code> array are applied in order, only if there is an existing process associated the bundle ID, and stopping when that process terminates. A bundle ID may be repeated to send more than one signal to the same process.</p> <p>It is better to use the least-severe signals that are sufficient to stop a process. The <code class="language-plaintext highlighter-rouge">KILL</code> signal in particular can have unwanted side effects.</p> <p>An example, with commonly used signals in ascending order of severity:</p> <pre data-language="ruby">uninstall signal: [
  ["TERM", "fr.madrau.switchresx.daemon"],
  ["QUIT", "fr.madrau.switchresx.daemon"],
  ["INT",  "fr.madrau.switchresx.daemon"],
  ["HUP",  "fr.madrau.switchresx.daemon"],
  ["KILL", "fr.madrau.switchresx.daemon"],
]</pre> <p>Note that when multiple running processes match the given bundle ID, all matching processes will be signaled.</p> <p>Unlike <code class="language-plaintext highlighter-rouge">quit:</code> directives, Unix signals originate from the current user, not from the superuser. This is construed as a safety feature, since the superuser is capable of bringing down the system via signals. However, this inconsistency could also be considered a bug, and may be addressed in some fashion in a future version.</p> <h4 id="uninstall-login_item">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>login_item</em>
</h4> <p>Login items associated with an application bundle on disk can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_login_items_for_app"><code class="language-plaintext highlighter-rouge">list_login_items_for_app</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_login_items_for_app" '/path/to/application.app'</pre> <p>Note that you will likely need to have opened the app at least once for any login items to be present.</p> <h4 id="uninstall-kext">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>kext</em>
</h4> <p>IDs for currently loaded kernel extensions can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_loaded_kext_ids"><code class="language-plaintext highlighter-rouge">list_loaded_kext_ids</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_loaded_kext_ids"</pre> <p>IDs inside a kext bundle on disk can be listed using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_id_in_kext"><code class="language-plaintext highlighter-rouge">list_id_in_kext</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_id_in_kext" '/path/to/name.kext'</pre> <h4 id="uninstall-script">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>script</em>
</h4> <p><code class="language-plaintext highlighter-rouge">uninstall script:</code> introduces a series of key-value pairs describing a command which will automate completion of the uninstall. The form is similar to <a href="#installer-script"><code class="language-plaintext highlighter-rouge">installer script:</code></a>:</p> <table> <thead> <tr> <th>key</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">executable:</code></td> <td>path to an uninstall script to be run</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">args:</code></td> <td>array of arguments to the uninstall script</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">input:</code></td> <td>array of lines of input to be sent to <code class="language-plaintext highlighter-rouge">stdin</code> of the script</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">must_succeed:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> if the script is allowed to fail</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">print_stderr:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> to suppress <code class="language-plaintext highlighter-rouge">stderr</code> output</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">print_stdout:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">false</code> to suppress <code class="language-plaintext highlighter-rouge">stdout</code> output</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">sudo:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">true</code> if the script needs <em>sudo</em>
</td> </tr> </tbody> </table> <p>The path may be absolute, or relative to the cask. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/ef9931087f6e101262bf64119166e2d9cec068f0/Casks/v/virtualbox.rb#L55-L61">virtualbox.rb</a>):</p> <pre data-language="ruby">uninstall script:  {
            executable: "VirtualBox_Uninstall.tool",
            args:       ["--unattended"],
            sudo:       true,
          },
          pkgutil: "org.virtualbox.pkg.*",
          delete:  "/usr/local/bin/vboximg-mount"</pre> <p>It is important to note that, although <code class="language-plaintext highlighter-rouge">script:</code> in the above example does attempt to completely uninstall the <code class="language-plaintext highlighter-rouge">pkg</code>, it should not be used in place of <a href="#uninstall-pkgutil"><code class="language-plaintext highlighter-rouge">pkgutil:</code></a>, but as a complement when possible.</p> <h4 id="uninstall-delete">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>delete</em>
</h4> <p><code class="language-plaintext highlighter-rouge">delete:</code> should only be used as a last resort, if other <code class="language-plaintext highlighter-rouge">uninstall</code> methods are insufficient.</p> <p>Arguments to <code class="language-plaintext highlighter-rouge">uninstall delete:</code> should use the following basic rules:</p> <ul> <li>Basic tilde expansion is performed on paths, i.e. leading <code class="language-plaintext highlighter-rouge">~</code> is expanded to the home directory.</li> <li>Paths must be absolute.</li> <li>Glob expansion is performed using the <a href="https://en.wikipedia.org/wiki/Glob_(programming)">standard set of characters</a>.</li> </ul> <p>To remove user-specific files, use the <a href="#stanza-zap"><code class="language-plaintext highlighter-rouge">zap</code></a> stanza.</p> <h4 id="uninstall-trash">
<code class="language-plaintext highlighter-rouge">uninstall</code> <em>trash</em>
</h4> <p><code class="language-plaintext highlighter-rouge">trash:</code> arguments follow the same rules listed above for <code class="language-plaintext highlighter-rouge">delete:</code>.</p> <h4 id="working-with-a-pkg-file-manually">Working with a <code class="language-plaintext highlighter-rouge">.pkg</code> file manually</h4> <p>Advanced users may wish to work with a <code class="language-plaintext highlighter-rouge">.pkg</code> file manually, without having the package installed.</p> <p>A list of files which may be installed from a <code class="language-plaintext highlighter-rouge">.pkg</code> can be extracted using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_payload_in_pkg"><code class="language-plaintext highlighter-rouge">list_payload_in_pkg</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_payload_in_pkg" '/path/to/my.pkg'</pre> <p>Candidate application names helpful for determining the name of a cask may be extracted from a <code class="language-plaintext highlighter-rouge">.pkg</code> file using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_apps_in_pkg"><code class="language-plaintext highlighter-rouge">list_apps_in_pkg</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_apps_in_pkg" '/path/to/my.pkg'</pre> <p>Candidate package IDs which may be useful in a <code class="language-plaintext highlighter-rouge">pkgutil:</code> key may be extracted from a <code class="language-plaintext highlighter-rouge">.pkg</code> file using <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_ids_in_pkg"><code class="language-plaintext highlighter-rouge">list_ids_in_pkg</code></a>:</p> <pre data-language="bash">"$(brew --repository homebrew/cask)/developer/bin/list_ids_in_pkg" '/path/to/my.pkg'</pre> <p>A fully manual method for finding bundle IDs in a package file follows:</p> <ol> <li>Unpack <code class="language-plaintext highlighter-rouge">/path/to/my.pkg</code> (replace with your package name) with <code class="language-plaintext highlighter-rouge">pkgutil --expand /path/to/my.pkg /tmp/expanded.unpkg</code>.</li> <li>The unpacked package is a folder. Bundle IDs are contained within files named <code class="language-plaintext highlighter-rouge">PackageInfo</code>. These files can be found with the command <code class="language-plaintext highlighter-rouge">find /tmp/expanded.unpkg -name PackageInfo</code>.</li> <li>
<code class="language-plaintext highlighter-rouge">PackageInfo</code> files are XML files, and bundle IDs are found within the <code class="language-plaintext highlighter-rouge">identifier</code> attributes of <code class="language-plaintext highlighter-rouge">&lt;pkg-info&gt;</code> tags that look like <code class="language-plaintext highlighter-rouge">&lt;pkg-info ... identifier="com.oracle.jdk7u51" ... &gt;</code> (where extraneous attributes have been snipped out and replaced with ellipses).</li> <li>Kexts inside packages are also described in <code class="language-plaintext highlighter-rouge">PackageInfo</code> files. If any kernel extensions are present, the command <code class="language-plaintext highlighter-rouge">find /tmp/expanded.unpkg -name PackageInfo -print0 | xargs -0 grep -i kext</code> should return a <code class="language-plaintext highlighter-rouge">&lt;bundle id&gt;</code> tag with a <code class="language-plaintext highlighter-rouge">path</code> attribute that contains a <code class="language-plaintext highlighter-rouge">.kext</code> extension, for example <code class="language-plaintext highlighter-rouge">&lt;bundle id="com.wavtap.driver.WavTap" ... path="./WavTap.kext" ... /&gt;</code>.</li> <li>Once bundle IDs have been identified, the unpacked package directory can be deleted.</li> </ol> <h3 id="stanza-url">Stanza: <code class="language-plaintext highlighter-rouge">url</code>
</h3> <h4 id="https-urls-are-preferred">HTTPS URLs are preferred</h4> <p>If available, an HTTPS URL is preferred. A plain HTTP URL should only be used in the absence of a secure alternative.</p> <h4 id="additional-url-parameters">Additional <code class="language-plaintext highlighter-rouge">url</code> parameters</h4> <p>When a plain URL string is insufficient to fetch a file, additional information may be provided to the <code class="language-plaintext highlighter-rouge">curl</code>-based downloader, in the form of key-value pairs appended to <code class="language-plaintext highlighter-rouge">url</code>:</p> <table> <thead> <tr> <th>key</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">verified:</code></td> <td>string repeating the beginning of <code class="language-plaintext highlighter-rouge">url</code>, for <a href="#when-url-and-homepage-domains-differ-add-verified">verification purposes</a>
</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">using:</code></td> <td>the symbols <code class="language-plaintext highlighter-rouge">:post</code> and <code class="language-plaintext highlighter-rouge">:homebrew_curl</code> are the only legal values</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">cookies:</code></td> <td>hash of cookies to be set for the download request (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/326c44e93aeb8d4dd73acea14a99ae215c75fdd6/Casks/o/oracle-jdk-javadoc.rb#L5-L8">oracle-jdk-javadoc.rb</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">referer:</code></td> <td>string holding the URL to set as referer for the download request (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/c4b3f0742e044ae2a6e114eb6b90068763d0d12b/Casks/f/firealpaca.rb#L5-L6">firealpaca.rb</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">header:</code></td> <td>string or array of strings holding the header(s) to set for the download request (Example: <a href="https://github.com/Homebrew/brew/pull/6545#issue-503302353">pull-6545</a>, <a href="https://github.com/Homebrew/brew/issues/15590#issue-1774825542">issue-15590</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">user_agent:</code></td> <td>string holding the user agent to set for the download request. Can also be set to the symbol <code class="language-plaintext highlighter-rouge">:fake</code>, which will use a generic browser-like user agent string. We prefer <code class="language-plaintext highlighter-rouge">:fake</code> when the server does not require a specific user agent.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">data:</code></td> <td>hash of parameters to be set for a POST request (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/38ac55614f146d68ae317594f0c119e9acbd7c9e/Casks/s/segger-jlink.rb#L6-L11">segger-jlink.rb</a>)</td> </tr> </tbody> </table> <h4 id="when-url-and-homepage-domains-differ-add-verified">When URL and homepage domains differ, add <code class="language-plaintext highlighter-rouge">verified:</code>
</h4> <p>When the domains of <code class="language-plaintext highlighter-rouge">url</code> and <code class="language-plaintext highlighter-rouge">homepage</code> differ, the discrepancy should be documented with the <code class="language-plaintext highlighter-rouge">verified:</code> parameter, repeating the smallest possible portion of the URL that uniquely identifies the app or vendor, excluding the protocol. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/ec2476459ead02e80391f44d42a2b48a18bf373d/Casks/1/1password-cli.rb#L8-L9">1password-cli.rb</a>)</p> <p>This must be added so a user auditing the cask knows the URL was verified by the Homebrew Cask team as the one provided by the vendor, even though it may look unofficial. It is our responsibility as Homebrew Cask maintainers to verify both the <code class="language-plaintext highlighter-rouge">url</code> and <code class="language-plaintext highlighter-rouge">homepage</code> information when first added (or subsequently modified, apart from versioning).</p> <p>The parameter doesn’t mean you should trust the source blindly, but we only approve casks in which users can easily verify its authenticity with basic means, such as checking the official homepage or public repository. Occasionally, slightly more elaborate techniques may be used, such as inspecting a <a href="#stanza-livecheck"><code class="language-plaintext highlighter-rouge">livecheck</code></a> URL we established as official. Cases where such quick verifications aren’t possible (e.g. when the download URL is behind a registration wall) are <a href="acceptable-casks#unofficial-vendorless-and-walled-builds">treated in a stricter manner</a>.</p> <h4 id="difficulty-finding-a-url">Difficulty finding a URL</h4> <p>Web browsers may obscure the direct <code class="language-plaintext highlighter-rouge">url</code> of a download for a variety of reasons. Homebrew Cask supplies a <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/developer/bin/list_url_attributes_on_file"><code class="language-plaintext highlighter-rouge">list_url_attributes_on_file</code></a> script which can read extended file attributes to extract the actual source URL of most files downloaded by a browser on macOS. The script usually emits multiple candidate URLs; you may have to test each of them:</p> <pre data-language="bash">$(brew --repository homebrew/cask)/developer/bin/list_url_attributes_on_file &lt;file&gt;</pre> <h4 id="subversion-urls">Subversion URLs</h4> <p>In rare cases, a distribution may not be available over ordinary HTTP(S). Subversion URLs are also supported, and can be specified by appending the following key-value pairs to <code class="language-plaintext highlighter-rouge">url</code>:</p> <table> <thead> <tr> <th>key</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">using:</code></td> <td>the symbol <code class="language-plaintext highlighter-rouge">:svn</code> is the only legal value</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">revision:</code></td> <td>string identifying the Subversion revision to download</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">trust_cert:</code></td> <td>set to <code class="language-plaintext highlighter-rouge">true</code> to automatically trust the certificate presented by the server (avoiding an interactive prompt)</td> </tr> </tbody> </table> <h4 id="git-urls">Git URLs</h4> <p>Artifacts may also be distributed via Git repositories. URLs that end in <code class="language-plaintext highlighter-rouge">.git</code> are automatically assumed to be Git repositories, and the following key-value pairs may be appended to <code class="language-plaintext highlighter-rouge">url</code>:</p> <table> <thead> <tr> <th>key</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">using:</code></td> <td>the symbol <code class="language-plaintext highlighter-rouge">:git</code> is the only legal value</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">tag:</code></td> <td>string identifying the Git tag to download</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">revision:</code></td> <td>string identifying the Git revision to download</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">branch:</code></td> <td>string identifying the Git branch to download</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">only_path:</code></td> <td>path within the repository to limit the checkout to. If only a single directory of a large repository is required, using this option can significantly speed up downloads. If provided, artifact paths are relative to this path. (Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/a6348a1710928bf43510098725c2068ffe3adc69/Casks/font/font-g/font-geo.rb#L5-L8">font-geo.rb</a>)</td> </tr> </tbody> </table> <h4 id="sourceforgeosdn-urls">SourceForge/OSDN URLs</h4> <p>SourceForge and OSDN (formerly <code class="language-plaintext highlighter-rouge">SourceForge.JP</code>) projects are common ways to distribute binaries, but they provide many different styles of URLs to get to the goods.</p> <p>We prefer URLs of this format:</p> <pre data-language="plaintext">https://downloads.sourceforge.net/&lt;project_name&gt;/&lt;filename&gt;.&lt;ext&gt;</pre> <p>Or, if it’s from OSDN, where <code class="language-plaintext highlighter-rouge">&lt;subdomain&gt;</code> is typically of the form <code class="language-plaintext highlighter-rouge">dl</code> or <code class="language-plaintext highlighter-rouge">&lt;user&gt;.dl</code>:</p> <pre data-language="plaintext">http://&lt;subdomain&gt;.osdn.jp/&lt;project_name&gt;/&lt;release_id&gt;/&lt;filename&gt;.&lt;ext&gt;</pre> <p>If these formats are not available, and the application is macOS-exclusive (otherwise a command-line download defaults to the Windows version) we prefer the use of this format:</p> <pre data-language="plaintext">https://sourceforge.net/projects/&lt;project_name&gt;/files/latest/download</pre> <h4 id="some-providers-block-command-line-downloads">Some providers block command-line downloads</h4> <p>Some hosting providers actively block command-line HTTP clients. Such URLs cannot be used in casks.</p> <p>Other providers may use URLs that change periodically, or even on each visit (example: FossHub). These cases tend to occur when the vendor is actively trying to prevent automated downloads, so we prefer to not add those casks to the main repository.</p> <h3 id="stanza-version">Stanza: <code class="language-plaintext highlighter-rouge">version</code>
</h3> <p><code class="language-plaintext highlighter-rouge">version</code>, while related to the app’s own versioning, doesn’t have to follow it exactly. It is common to change it slightly so it can be <a href="https://en.wikipedia.org/wiki/String_interpolation#Ruby_/_Crystal">interpolated</a> in other stanzas, usually in <code class="language-plaintext highlighter-rouge">url</code> to create a cask that only needs <code class="language-plaintext highlighter-rouge">version</code> and <code class="language-plaintext highlighter-rouge">sha256</code> changes when updated. This can be taken further, when needed, with <a href="https://ruby-doc.org/core/String.html">Ruby <code class="language-plaintext highlighter-rouge">String</code> methods</a>.</p> <p>For example, instead of:</p> <pre data-language="ruby">version "1.2.3"
url "https://example.com/file-version-123.dmg"</pre> <p>we can use:</p> <pre data-language="ruby">version "1.2.3"
url "https://example.com/file-version-#{version.delete(".")}.dmg"</pre> <p>We can also leverage the power of regular expressions. So instead of:</p> <pre data-language="ruby">version "1.2.3build4"
url "https://example.com/1.2.3/file-version-1.2.3build4.dmg"</pre> <p>we can use:</p> <pre data-language="ruby">version "1.2.3build4"
url "https://example.com/#{version.sub(/build\d+/, "")}/file-version-#{version}.dmg"</pre> <h4 id="version-methods">
<code class="language-plaintext highlighter-rouge">version</code> methods</h4> <p>The examples above can become hard to read, however. Since many of these changes are common, we provide a number of helpers to clearly interpret otherwise obtuse cases:</p> <table> <thead> <tr> <th>method</th> <th>input</th> <th>output</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">major</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">minor</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">2</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">patch</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">3-a45</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">major_minor</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">1.2</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">major_minor_patch</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">minor_patch</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">2.3-a45</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">csv.first</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">csv.second</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">ccdd88</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">dots_to_hyphens</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">1-2-3-a45,ccdd88</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">no_dots</code></td> <td><code class="language-plaintext highlighter-rouge">1.2.3-a45,ccdd88</code></td> <td><code class="language-plaintext highlighter-rouge">123-a45,ccdd88</code></td> </tr> </tbody> </table> <p>Similar to <code class="language-plaintext highlighter-rouge">dots_to_hyphens</code>, we provide methods for all logical permutations of <code class="language-plaintext highlighter-rouge">{dots,hyphens,underscores}_to_{dots,hyphens,underscores}</code>. The same applies to <code class="language-plaintext highlighter-rouge">no_dots</code> in the form of <code class="language-plaintext highlighter-rouge">no_{dots,hyphens,underscores}</code>, with an extra <code class="language-plaintext highlighter-rouge">no_dividers</code> that applies all these at once.</p> <p>Finally, there is <code class="language-plaintext highlighter-rouge">csv</code> which returns an array of comma-separated values, which replaces the deprecated <code class="language-plaintext highlighter-rouge">before_comma</code> and <code class="language-plaintext highlighter-rouge">after_comma</code> methods. Comma-separated versions should only be used for otherwise complex cases; ideally, there should be no more than two instances of <code class="language-plaintext highlighter-rouge">,</code> per <code class="language-plaintext highlighter-rouge">version</code>, although methods up to <code class="language-plaintext highlighter-rouge">csv.fifth</code> are available.</p> <h4 id="special-value-latest">Special value <code class="language-plaintext highlighter-rouge">:latest</code>
</h4> <p>The special value <code class="language-plaintext highlighter-rouge">version :latest</code> is used when:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">url</code> does not contain any version information and there is no way to retrieve the version using a <code class="language-plaintext highlighter-rouge">livecheck</code>, or</li> <li>having a correct value for <code class="language-plaintext highlighter-rouge">version</code> is too difficult or impractical, even with our automated systems. For example, <a href="https://github.com/Homebrew/homebrew-cask/blob/aa461148bbb5119af26b82cccf5003e2b4e50d95/Casks/c/chromium.rb#L4">chromium.rb</a> which releases multiple versions per day.</li> </ul> <p>In both cases, using the special value <a href="#special-value-no_check"><code class="language-plaintext highlighter-rouge">sha256 :no_check</code></a> is also required. Casks that use <code class="language-plaintext highlighter-rouge">version :latest</code> are excluded from <a href="autobump">autobumping</a>.</p> <h3 id="stanza-zap">Stanza: <code class="language-plaintext highlighter-rouge">zap</code>
</h3> <h4 id="zap-purpose">
<code class="language-plaintext highlighter-rouge">zap</code> purpose</h4> <p>The <code class="language-plaintext highlighter-rouge">zap</code> stanza describes a more complete uninstallation of files associated with a cask. The <code class="language-plaintext highlighter-rouge">zap</code> procedures will never be performed by default, but only if the user uses <code class="language-plaintext highlighter-rouge">--zap</code> on <code class="language-plaintext highlighter-rouge">uninstall</code>:</p> <pre data-language="bash">brew uninstall --zap firefox</pre> <p><code class="language-plaintext highlighter-rouge">zap</code> stanzas may remove:</p> <ul> <li>Preference files and caches stored within the user’s <code class="language-plaintext highlighter-rouge">~/Library</code> directory.</li> <li>Shared resources such as application updaters. Since shared resources may be removed, other applications may be affected by <code class="language-plaintext highlighter-rouge">brew uninstall --zap</code>. Understanding that is the responsibility of the end user.</li> </ul> <p><code class="language-plaintext highlighter-rouge">zap</code> stanzas should not remove:</p> <ul> <li>Files created by the user directly.</li> </ul> <p>Appending <code class="language-plaintext highlighter-rouge">--force</code> to the command will allow you to perform these actions even if the cask is no longer installed:</p> <pre data-language="bash">brew uninstall --zap --force firefox</pre> <h4 id="zap-syntax">
<code class="language-plaintext highlighter-rouge">zap</code> syntax</h4> <p>The form of the <code class="language-plaintext highlighter-rouge">zap</code> stanza follows the <a href="#stanza-uninstall"><code class="language-plaintext highlighter-rouge">uninstall</code></a> stanza. All the same directives are available. The <code class="language-plaintext highlighter-rouge">trash:</code> key is preferred over <code class="language-plaintext highlighter-rouge">delete:</code>.</p> <p>Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/974a55ade77bb4edc8bbb80ef72eec83ae0e76c0/Casks/d/dropbox.rb#L30-L68">dropbox.rb</a></p> <h4 id="zap-creation">
<code class="language-plaintext highlighter-rouge">zap</code> creation</h4> <p>The simplest method is to use <a href="https://github.com/nrlquaker/homebrew-createzap">@nrlquaker’s CreateZap</a>, which can automatically generate the stanza. In a few instances it may fail to pick up anything and manual creation may be required.</p> <p>Manual creation can be facilitated with:</p> <ul> <li>Some of the <a href="https://github.com/Homebrew/homebrew-cask/tree/HEAD/developer/bin">helper scripts found under <code class="language-plaintext highlighter-rouge">developer/bin</code></a>
</li> <li><code class="language-plaintext highlighter-rouge">sudo find / -iname "*&lt;search item&gt;*"</code></li> <li>An uninstaller tool such as <a href="https://formulae.brew.sh/cask/appcleaner">AppCleaner</a>
</li> <li>Inspection of the usual paths, i.e. <code class="language-plaintext highlighter-rouge">/Library/{'Application Support',LaunchAgents,LaunchDaemons,Frameworks,Logs,Preferences,PrivilegedHelperTools}</code> and <code class="language-plaintext highlighter-rouge">~/Library/{'Application Support',Caches,Containers,LaunchAgents,Logs,Preferences,'Saved Application State'}</code>
</li> </ul> <p>If no additional files are discovered, instead of a zap stanza, include the following comment:</p> <pre data-language="ruby"># No zap stanza required</pre> <h2 id="conditional-statements">Conditional statements</h2> <h3 id="handling-different-system-configurations">Handling different system configurations</h3> <p>Casks can deliver specific versions of artifacts depending on the current macOS release or CPU architecture by either tailoring the <code class="language-plaintext highlighter-rouge">url</code> / <code class="language-plaintext highlighter-rouge">sha256</code> / <code class="language-plaintext highlighter-rouge">version</code> stanzas, using the <a href="formula-cookbook#handling-different-system-configurations"><code class="language-plaintext highlighter-rouge">on_&lt;system&gt;</code> syntax</a> (which replaces conditional statements using <code class="language-plaintext highlighter-rouge">MacOS.version</code> or <code class="language-plaintext highlighter-rouge">Hardware::CPU</code>), or both.</p> <p>If your cask’s artifact is offered as separate downloads for Apple Silicon and Intel architectures, they’ll presumably be downloadable at distinct URLs that differ only slightly. To adjust the URL depending on the current CPU architecture, supply a hash for each to the <code class="language-plaintext highlighter-rouge">arm:</code> and <code class="language-plaintext highlighter-rouge">intel:</code> parameters of <code class="language-plaintext highlighter-rouge">sha256</code>, and use the special <code class="language-plaintext highlighter-rouge">arch</code> stanza to define the unique components of the respective URLs for substitution in the <code class="language-plaintext highlighter-rouge">url</code>. Additional substitutions can be defined by calling <code class="language-plaintext highlighter-rouge">on_arch_conditional</code> directly. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/a4164b8f5084fdaefb6e2e2f4f699270690b7845/Casks/l/libreoffice.rb#L1-L10">libreoffice.rb</a>):</p> <pre data-language="ruby">cask "libreoffice" do
  arch arm: "aarch64", intel: "x86-64"
  folder = on_arch_conditional arm: "aarch64", intel: "x86_64"

  version "7.6.0"
  sha256 arm:   "81eab945a33622fc156951e804024d23aa9a745c06743b4947215ed9303ad1c4",
         intel: "ede541af151487f60eb518e310d20dad1a973f3dbe9ff78d782dd29b14ba2946"

  url "https://download.documentfoundation.org/libreoffice/stable/#{version}/mac/#{folder}/LibreOffice_#{version}_MacOS_#{arch}.dmg",
      verified: "download.documentfoundation.org/libreoffice/stable/"
end</pre> <p>If the version number is different for each architecture, locate the unique <code class="language-plaintext highlighter-rouge">version</code> and (if checked) <code class="language-plaintext highlighter-rouge">sha256</code> stanzas within <code class="language-plaintext highlighter-rouge">on_arm</code> and <code class="language-plaintext highlighter-rouge">on_intel</code> blocks. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/11f6966bf17628b98895d64a61a4fb0bc1bb31bf/Casks/i/inkscape.rb#L1-L13">inkscape.rb</a>):</p> <pre data-language="ruby">cask "inkscape" do
  arch arm: "arm64", intel: "x86_64"

  on_arm do
    version "1.3.0,42339"
    sha256 "e37b5f8b8995a0ecc41ca7fcae90d79bcd652b7a25d2f6e52c4e2e79aef7fec1"
  end
  on_intel do
    version "1.3.0,42338"
    sha256 "e97de6804d8811dd2f1bc45d709d87fb6fe45963aae710c24a4ed655ecd8eb8a"
  end

  url "https://inkscape.org/gallery/item/#{version.csv.second}/Inkscape-#{version.csv.first}_#{arch}.dmg"
end</pre> <p>To adjust the installed version depending on the current macOS release, use a series of <code class="language-plaintext highlighter-rouge">on_&lt;system&gt;</code> blocks that cover the range of supported releases. Each block can contain stanzas that set which version to download and customize installation/uninstallation and livecheck behaviour for one or more releases. Example (from <a href="https://github.com/Homebrew/homebrew-cask/blob/482c34e950da8d649705f4aaea7b760dcb4b5402/Casks/c/calibre.rb#L1-L34">calibre.rb</a>):</p> <pre data-language="ruby">cask "calibre" do
  on_high_sierra :or_older do
    version "3.48.0"
    sha256 "68829cd902b8e0b2b7d5cf7be132df37bcc274a1e5720b4605d2dd95f3a29168"

    livecheck do
      skip "Legacy version"
    end
  end
  on_mojave do
    # ...
  end
  on_catalina do
    # ...
  end
  on_big_sur :or_newer do
    version "6.25.0"
    sha256 "a7ed19ae0526630ccb138b9afee6dc5169904180b02f7a3089e78d3e0022753b"

    livecheck do
      url "https://github.com/kovidgoyal/calibre"
      strategy :github_latest
    end
  end
end</pre> <p>Such <code class="language-plaintext highlighter-rouge">on_&lt;system&gt;</code> blocks can be nested and contain other stanzas not listed here. However, they should not contain <code class="language-plaintext highlighter-rouge">depends_on macos:</code> stanzas, which should occur once below the <code class="language-plaintext highlighter-rouge">on_&lt;system&gt;</code> blocks and encompass all releases listed in the cask. Examples: <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/c/calhash.rb">calhash.rb</a>, <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/r/r.rb">r.rb</a>, <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/w/wireshark.rb">wireshark.rb</a></p> <h3 id="switch-between-languages-or-regions">Switch between languages or regions</h3> <p>If a cask is available in multiple languages, you can use the <a href="#stanza-language"><code class="language-plaintext highlighter-rouge">language</code></a> stanza to switch between languages or regions based on the system locale.</p> <h2 id="arbitrary-ruby-methods">Arbitrary Ruby methods</h2> <p>In the exceptional case that the cask DSL is insufficient, it is possible to define arbitrary Ruby variables and methods inside the cask by creating a <code class="language-plaintext highlighter-rouge">Utils</code> namespace. Example:</p> <pre data-language="ruby">cask "myapp" do
  module Utils
    def self.arbitrary_method
      # ...
    end
  end

  version "1.0"
  sha256 "a32565cdb1673f4071593d4cc9e1c26bc884218b62fef8abc450daa47ba8fa92"

  url "https://#{Utils.arbitrary_method}"
  name "MyApp"
  homepage "https://www.example.com/"
  # ...
end</pre> <p>This should be used sparingly: any method which is needed by two or more casks should instead be rolled into Homebrew/brew. Care must also be taken that such methods be very efficient.</p> <p>Variables and methods should not be defined outside the <code class="language-plaintext highlighter-rouge">Utils</code> namespace, as they may collide with Homebrew Cask internals.</p> <h2 id="token-reference">Token reference</h2> <p>This section describes the algorithm implemented in the <code class="language-plaintext highlighter-rouge">generate_cask_token</code> script, and covers detailed rules and exceptions which are not needed in most cases.</p> <ul> <li><a href="#purpose">Purpose</a></li> <li><a href="#finding-the-simplified-name-of-the-vendors-distribution">Finding the simplified name of the vendor’s distribution</a></li> <li><a href="#converting-the-simplified-name-to-a-token">Converting the simplified name to a token</a></li> <li><a href="#cask-filenames">Cask filenames</a></li> <li><a href="#cask-headers">Cask headers</a></li> <li><a href="#cask-token-examples">Cask token examples</a></li> <li><a href="#special-affixes">Special affixes</a></li> </ul> <h3 id="purpose">Purpose</h3> <p>Software vendors are often inconsistent with their naming. By enforcing strict naming conventions we aim to:</p> <ul> <li>Prevent duplicate submissions</li> <li>Minimize renaming events</li> <li>Unambiguously boil down the name of the software into a unique identifier</li> <li>Avoid conflicts with Homebrew/homebrew-core formulae</li> </ul> <p>Details of software names and brands will inevitably be lost in the conversion to a minimal token. To capture the vendor’s full name for a distribution, use the <a href="#stanza-name"><code class="language-plaintext highlighter-rouge">name</code></a> within a cask, which accepts an unrestricted UTF-8 string.</p> <h3 id="finding-the-simplified-name-of-the-vendors-distribution">Finding the simplified name of the vendor’s distribution</h3> <h4 id="simplified-names-of-apps">Simplified names of apps</h4> <ul> <li> <p>Start with the exact name of the application bundle as it appears on disk, such as <code class="language-plaintext highlighter-rouge">Google Chrome.app</code>.</p> </li> <li> <p>If the name uses letters outside A–Z, convert it to ASCII as described in <a href="#converting-to-ascii">Converting to ASCII</a>.</p> </li> <li> <p>Remove <code class="language-plaintext highlighter-rouge">.app</code> from the end.</p> </li> <li> <p>Remove from the end: the string “app”, if the vendor styles the name like “Software App.app”.</p> <ul> <li>Exception: when “app” is an inseparable part of the name, without which the name would be inherently nonsensical, as in <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/w/whatsapp.rb">whatsapp.rb</a>.</li> </ul> </li> <li> <p>Remove from the end: version numbers or incremental release designations such as “alpha”, “beta”, or “release candidate”. Strings which distinguish different capabilities or codebases such as “Community Edition” are currently accepted.</p> <ul> <li>Exception: when a number is not an incremental release counter, but a differentiator for a different product from a different vendor, as in <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/k/kdiff3.rb">kdiff3.rb</a>.</li> </ul> </li> <li> <p>If the version number is arranged to occur in the middle of the App name, it should also be removed.</p> </li> <li> <p>Remove from the end: “Launcher”, “Quick Launcher”.</p> </li> <li> <p>Remove from the end: strings such as “Desktop”, “for Desktop”.</p> </li> <li> <p>Remove from the end: strings such as “Mac”, “for Mac”, “for OS X”, “macOS”, “for macOS”. These terms are generally added to ported software such as “MAME OS X.app”.</p> <ul> <li>Exception: when the software is not a port, and “Mac” is an inseparable part of the name, without which the name would be inherently nonsensical, as in <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/p/playonmac.rb">PlayOnMac.app</a>.</li> </ul> </li> <li> <p>Remove from the end: hardware designations such as “for x86”, “32-bit”, “ARM”.</p> </li> <li> <p>Remove from the end: software framework names such as “Cocoa”, “Qt”, “Gtk”, “Wx”, “Java”, “Oracle JVM”, etc.</p> <ul> <li>Exception: the framework is the product being casked.</li> </ul> </li> <li> <p>Remove from the end: localization strings such as “en-US”.</p> </li> <li> <p>If the result of this process is a generic term, such as “Macintosh Installer”, try prepending the name of the vendor or developer, followed by a hyphen. If that doesn’t work, then just create the best name you can, based on the vendor’s web page.</p> </li> <li> <p>If the result conflicts with the name of an existing cask or Homebrew/homebrew-core formula, make yours unique by prepending the name of the vendor or developer, followed by a hyphen. Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/u/unison.rb">unison.rb</a> and <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/p/panic-unison.rb">panic-unison.rb</a>.</p> </li> <li> <p>If the result still conflicts with the name of an existing Homebrew/homebrew-core formula, adjust the name to better describe the difference by e.g. appending <code class="language-plaintext highlighter-rouge">-app</code>. Example: <code class="language-plaintext highlighter-rouge">appium</code> formula and <code class="language-plaintext highlighter-rouge">appium-desktop</code> cask, <code class="language-plaintext highlighter-rouge">angband</code> formula and <code class="language-plaintext highlighter-rouge">angband-app</code> cask.</p> </li> <li> <p>Inevitably, there are a small number of exceptions not covered by the rules. Don’t hesitate to <a href="https://github.com/orgs/Homebrew/discussions">use the forum</a> if you have a problem.</p> </li> </ul> <h4 id="converting-to-ascii">Converting to ASCII</h4> <ul> <li> <p>If the vendor provides an English localization string, that is preferred. Here are the places it may be found, in order of preference:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">CFBundleDisplayName</code> in the main <code class="language-plaintext highlighter-rouge">Info.plist</code> file of the app bundle</li> <li>
<code class="language-plaintext highlighter-rouge">CFBundleName</code> in the main <code class="language-plaintext highlighter-rouge">Info.plist</code> file of the app bundle</li> <li>
<code class="language-plaintext highlighter-rouge">CFBundleDisplayName</code> in <code class="language-plaintext highlighter-rouge">InfoPlist.strings</code> of an <code class="language-plaintext highlighter-rouge">en.lproj</code> localization directory</li> <li>
<code class="language-plaintext highlighter-rouge">CFBundleName</code> in <code class="language-plaintext highlighter-rouge">InfoPlist.strings</code> of an <code class="language-plaintext highlighter-rouge">en.lproj</code> localization directory</li> <li>
<code class="language-plaintext highlighter-rouge">CFBundleDisplayName</code> in <code class="language-plaintext highlighter-rouge">InfoPlist.strings</code> of an <code class="language-plaintext highlighter-rouge">English.lproj</code> localization directory</li> <li>
<code class="language-plaintext highlighter-rouge">CFBundleName</code> in <code class="language-plaintext highlighter-rouge">InfoPlist.strings</code> of an <code class="language-plaintext highlighter-rouge">English.lproj</code> localization directory</li> </ul> </li> <li> <p>When there is no vendor localization string, romanize the name by transliteration or decomposition.</p> </li> <li> <p>As a last resort, translate the name of the app bundle into English.</p> </li> </ul> <h4 id="simplified-names-of-pkg-based-installers">Simplified names of <code class="language-plaintext highlighter-rouge">pkg</code>-based installers</h4> <ul> <li>The simplified name of a <code class="language-plaintext highlighter-rouge">pkg</code> may be more tricky to determine than that of an App. If a <code class="language-plaintext highlighter-rouge">pkg</code> installs an App, then use that App name with the rules above. If not, just create the best name you can, based on the vendor’s web page.</li> </ul> <h4 id="simplified-names-of-non-app-software">Simplified names of non-App software</h4> <ul> <li> <p>Currently, rules for generating a token are not well-defined for Preference Panes, Quick Look plugins, and several other types of software installable by Homebrew Cask. Just create the best name you can, based on the filename on disk or the vendor’s web page. Watch out for duplicates.</p> <p>Non-app tokens should become more standardized in the future.</p> </li> </ul> <h3 id="converting-the-simplified-name-to-a-token">Converting the simplified name to a token</h3> <p>As the token is the primary identifier for casks, it’s the unique string users refer to when operating on them.</p> <p>To convert the App’s simplified name (above) to a token:</p> <ul> <li>Convert all letters to lower case.</li> <li>Expand the <code class="language-plaintext highlighter-rouge">+</code> symbol into a separated English word: <code class="language-plaintext highlighter-rouge">-plus-</code>.</li> <li>Expand the <code class="language-plaintext highlighter-rouge">@</code> symbol into a separated English word: <code class="language-plaintext highlighter-rouge">-at-</code>.</li> <li>Spaces become hyphens.</li> <li>Underscores become hyphens.</li> <li>Middots/Interpuncts become hyphens.</li> <li>Hyphens stay hyphens.</li> <li>Digits stay digits.</li> <li>Delete any character which is not alphanumeric or a hyphen.</li> <li>Collapse a series of multiple hyphens into one hyphen.</li> <li>Delete any leading or trailing hyphens.</li> </ul> <h4 id="casks-pinned-to-specific-versions">Casks pinned to specific versions</h4> <p>Casks pinned to a specific version of the application (e.g. <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/c/carbon-copy-cloner%405.rb"><code class="language-plaintext highlighter-rouge">carbon-copy-cloner@5</code></a>) should use the same token as the standard cask with a suffix of <code class="language-plaintext highlighter-rouge">@&lt;version-number&gt;</code>. For Carbon Copy Cloner (<code class="language-plaintext highlighter-rouge">carbon-copy-cloner</code>), pinned to version 6, the token is <code class="language-plaintext highlighter-rouge">carbon-copy-cloner@6</code>.</p> <h4 id="casks-pinned-to-development-channels">Casks pinned to development channels</h4> <p>Casks that use a development “channel”, such as betas, should use the same token as the standard cask with a suffix of <code class="language-plaintext highlighter-rouge">@&lt;channel&gt;</code>. For Google Chrome (<code class="language-plaintext highlighter-rouge">google-chrome</code>), using the “beta” channel, the token should be <code class="language-plaintext highlighter-rouge">google-chrome@beta</code>.</p> <h3 id="cask-filenames">Cask filenames</h3> <p>Casks are defined in a Ruby file named after the token, with the file extension <code class="language-plaintext highlighter-rouge">.rb</code>.</p> <h3 id="cask-headers">Cask headers</h3> <p>The token is also given in the header line for each cask.</p> <h3 id="cask-token-examples">Cask token examples</h3> <p>These illustrate most of the rules for generating a token:</p> <table> <thead> <tr> <th>App Name on Disk</th> <th>Simplified App Name</th> <th>Cask Token</th> <th>Filename</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">Audio Hijack Pro.app</code></td> <td>Audio Hijack Pro</td> <td>audio-hijack-pro</td> <td><code class="language-plaintext highlighter-rouge">audio-hijack-pro.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">VLC.app</code></td> <td>VLC</td> <td>vlc</td> <td><code class="language-plaintext highlighter-rouge">vlc.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">BetterTouchTool.app</code></td> <td>BetterTouchTool</td> <td>bettertouchtool</td> <td><code class="language-plaintext highlighter-rouge">bettertouchtool.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">LPK25 Editor.app</code></td> <td>LPK25 Editor</td> <td>lpk25-editor</td> <td><code class="language-plaintext highlighter-rouge">lpk25-editor.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Sublime Text 2.app</code></td> <td>Sublime Text</td> <td>sublime-text</td> <td><code class="language-plaintext highlighter-rouge">sublime-text.rb</code></td> </tr> </tbody> </table> <p>For versioned/development channel casks:</p> <table> <thead> <tr> <th>Standard Cask Token</th> <th>Derivative</th> <th>Cask Token</th> <th>Filename</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">google-chrome</code></td> <td>Beta channel</td> <td><code class="language-plaintext highlighter-rouge">google-chrome@beta</code></td> <td><code class="language-plaintext highlighter-rouge">google-chrome@beta.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">vlc</code></td> <td>Nightly channel</td> <td><code class="language-plaintext highlighter-rouge">vlc@nightly</code></td> <td><code class="language-plaintext highlighter-rouge">vlc@nightly.rb</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">carbon-copy-cloner</code></td> <td>Pinned to version 5</td> <td><code class="language-plaintext highlighter-rouge">carbon-copy-cloner@5</code></td> <td><code class="language-plaintext highlighter-rouge">carbon-copy-cloner@5.rb</code></td> </tr> </tbody> </table> <h3 id="special-affixes">Special affixes</h3> <p>A few situations require a prefix or suffix to be added to the token.</p> <h4 id="token-overlap">Token overlap</h4> <p>When the token for a new cask would otherwise conflict with the token of an already existing cask, the nature of that overlap dictates the token, potentially for both casks. See <a href="acceptable-casks#forks-and-apps-with-conflicting-names">Forks and apps with conflicting names</a> for information on how to proceed.</p> <h4 id="potentially-misleading-name">Potentially misleading name</h4> <p>If the token for a piece of unofficial software that interacts with a popular service would make it look official and the vendor is not authorised to use the name, <a href="acceptable-casks#forks-and-apps-with-conflicting-names">a prefix must be added</a> for disambiguation.</p> <p>In cases where the prefix is ambiguous and would make the app appear official, the <code class="language-plaintext highlighter-rouge">-unofficial</code> suffix may be used.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Cask-Cookbook" class="_attribution-link">https://docs.brew.sh/Cask-Cookbook</a>
  </p>
</div>
