<h1>MediaStreamTrackProcessor</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMediaStreamTrackProcessor&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard note"><p><strong>Note:</strong> This feature is only available in <a href="dedicatedworkerglobalscope">Dedicated Web Workers</a>.</p></div> <div class="notecard warning"> <p><strong>Warning:</strong> Browsers differ on which global context they expose this interface in (e.g., only window in some browsers and only dedicated worker in others), making them incompatible. Keep this in mind when comparing support.</p> </div> <p>The <code>MediaStreamTrackProcessor</code> interface of the <a href="insertable_streams_for_mediastreamtrack_api">Insertable Streams for MediaStreamTrack API</a> consumes a video <a href="mediastreamtrack"><code>MediaStreamTrack</code></a> object's source and generates a stream of <a href="videoframe"><code>VideoFrame</code></a> objects.</p>     <mdn-survey></mdn-survey>  <h2 id="constructor" class="heading">Constructor</h2> <dl> <dt id="mediastreamtrackprocessor"><a href="mediastreamtrackprocessor/mediastreamtrackprocessor"><code>MediaStreamTrackProcessor()</code></a></dt> <dd> <p>Creates a new <code>MediaStreamTrackProcessor</code> object.</p> </dd> <dt id="window.mediastreamtrackprocessor">
<a href="mediastreamtrackprocessor/mediastreamtrackprocessor"><code>window.MediaStreamTrackProcessor()</code></a> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr>
</dt> <dd> <p>Creates a new <code>MediaStreamTrackProcessor</code> object on the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Main_thread">main thread</a> that can process both video and audio.</p> </dd> </dl>  <h2 id="instance_properties" class="heading">Instance properties</h2> <dl> <dt id="mediastreamtrackprocessor.readable"><a href="mediastreamtrackprocessor/readable"><code>MediaStreamTrackProcessor.readable</code></a></dt> <dd> <p>Returns a <a href="readablestream"><code>ReadableStream</code></a>.</p> </dd> </dl>  <h2 id="examples" class="heading">Examples</h2> <p>The following example is from the article <a href="https://blog.mozilla.org/webrtc/unbundling-mediastreamtrackprocessor-and-videotrackgenerator/" target="_blank">Unbundling MediaStreamTrackProcessor and VideoTrackGenerator</a>. It <a href="web_workers_api/transferable_objects">transfers</a> a camera <a href="mediastreamtrack"><code>MediaStreamTrack</code></a> to a worker for processing. The worker creates a pipeline that applies a sepia tone filter to the video frames and mirrors them. The pipeline culminates in a <a href="videotrackgenerator"><code>VideoTrackGenerator</code></a> whose <a href="mediastreamtrack"><code>MediaStreamTrack</code></a> is transferred back and played. The media now flows in real time through the transform off the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Main_thread">main thread</a>.</p> <div class="code-example"><pre data-language="js">const stream = await navigator.mediaDevices.getUserMedia({ video: true });
const [track] = stream.getVideoTracks();
const worker = new Worker("worker.js");
worker.postMessage({ track }, [track]);
const { data } = await new Promise((r) =&gt; {
  worker.onmessage = r;
});
video.srcObject = new MediaStream([data.track]);
</pre></div> <p>worker.js:</p> <div class="code-example"><pre data-language="js">onmessage = async ({ data: { track } }) =&gt; {
  const vtg = new VideoTrackGenerator();
  self.postMessage({ track: vtg.track }, [vtg.track]);
  const { readable } = new MediaStreamTrackProcessor({ track });
  await readable
    .pipeThrough(new TransformStream({ transform }))
    .pipeTo(vtg.writable);
};
</pre></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://w3c.github.io/mediacapture-transform/#mediastreamtrackprocessor" rel="noopener" target="_blank">MediaStreamTrack Insertable Media Processing using Streams&gt;<br># mediastreamtrackprocessor&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>MediaStreamTrackProcessor</code></th>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>80</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>66</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes"><details><summary>17.0</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
</tr>
<tr>
<th><code>MediaStreamTrackProcessor</code></th>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>80</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>66</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes"><details><summary>17.0</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes"><details><summary>94</summary>Exposed on <code>Window</code> instead of <code>DedicatedWorker</code>.</details></td>
<td class="bc-supports-yes">18</td>
</tr>
<tr>
<th><code>readable</code></th>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">66</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">17.0</td>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-yes">18</td>
</tr>
</tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="videotrackgenerator"><code>VideoTrackGenerator</code></a></li> <li>
<a href="https://developer.chrome.com/docs/capabilities/web-apis/mediastreamtrack-insertable-media-processing" target="_blank">Insertable streams for MediaStreamTrack</a> on developer.chrome.com <div class="notecard note"> <p><strong>Note:</strong> This article was written before the API was restricted to workers and video. Beware its use of the non-standard version of <code>MediaStreamTrackProcessor</code> which blocks on the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Main_thread">main thread</a>.</p> </div> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrackProcessor" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrackProcessor</a>
  </p>
</div>
