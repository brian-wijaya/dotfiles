<h1>Element: setHTML() method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FElement%2FsetHTML&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>setHTML()</code> method of the <a href="../element"><code>Element</code></a> interface provides an XSS-safe method to parse and sanitize a string of HTML into a <a href="../documentfragment"><code>DocumentFragment</code></a>, and then insert it into the DOM as a subtree of the element.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">setHTML(input)
setHTML(input, options)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="input"><a href="#input"><code>input</code></a></dt> <dd> <p>A string defining HTML to be sanitized and injected into the element.</p> </dd> <dt id="options"><a href="#options"><code>options</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>An options object with the following optional parameters:</p> <dl> <dt id="sanitizer"><a href="#sanitizer"><code>sanitizer</code></a></dt> <dd> <p>A <a href="../sanitizer"><code>Sanitizer</code></a> or <a href="../sanitizerconfig"><code>SanitizerConfig</code></a> object which defines what elements of the input will be allowed or removed, or the string <code>"default"</code> for the default configuration. Note that generally a <code>"Sanitizer</code> is expected to be more efficient than a <code>SanitizerConfig</code> if the configuration is to reused. If not specified, the default sanitizer configuration is used.</p> </dd> </dl> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>None (<code>undefined</code>).</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <dl> <dt id="typeerror"><a href="#typeerror"><code>TypeError</code></a></dt> <dd> <p>This is thrown if <code>options.sanitizer</code> is passed a:</p> <ul> <li>non-normalized <a href="../sanitizerconfig"><code>SanitizerConfig</code></a> (one that includes both "allowed" and "removed" configuration settings).</li> <li>string that does not have the value <code>"default"</code>.</li> <li>value that is not a <a href="../sanitizer"><code>Sanitizer</code></a>, <a href="../sanitizerconfig"><code>SanitizerConfig</code></a>, or string.</li> </ul> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p>The <code>setHTML()</code> method provides an XSS-safe method to parse and sanitize a string of HTML into a <a href="../documentfragment"><code>DocumentFragment</code></a>, and then insert it into the DOM as a subtree of the element.</p> <p><code>setHTML()</code> drops any elements in the HTML input string that are invalid in the context of the current element, such as a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/col"><code>&lt;col&gt;</code></a> element outside of a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/table"><code>&lt;table&gt;</code></a>. It then removes any HTML entities that aren't allowed by the sanitizer configuration, and further removes any XSS-unsafe elements or attributes â€” whether or not they are allowed by the sanitizer configuration.</p> <p>If no sanitizer configuration is specified in the <code>options.sanitizer</code> parameter, <code>setHTML()</code> is used with the default <a href="../sanitizer"><code>Sanitizer</code></a> configuration. This configuration allows all elements and attributes that are considered XSS-safe, thereby disallowing entities that are considered unsafe. A custom sanitizer or sanitizer configuration can be specified to choose which elements, attributes, and comments are allowed or removed. Note that even if unsafe options are allowed by the sanitizer configuration, they will still be removed when using this method (which implicitly calls <a href="../sanitizer/removeunsafe"><code>Sanitizer.removeUnsafe()</code></a>).</p> <p><code>setHTML()</code> should be used instead of <a href="innerhtml"><code>Element.innerHTML</code></a> for inserting untrusted strings of HTML into an element. It should also be used instead of <a href="sethtmlunsafe"><code>Element.setHTMLUnsafe()</code></a>, unless there is a specific need to allow unsafe elements and attributes.</p> <p>Note that since this method always sanitizes input strings of XSS-unsafe entities, it is not secured or validated using the <a href="../trusted_types_api">Trusted Types API</a>.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="basic_usage" class="heading">Basic usage</h3> <p>This example shows some of the ways you can use <code>setHTML()</code> to sanitize and inject a string of HTML.</p> <div class="code-example"><pre data-language="js">// Define unsanitized string of HTML
const unsanitizedString = "abc &lt;script&gt;alert(1)&lt;" + "/script&gt; def";
// Get the target Element with id "target"
const target = document.getElementById("target");

// setHTML() with default sanitizer
target.setHTML(unsanitizedString);

// Define custom Sanitizer and use in setHTML()
// This allows only elements: div, p, button (script is unsafe and will be removed)
const sanitizer1 = new Sanitizer({
  elements: ["div", "p", "button", "script"],
});
target.setHTML(unsanitizedString, { sanitizer: sanitizer1 });

// Define custom SanitizerConfig within setHTML()
// This removes elements div, p, button, script, and any other unsafe elements/attributes
target.setHTML(unsanitizedString, {
  sanitizer: { removeElements: ["div", "p", "button", "script"] },
});
</pre></div>  <h3 id="sethtml_live_example" class="heading">
<code>setHTML()</code> live example</h3> <p>This example provides a "live" demonstration of the method when called with different sanitizers. The code defines buttons that you can click to sanitize and inject a string of HTML using a default and a custom sanitizer, respectively. The original string and sanitized HTML are logged so you can inspect the results in each case.</p> <h4 id="html">HTML</h4> <p>The HTML defines two <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button"><code>&lt;button&gt;</code></a> elements for applying different sanitizers, another button to reset the example, and a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> element to inject the string into.</p> <div class="code-example"><pre data-language="html">&lt;button id="buttonDefault" type="button"&gt;Default&lt;/button&gt;
&lt;button id="buttonAllowScript" type="button"&gt;allowScript&lt;/button&gt;

&lt;button id="reload" type="button"&gt;Reload&lt;/button&gt;
&lt;div id="target"&gt;Original content of target element&lt;/div&gt;
</pre></div>   <h4 id="javascript">JavaScript</h4>   <p>First we define the string to sanitize, which will be the same for all cases. This contains the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> element and the <code>onclick</code> handler, both of which are considered XSS-unsafe. We also define the handler for the reload button.</p> <div class="code-example"><pre data-language="js">// Define unsafe string of HTML
const unsanitizedString = `
  &lt;div&gt;
    &lt;p&gt;This is a paragraph. &lt;button onclick="alert('You clicked the button!')"&gt;Click me&lt;/button&gt;&lt;/p&gt;
    &lt;script src="path/to/a/module.js" type="module"&gt;&lt;script&gt;
  &lt;/div&gt;
`;

const reload = document.querySelector("#reload");
reload.addEventListener("click", () =&gt; document.location.reload());
</pre></div> <p>Next we define the click handler for the button that sets the HTML with the default sanitizer. This should strip out all unsafe entities before inserting the string of HTML. Note that you can see exactly which elements are removed in the <a href="../sanitizer/sanitizer#creating_the_default_sanitizer"><code>Sanitizer()</code> constructor examples</a>.</p> <div class="code-example"><pre data-language="js">const defaultSanitizerButton = document.querySelector("#buttonDefault");
defaultSanitizerButton.addEventListener("click", () =&gt; {
  // Set the content of the element using the default sanitizer
  target.setHTML(unsanitizedString);

  // Log HTML before sanitization and after being injected
  logElement.textContent =
    "Default sanitizer: remove script element and onclick attribute\n\n";
  log(`\nunsanitized: ${unsanitizedString}`);
  log(`\nsanitized: ${target.innerHTML}`);
});
</pre></div> <p>The next click handler sets the target HTML using a custom sanitizer that allows only <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/p"><code>&lt;p&gt;</code></a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements. Note that because we're using the <code>setHTML</code> method, <code>&lt;script&gt;</code> will also be removed!</p> <div class="code-example"><pre data-language="js">const allowScriptButton = document.querySelector("#buttonAllowScript");
allowScriptButton.addEventListener("click", () =&gt; {
  // Set the content of the element using a custom sanitizer
  const sanitizer1 = new Sanitizer({
    elements: ["div", "p", "script"],
  });
  target.setHTML(unsanitizedString, { sanitizer: sanitizer1 });

  // Log HTML before sanitization and after being injected
  logElement.textContent =
    "Sanitizer: {elements: ['div', 'p', 'script']}\n Script removed even though allowed\n";
  log(`\nunsanitized: ${unsanitizedString}`);
  log(`\nsanitized: ${target.innerHTML}`);
});
</pre></div>  <h4 id="results">Results</h4> <p>Click the "Default" and "allowScript" buttons to see the effects of the default and custom sanitizer, respectively. Note that in both cases the <code>&lt;script&gt;</code> element and <code>onclick</code> handler are removed, even if explicitly allowed by the sanitizer.</p> <div class="code-example"><iframe class="sample-code-frame" title="setHTML() live example sample" id="frame_sethtml_live_example" width="100" height="350px" src="about:blank" data-live-path="/en-US/docs/Web/API/Element/setHTML/" data-live-id="sethtml_live_example" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://wicg.github.io/sanitizer-api/#dom-element-sethtml" rel="noopener" target="_blank">HTML Sanitizer API&gt;<br># dom-element-sethtml&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>setHTML</code></th>
<td class="bc-supports-no"><details><summary>No</summary>Chrome 105 to Chrome 118 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no"><details><summary>No</summary>Edge 105 to Edge 118 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-yes">138</td>
<td class="bc-supports-no"><details><summary>No</summary>Opera 91 to Opera 104 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no"><details><summary>No</summary>Chrome Android 105 to Chrome Android 118 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no"><details><summary>No</summary>Opera Android 72 to Opera Android 79 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no"><details><summary>No</summary>Samsung Internet 20.0 to Samsung Internet 25.0 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no"><details><summary>No</summary>WebView Android 105 to WebView Android 118 (inclusive) supported this method with a significantly different specification.</details></td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="sethtmlunsafe"><code>Element.setHTMLUnsafe()</code></a></li> <li>
<a href="../shadowroot/sethtml"><code>ShadowRoot.setHTML()</code></a> and <a href="../shadowroot/sethtmlunsafe"><code>ShadowRoot.setHTMLUnsafe()</code></a>
</li> <li>
<a href="../document/parsehtml_static"><code>Document.parseHTML()</code></a> and <a href="../document/parsehtmlunsafe_static"><code>Document.parseHTMLUnsafe()</code></a>
</li> <li><a href="../html_sanitizer_api">HTML Sanitizer API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/setHTML" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Element/setHTML</a>
  </p>
</div>
