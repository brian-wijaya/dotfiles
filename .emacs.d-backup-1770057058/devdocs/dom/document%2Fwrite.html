<h1>Document: write() method</h1>    <div class="notecard deprecated"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div> <div class="notecard warning"> <p><strong>Warning:</strong> Use of the <code>document.write()</code> method is strongly discouraged. Avoid using it, and where possible replace it in existing code.</p> <p>As <a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#document.write()" target="_blank">the HTML spec itself warns</a>:</p> <blockquote> <p>This method has very idiosyncratic behavior. In some cases, this method can affect the state of the <a href="https://html.spec.whatwg.org/multipage/parsing.html#html-parser" target="_blank">HTML parser</a> while the parser is running, resulting in a DOM that does not correspond to the source of the document (e.g., if the string written is the string "<code>&lt;plaintext&gt;</code>" or "<code>&lt;!--</code>"). In other cases, the call can clear the current page first, as if <a href="open"><code>document.open()</code></a> had been called. In yet more cases, the method is simply ignored, or throws an exception. Users agents are <a href="https://html.spec.whatwg.org/multipage/parsing.html#document-written-scripts-intervention" target="_blank">explicitly allowed to avoid executing <code>script</code> elements inserted via this method</a>. And to make matters even worse, the exact behavior of this method can in some cases be dependent on network latency, which can lead to failures that are very hard to debug. For all these reasons, use of this method is strongly discouraged.</p> </blockquote> </div> <div class="notecard warning"> <p><strong>Warning:</strong> This method parses its input as HTML, writing the result into the DOM. APIs like this are known as <a href="../trusted_types_api#concepts_and_usage">injection sinks</a>, and are potentially a vector for <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">cross-site-scripting (XSS)</a> attacks, if the input originally came from an attacker.</p> <p>You can mitigate this risk by always passing <code>TrustedHTML</code> objects instead of strings and <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">enforcing trusted types</a>. See <a href="#security_considerations">Security considerations</a> for more information.</p> </div> <p>The <code>write()</code> method of the <a href="../document"><code>Document</code></a> interface writes text in one or more <a href="../trustedhtml"><code>TrustedHTML</code></a> or string parameters to a document stream opened by <a href="open"><code>document.open()</code></a>.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">write(markup)
write(markup, markup2)
write(markup, markup2, /* …, */ markupN)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="markup"><a href="#markup"><code>markup</code>, …, <code>markupN</code></a></dt> <dd> <p><a href="../trustedhtml"><code>TrustedHTML</code></a> objects or strings containing the markup to be written to the document.</p> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <dl> <dt id="invalidstateerror">
<code>InvalidStateError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The method was called on an XML document, or called when the parser is currently executing a custom element constructor.</p> </dd> <dt id="typeerror"><a href="#typeerror"><code>TypeError</code></a></dt> <dd> <p>A string is passed as one of the parameters when <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">Trusted Types are enforced</a> and <a href="../trustedtypepolicyfactory/createpolicy#creating_a_default_policy">no default policy has been defined</a> for creating <a href="../trustedhtml"><code>TrustedHTML</code></a> objects.</p> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p><code>document.write()</code> parses the markup text in the objects passed as parameters into the open document's object model (DOM), in the order that the parameters are specified.</p> <p>Because <code>document.write()</code> writes to the document <strong>stream</strong>, calling <code>document.write()</code> on a closed (loaded) document (without first calling <a href="open"><code>document.open()</code></a>) automatically calls <a href="open"><code>document.open()</code></a>, which will clear the document.</p> <p>The exception is that if the <code>document.write()</code> call is embedded within an inline HTML <code>&lt;script&gt;</code> tag, then it will not automatically call <code>document.open()</code>:</p> <div class="code-example"><pre data-language="html">&lt;script&gt;
  document.write("&lt;h1&gt;Main title&lt;/h1&gt;");
&lt;/script&gt;
</pre></div> <p><code>document.write()</code> (and <a href="writeln"><code>document.writeln</code></a>) cannot be used with XML or XHTML, and attempting to do so will throw an <code>InvalidStateError</code> exception. This is the case if opening a local file with a .xhtml file extension or for any document served with an <code>application/xhtml+xml</code> MIME type. More information is available in the <a href="https://www.w3.org/MarkUp/2004/xhtml-faq#docwrite" target="_blank">W3C XHTML FAQ</a>.</p> <p>Using <code>document.write()</code> in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script#defer">deferred</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script#async">asynchronous</a> scripts will be ignored and you'll get a message like "A call to <code>document.write()</code> from an asynchronously-loaded external script was ignored" in the error console.</p> <p>In Edge only, calling <code>document.write()</code> more than once in an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/iframe"><code>&lt;iframe&gt;</code></a> causes the error "SCRIPT70: Permission denied".</p>  <h3 id="security_considerations" class="heading">Security considerations</h3> <p>The method is a possible vector for <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">Cross-site-scripting (XSS)</a> attacks, where potentially unsafe strings provided by a user are injected into the DOM without first being sanitized. While the method may block <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements from executing when they are injected in some browsers (see <a href="https://developer.chrome.com/blog/removing-document-write/" target="_blank">Intervening against document.write()</a> for Chrome), it is susceptible to many other ways that attackers can craft HTML to run malicious JavaScript.</p> <p>You can mitigate these issues by always passing <a href="../trustedhtml"><code>TrustedHTML</code></a> objects instead of strings, and <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">enforcing trusted type</a> using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/require-trusted-types-for"><code>require-trusted-types-for</code></a> CSP directive. This ensures that the input is passed through a transformation function, which has the chance to <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS#sanitization">sanitize</a> the input to remove potentially dangerous markup (such as <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements and event handler attributes), before it is injected.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="writing_trustedhtml" class="heading">Writing TrustedHTML</h3> <p>This example uses the <a href="../trusted_types_api">Trusted Types API</a> to sanitize HTML strings of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements before they are written to a document.</p> <p>The example initially displays some default text and a button. When the button is clicked, the current document is opened, three strings of HTML are converted to <a href="../trustedhtml"><code>TrustedHTML</code></a> instances and written into the document, and the document is then closed. This replaces the document in the example frame, including the original HTML for the button and the JavaScript that made the update!</p> <h4 id="html">HTML</h4> <div class="code-example"><pre data-language="html">&lt;p&gt;Some original document content.&lt;/p&gt;
&lt;button id="replace" type="button"&gt;Replace document content&lt;/button&gt;
</pre></div> <h4 id="javascript">JavaScript</h4> <p>First we use the <a href="../window/trustedtypes"><code>Window.trustedTypes</code></a> property to access the global <a href="../trustedtypepolicyfactory"><code>TrustedTypePolicyFactory</code></a>, and use its <a href="../trustedtypepolicyfactory/createpolicy"><code>createPolicy()</code></a> method to define a policy called <code>"docPolicy"</code>.</p> <p>The new policy defines a transformation function <code>createHTML()</code> for creating the <a href="../trustedhtml"><code>TrustedHTML</code></a> objects that we will pass to the <code>write()</code> method. This method can do anything it likes with the input string: the trusted types API just requires that you pass the input through a policy transformation function, not that the transformation function does anything in particular.</p> <p>You'd use the method to <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS#sanitization">sanitize</a> the input by removing potentially unsafe features such as <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> tags or event handler attributes. Sanitization is hard to get right, so this process typically uses a reputable third-party library such as <a href="https://github.com/cure53/DOMPurify" target="_blank">DOMPurify</a>.</p> <p>For the purposes of demonstration, here we implement a rudimentary "sanitizer" that replaces <code>&lt;</code> symbols in script opening and closing tags with the <code>&amp;lt;</code> character.</p> <div class="code-example"><pre data-language="js">const policy = trustedTypes.createPolicy("docPolicy", {
  createHTML(string) {
    return string
      .replace("&lt;script", "&amp;lt;script")
      .replace("&lt;/script", "&amp;lt;/script");
  },
});
</pre></div> <p>We can then use the <a href="../trustedtypepolicy/createhtml"><code>TrustedTypePolicy.createHTML()</code></a> method on the returned policy to create <a href="../trustedhtml"><code>TrustedHTML</code></a> objects from our original input strings. These are then passed to the <code>write()</code> function when the user clicks the button.</p> <div class="code-example"><pre data-language="js">const oneInput = "&lt;h1&gt;Out with the old&lt;/h1&gt;";
const twoInput = "&lt;p&gt;in with the new!&lt;/p&gt;";
const threeInput = "&lt;script&gt;alert('evil afoot')&lt;" + "/script&gt;";
const replace = document.querySelector("#replace");

replace.addEventListener("click", () =&gt; {
  document.open();
  document.write(
    policy.createHTML(oneInput),
    policy.createHTML(twoInput),
    policy.createHTML(threeInput),
  );
  document.close();
});
</pre></div> <h4 id="results">Results</h4> <p>Press the button and note that the HTML elements that we trust (in this example) are injected, but the untrusted <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> element is now rendered as plain text.</p> <div class="code-example"><iframe class="sample-code-frame" title="Writing TrustedHTML sample" id="frame_writing_trustedhtml" src="about:blank" data-live-path="/en-US/docs/Web/API/Document/write/" data-live-id="writing_trustedhtml" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h3 id="writing_strings" class="heading">Writing strings</h3> <p>This is the same as the preceding example, except that trusted types are not used or enforced. We're writing unsanitized strings, which may provide a path for <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">XSS attacks</a>.</p> <p>The example initially displays some default text and a button. When the button is clicked, the current document is opened, three strings of HTML are written into the document, and the document is then closed. This replaces the document in the example frame, including the original HTML for the button and the JavaScript that made the update.</p> <h4 id="html_2">HTML</h4> <div class="code-example"><pre data-language="html">&lt;p&gt;Some original document content.&lt;/p&gt;
&lt;button id="replace" type="button"&gt;Replace document content&lt;/button&gt;
</pre></div> <h4 id="javascript_2">JavaScript</h4> <div class="code-example"><pre data-language="js">const replace = document.querySelector("#replace");

const oneInput = "&lt;h1&gt;Out with the old&lt;/h1&gt;";
const twoInput = "&lt;p&gt;in with the new!&lt;/p&gt;";
const threeInput = "&lt;script&gt;alert('evil afoot')&lt;" + "/script&gt;";

replace.addEventListener("click", () =&gt; {
  document.open();
  document.write(oneInput, twoInput, threeInput);
  document.close();
});
</pre></div> <h4 id="results_2">Results</h4> <p>Press the button and note that all the HTML elements are injected. This includes the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> element, which in a real application might have executed harmful code.</p> <div class="code-example"><iframe class="sample-code-frame" title="Writing strings sample" id="frame_writing_strings" src="about:blank" data-live-path="/en-US/docs/Web/API/Document/write/" data-live-id="writing_strings" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-document-write-dev" rel="noopener" target="_blank">HTML&gt;<br># dom-document-write-dev&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>write</code></th>
<td class="bc-supports-yes">45<details><summary>1–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">69<details><summary>1–69</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">3</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">45<details><summary>18–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">79<details><summary>4–79</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">5.0<details><summary>1.0–5.0</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">45<details><summary>4.4–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
</tr>
<tr>
<th><code>enforces_trusted_types</code></th>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-yes">72</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">61</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">14.0</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">26</td>
</tr>
</tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="writeln"><code>document.writeln()</code></a></li> <li><a href="../element/innerhtml"><code>element.innerHTML</code></a></li> <li><a href="createelement"><code>document.createElement()</code></a></li> <li><a href="../trusted_types_api">Trusted Types API</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">Cross-site scripting (XSS)</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/write" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Document/write</a>
  </p>
</div>
