<h1>PublicKeyCredential: signalUnknownCredential() static method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FPublicKeyCredential%2FsignalUnknownCredential_static&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard secure"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <p>The <code>signalUnknownCredential()</code> static method of the <a href="../publickeycredential"><code>PublicKeyCredential</code></a> interface signals to the authenticator that a <a href="../publickeycredentialrequestoptions#id">credential ID</a> was not recognized by the <a href="https://en.wikipedia.org/wiki/Relying_party" target="_blank">relying party</a> (RP) server.</p> <p>This allows the authenticator to remove credentials that are not allowed by the RP, such as those for deleted accounts, or accounts that were created and stored on the authenticator but not properly updated on the server. Generally the method is called after sign in fails because the account details were not available to the RP. It can be used even when the current user is not authenticated because it does not expose sensitive information.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">signalUnknownCredential(options)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="options"><a href="#options"><code>options</code></a></dt> <dd> <p>An object representing the unrecognized credential, which contains the following properties:</p> <dl> <dt id="credentialid"><a href="#credentialid"><code>credentialId</code></a></dt> <dd> <p>A base64url-encoded string representing the <a href="../publickeycredentialrequestoptions#id"><code>id</code> of the credential</a> that was unrecognized.</p> </dd> <dt id="rpid"><a href="#rpid"><code>rpId</code></a></dt> <dd> <p>A string representing the <a href="../publickeycredentialcreationoptions#id_2"><code>id</code> of the RP</a> that sent the signal.</p> </dd> </dl> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>.</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <p>The promise rejects with the following exceptions:</p> <dl> <dt id="securityerror">
<code>SecurityError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The RP domain is not valid.</p> </dd> <dt id="typeerror">
<code>TypeError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The <code>credentialId</code> is not a valid base64url-encoded string.</p> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p>It is possible for the information stored in a user's authenticator about a <a href="../web_authentication_api#discoverable_credentials_and_conditional_mediation">discoverable credential</a> (for example, <a href="https://passkeys.dev/" target="_blank">a passkey</a>) to go out sync with the RP server. This usually occurs when the user deletes a credential from the RP web app without updating the authenticator.</p> <p>When a user attempts to log in using discoverable credentials, they are presented with a set of credentials from the authenticator to choose from, and the selected credential is returned to the RP web app to log in with. If the user selects a credential that has been deleted from the RP server, it won't be recognized, and the login will fail. This is a confusing experience for users, who expect to only be offered credentials that should succeed.</p> <p>To mitigate this issue, <code>signalUnknownCredential()</code> should be called on the RP web app each time a discoverable credential-based sign-in fails, to inform the authenticator that the credential ID was not recognized.</p> <p>It is up to the authenticator how to handle this information, but the expectation is that it will delete the relevant credential so that there is no mismatch in the data stored on the authenticator and relying party.</p> <p>In addition, <code>signalUnknownCredential()</code> might also be called if a web app is able to create a discoverable credential on the authenticator but is, for any reason, unable to upload the credential information to the server.</p> <p><code>signalUnknownCredential()</code> can be called even when the current user is not authenticated because it does not expose sensitive information.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="signaling_an_unknown_credential" class="heading">Signaling an unknown credential</h3> <p>In this example, a login attempt is made using discoverable credentials via a <a href="../credentialscontainer/get"><code>get()</code></a> call. The credential is returned successfully, and the credential ID and payload are stored in constants.</p> <p>The payload is sent to the RP server via a <a href="../window/fetch"><code>fetch()</code></a> request to log the user in, but the request fails with a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/404"><code>404</code></a> response because the RP doesn't recognize that user (for example because that credential was previously deleted from the RP).</p> <p>As a result of this, we invoke the <code>signalUnknownCredential()</code> method, passing it the <code>rpId</code> and credential ID, to inform the authenticator that the credential is unknown to the RP. The authenticator should then delete the credential so it does not cause the same problem again.</p> <div class="code-example"><pre data-language="js">const credential = await navigator.credentials.get({
  challenge: new Uint8Array([139, 66, 181, 87, 7, 203 /* â€¦ */]),
  rpId: "example.com",
  allowCredentials: [],
  // Empty allowCredentials list means only discoverable
  // credentials are presented to the user
});

// Retrieve base64url-encoded credential ID,
// such as "vI0qOggiE3OT01ZRWBYz5l4MEgU0c7PmAA"
const credID = credential.id;
// Retrieve payload to send to the RP server
const payload = credential.toJSON();

const result = await fetch("/login", {
  // fetch() options, will include the payload in the request body
});

// Detect authentication failure due to lack of the credential
if (result.status === 404) {
  if (PublicKeyCredential.signalUnknownCredential) {
    await PublicKeyCredential.signalUnknownCredential({
      rpId: "example.com",
      credentialId: credID,
    });
  } else {
    // Encourage the user to delete the credential from the authenticator
  }
}
</pre></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://w3c.github.io/webauthn/#dom-publickeycredential-signalunknowncredential" rel="noopener" target="_blank">Web Authentication: An API for accessing Public Key Credentials - Level 3&gt;<br># dom-publickeycredential-signalunknowncredential&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>signalUnknownCredential_static</code></th>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">117</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">87</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">26</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="signalallacceptedcredentials_static"><code>PublicKeyCredential.signalAllAcceptedCredentials()</code></a></li> <li><a href="signalcurrentuserdetails_static"><code>PublicKeyCredential.signalCurrentUserDetails()</code></a></li> <li>
<a href="https://developer.chrome.com/docs/identity/webauthn-signal-api" target="_blank">Keep passkeys consistent with credentials on your server with the Signal API</a> on developer.chrome.com (2024)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential/signalUnknownCredential_static" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential/signalUnknownCredential_static</a>
  </p>
</div>
