<h1>Window: fetchLater() method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWindow%2FfetchLater&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>fetchLater()</code> method of the <a href="../window"><code>Window</code></a> interface creates a deferred fetch.</p> <p>A <code>fetchLater()</code> request is sent once the page is navigated away from (it is destroyed or enters the <a href="https://developer.mozilla.org/en-US/docs/Glossary/bfcache">bfcache</a>), or after a provided <code>activateAfter</code> timeout — whichever comes first.</p> <p>The <code>fetchLater()</code> methods returns a <a href="../fetchlaterresult"><code>FetchLaterResult</code></a> object containing a single <code>activated</code> value stating whether the request has been sent yet. Note the method does not return the result of the actual fetch when that happens (since it is often sent after the document has been destroyed) and the whole response of the fetch, including body and headers, is ignored.</p> <p>Requests whose body is a <a href="../readablestream"><code>ReadableStream</code></a> cannot be deferred.</p> <p>The <code>fetchLater()</code> method is controlled by the <code>connect-src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy">Content Security Policy</a> directive rather than the directive of the retrieved resources.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">fetchLater(resource)
fetchLater(resource, options)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <p>The <code>fetchLater()</code> method takes all the same parameters as <a href="fetch"><code>fetch()</code></a>, but with one additional <code>activateAfter</code> option.</p> <dl> <dt id="resource"><a href="#resource"><code>resource</code></a></dt> <dd> <p>This defines the resource that you wish to fetch. Identical to <a href="fetch"><code>fetch()</code></a>, this can either be:</p> <ul> <li>A string or any other object with a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Stringifier">stringifier</a> — including a <a href="../url"><code>URL</code></a> object — that provides the URL of the resource you want to fetch. The URL may be relative to the base URL, which is the document's <a href="../node/baseuri"><code>baseURI</code></a> in a window context.</li> <li>A <a href="../request"><code>Request</code></a> object.</li> </ul> </dd> <dt id="options"><a href="#options"><code>options</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>A <a href="../deferredrequestinit"><code>DeferredRequestInit</code></a> object containing any custom settings that you want to apply to the request, including an <code>activateAfter</code> timeout value that defines how long the result should be deferred for before sending.</p> </dd> </dl>  <h3 id="exceptions" class="heading">Exceptions</h3> <p>The <a href="fetch#exceptions">same exceptions for <code>fetch()</code></a> can be raised for <code>fetchLater()</code>, along with the following additional exceptions:</p> <dl> <dt id="quotaexceedederror"><a href="../quotaexceedederror"><code>QuotaExceededError</code></a></dt> <dd> <p>Use of this feature was blocked due to exceeding the available quota. See <a href="../fetchlater_api/fetchlater_quotas"><code>fetchLater()</code> quotas</a> for more details. Callers of <code>fetchLater()</code> should be defensive and catch <code>QuotaExceededError</code> errors in almost all cases, especially if they are embedding third-party JavaScript.</p> </dd> <dt id="rangeerror">
<code>RangeError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>Thrown when a negative <code>activateAfter</code> value is specified.</p> </dd> <dt id="typeerror">
<code>TypeError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>In addition to the reasons for <code>fetch()</code>, this exception will also be thrown for a <a href="../readablestream"><code>ReadableStream</code></a> request (which cannot be deferred) or for use of untrustworthy URLs (such as <code>http://</code>).</p> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>A <a href="../fetchlaterresult"><code>FetchLaterResult</code></a> containing an <code>activated</code> boolean property indicating if the request has been sent yet.</p> <div class="notecard note"> <p><strong>Note:</strong> Once the fetch request is sent, its response — including the body and headers — is not made available and will be ignored.</p> </div>  <h2 id="examples" class="heading">Examples</h2> <p>The <a href="../fetchlater_api/fetchlater_quotas"><code>fetchLater()</code> quotas</a> article provides examples of how the quotas are applied.</p>  <h3 id="defer_a_get_request_until_the_page_is_navigated_away_from_or_closed" class="heading">Defer a <code>GET</code> request until the page is navigated away from or closed</h3> <div class="code-example"><pre data-language="js">fetchLater("/send_beacon");
</pre></div>  <h3 id="defer_a_post_request_for_around_one_minute" class="heading">Defer a <code>POST</code> request for around one minute</h3> <p>In this example we create a <a href="../request"><code>Request</code></a>, and provide an <code>activateAfter</code> value to delay sending the request for 60,000 milliseconds (or one minute):</p> <div class="code-example"><pre data-language="js">fetchLater("/send_beacon", {
  method: "POST",
  body: getBeaconData(),
  activateAfter: 60000, // 1 minute
});
</pre></div> <div class="notecard note"> <p><strong>Note:</strong> The actual sending time is unknown, as the browser may wait for a longer or shorter period of time, for example to optimize batching of deferred fetches.</p> </div>  <h3 id="defer_a_post_request_for_around_one_minute_with_a_trycatch" class="heading">Defer a <code>POST</code> request for around one minute with a try/catch</h3> <p>The same example as above, but the best practice is to enclose this in a try/catch:</p> <div class="code-example"><pre data-language="js">try {
  fetchLater("/send_beacon", {
    method: "POST",
    body: getBeaconData(),
    activateAfter: 60000, // 1 minute
  });
} catch (e) {
  if (e instanceof QuotaExceededError) {
    // Handle the quota error
  } else {
    // Handle other errors
  }
}
</pre></div>  <h3 id="defer_a_post_request_for_around_one_minute_and_create_a_function_to_check_if_sent" class="heading">Defer a <code>POST</code> request for around one minute and create a function to check if sent</h3> <div class="code-example"><pre data-language="js">const result = fetchLater("https://report.example.com", {
  method: "POST",
  body: JSON.stringify(myReport),
  activateAfter: 60000 /* 1 minute */,
});

function checkIfFetched() {
  return result.activated;
}
</pre></div>  <h3 id="update_a_pending_request" class="heading">Update a pending request</h3> <p>In this example we use an <a href="../abortcontroller"><code>AbortController</code></a> to cancel and recreate the request:</p> <div class="code-example"><pre data-language="js">let beaconResult = null;
let beaconAbort = null;

function updateBeacon(data) {
  const pending = !beaconResult || !beaconResult.activated;
  if (pending &amp;&amp; beaconAbort) {
    beaconAbort.abort();
  }

  createBeacon(data);
}

function createBeacon(data) {
  if (beaconResult &amp;&amp; !beaconResult.activated) {
    // Avoid creating duplicated beacon if the previous one is still pending.
    return;
  }

  beaconAbort = new AbortController();
  beaconResult = fetchLater({
    url: data,
    signal: beaconAbort.signal,
  });
}
</pre></div>  <h3 id="invalid_examples" class="heading">Invalid examples</h3> <p>Any of the following calls to <code>fetchLater()</code> would throw:</p> <div class="code-example"><pre data-language="js">// Only potentially trustworthy URLs are supported
fetchLater("http://untrusted.example.com");

// The length of the deferred request has to be known
fetchLater("https://origin.example.com", { body: someDynamicStream });

// Deferred fetching only works on active windows
const detachedWindow = iframe.contentWindow;
iframe.remove();
detachedWindow.fetchLater("https://origin.example.com");
</pre></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://fetch.spec.whatwg.org/#deferred-fetch" rel="noopener" target="_blank">Fetch&gt;<br># deferred-fetch&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>fetchLater</code></th>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">120</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="../fetchlater_api"><code>fetchLater()</code> API</a></li> <li><a href="../fetchlater_api/fetchlater_quotas"><code>fetchLater()</code> quotas</a></li> <li><a href="../fetchlaterresult"><code>FetchLaterResult</code></a></li> <li><a href="../fetch_api">Fetch API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/fetchLater" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Window/fetchLater</a>
  </p>
</div>
