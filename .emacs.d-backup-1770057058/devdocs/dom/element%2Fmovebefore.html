<h1>Element: moveBefore() method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FElement%2FmoveBefore&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>moveBefore()</code> method of the <a href="../element"><code>Element</code></a> interface moves a given <a href="../node"><code>Node</code></a> inside the invoking node as a direct child, before a given reference node.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">moveBefore(movedNode, referenceNode)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="movednode"><a href="#movednode"><code>movedNode</code></a></dt> <dd> <p>A <a href="../node"><code>Node</code></a> representing the node to be moved. Note that this must be an <a href="../element"><code>Element</code></a> or a <a href="../characterdata"><code>CharacterData</code></a> node.</p> </dd> <dt id="referencenode"><a href="#referencenode"><code>referenceNode</code></a></dt> <dd> <p>A <a href="../node"><code>Node</code></a> that <code>movedNode</code> will be moved before, or <code>null</code>. If the value is <code>null</code>, <code>movedNode</code> is inserted at the end of the invoking node's child nodes.</p> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <dl> <dt id="hierarchyrequesterror">
<code>HierarchyRequestError</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a>
</dt> <dd> <p>Thrown in any of the following situations:</p> <ul> <li>The specified <code>movedNode</code> is not part of the DOM, and you are trying to move it inside a node that is part of the DOM, or vice versa.</li> <li>The specified <code>movedNode</code> is an ancestor of the Element <code>moveBefore()</code> is being called on.</li> <li>You are trying to move <code>movedNode</code> between two different documents.</li> <li>The specified <code>movedNode</code> is not an <a href="../element"><code>Element</code></a> or <a href="../characterdata"><code>CharacterData</code></a> node.</li> </ul> </dd> <dt id="notfounderror">
<code>NotFoundError</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a>
</dt> <dd> <p>The specified <code>referenceNode</code> is not a child of the node you are calling <code>moveBefore()</code> on, that is, the node you are trying to move <code>movedNode</code> inside.</p> </dd> <dt id="typeerror">
<code>TypeError</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a>
</dt> <dd> <p>The second argument was not supplied.</p> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p>The <code>moveBefore()</code> method moves a given node to a new place in the DOM. It provides similar functionality to the <a href="../node/insertbefore"><code>Node.insertBefore()</code></a> method, except that it doesn't remove and then reinsert the node. This means that the state of the node (which would be reset if moving it with <code>insertBefore()</code> and similar mechanisms) is preserved after the move. This includes:</p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animations">Animation</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_transitions">transition</a> state.</li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/iframe"><code>&lt;iframe&gt;</code></a> loading state.</li> <li>Interactivity states (for example, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus"><code>:focus</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:active"><code>:active</code></a>).</li> <li>
<a href="../fullscreen_api">Fullscreen</a> element state.</li> <li>Open/close state of <a href="../popover_api">popovers</a>.</li> <li>Modal state of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/dialog"><code>&lt;dialog&gt;</code></a> elements (modal dialogs will not be closed).</li> </ul> <p>The play state of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/video"><code>&lt;video&gt;</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/audio"><code>&lt;audio&gt;</code></a> elements is not included in the above list, as these elements retain their state when removed and reinserted, regardless of the mechanism used.</p> <p>When observing changes to the DOM using a <a href="../mutationobserver"><code>MutationObserver</code></a>, nodes moved with <code>moveBefore()</code> will be recorded with a <a href="../mutationrecord/removednodes">removed node</a> and an <a href="../mutationrecord/addednodes">added node</a>.</p>  <h3 id="movebefore_constraints" class="heading">
<code>moveBefore()</code> constraints</h3> <p>There are some constraints to be aware of when using <code>moveBefore()</code>:</p> <ul> <li>It can only work when moving a node within the same document.</li> <li>It won't work if you try to move a node that is not connected to the DOM to an already connected parent, or vice versa.</li> </ul> <p>In such cases, <code>moveBefore()</code> will fail with a <code>HierarchyRequestError</code> exception. If the above constraints are requirements for your particular use case, you should use <a href="../node/insertbefore"><code>Node.insertBefore()</code></a> instead, or use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch"><code>try...catch</code></a> to handle the errors that arise from such cases.</p>  <h3 id="moving_custom_elements_while_preserving_state" class="heading">Moving custom elements while preserving state</h3> <p>Each time a <a href="../web_components/using_custom_elements">custom element's</a> position in the DOM is updated via <code>Element.moveBefore()</code>, or similar methods such as <a href="../node/insertbefore"><code>Node.insertBefore()</code></a>, its <code>disconnectedCallback()</code> and <code>connectedCallback()</code> lifecycle callbacks are fired. Since these callbacks are typically used to implement any required initialization or cleanup code to run at the start or end of the element's lifecycle, running them when the element is moved (rather than removed or inserted) may cause problems with its state.</p> <p>You can use the <code>connectedMoveCallback()</code> callback to preserve a custom element's state. When using <code>moveBefore()</code> to move a custom element, <code>connectedMoveCallback()</code> is run instead of <code>connectedCallback()</code> and <code>disconnectedCallback()</code>.</p> <p>See <a href="../web_components/using_custom_elements#lifecycle_callbacks_and_state-preserving_moves">Moving custom elements</a> for further information.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="basic_movebefore_usage" class="heading">Basic <code>moveBefore()</code> usage</h3> <p>In this demo we illustrate basic usage of <code>moveBefore()</code>.</p> <h4 id="html">HTML</h4> <p>The HTML features an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/article"><code>&lt;article&gt;</code></a> element containing a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> element and two <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/section"><code>&lt;section&gt;</code></a> elements. The <code>&lt;div&gt;</code> contains a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button"><code>&lt;button&gt;</code></a>, which we later use to move it.</p> <div class="code-example"><pre data-language="html">&lt;article id="wrapper"&gt;
  &lt;div id="mover"&gt;
    &lt;button&gt;Move me!&lt;/button&gt;
  &lt;/div&gt;
  &lt;section id="section1"&gt;
    &lt;h2&gt;Section 1&lt;/h2&gt;
  &lt;/section&gt;
  &lt;section id="section2"&gt;
    &lt;h2&gt;Section 2&lt;/h2&gt;
  &lt;/section&gt;
&lt;/article&gt;
</pre></div> <h4 id="css">CSS</h4> <p>We provide some rudimentary styling for the look and feel and spacing of the boxes, and use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_flexible_box_layout">flexbox</a> to center their content.</p> <div class="code-example"><pre data-language="css">#section1,
#section2,
#mover {
  width: 200px;
  height: 80px;
  border: 5px solid rgb(0 0 0 / 0.25);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#section1,
#section2 {
  background-color: hotpink;
}

#mover {
  background-color: orange;
}
</pre></div> <h4 id="javascript">JavaScript</h4> <p>In our script, we attach a click event listener to the <code>&lt;button&gt;</code> via <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a>. When the button is clicked, we check whether the <a href="nextelementsibling"><code>nextElementSibling</code></a> of our <code>mover</code> <code>&lt;div&gt;</code> is the first <code>&lt;section&gt;</code> element. If so, we invoke <code>moveBefore()</code> on the <code>wrapper</code> <code>&lt;article&gt;</code> and specify to move the <code>&lt;div&gt;</code> before the second <code>&lt;section&gt;</code>. If not, we use <code>moveBefore()</code> to move the <code>&lt;div&gt;</code> before the first <code>&lt;section&gt;</code>.</p> <div class="code-example"><pre data-language="js">const wrapper = document.getElementById("wrapper");
const section1 = document.getElementById("section1");
const section2 = document.getElementById("section2");
const mover = document.getElementById("mover");
const moveBtn = document.querySelector("button");

moveBtn.addEventListener("click", () =&gt; {
  if (mover.nextElementSibling === section1) {
    wrapper.moveBefore(mover, section2);
  } else {
    wrapper.moveBefore(mover, section1);
  }
});
</pre></div> <h4 id="result">Result</h4> <p>The rendered example looks like this:</p> <div class="code-example"><iframe class="sample-code-frame" title="movebefore-basic sample" id="frame_movebefore-basic" width="100%" height="300px" src="about:blank" data-live-path="/en-US/docs/Web/API/Element/moveBefore/" data-live-id="movebefore-basic" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div> <p>Try clicking the <code>&lt;button&gt;</code> a few times and note how it toggles between the two positions.</p>  <h3 id="demonstrating_state_preservation" class="heading">Demonstrating state preservation</h3> <p>In this demo we provide multiple mechanisms to move a <code>&lt;div&gt;</code> element containing a YouTube embed between two different containers, demonstrating how <code>moveBefore()</code> preserves the play state of the embed, but the other mechanisms do not.</p> <h4 id="html_2">HTML</h4> <p>The HTML features an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/article"><code>&lt;article&gt;</code></a> element containing two <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/section"><code>&lt;section&gt;</code></a> elements. The first <code>&lt;section&gt;</code> element contains a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> element containing the YouTube embed code. We also have a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> element containing three <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button"><code>&lt;button&gt;</code></a> elements, to which we will add functionality to move the embed <code>&lt;div&gt;</code> between sections via JavaScript later on.</p> <div class="code-example"><pre data-language="html">&lt;article id="wrapper"&gt;
  &lt;section id="section1"&gt;
    &lt;div id="mover"&gt;
      &lt;iframe
        width="300"
        height="200"
        src="https://www.youtube.com/embed/XvoENpR9cCQ?si=o2i6MvxugD-O5yyv"
        title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen&gt;&lt;/iframe&gt;
    &lt;/div&gt;
  &lt;/section&gt;
  &lt;section id="section2"&gt;&lt;/section&gt;
&lt;/article&gt;
&lt;div id="controls"&gt;
  &lt;button id="move-before"&gt;move with &lt;code&gt;moveBefore()&lt;/code&gt;&lt;/button&gt;
  &lt;button id="insertbefore"&gt;move with &lt;code&gt;insertBefore()&lt;/code&gt;&lt;/button&gt;
  &lt;button id="prepend"&gt;move with &lt;code&gt;prepend()&lt;/code&gt;&lt;/button&gt;
&lt;/div&gt;
</pre></div> <h4 id="css_2">CSS</h4> <p>We use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_flexible_box_layout">flexbox</a> for the layout to make the two <code>&lt;section&gt;</code> elements sit side-by-side, and space the buttons evenly inside the <code>controls</code> <code>&lt;div&gt;</code>.</p> <div class="code-example"><pre data-language="css">#wrapper,
#controls {
  width: 100%;
  display: flex;
}

#wrapper {
  margin-bottom: 10px;
}

section {
  flex: 1;
  padding: 10px;
}

#controls {
  display: flex;
  justify-content: space-around;
}

#section1 {
  background-color: hotpink;
}

#section2 {
  background-color: orange;
}

#mover {
  max-width: 100%;
  background-color: black;
}
</pre></div> <h4 id="javascript_2">JavaScript</h4> <p>In our script, we attach <code>click</code> event listeners to each <code>&lt;button&gt;</code> via <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a>. When the buttons are clicked, we check which <code>&lt;section&gt;</code> element is the <a href="../node/parentelement"><code>parentElement</code></a> of our embed <code>&lt;div&gt;</code>, and then use the relevant function (<code>moveBefore()</code>, <a href="../node/insertbefore"><code>insertBefore()</code></a>, or <a href="prepend"><code>prepend()</code></a>) to move it inside the <em>other</em> <code>&lt;section&gt;</code> element.</p> <div class="code-example"><pre data-language="js">const section1 = document.getElementById("section1");
const section2 = document.getElementById("section2");
const mover = document.getElementById("mover");
const moveBeforeBtn = document.getElementById("move-before");
const insertbeforeBtn = document.getElementById("insertbefore");
const prependBtn = document.getElementById("prepend");

moveBeforeBtn.addEventListener("click", () =&gt; {
  if (mover.parentElement === section1) {
    section2.moveBefore(mover, null);
  } else {
    section1.moveBefore(mover, null);
  }
});

insertbeforeBtn.addEventListener("click", () =&gt; {
  if (mover.parentElement === section1) {
    section2.insertBefore(mover, null);
  } else {
    section1.insertBefore(mover, null);
  }
});

prependBtn.addEventListener("click", () =&gt; {
  if (mover.parentElement === section1) {
    section2.prepend(mover);
  } else {
    section1.prepend(mover);
  }
});
</pre></div> <h4 id="result_2">Result</h4> <p>The rendered example looks like this:</p> <div class="code-example"><iframe class="sample-code-frame" title="movebefore-state sample" id="frame_movebefore-state" width="100%" height="260px" src="about:blank" data-live-path="/en-US/docs/Web/API/Element/moveBefore/" data-live-id="movebefore-state" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div> <p>Try playing the YouTube embed and then clicking each <code>&lt;button&gt;</code> a couple of times to toggle the <code>&lt;div&gt;</code> element screen position from left to right. Note how, in the case of <code>insertBefore()</code> and <code>prepend()</code>, the embed state is reset after each move so it needs to be restarted. However, in the case of <code>moveBefore()</code>, the state is preserved after each move.</p>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://dom.spec.whatwg.org/#dom-parentnode-movebefore" rel="noopener" target="_blank">DOM&gt;<br># dom-parentnode-movebefore&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>moveBefore</code></th>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">118</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">88</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="../document/movebefore"><code>Document.moveBefore()</code></a></li> <li><a href="../documentfragment/movebefore"><code>DocumentFragment.moveBefore()</code></a></li> <li><a href="../node/insertbefore"><code>Node.insertBefore()</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/moveBefore" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Element/moveBefore</a>
  </p>
</div>
