<h1>PublicKeyCredential: signalAllAcceptedCredentials() static method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FPublicKeyCredential%2FsignalAllAcceptedCredentials_static&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard secure"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <p>The <code>signalAllAcceptedCredentials()</code> static method of the <a href="../publickeycredential"><code>PublicKeyCredential</code></a> interface signals to the authenticator all of the valid <a href="../publickeycredentialrequestoptions#id">credential IDs</a> that the <a href="https://en.wikipedia.org/wiki/Relying_party" target="_blank">relying party</a> (RP) server still holds for a particular user.</p> <p>This allows the authenticator to update credential information, removing all credentials that are no longer recognized by the RP, such as those for deleted accounts. The method should be called each time a user authenticates with the RP.</p> <p><code>signalAllAcceptedCredentials()</code> should <em>only</em> be called when the current user is authenticated — after sign up or sign-in, or when the user deletes a credential — as it exposes sensitive information belonging to the user.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">signalAllAcceptedCredentials(options)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="options"><a href="#options"><code>options</code></a></dt> <dd> <p>An object representing the valid credentials, which contains the following properties:</p> <dl> <dt id="allacceptedcredentialids"><a href="#allacceptedcredentialids"><code>allAcceptedCredentialIds</code></a></dt> <dd> <p>An array of base64url-encoded strings representing the <a href="../publickeycredentialrequestoptions#id"><code>id</code>s of the credentials</a> that are still valid.</p> </dd> <dt id="rpid"><a href="#rpid"><code>rpId</code></a></dt> <dd> <p>A string representing the <a href="../publickeycredentialcreationoptions#id_2"><code>id</code> of the RP</a> that sent the signal.</p> </dd> <dt id="userid"><a href="#userid"><code>userId</code></a></dt> <dd> <p>A base64url-encoded string representing the <a href="../publickeycredentialcreationoptions#id_3"><code>id</code> of the user</a> the credentials relate to.</p> </dd> </dl> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>.</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <p>The promise rejects with the following exceptions:</p> <dl> <dt id="securityerror">
<code>SecurityError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The RP domain is not valid.</p> </dd> <dt id="typeerror">
<code>TypeError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The <code>userId</code> or any of the <code>allAcceptedCredentialIds</code> elements are not valid base64url-encoded strings.</p> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p>It is possible for the information stored in a user's authenticator about a <a href="../web_authentication_api#discoverable_credentials_and_conditional_mediation">discoverable credential</a> (for example, <a href="https://passkeys.dev/" target="_blank">a passkey</a>) to go out sync with the server. This usually occurs when the user deletes a credential from the RP web app without updating the authenticator.</p> <p>When a user attempts to log in using discoverable credentials, they are presented with a set of credentials from the authenticator to choose from, and the selected credential is returned to the RP web app to log in with. If the user selects a credential that has been deleted from the RP server, it won't be recognized, and the login will fail. This is a confusing experience for users, who expect to only be offered credentials that should succeed.</p> <p>To mitigate this issue, <code>signalAllAcceptedCredentials()</code> should be called by the RP web app each time a user deletes a credential or signs in, to tell the authenticator which credentials are still valid for the given user. It is up to the authenticator how to handle this information, but the expectation is that it will synchronize its information with the provided credentials list. Credentials that don't appear in the list should be removed so that the user won't be offered credentials that don't exist in the sign-in UI.</p> <div class="notecard warning"> <p><strong>Warning:</strong> Exercise caution when invoking <code>signalAllAcceptedCredentials()</code> — any valid credentials not included in the list are intended to be removed from the authenticator, which will prevent the user from signing in with them. Passing an empty list may remove all of the user's credentials. Some authenticators may support restoring credentials via a subsequent call to <code>signalAllAcceptedCredentials()</code> with the previously removed credential IDs included in the list.</p> </div> <p><code>signalAllAcceptedCredentials()</code> should <em>only</em> be called when the current user is authenticated because it exposes sensitive information belonging to the user. If the user is not authenticated because they tried to log in with a credential that does not exist on the RP server, you should instead call <a href="signalunknowncredential_static"><code>PublicKeyCredential.signalUnknownCredential()</code></a> with the unrecognized credential, so the authenticator can delete it. See <a href="../web_authentication_api#discoverable_credential_synchronization_methods">Discoverable credential synchronization methods</a> for a more detailed comparison.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="signaling_the_accepted_credentials" class="heading">Signaling the accepted credentials</h3> <p>In this example, we invoke the <code>signalAllAcceptedCredentials()</code> method, passing it the details of all credentials belonging to the user, including those they just logged in with. As a result, the authenticator should update its own copy of the credentials so that they stay in sync with the RP.</p> <div class="code-example"><pre data-language="js">if (PublicKeyCredential.signalAllAcceptedCredentials) {
  await PublicKeyCredential.signalAllAcceptedCredentials({
    rpId: "example.com",
    userId: "M2YPl-KGnA8", // base64url-encoded user ID
    allAcceptedCredentialIds: [
      // A list of base64url-encoded credential IDs
      "vI0qOggiE3OT01ZRWBYz5l4MEgU0c7PmAA",
      // …
    ],
  });
}
</pre></div> <p>For further code examples, see <a href="https://developer.chrome.com/docs/identity/webauthn-signal-api" target="_blank">Keep passkeys consistent with credentials on your server with the Signal API</a> on developer.chrome.com (2024).</p>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://w3c.github.io/webauthn/#dom-publickeycredential-signalallacceptedcredentials" rel="noopener" target="_blank">Web Authentication: An API for accessing Public Key Credentials - Level 3&gt;<br># dom-publickeycredential-signalallacceptedcredentials&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>signalAllAcceptedCredentials_static</code></th>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">117</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">132</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">87</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">26</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="signalcurrentuserdetails_static"><code>PublicKeyCredential.signalCurrentUserDetails()</code></a></li> <li><a href="signalunknowncredential_static"><code>PublicKeyCredential.signalUnknownCredential()</code></a></li> <li>
<a href="https://developer.chrome.com/docs/identity/webauthn-signal-api" target="_blank">Keep passkeys consistent with credentials on your server with the Signal API</a> on developer.chrome.com (2024)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential/signalAllAcceptedCredentials_static" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PublicKeyCredential/signalAllAcceptedCredentials_static</a>
  </p>
</div>
