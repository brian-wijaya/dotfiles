<h1>Document: writeln() method</h1>    <div class="notecard deprecated"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div> <div class="notecard warning"> <p><strong>Warning:</strong> This method parses its input as HTML, writing the result into the DOM. APIs like this are known as <a href="../trusted_types_api#concepts_and_usage">injection sinks</a>, and are potentially a vector for <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">cross-site-scripting (XSS)</a> attacks, if the input originally came from an attacker.</p> <p>You can mitigate this risk by always passing <code>TrustedHTML</code> objects instead of strings and <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">enforcing trusted types</a>. See <a href="#security_considerations">Security considerations</a> for more information.</p> </div> <p>The <code>writeln()</code> method of the <a href="../document"><code>Document</code></a> interface writes text in one or more <a href="../trustedhtml"><code>TrustedHTML</code></a> or string parameters to a document stream opened by <a href="open"><code>document.open()</code></a>, followed by a newline character.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">writeln(markup)
writeln(markup, markup2)
writeln(markup, markup2, /* …, */ markupN)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="markup"><a href="#markup"><code>markup</code>, …, <code>markupN</code></a></dt> <dd> <p><a href="../trustedhtml"><code>TrustedHTML</code></a> or string objects containing the text to be written to the document.</p> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p>  <h3 id="exceptions" class="heading">Exceptions</h3> <dl> <dt id="invalidstateerror">
<code>InvalidStateError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>The method was called on an XML document, or called when the parser is currently executing a custom element constructor.</p> </dd> <dt id="typeerror"><a href="#typeerror"><code>TypeError</code></a></dt> <dd> <p>A string is passed as one of the parameters when <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">Trusted Types are enforced</a> and <a href="../trustedtypepolicyfactory/createpolicy#creating_a_default_policy">no default policy has been defined</a> for creating <a href="../trustedhtml"><code>TrustedHTML</code></a> objects.</p> </dd> </dl>  <h2 id="description" class="heading">Description</h2> <p>The method is essentially the same as <a href="write"><code>document.write()</code></a> but adds a newline (information in the linked topic also applies to this method). This newline will only be visible if it is injected inside an element where newlines are displayed. The additional information in <a href="write"><code>document.write()</code></a> also applies to this method.</p>  <h3 id="security_considerations" class="heading">Security considerations</h3> <p>The method is a possible vector for <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS">Cross-site-scripting (XSS)</a> attacks, where potentially unsafe strings provided by a user are injected into the DOM without first being sanitized. While the method may block <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements from executing when they are injected in some browsers (see <a href="https://developer.chrome.com/blog/removing-document-write/" target="_blank">Intervening against document.write()</a> for Chrome), it is susceptible to many other ways that attackers can craft HTML to run malicious JavaScript.</p> <p>You can mitigate these issues by always passing <a href="../trustedhtml"><code>TrustedHTML</code></a> objects instead of strings, and <a href="../trusted_types_api#using_a_csp_to_enforce_trusted_types">enforcing trusted type</a> using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/require-trusted-types-for"><code>require-trusted-types-for</code></a> CSP directive. This ensures that the input is passed through a transformation function, which has the chance to <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS#sanitization">sanitize</a> the input to remove potentially dangerous markup (such as <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements and event handler attributes), before it is injected.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="writing_trustedhtml" class="heading">Writing TrustedHTML</h3> <p>This example uses the <a href="../trusted_types_api">Trusted Types API</a> to sanitize HTML strings before they are written to a document. You should always use trusted types for passing untrusted strings to unsafe APIs.</p> <p>The example initially displays some default text and a button. When the button is clicked, the current document is opened, some strings of HTML are converted to <a href="../trustedhtml"><code>TrustedHTML</code></a> instances and written into the document, and the document is then closed. This replaces the document in the example frame, including the original HTML for the button and the JavaScript that made the update!</p> <h4 id="html">HTML</h4> <div class="code-example"><pre data-language="html">&lt;p&gt;Some original document content.&lt;/p&gt;
&lt;button id="replace" type="button"&gt;Replace document content&lt;/button&gt;
</pre></div> <h4 id="javascript">JavaScript</h4> <p>First we use the <a href="../window/trustedtypes"><code>Window.trustedTypes</code></a> property to access the global <a href="../trustedtypepolicyfactory"><code>TrustedTypePolicyFactory</code></a>, and use its <a href="../trustedtypepolicyfactory/createpolicy"><code>createPolicy()</code></a> method to define a policy called <code>"docPolicy"</code>.</p> <p>The new policy defines a transformation function <code>createHTML()</code> for creating the <a href="../trustedhtml"><code>TrustedHTML</code></a> objects that we will pass to the <code>writeln()</code> method. This method can do anything it likes with the input string: the trusted types API just requires that you pass the input through a policy transformation function, not that the transformation function does anything in particular.</p> <p>You'd use the method to <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/XSS#sanitization">sanitize</a> the input by removing potentially unsafe features such as <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> tags or event handler attributes. Sanitization is hard to get right, so this process typically uses a reputable third-party library such as <a href="https://github.com/cure53/DOMPurify" target="_blank">DOMPurify</a>.</p> <p>Here we implement a rudimentary "sanitizer" that replaces <code>&lt;</code> symbols in script opening and closing tags with the <code>&amp;lt;</code> character. The injected strings in this example don't actually contain any harmful elements, so this is purely for demonstration.</p> <div class="code-example"><pre data-language="js">const policy = trustedTypes.createPolicy("docPolicy", {
  createHTML(string) {
    return string
      .replace("&lt;script", "&amp;lt;script")
      .replace("&lt;/script", "&amp;lt;/script");
  },
});
</pre></div> <p>We can then use the <a href="../trustedtypepolicy/createhtml"><code>TrustedTypePolicy.createHTML()</code></a> method on the returned policy to create <a href="../trustedhtml"><code>TrustedHTML</code></a> objects from our original input strings. These are then passed to the <code>writeln()</code> function when the user clicks the button.</p> <div class="code-example"><pre data-language="js">const replace = document.querySelector("#replace");
const oneInput = "&lt;h1&gt;Out with";
const twoInput = "the old&lt;/h1&gt;";
const threeInput = "&lt;pre&gt;in with";
const fourInput = "the new!&lt;/pre&gt;";

replace.addEventListener("click", () =&gt; {
  document.open();
  document.writeln(policy.createHTML(oneInput));
  document.writeln(policy.createHTML(twoInput), policy.createHTML(threeInput));
  document.writeln(policy.createHTML(fourInput));
  document.close();
});
</pre></div> <h4 id="results">Results</h4> <p>Click the button. Note that a newline is added after each call to <code>writeln()</code>, but this will only be visible inside the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/pre"><code>&lt;pre&gt;</code></a> element because its layout preserves whitespace by default.</p> <div class="code-example"><iframe class="sample-code-frame" title="Writing TrustedHTML sample" id="frame_writing_trustedhtml" src="about:blank" data-live-path="/en-US/docs/Web/API/Document/writeln/" data-live-id="writing_trustedhtml" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-document-writeln-dev" rel="noopener" target="_blank">HTML&gt;<br># dom-document-writeln-dev&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>writeln</code></th>
<td class="bc-supports-yes">45<details><summary>1–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">69<details><summary>1–69</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">51<details><summary>≤12.1–51</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">45<details><summary>18–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">79<details><summary>4–79</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">47<details><summary>≤12.1–47</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">5.0<details><summary>1.0–5.0</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">45<details><summary>4.4–45</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
<td class="bc-supports-yes">11<details><summary>1–11</summary>Only supported for <a href="https://developer.mozilla.org/docs/Web/API/HTMLDocument"><code>HTMLDocument</code></a>, not all <code>Document</code> objects.</details>
</td>
</tr>
<tr>
<th><code>enforces_trusted_types</code></th>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">133</td>
<td class="bc-supports-yes">72</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">61</td>
<td class="bc-supports-yes">26</td>
<td class="bc-supports-yes">14.0</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">26</td>
</tr>
</tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/writeln" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Document/writeln</a>
  </p>
</div>
