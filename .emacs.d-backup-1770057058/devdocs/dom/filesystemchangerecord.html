<h1>FileSystemChangeRecord</h1>    <p>The <code>FileSystemChangeRecord</code> dictionary of the <a href="file_system_api">File System API</a> contains details of a single change observed by a <a href="filesystemobserver"><code>FileSystemObserver</code></a>.</p> <p>The <code>records</code> argument passed into the <a href="filesystemobserver/filesystemobserver"><code>FileSystemObserver()</code></a> constructor's callback function is an array of <code>FileSystemChangeRecord</code> objects.</p>     <mdn-survey></mdn-survey>  <h2 id="instance_properties" class="heading">Instance properties</h2> <dl> <dt id="changedhandle"><a href="#changedhandle"><code>changedHandle</code></a></dt> <dd> <p>A reference to the file system handle that the change was observed on.</p> <ul> <li>For the user-observable file system, this can be a <a href="filesystemfilehandle"><code>FileSystemFileHandle</code></a> or a <a href="filesystemdirectoryhandle"><code>FileSystemDirectoryHandle</code></a>.</li> <li>For the <a href="file_system_api/origin_private_file_system">Origin Private File System</a> (OPFS), it can be a <a href="filesystemfilehandle"><code>FileSystemFileHandle</code></a>, a <a href="filesystemdirectoryhandle"><code>FileSystemDirectoryHandle</code></a>, or a <a href="filesystemsyncaccesshandle"><code>FileSystemSyncAccessHandle</code></a>.</li> </ul> <p>This property will be <code>null</code> for records with a <code>"disappeared"</code>, <code>"errored"</code>, or <code>"unknown"</code> type.</p> </dd> <dt id="relativepathcomponents"><a href="#relativepathcomponents"><code>relativePathComponents</code></a></dt> <dd> <p>An array containing the path components that make up the relative file path from the <code>root</code> to the <code>changedHandle</code>, including the <code>changedHandle</code> filename.</p> </dd> <dt id="relativepathmovedfrom"><a href="#relativepathmovedfrom"><code>relativePathMovedFrom</code></a></dt> <dd> <p>An array containing the path components that make up the relative file path from the <code>root</code> to the <code>changedHandle</code>'s former location, in the case of observations with a <code>"moved"</code> type. If the type is not <code>"moved"</code>, this property will be <code>null</code>.</p> </dd> <dt id="root"><a href="#root"><code>root</code></a></dt> <dd> <p>A reference to the root file system handle, that is, the one passed to the <code>observe()</code> call that started the observation. Again, this can be a <a href="filesystemfilehandle"><code>FileSystemFileHandle</code></a>, <a href="filesystemdirectoryhandle"><code>FileSystemDirectoryHandle</code></a>, or <a href="filesystemsyncaccesshandle"><code>FileSystemSyncAccessHandle</code></a>.</p> </dd> <dt id="type"><a href="#type"><code>type</code></a></dt> <dd> <p>A string representing the type of change that was observed. Possible values are:</p> <dl> <dt id="appeared"><a href="#appeared"><code>appeared</code></a></dt> <dd> <p>The file or directory was created or moved into the <code>root</code> file structure.</p> </dd> <dt id="disappeared"><a href="#disappeared"><code>disappeared</code></a></dt> <dd> <p>The file or directory was deleted or moved out of the <code>root</code> file structure. To find out which file or directory disappeared, you can query the <code>relativePathComponents</code> property.</p> </dd> <dt id="errored"><a href="#errored"><code>errored</code></a></dt> <dd> <p>An error state occurred in the observed directory. This can result when:</p> <ul> <li>The observation is no longer valid. This can occur when the observed handle (that is, the <code>root</code> of the observation) is deleted or moved. In this case, a <code>"disappeared"</code> observation will be recorded, followed by an <code>"errored"</code> observation. In such cases, you may wish to stop observing the file system using <a href="filesystemobserver/disconnect"><code>FileSystemObserver.disconnect()</code></a>.</li> <li>The maximum limit of per-origin observations is reached. This limit is dependent on the operating system and not known beforehand. If this happens, the site may decide to retry, though there's no guarantee that the operating system will have freed up enough resources.</li> <li>Permission to access the directory or file handle is removed.</li> </ul> </dd> <dt id="modified"><a href="#modified"><code>modified</code></a></dt> <dd> <p>The file or directory was modified.</p> </dd> <dt id="moved"><a href="#moved"><code>moved</code></a></dt> <dd> <p>The file or directory was moved within the root file structure.</p> <div class="notecard note"> <p><strong>Note:</strong> On Windows, <code>"moved"</code> observations aren't supported between directories. They are reported as a <code>"disappeared"</code> observation in the source directory and an <code>"appeared"</code> observation in the destination directory.</p> </div> </dd> <dt id="unknown"><a href="#unknown"><code>unknown</code></a></dt> <dd> <p>Indicates that some observations were missed. If you wish to find out information on what changed in the missed observations, you could fall back to polling the observed directory.</p> </dd> </dl> </dd> </dl> <p>Depending on the operating system, not all observations will be reported with the same level of detail, for example, when the contents of a directory change recursively. At best, the website will receive a detailed change record containing the type of change and a handle to the affected path. At worst, the website will receive a more generic change record (that is, an <code>"unknown"</code> type) that still requires it to enumerate the directory to figure out which handle changed.</p> <p>This is still an improvement over polling, since the directory enumeration can be kicked off on-demand from the callback function, rather than needing to poll for changes periodically.</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="initialize_a_filesystemobserver" class="heading">Initialize a <code>FileSystemObserver</code>
</h3> <p>Before you can start observing file or directory changes, you need to initialize a <code>FileSystemObserver</code> to handle the observations. This is done using the <a href="filesystemobserver/filesystemobserver"><code>FileSystemObserver()</code></a> constructor, which takes a callback function as an argument:</p> <div class="code-example"><pre data-language="js">const observer = new FileSystemObserver(callback);
</pre></div> <p>The <a href="filesystemobserver/filesystemobserver#callback">callback function</a> body can be specified to return and process file change observations in any way you want. Each object inside the <code>records</code> array is a <code>FileSystemChangeRecord</code> object:</p> <div class="code-example"><pre data-language="js">const callback = (records, observer) =&gt; {
  for (const record of records) {
    console.log("Change detected:", record);
    const reportContent = `Change observed to ${record.changedHandle.kind} ${record.changedHandle.name}. Type: ${record.type}.`;
    sendReport(reportContent); // Some kind of user-defined reporting function
  }

  observer.disconnect();
};
</pre></div>  <h2 id="specifications" class="heading">Specifications</h2> <p>Not currently part of a specification. See <a href="https://github.com/whatwg/fs/pull/165" target="_blank">https://github.com/whatwg/fs/pull/165</a> for the relevant specification PR.</p>  <h2 id="see_also" class="heading">See also</h2> <ul> <li>
<a href="filesystemobserver/filesystemobserver"><code>FileSystemObserver()</code></a> constructor</li> <li><a href="file_system_api">File System API</a></li> <li>
<a href="https://developer.chrome.com/blog/file-system-observer#stop-observing-the-file-system" target="_blank">The File System Observer API origin trial</a> on developer.chrome.com (2024)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemChangeRecord" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/FileSystemChangeRecord</a>
  </p>
</div>
