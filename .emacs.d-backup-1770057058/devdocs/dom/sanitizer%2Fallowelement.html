<h1>Sanitizer: allowElement() method</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FSanitizer%2FallowElement&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>allowElement()</code> method of the <a href="../sanitizer"><code>Sanitizer</code></a> interface sets that the specified element is allowed in the output when the sanitizer is used. The element can be specified with lists of attributes that are allowed or disallowed on elements of that type.</p> <p>The specified element is added to the <a href="../sanitizerconfig#elements"><code>elements</code></a> list in this sanitizer's configuration. If the element is already present in the list, then the existing entry is first removed and the new definition is appended to the end of the list. Note that if you need both per-element add-attribute and remove-attribute lists, they must be added in a single call to this method (since if done in two calls, the second call will replace the element definition added in the first call).</p> <p>The specified element is removed from the sanitizer configuration <a href="../sanitizerconfig#removeelements"><code>removeElements</code></a> or <a href="../sanitizerconfig#replacewithchildrenelements"><code>replaceWithChildrenElements</code></a> lists if present.</p>     <mdn-survey></mdn-survey>  <h2 id="syntax" class="heading">Syntax</h2> <div class="code-example"><pre data-language="js">allowElement(element)
</pre></div>  <h3 id="parameters" class="heading">Parameters</h3> <dl> <dt id="element"><a href="#element"><code>element</code></a></dt> <dd> <p>A string indicating the name of the allowed element, or an object with the following properties:</p> <dl> <dt id="name"><a href="#name"><code>name</code></a></dt> <dd> <p>A string containing the name of the element.</p> </dd> <dt id="namespace"><a href="#namespace"><code>namespace</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>A string containing the namespace of the element. The default namespace is <code>"http://www.w3.org/1999/xhtml"</code>.</p> </dd> <dt id="attributes"><a href="#attributes"><code>attributes</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>An array indicating the attributes to allow on this (allowed) element when sanitizing HTML.</p> <p>Each attribute can be specified by name (a string), or as a object with the following properties:</p> <dl> <dt id="name_2"><a href="#name_2"><code>name</code></a></dt> <dd> <p>A string containing the name of the attribute.</p> </dd> <dt id="namespace_2"><a href="#namespace_2"><code>namespace</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>A string containing the namespace of the attribute, which defaults to <code>null</code>.</p> </dd> </dl> </dd> <dt id="removeattributes"><a href="#removeattributes"><code>removeAttributes</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>An array indicating the attributes to remove on this (allowed) element when sanitizing HTML.</p> <p>Each attribute can be specified by name (a string), or as a object with the following properties:</p> <dl> <dt id="name_3"><a href="#name_3"><code>name</code></a></dt> <dd> <p>A string containing the name of the attribute.</p> </dd> <dt id="namespace_3"><a href="#namespace_3"><code>namespace</code> <span class="badge inline optional">Optional</span></a></dt> <dd> <p>A string containing the namespace of the attribute, which defaults to <code>null</code>.</p> </dd> </dl> </dd> </dl> </dd> </dl>  <h3 id="return_value" class="heading">Return value</h3> <p>None (<code>undefined</code>).</p>  <h2 id="examples" class="heading">Examples</h2> &gt;  <h3 id="how_to_allow_elements" class="heading">How to allow elements</h3> <p>This example shows how <code>allowElement()</code> is used to add an element to the sanitizer's <a href="../sanitizerconfig#elements"><code>elements</code> configuration</a> (the list of allowed elements).</p>    <h4 id="javascript">JavaScript</h4> <p>The code first creates a new <code>Sanitizer</code> object that initially allows <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script"><code>&lt;script&gt;</code></a> elements. It then calls <code>allowElement()</code> to add a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/p"><code>&lt;p&gt;</code></a> element specified as a string parameter, and then again to add a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/span"><code>&lt;span&gt;</code></a> element specified as an object. We then get and log the configuration.</p>  <div class="code-example"><pre data-language="js">// Create sanitizer using SanitizerConfig
const sanitizer = new Sanitizer({
  elements: ["div", "script"],
});

// Allow &lt;p&gt; specifying an string
sanitizer.allowElement("p");

// Allow &lt;span&gt; specifying an object
sanitizer.allowElement({ name: "span" });

let sanitizerConfig = sanitizer.get();
log(JSON.stringify(sanitizerConfig, null, 2));
</pre></div>  <h4 id="results">Results</h4> <p>The final configuration is logged below. This includes the original elements (<code>&lt;div&gt;</code> and <code>&lt;script&gt;</code>) and the two added with <code>allowElement()</code> (<code>&lt;p&gt;</code> and <code>&lt;span&gt;</code>).</p> <div class="code-example"><iframe class="sample-code-frame" title="How to allow elements sample" id="frame_how_to_allow_elements" width="100" height="480px" src="about:blank" data-live-path="/en-US/docs/Web/API/Sanitizer/allowElement/" data-live-id="how_to_allow_elements" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h3 id="allowing_elements_that_are_already_allowed_or_removed" class="heading">Allowing elements that are already allowed or removed</h3> <p>This example shows the effect of using <code>allowElement()</code> to add elements that are already allowed, or that are in the configuration as "to be removed".</p>    <h4 id="javascript_2">JavaScript</h4> <p>The code first creates a new <code>Sanitizer</code> object that initially allows <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> elements (removing attributes other than <code>id</code>) and also replaced <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/span"><code>&lt;span&gt;</code></a> elements with any child elements.</p> <p>It then calls <code>allowElement()</code>, firstly to add a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div"><code>&lt;div&gt;</code></a> element that removes <code>style</code> attributes. Since the <code>&lt;div&gt;</code> element is already allowed, it is removed from the <a href="../sanitizerconfig#elements"><code>elements</code> configuration</a> and the <code>&lt;div&gt;</code> element definition is appended.</p> <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/span"><code>&lt;span&gt;</code></a> element is then added to the allow list, which removes it from the <a href="../sanitizerconfig#replacewithchildrenelements"><code>replaceWithChildrenElements</code> configuration list</a>.</p>  <div class="code-example"><pre data-language="js">// Create sanitizer using SanitizerConfig
const sanitizer = new Sanitizer({
  elements: [{ name: "div", attributes: [{ name: "id" }] }],
  replaceWithChildrenElements: ["span"],
});

// Allow &lt;div&gt; elements.
// Allow id elements but strip their style attributes
sanitizer.allowElement({
  name: "div",
  removeAttributes: ["style"],
});

// Allow &lt;span&gt; elements
sanitizer.allowElement("span");

let sanitizerConfig = sanitizer.get();
log(JSON.stringify(sanitizerConfig, null, 2));
</pre></div>  <h4 id="results_2">Results</h4> <p>The final configuration is logged, and is shown below. From the log we can see that the original filter for the <code>&lt;div&gt;</code> element has been removed and the new definition appended to the <code>elements</code> list. Adding the <code>&lt;span&gt;</code> element to the <code>elements</code> list has removed it from the <code>replaceWithChildrenElements</code> list.</p> <div class="code-example"><iframe class="sample-code-frame" title="Allowing elements that are already allowed or removed sample" id="frame_allowing_elements_that_are_already_allowed_or_removed" width="100" height="480px" src="about:blank" data-live-path="/en-US/docs/Web/API/Sanitizer/allowElement/" data-live-id="allowing_elements_that_are_already_allowed_or_removed" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://wicg.github.io/sanitizer-api/#dom-sanitizer-allowelement" rel="noopener" target="_blank">HTML Sanitizer API&gt;<br># dom-sanitizer-allowelement&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>allowElement</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">138</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Sanitizer/allowElement" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Sanitizer/allowElement</a>
  </p>
</div>
