<h1>fetchLater() API</h1> <details class="baseline-indicator not" data-glean-toggle-open="baseline_toggle_open"> <summary>  <div class="status-title"> <span class="not-bold">Limited availability</span> </div>    </summary> <div class="extra"> <p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>  <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean-id="baseline_link_learn_more" target="_blank" class="learn-more"> Learn more </a> </li> <li> <a href="#browser_compatibility" data-glean-id="baseline_link_bcd_table"> See full compatibility </a> </li> <li> <a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FfetchLater_API&amp;level=not" data-glean-id="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer"> Report feedback </a> </li> </ul> </div> </details>   <div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>fetchLater()</code> provides an interface to request a deferred fetch that can be sent after a specified period of time, or when the page is closed or navigated away from.</p>     <mdn-survey></mdn-survey>  <h2 id="concepts_and_usage" class="heading">Concepts and usage</h2> <p>Developers often need to send (or beacon) data back to the server, particularly at the end of a user's visit to a page — for example, for analytics services. There are several ways to do this: from adding 1 pixel <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/img"><code>&lt;img&gt;</code></a> elements to the page, to <a href="xmlhttprequest"><code>XMLHttpRequest</code></a>, to the dedicated <a href="beacon_api">Beacon API</a>, and the <a href="fetch_api">Fetch API</a> itself.</p> <p>The issue is that all of these methods suffer from reliability problems for end-of-visit beaconing. While the Beacon API and the <a href="request/keepalive"><code>keepalive</code></a> property of the Fetch API will send data, even if the document is destroyed (to the best efforts that can be made in this scenario), this only solves part of the problem.</p> <p>The other — more difficult — part to solve concerns deciding <em>when</em> to send the data, since there is not an ideal time in a page's lifecycle to make the JavaScript call to send out the beacon:</p> <ul> <li>The <a href="window/unload_event"><code>unload</code></a> and <a href="window/beforeunload_event"><code>beforeunload</code></a> events are unreliable, and outright ignored by several major browsers.</li> <li>The <a href="window/pagehide_event"><code>pagehide</code></a> and <a href="document/visibilitychange_event"><code>visibilitychange</code></a> events are more reliable, but still have issues on mobile platforms.</li> </ul> <p>This means developers looking to reliably send out data via a beacon need to do so more frequently than is ideal. For example, they may send a beacon on each change, even if the final value for the page has not yet been reached. This has costs in network usage, server processing, and merging or discarding outdated beacons on the server.</p> <p>Alternatively, developers can choose to accept some level of missing data — either by:</p> <ul> <li>Beaconing after a designated cut-off time and not collecting later data.</li> <li>Beaconing at the end of the page lifecycle but accepting that sometimes this will not be reliable.</li> </ul> <p>The <code>fetchLater()</code> API extends the <a href="fetch_api">Fetch API</a> to allow setting fetch requests up in advance. These deferred fetches can be updated before they have been sent, allowing the payload to reflect the latest data to be beaconed.</p> <p>The browser then sends the beacon when the tab is closed or navigated away from, or after a set time if specified. This avoids sending multiple beacons but still ensures a reliable beacon within reasonable expectations (i.e., excluding when the browser process shuts down unexpectedly during a crash).</p> <p>Deferred fetches can also be aborted using an <a href="abortcontroller"><code>AbortController</code></a> if they are no longer required, avoiding further unnecessary costs.</p>  <h3 id="quotas" class="heading">Quotas</h3> <p>Deferred fetches are batched and sent once the tab is closed; at this point, there is no way for the user to abort them. To avoid situations where documents abuse this bandwidth to send unlimited amounts of data over the network, the overall quota for a top-level document is capped at 640KiB.</p> <p>Callers of <code>fetchLater()</code> should be defensive and catch <code>QuotaExceededError</code> errors in almost all cases, especially if they embed third-party JavaScript.</p> <p>Since this cap makes deferred fetch bandwidth a scarce resource, which needs to be shared between multiple reporting origins (for example, several RUM libraries) and subframes from multiple origins, the platform provides a reasonable default division of this quota. In addition, it provides <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Permissions-Policy/deferred-fetch"><code>deferred-fetch</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Permissions-Policy/deferred-fetch-minimal"><code>deferred-fetch-minimal</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Permissions_Policy">Permissions Policy</a> directives to allow dividing it differently when desired.</p> <p>See <a href="fetchlater_api/fetchlater_quotas">fetchLater() quotas</a> for more details and examples.</p>  <h2 id="interfaces" class="heading">Interfaces</h2> <dl> <dt id="window.fetchlater"><a href="window/fetchlater"><code>Window.fetchLater()</code></a></dt> <dd> <p>Used to queue a resource for sending at a later point.</p> </dd> <dt id="deferredrequestinit"><a href="deferredrequestinit"><code>DeferredRequestInit</code></a></dt> <dd> <p>Represents the set of options that can be used to configure a deferred fetch request.</p> </dd> <dt id="fetchlaterresult"><a href="fetchlaterresult"><code>FetchLaterResult</code></a></dt> <dd> <p>Represents the result of requesting a deferred fetch.</p> </dd> </dl>  <h2 id="http_headers" class="heading">HTTP headers</h2> <dl> <dt id="deferred-fetch"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Permissions-Policy/deferred-fetch"><code>deferred-fetch</code></a></dt> <dd> <p>Controls <a href="fetchlater_api/fetchlater_quotas">top-level quota</a> for the <code>fetchLater()</code> API.</p> </dd> <dt id="deferred-fetch-minimal"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Permissions-Policy/deferred-fetch-minimal"><code>deferred-fetch-minimal</code></a></dt> <dd> <p>Controls <a href="fetchlater_api/fetchlater_quotas">shared cross-origin subframe quota</a> for the <code>fetchLater()</code> API.</p> </dd> </dl>  <h2 id="specifications" class="heading">Specifications</h2> <div class="_table"><table> <thead> <tr> <th scope="col">Specification</th> </tr> </thead> <tbody> <tr> <td><a href="https://fetch.spec.whatwg.org/#deferred-fetch" rel="noopener" target="_blank">Fetch&gt;<br># deferred-fetch&gt;</a></td> </tr> </tbody> </table></div>  <h2 id="browser_compatibility" class="heading">Browser compatibility</h2> <div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="7">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>WebView on iOS</th>
</tr>
</thead>
<tbody><tr>
<th><code>fetchLater_API</code></th>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">120</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">135</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>  <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="fetchlater_api/fetchlater_quotas"><code>fetchLater()</code> quotas</a></li> <li><a href="fetch_api">Fetch API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetchLater_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/fetchLater_API</a>
  </p>
</div>
