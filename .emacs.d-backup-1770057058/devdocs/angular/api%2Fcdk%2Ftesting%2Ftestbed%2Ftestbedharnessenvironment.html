<h1>TestbedHarnessEnvironment</h1>
<router-outlet _ngcontent-ng-c1178817259></router-outlet><adev-main ngh="7"><router-outlet></router-outlet><adev-reference-page _nghost-ng-c972174807 ngh="6"><main _ngcontent-ng-c972174807 docsviewer class="docs-with-TOC" ngh="0"><div class="docs-api">
<header class="docs-reference-header"><section class="docs-reference-description"><p>A <code>HarnessEnvironment</code> implementation for Angular's Testbed.</p></section></header><div class="docs-reference-section docs-reference-api-section">
<h2 id="api" class="docs-reference-section-heading">API</h2>
<pre data-language="ts">class TestbedHarnessEnvironment extends HarnessEnvironment&lt;Element&gt; {
  protected constructor(rawRootElement: Element, _fixture: ComponentFixture&lt;unknown&gt;, options?: TestbedHarnessEnvironmentOptions | undefined): TestbedHarnessEnvironment;
  forceStabilize(): Promise&lt;void&gt;;
  waitForTasksOutsideAngular(): Promise&lt;void&gt;;
  protected getDocumentRoot(): Element;
  protected createTestElement(element: Element): TestElement;
  protected createEnvironment(element: Element): HarnessEnvironment&lt;Element&gt;;
  protected getAllRawElements(selector: string): Promise&lt;Element[]&gt;;
  static loader(fixture: ComponentFixture&lt;unknown&gt;, options?: TestbedHarnessEnvironmentOptions | undefined): HarnessLoader;
  static documentRootLoader(fixture: ComponentFixture&lt;unknown&gt;, options?: TestbedHarnessEnvironmentOptions | undefined): HarnessLoader;
  static getNativeElement(el: TestElement): Element;
  static harnessForFixture&lt;T extends ComponentHarness&gt;(fixture: ComponentFixture&lt;unknown&gt;, harnessType: ComponentHarnessConstructor&lt;T&gt;, options?: TestbedHarnessEnvironmentOptions | undefined): Promise&lt;T&gt;;
}</pre>
</div>
<div class="docs-reference-members"><div class="docs-reference-members">
<div id="constructor" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>constructor</h3>
<code><a href="testbedharnessenvironment">TestbedHarnessEnvironment</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">rawRootElement</span><code>Element</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">_fixture</span><code><a href="../../../core/testing/componentfixture">ComponentFixture</a>&lt;unknown&gt;</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">options</span><code><a href="testbedharnessenvironmentoptions">TestbedHarnessEnvironmentOptions</a> | undefined</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code><a href="testbedharnessenvironment">TestbedHarnessEnvironment</a></code>
</div>
</div></div>
</div>
<div id="forceStabilize" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>forceStabilize</h3>
<code>Promise&lt;void&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Flushes change detection and async tasks captured in the Angular zone. In most cases it should not be necessary to call this manually. However, there may be some edge cases where it is needed to fully flush animation events.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;void&gt;</code>
</div>
</div></div>
</div>
<div id="waitForTasksOutsideAngular" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>waitForTasksOutsideAngular</h3>
<code>Promise&lt;void&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Waits for all scheduled or running async tasks to complete. This allows harness authors to wait for async tasks outside of the Angular zone.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;void&gt;</code>
</div>
</div></div>
</div>
<div id="getDocumentRoot" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>getDocumentRoot</h3>
<code>Element</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets the root element for the document.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Element</code>
</div>
</div></div>
</div>
<div id="createTestElement" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>createTestElement</h3>
<code>TestElement</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Creates a <code>TestElement</code> from a raw element.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">element</span><code>Element</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>TestElement</code>
</div>
</div></div>
</div>
<div id="createEnvironment" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>createEnvironment</h3>
<code>HarnessEnvironment&lt;Element&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Creates a <code>HarnessLoader</code> rooted at the given raw element.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">element</span><code>Element</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>HarnessEnvironment&lt;Element&gt;</code>
</div>
</div></div>
</div>
<div id="getAllRawElements" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>getAllRawElements</h3>
<code>Promise&lt;Element[]&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets a list of all elements matching the given selector under this environment's root element.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">selector</span><code>string</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;Element[]&gt;</code>
</div>
</div></div>
</div>
<div id="loader" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>loader</h3>
<code>HarnessLoader</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Creates a <code>HarnessLoader</code> rooted at the given fixture's root element.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">fixture</span><code><a href="../../../core/testing/componentfixture">ComponentFixture</a>&lt;unknown&gt;</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">options</span><code><a href="testbedharnessenvironmentoptions">TestbedHarnessEnvironmentOptions</a> | undefined</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>HarnessLoader</code>
</div>
</div></div>
</div>
<div id="documentRootLoader" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>documentRootLoader</h3>
<code>HarnessLoader</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Creates a <code>HarnessLoader</code> at the document root. This can be used if harnesses are located outside of a fixture (e.g. overlays appended to the document body).</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">fixture</span><code><a href="../../../core/testing/componentfixture">ComponentFixture</a>&lt;unknown&gt;</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">options</span><code><a href="testbedharnessenvironmentoptions">TestbedHarnessEnvironmentOptions</a> | undefined</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>HarnessLoader</code>
</div>
</div></div>
</div>
<div id="getNativeElement" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>getNativeElement</h3>
<code>Element</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets the native DOM element corresponding to the given TestElement.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">el</span><code>TestElement</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Element</code>
</div>
</div></div>
</div>
<div id="harnessForFixture" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>harnessForFixture</h3>
<code>Promise&lt;T&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Creates an instance of the given harness type, using the fixture's root element as the harness's host element. This method should be used when creating a harness for the root element of a fixture, as components do not have the correct selector when they are created as the root of the fixture.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">fixture</span><code><a href="../../../core/testing/componentfixture">ComponentFixture</a>&lt;unknown&gt;</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">harnessType</span><code>ComponentHarnessConstructor&lt;T&gt;</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">options</span><code><a href="testbedharnessenvironmentoptions">TestbedHarnessEnvironmentOptions</a> | undefined</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;T&gt;</code>
</div>
</div></div>
</div>
</div></div>
</div></main></adev-reference-page></adev-main><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/api/cdk/testing/testbed/TestbedHarnessEnvironment" class="_attribution-link">https://angular.dev/api/cdk/testing/testbed/TestbedHarnessEnvironment</a>
  </p>
</div>
