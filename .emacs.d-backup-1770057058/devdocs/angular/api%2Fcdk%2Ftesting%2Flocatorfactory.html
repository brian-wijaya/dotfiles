<h1>LocatorFactory</h1>
<router-outlet _ngcontent-ng-c1178817259></router-outlet><adev-main ngh="7"><router-outlet></router-outlet><adev-reference-page _nghost-ng-c972174807 ngh="6"><main _ngcontent-ng-c972174807 docsviewer class="docs-with-TOC" ngh="0"><div class="docs-api">
<header class="docs-reference-header"><section class="docs-reference-description"><p>Interface used to create asynchronous locator functions used find elements and component harnesses. This interface is used by <a href="componentharness"><code>ComponentHarness</code></a> authors to create locator functions for their <a href="componentharness"><code>ComponentHarness</code></a> subclass.</p></section></header><div class="docs-reference-section docs-reference-api-section">
<h2 id="api" class="docs-reference-section-heading">API</h2>
<pre data-language="ts">interface LocatorFactory {
  documentRootLocatorFactory(): LocatorFactory;
  rootElement: TestElement;
  locatorFor&lt;T extends (HarnessQuery&lt;any&gt; | string)[]&gt;(...queries: T): () =&gt; Promise&lt;LocatorFnResult&lt;T&gt;&gt;;
  locatorForOptional&lt;T extends (HarnessQuery&lt;any&gt; | string)[]&gt;(...queries: T): () =&gt; Promise&lt;LocatorFnResult&lt;T&gt; | null&gt;;
  locatorForAll&lt;T extends (HarnessQuery&lt;any&gt; | string)[]&gt;(...queries: T): () =&gt; Promise&lt;LocatorFnResult&lt;T&gt;[]&gt;;
  rootHarnessLoader(): Promise&lt;HarnessLoader&gt;;
  harnessLoaderFor(selector: string): Promise&lt;HarnessLoader&gt;;
  harnessLoaderForOptional(selector: string): Promise&lt;HarnessLoader | null&gt;;
  harnessLoaderForAll(selector: string): Promise&lt;HarnessLoader[]&gt;;
  forceStabilize(): Promise&lt;void&gt;;
  waitForTasksOutsideAngular(): Promise&lt;void&gt;;
}</pre>
</div>
<div class="docs-reference-members"><div class="docs-reference-members">
<div id="documentRootLocatorFactory" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>documentRootLocatorFactory</h3>
<code><a href="locatorfactory">LocatorFactory</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets a locator factory rooted at the document root.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code><a href="locatorfactory">LocatorFactory</a></code>
</div>
</div></div>
</div>
<div id="rootElement" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>rootElement</h3>
<code><a href="testelement">TestElement</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>The root element of this <a href="locatorfactory"><code>LocatorFactory</code></a> as a <a href="testelement"><code>TestElement</code></a>.</p></div></div></div>
</div>
<div id="locatorFor" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>locatorFor</h3>
<code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt;&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Creates an asynchronous locator function that can be used to find a <a href="componentharness"><code>ComponentHarness</code></a> instance or element under the root element of this <a href="locatorfactory"><code>LocatorFactory</code></a>.</p> <p>For example, given the following DOM and assuming <code>DivHarness.hostSelector</code> is <code>'div'</code></p> <pre data-language="ts">&lt;div id="d1"&gt;&lt;/div&gt;&lt;div id="d2"&gt;&lt;/div&gt;</pre>
<p>then we expect:</p> <pre data-language="ts">await lf.locatorFor(DivHarness, 'div')() // Gets a `DivHarness` instance for #d1
await lf.locatorFor('div', DivHarness)() // Gets a `TestElement` instance for #d1
await lf.locatorFor('span')()            // Throws because the `Promise` rejects</pre>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">queries</span><code>T</code><div class="docs-parameter-description">
<p>A list of queries specifying which harnesses and elements to search for:</p> <ul class="docs-list"> <li>A <code>string</code> searches for elements matching the CSS selector specified by the string.</li> <li>A <a href="componentharness"><code>ComponentHarness</code></a> constructor searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given class.</li> <li>A <a href="harnesspredicate"><code>HarnessPredicate</code></a> searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given predicate.</li> </ul>
</div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt;&gt;</code>
</div>
</div></div>
</div>
<div id="locatorForOptional" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>locatorForOptional</h3>
<code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt; | null&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Creates an asynchronous locator function that can be used to find a <a href="componentharness"><code>ComponentHarness</code></a> instance or element under the root element of this <a href="locatorfactory"><code>LocatorFactory</code></a>.</p> <p>For example, given the following DOM and assuming <code>DivHarness.hostSelector</code> is <code>'div'</code></p> <pre data-language="ts">&lt;div id="d1"&gt;&lt;/div&gt;&lt;div id="d2"&gt;&lt;/div&gt;</pre>
<p>then we expect:</p> <pre data-language="ts">await lf.locatorForOptional(DivHarness, 'div')() // Gets a `DivHarness` instance for #d1
await lf.locatorForOptional('div', DivHarness)() // Gets a `TestElement` instance for #d1
await lf.locatorForOptional('span')()            // Gets `null`</pre>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">queries</span><code>T</code><div class="docs-parameter-description">
<p>A list of queries specifying which harnesses and elements to search for:</p> <ul class="docs-list"> <li>A <code>string</code> searches for elements matching the CSS selector specified by the string.</li> <li>A <a href="componentharness"><code>ComponentHarness</code></a> constructor searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given class.</li> <li>A <a href="harnesspredicate"><code>HarnessPredicate</code></a> searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given predicate.</li> </ul>
</div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt; | null&gt;</code>
</div>
</div></div>
</div>
<div id="locatorForAll" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>locatorForAll</h3>
<code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt;[]&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Creates an asynchronous locator function that can be used to find <a href="componentharness"><code>ComponentHarness</code></a> instances or elements under the root element of this <a href="locatorfactory"><code>LocatorFactory</code></a>.</p> <p>For example, given the following DOM and assuming <code>DivHarness.hostSelector</code> is <code>'div'</code> and <code>IdIsD1Harness.hostSelector</code> is <code>'#d1'</code></p> <pre data-language="ts">&lt;div id="d1"&gt;&lt;/div&gt;&lt;div id="d2"&gt;&lt;/div&gt;</pre>
<p>then we expect:</p> <pre data-language="ts">// Gets [DivHarness for #d1, TestElement for #d1, DivHarness for #d2, TestElement for #d2]
await lf.locatorForAll(DivHarness, 'div')()
// Gets [TestElement for #d1, TestElement for #d2]
await lf.locatorForAll('div', '#d1')()
// Gets [DivHarness for #d1, IdIsD1Harness for #d1, DivHarness for #d2]
await lf.locatorForAll(DivHarness, IdIsD1Harness)()
// Gets []
await lf.locatorForAll('span')()</pre>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">queries</span><code>T</code><div class="docs-parameter-description">
<p>A list of queries specifying which harnesses and elements to search for:</p> <ul class="docs-list"> <li>A <code>string</code> searches for elements matching the CSS selector specified by the string.</li> <li>A <a href="componentharness"><code>ComponentHarness</code></a> constructor searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given class.</li> <li>A <a href="harnesspredicate"><code>HarnessPredicate</code></a> searches for <a href="componentharness"><code>ComponentHarness</code></a> instances matching the given predicate.</li> </ul>
</div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>() =&gt; Promise&lt;<a href="locatorfnresult">LocatorFnResult</a>&lt;T&gt;[]&gt;</code>
</div>
</div></div>
</div>
<div id="rootHarnessLoader" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>rootHarnessLoader</h3>
<code>Promise&lt;<a href="harnessloader">HarnessLoader</a>&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">

<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;<a href="harnessloader">HarnessLoader</a>&gt;</code>
</div>
</div></div>
</div>
<div id="harnessLoaderFor" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>harnessLoaderFor</h3>
<code>Promise&lt;<a href="harnessloader">HarnessLoader</a>&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets a <a href="harnessloader"><code>HarnessLoader</code></a> instance for an element under the root of this <a href="locatorfactory"><code>LocatorFactory</code></a>.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">selector</span><code>string</code><div class="docs-parameter-description"><p>The selector for the root element.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;<a href="harnessloader">HarnessLoader</a>&gt;</code>
</div>
</div></div>
</div>
<div id="harnessLoaderForOptional" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>harnessLoaderForOptional</h3>
<code>Promise&lt;<a href="harnessloader">HarnessLoader</a> | null&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets a <a href="harnessloader"><code>HarnessLoader</code></a> instance for an element under the root of this <a href="locatorfactory"><code>LocatorFactory</code></a></p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">selector</span><code>string</code><div class="docs-parameter-description"><p>The selector for the root element.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;<a href="harnessloader">HarnessLoader</a> | null&gt;</code>
</div>
</div></div>
</div>
<div id="harnessLoaderForAll" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>harnessLoaderForAll</h3>
<code>Promise&lt;<a href="harnessloader">HarnessLoader</a>[]&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Gets a list of <a href="harnessloader"><code>HarnessLoader</code></a> instances, one for each matching element.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">selector</span><code>string</code><div class="docs-parameter-description"><p>The selector for the root element.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;<a href="harnessloader">HarnessLoader</a>[]&gt;</code>
</div>
</div></div>
</div>
<div id="forceStabilize" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>forceStabilize</h3>
<code>Promise&lt;void&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Flushes change detection and async tasks captured in the Angular zone. In most cases it should not be necessary to call this manually. However, there may be some edge cases where it is needed to fully flush animation events.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;void&gt;</code>
</div>
</div></div>
</div>
<div id="waitForTasksOutsideAngular" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>waitForTasksOutsideAngular</h3>
<code>Promise&lt;void&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Waits for all scheduled or running async tasks to complete. This allows harness authors to wait for async tasks outside of the Angular zone.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;void&gt;</code>
</div>
</div></div>
</div>
</div></div>
</div></main></adev-reference-page></adev-main><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/api/cdk/testing/LocatorFactory" class="_attribution-link">https://angular.dev/api/cdk/testing/LocatorFactory</a>
  </p>
</div>
