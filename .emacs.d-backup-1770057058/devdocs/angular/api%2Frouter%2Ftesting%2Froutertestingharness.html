<h1>RouterTestingHarness</h1>
<router-outlet _ngcontent-ng-c1178817259></router-outlet><adev-main ngh="7"><router-outlet></router-outlet><adev-reference-page _nghost-ng-c972174807 ngh="6"><main _ngcontent-ng-c972174807 docsviewer class="docs-with-TOC" ngh="0"><div class="docs-api">
<header class="docs-reference-header"><section class="docs-reference-description"><p>A testing harness for the <code>Router</code> to reduce the boilerplate needed to test routes and routed components.</p></section></header><div class="docs-reference-section docs-reference-api-section">
<h2 id="api" class="docs-reference-section-heading">API</h2>
<pre data-language="ts">class RouterTestingHarness {
  constructor(fixture: ComponentFixture&lt;{ routerOutletData: WritableSignal&lt;unknown&gt;; }&gt;): RouterTestingHarness;
  readonly fixture: ComponentFixture&lt;{ routerOutletData: WritableSignal&lt;unknown&gt;; }&gt;;
  detectChanges(): void;
  readonly routeDebugElement: DebugElement | null;
  readonly routeNativeElement: HTMLElement | null;
  navigateByUrl(url: string): Promise&lt;{} | null&gt;;
  navigateByUrl&lt;T&gt;(url: string, requiredRoutedComponentType: Type&lt;T&gt;): Promise&lt;T&gt;;
  static create(initialUrl?: string | undefined): Promise&lt;RouterTestingHarness&gt;;
}</pre>
</div>
<div class="docs-reference-members"><div class="docs-reference-members">
<div id="constructor" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>constructor</h3>
<code><a href="routertestingharness">RouterTestingHarness</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">fixture</span><code><a href="../../core/testing/componentfixture">ComponentFixture</a>&lt;{ routerOutletData: <a href="../../core/writablesignal">WritableSignal</a>&lt;unknown&gt;; }&gt;</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code><a href="routertestingharness">RouterTestingHarness</a></code>
</div>
</div></div>
</div>
<div id="fixture" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>fixture</h3>
<code><a href="../../core/testing/componentfixture">ComponentFixture</a>&lt;{ routerOutletData: <a href="../../core/writablesignal">WritableSignal</a>&lt;unknown&gt;; }&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>Fixture of the root component of the RouterTestingHarness</p></div></div></div>
</div>
<div id="detectChanges" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>detectChanges</h3>
<code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Instructs the root fixture to run change detection.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>void</code>
</div>
</div></div>
</div>
<div id="routeDebugElement" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>routeDebugElement</h3>
<code><a href="../../core/debugelement">DebugElement</a> | null</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>The <a href="../../core/debugelement"><code>DebugElement</code></a> of the <code>RouterOutlet</code> component. <code>null</code> if the outlet is not activated.</p></div></div></div>
</div>
<div id="routeNativeElement" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>routeNativeElement</h3>
<code>HTMLElement | null</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>The native element of the <code>RouterOutlet</code> component. <code>null</code> if the outlet is not activated.</p></div></div></div>
</div>
<div id="navigateByUrl" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>navigateByUrl</h3>
<span>2 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Triggers a <code>Router</code> navigation and waits for it to complete.</p> <p>The root component with a <code>RouterOutlet</code> created for the harness is used to render <code>Route</code> components. The root component is reused within the same test in subsequent calls to <code>navigateForTest</code>.</p> <p>When testing <code>Routes</code> with a guards that reject the navigation, the <code>RouterOutlet</code> might not be activated and the <code>activatedComponent</code> may be <code>null</code>.</p> <pre data-language="ts">let isLoggedIn = false;
    const isLoggedInGuard: CanActivateFn = () =&gt; {
      return isLoggedIn ? true : inject(Router).parseUrl('/login');
    };

    TestBed.configureTestingModule({
      providers: [
        provideRouter([
          {path: 'admin', canActivate: [isLoggedInGuard], component: AdminComponent},
          {path: 'login', component: LoginComponent},
        ]),
      ],
    });

    const harness = await RouterTestingHarness.create('/admin');
    expect(TestBed.inject(Router).url).toEqual('/login');
    isLoggedIn = true;
    await harness.navigateByUrl('/admin');
    expect(TestBed.inject(Router).url).toEqual('/admin');</pre>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p>The target of the navigation. Passed to <code>Router.navigateByUrl</code>.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;{} | null&gt;</code>
</div>
</div>
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Triggers a router navigation and waits for it to complete.</p> <p>The root component with a <code>RouterOutlet</code> created for the harness is used to render <code>Route</code> components.</p> <pre data-language="ts">it('navigates to routed component', async () =&gt; {
    @Component({standalone: true, template: 'hello {{name}}'})
    class TestCmp {
      name = 'world';
    }

    TestBed.configureTestingModule({
      providers: [provideRouter([{path: '', component: TestCmp}])],
    });

    const harness = await RouterTestingHarness.create();
    const activatedComponent = await harness.navigateByUrl('/', TestCmp);
    expect(activatedComponent).toBeInstanceOf(TestCmp);
    expect(harness.routeNativeElement?.innerHTML).toContain('hello world');
  });</pre>
<p>The root component is reused within the same test in subsequent calls to <code>navigateByUrl</code>.</p> <p>This function also makes it easier to test components that depend on <code>ActivatedRoute</code> data.</p> <pre data-language="ts">@Component({
      imports: [AsyncPipe],
      template: `search: {{ (route.queryParams | async)?.query }}`,
    })
    class SearchCmp {
      constructor(
        readonly route: ActivatedRoute,
        readonly router: Router,
      ) {}

      async searchFor(thing: string) {
        await this.router.navigate([], {queryParams: {query: thing}});
      }
    }

    TestBed.configureTestingModule({
      providers: [provideRouter([{path: 'search', component: SearchCmp}])],
    });

    const harness = await RouterTestingHarness.create();
    const activatedComponent = await harness.navigateByUrl('/search', SearchCmp);
    await activatedComponent.searchFor('books');
    harness.detectChanges();
    expect(TestBed.inject(Router).url).toEqual('/search?query=books');
    expect(harness.routeNativeElement?.innerHTML).toContain('books');</pre>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p>The target of the navigation. Passed to <code>Router.navigateByUrl</code>.</p></div>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">requiredRoutedComponentType</span><code><a href="../../core/type">Type</a>&lt;T&gt;</code><div class="docs-parameter-description"><p>After navigation completes, the required type for the activated component of the <code>RouterOutlet</code>. If the outlet is not activated or a different component is activated, this function will throw an error.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;T&gt;</code>
</div>
</div>
</div>
</div>
<div id="create" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>create</h3>
<code>Promise&lt;<a href="routertestingharness">RouterTestingHarness</a>&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Creates a <a href="routertestingharness"><code>RouterTestingHarness</code></a> instance.</p> <p>The <a href="routertestingharness"><code>RouterTestingHarness</code></a> also creates its own root component with a <code>RouterOutlet</code> for the purposes of rendering route components.</p> <p>Throws an error if an instance has already been created. Use of this harness also requires <code>destroyAfterEach: true</code> in the <code>ModuleTeardownOptions</code></p>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">initialUrl</span><code>string | undefined</code><div class="docs-parameter-description"><p>The target of navigation to trigger before returning the harness.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Promise&lt;<a href="routertestingharness">RouterTestingHarness</a>&gt;</code>
</div>
</div></div>
</div>
</div></div>
</div></main></adev-reference-page></adev-main><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/api/router/testing/RouterTestingHarness" class="_attribution-link">https://angular.dev/api/router/testing/RouterTestingHarness</a>
  </p>
</div>
