<h1 tabindex="-1">Code coverage</h1> <header class="docs-header"> <docs-breadcrumb ng-version="21.0.3" _nghost-ng-c3945279308 ngh="8"></docs-breadcrumb>   </header> <p>Code coverage reports show you any parts of your code base that might not be properly tested by your unit tests.</p> <h2 id="prerequisites"> Prerequisites </h2> <p>To generate code coverage reports with Vitest, you must install the <code>@vitest/coverage-v8</code> package:</p> <div class="docs-code-multifile" style="display: none"> <pre data-language="ts">npm install --save-dev @vitest/coverage-v8</pre>
<pre data-language="ts">yarn add --dev @vitest/coverage-v8</pre>
<pre data-language="ts">pnpm add -D @vitest/coverage-v8</pre>
<pre data-language="ts">bun add --dev @vitest/coverage-v8</pre> </div> <h2 id="generating-a-report"> Generating a report </h2> <p>To generate a coverage report, add the <code>--coverage</code> flag to the <code>ng test</code> command:</p> <pre data-language="ts">ng test --coverage</pre>
<p>After the tests run, the command creates a new <code>coverage/</code> directory in the project. Open the <code>index.html</code> file to see a report with your source code and code coverage values.</p> <p>If you want to create code-coverage reports every time you test, you can set the <code>coverage</code> option to <code>true</code> in your <code>angular.json</code> file:</p> <pre data-language="ts">{
  "projects": {
    "your-project-name": {
      "architect": {
        "test": {
          "builder": "@angular/build:unit-test",
          "options": {
            "coverage": true
          }
        }
      }
    }
  }
}</pre> <h2 id="enforcing-code-coverage-thresholds"> Enforcing code coverage thresholds </h2> <p>The code coverage percentages let you estimate how much of your code is tested. If your team decides on a minimum amount to be unit tested, you can enforce this minimum in your configuration.</p> <p>For example, suppose you want the code base to have a minimum of 80% code coverage. To enable this, add the <code>coverageThresholds</code> option to your <code>angular.json</code> file:</p> <pre data-language="ts">{
  "projects": {
    "your-project-name": {
      "architect": {
        "test": {
          "builder": "@angular/build:unit-test",
          "options": {
            "coverage": true,
            "coverageThresholds": {
              "statements": 80,
              "branches": 80,
              "functions": 80,
              "lines": 80
            }
          }
        }
      }
    }
  }
}</pre>
<p>Now, if your coverage drops below 80% when you run your tests, the command will fail.</p> <h2 id="advanced-configuration"> Advanced configuration </h2> <p>You can configure several other coverage options in your <code>angular.json</code> file:</p> <ul class="docs-list"> <li>
<code>coverageInclude</code>: Glob patterns of files to include in the coverage report.</li> <li>
<code>coverageReporters</code>: An array of reporters to use (e.g., <code>html</code>, <code>lcov</code>, <code>json</code>).</li> <li>
<code>coverageWatermarks</code>: An object specifying <code>[low, high]</code> watermarks for the HTML reporter, which can affect the color-coding of the report.</li> </ul> <pre data-language="ts">{
  "projects": {
    "your-project-name": {
      "architect": {
        "test": {
          "builder": "@angular/build:unit-test",
          "options": {
            "coverage": true,
            "coverageReporters": ["html", "lcov"],
            "coverageWatermarks": {
              "statements": [50, 80],
              "branches": [50, 80],
              "functions": [50, 80],
              "lines": [50, 80]
            }
          }
        }
      }
    }
  }
}</pre><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/guide/testing/code-coverage" class="_attribution-link">https://angular.dev/guide/testing/code-coverage</a>
  </p>
</div>
