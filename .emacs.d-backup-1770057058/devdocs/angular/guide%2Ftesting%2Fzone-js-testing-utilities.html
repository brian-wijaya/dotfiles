<h1 tabindex="-1">Zone.js Testing Utilities</h1> <header class="docs-header"> <docs-breadcrumb ng-version="21.0.3" _nghost-ng-c3945279308 ngh="8"></docs-breadcrumb>   </header> <p>This guide describes testing utilities primarily used for managing and controlling async tasks in unit tests. These utilities are essentially the Zone.js-specific mock clock utilities, particularly relevant for controlling the flow of asynchronous operations within tests.</p> <p>For general Angular testing utilities, including <a href="../../api/core/testing/testbed"><code>TestBed</code></a> and <a href="../../api/core/testing/componentfixture"><code>ComponentFixture</code></a>, see the <a href="utility-apis">Testing Utility APIs</a> guide.</p> <p>Here's a summary of Zone.js-specific functions:</p> <div class="docs-table docs-scroll-track-transparent"> <table> <thead> <tr> <th align="left">Function</th> <th align="left">Details</th> </tr> </thead> <tbody> <tr> <td align="left"><a href="../../api/core/testing/waitforasync"><code>waitForAsync</code></a></td> <td align="left">Tracks async tasks and completes the tests only once there are no longer any micro or macrotasks remaining in the test zone. See <a href="components-scenarios#waitForAsync">waitForAsync</a>.</td> </tr> <tr> <td align="left"><a href="../../api/core/testing/fakeasync"><code>fakeAsync</code></a></td> <td align="left">Runs the body of a test (<code>it</code>) within a special <em>fakeAsync test zone</em>, enabling a linear control flow coding style. See <a href="components-scenarios#fake-async">fakeAsync</a>.</td> </tr> <tr> <td align="left"><a href="../../api/core/testing/tick"><code>tick</code></a></td> <td align="left">Simulates the passage of time and the completion of pending asynchronous activities by flushing both <em>timer</em> and <em>micro-task</em> queues within the <em>fakeAsync test zone</em>. The curious, dedicated reader might enjoy this lengthy blog post, <a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules" target="_blank">"<em>Tasks, microtasks, queues and schedules</em>"</a>. Accepts an optional argument that moves the virtual clock forward by the specified number of milliseconds, clearing asynchronous activities scheduled within that timeframe. See <a href="components-scenarios#tick">tick</a>.</td> </tr> <tr> <td align="left"><a href="../../api/core/testing/discardperiodictasks"><code>discardPeriodicTasks</code></a></td> <td align="left">Discards any periodic tasks (e.g. <code>setInterval</code>) that were created inside the <a href="../../api/core/testing/fakeasync"><code>fakeAsync</code></a> Zone.</td> </tr> <tr> <td align="left"><a href="../../api/core/testing/flushmicrotasks"><code>flushMicrotasks</code></a></td> <td align="left">When a <a href="../../api/core/testing/fakeasync"><code>fakeAsync()</code></a> test ends with pending <em>micro-tasks</em> such as unresolved promises, the test fails with a clear error message. <br> In general, a test should wait for micro-tasks to finish. When pending microtasks are expected, call <a href="../../api/core/testing/flushmicrotasks"><code>flushMicrotasks</code></a> to flush the <em>micro-task</em> queue and avoid the error.</td> </tr> </tbody> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/guide/testing/zone-js-testing-utilities" class="_attribution-link">https://angular.dev/guide/testing/zone-js-testing-utilities</a>
  </p>
</div>
