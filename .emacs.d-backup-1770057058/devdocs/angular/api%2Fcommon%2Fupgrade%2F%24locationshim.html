<h1>$locationShim</h1>
<router-outlet _ngcontent-ng-c1178817259></router-outlet><adev-main ngh="7"><router-outlet></router-outlet><adev-reference-page _nghost-ng-c972174807 ngh="6"><main _ngcontent-ng-c972174807 docsviewer class="docs-with-TOC" ngh="0"><div class="docs-api">
<header class="docs-reference-header"><section class="docs-reference-description"><p>Location service that provides a drop-in replacement for the $location service provided in AngularJS.</p></section><nav class="docs-pill-row"><a class="docs-pill" href="../../../guide/upgrade#using-the-unified-angular-location-service">Using the Angular Unified Location Service</a></nav></header><div class="docs-reference-section docs-reference-api-section">
<h2 id="api" class="docs-reference-section-heading">API</h2>
<pre data-language="ts">class $locationShim {
  constructor($injector: any, location: Location, platformLocation: PlatformLocation, urlCodec: UrlCodec, locationStrategy: LocationStrategy): $locationShim;
  onChange(fn: (url: string, state: unknown, oldUrl: string, oldState: unknown) =&gt; void, err?: (e: Error) =&gt; void): void;
  $$parse(url: string): void;
  $$parseLinkUrl(url: string, relHref?: string | null | undefined): boolean;
  absUrl(): string;
  url(): string;
  url(url: string): this;
  protocol(): string;
  host(): string;
  port(): number | null;
  path(): string;
  path(path: string | number | null): this;
  search(): { [key: string]: unknown; };
  search(search: string | number | { [key: string]: unknown; }): this;
  search(search: string | number | { [key: string]: unknown; }, paramValue: string | number | boolean | string[] | null | undefined): this;
  hash(): string;
  hash(hash: string | number | null): this;
  replace(): this;
  state(): unknown;
  state(state: unknown): this;
}</pre>
</div>
<div class="docs-reference-members"><div class="docs-reference-members">
<div id="constructor" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>constructor</h3>
<code><a href="$locationshim">$locationShim</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">$injector</span><code>any</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">location</span><code>Location</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">platformLocation</span><code>PlatformLocation</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">urlCodec</span><code><a href="urlcodec">UrlCodec</a></code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">locationStrategy</span><code>LocationStrategy</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code><a href="$locationshim">$locationShim</a></code>
</div>
</div></div>
</div>
<div id="onChange" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>onChange</h3>
<code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Registers listeners for URL changes. This API is used to catch updates performed by the AngularJS framework. These changes are a subset of the <code>$locationChangeStart</code> and <code>$locationChangeSuccess</code> events which fire when AngularJS updates its internally-referenced version of the browser URL.</p> <p>It's possible for <code>$locationChange</code> events to happen, but for the browser URL (window.location) to remain unchanged. This <code>onChange</code> callback will fire only when AngularJS actually updates the browser URL (window.location).</p>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">fn</span><code>(url: string, state: unknown, oldUrl: string, oldState: unknown) =&gt; void</code><div class="docs-parameter-description"><p>The callback function that is triggered for the listener when the URL changes.</p></div>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">err</span><code>(e: Error) =&gt; void</code><div class="docs-parameter-description"><p>The callback function that is triggered when an error occurs.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>void</code>
</div>
</div></div>
</div>
<div id="$$parse" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>$$parse</h3>
<code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Parses the provided URL, and sets the current URL to the parsed result.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p>The URL string.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>void</code>
</div>
</div></div>
</div>
<div id="$$parseLinkUrl" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>$$parseLinkUrl</h3>
<code>boolean</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Parses the provided URL and its relative URL.</p></div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p>The full URL string.</p></div>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">relHref</span><code>string | null | undefined</code><div class="docs-parameter-description"><p>A URL string relative to the full URL string.</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>boolean</code>
</div>
</div></div>
</div>
<div id="absUrl" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>absUrl</h3>
<code>string</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the full URL representation with all segments encoded according to rules specified in <a href="https://tools.ietf.org/html/rfc3986" target="_blank">RFC 3986</a>.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let absUrl = $location.absUrl();
// =&gt; "http://example.com/#/some/path?foo=bar&amp;baz=xoxo"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div></div>
</div>
<div id="url" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>url</h3>
<span>2 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the current URL, or sets a new URL. When setting a URL, changes the path, search, and hash, and returns a reference to its own instance.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let url = $location.url();
// =&gt; "/some/path?foo=bar&amp;baz=xoxo"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
</div>
</div>
<div id="protocol" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>protocol</h3>
<code>string</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the protocol of the current URL.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let protocol = $location.protocol();
// =&gt; "http"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div></div>
</div>
<div id="host" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>host</h3>
<code>string</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the protocol of the current URL.</p> <p>In contrast to the non-AngularJS version <code>location.host</code> which returns <code>hostname:port</code>, this returns the <code>hostname</code> portion only.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let host = $location.host();
// =&gt; "example.com"

// given URL http://user:password@example.com:8080/#/some/path?foo=bar&amp;baz=xoxo
host = $location.host();
// =&gt; "example.com"
host = location.host;
// =&gt; "example.com:8080"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div></div>
</div>
<div id="port" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>port</h3>
<code>number | null</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the port of the current URL.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let port = $location.port();
// =&gt; 80</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>number | null</code>
</div>
</div></div>
</div>
<div id="path" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>path</h3>
<span>2 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the path of the current URL, or changes the path and returns a reference to its own instance.</p> <p>Paths should always begin with forward slash (/). This method adds the forward slash if it is missing.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let path = $location.path();
// =&gt; "/some/path"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">path</span><code>string | number | null</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
</div>
</div>
<div id="search" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>search</h3>
<span>3 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves a map of the search parameters of the current URL, or changes a search part and returns a reference to its own instance.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo
let searchObject = $location.search();
// =&gt; {foo: 'bar', baz: 'xoxo'}

// set foo to 'yipee'
$location.search('foo', 'yipee');
// $location.search() =&gt; {foo: 'yipee', baz: 'xoxo'}</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>{ [key: string]: unknown; }</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">search</span><code>string | number | { [key: string]: unknown; }</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">search</span><code>string | number | { [key: string]: unknown; }</code>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">paramValue</span><code>string | number | boolean | string[] | null | undefined</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
</div>
</div>
<div id="hash" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>hash</h3>
<span>2 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the current hash fragment, or changes the hash fragment and returns a reference to its own instance.</p> <pre data-language="ts">// given URL http://example.com/#/some/path?foo=bar&amp;baz=xoxo#hashValue
let hash = $location.hash();
// =&gt; "hashValue"</pre>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>string</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">hash</span><code>string | number | null</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
</div>
</div>
<div id="replace" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>replace</h3>
<code>this</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition"><p>Changes to <code>$location</code> during the current <code>$digest</code> will replace the current history record, instead of adding a new one.</p></div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div></div>
</div>
<div id="state" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>state</h3>
<span>2 overloads</span></header><div class="docs-reference-card-body">
<div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>Retrieves the history state object when called without any parameter.</p> <p>Change the history state object when called with one parameter and return <code>$location</code>. The state object is later passed to <code>pushState</code> or <code>replaceState</code>.</p> <p>This method is supported only in HTML5 mode and only in browsers supporting the HTML5 History API methods such as <code>pushState</code> and <code>replaceState</code>. If you need to support older browsers (like Android &lt; 4.0), don't use this method.</p>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>unknown</code>
</div>
</div>
<div class="docs-reference-card-item ">

<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">state</span><code>unknown</code>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>this</code>
</div>
</div>
</div>
</div>
</div></div>
</div></main></adev-reference-page></adev-main><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/api/common/upgrade/$locationShim" class="_attribution-link">https://angular.dev/api/common/upgrade/$locationShim</a>
  </p>
</div>
