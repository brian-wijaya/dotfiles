<h1 tabindex="-1">DI in action</h1> <header class="docs-header"> <docs-breadcrumb ng-version="21.0.3" _nghost-ng-c3945279308 ngh="8"></docs-breadcrumb>   </header> <p>This guide explores additional features of dependency injection in Angular.</p> 
<div class="docs-alert docs-alert-note"> <p><strong>NOTE:</strong> For comprehensive coverage of InjectionToken and custom providers, see the <a href="defining-dependency-providers#injection-tokens">defining dependency providers guide</a>.</p> </div>  <h2 id="inject-the-components-dom-element"> Inject the component's DOM element </h2> <p>Although developers strive to avoid it, some visual effects and third-party tools require direct DOM access. As a result, you might need to access a component's DOM element.</p> <p>Angular exposes the underlying element of a <a href="../../api/core/component"><code>@Component</code></a> or <a href="../../api/core/directive"><code>@Directive</code></a> via injection using the <a href="../../api/core/elementref"><code>ElementRef</code></a> injection token:</p> <pre data-language="ts">import {Directive, ElementRef, inject} from '@angular/core';

@Directive({
  selector: '[appHighlight]',
})
export class HighlightDirective {
  private element = inject(ElementRef);

  update() {
    this.element.nativeElement.style.color = 'red';
  }
}</pre> <h2 id="resolve-circular-dependencies-with-a-forward-reference"> Resolve circular dependencies with a forward reference </h2> <p>The order of class declaration matters in TypeScript. You can't refer directly to a class until it's been defined.</p> <p>This isn't usually a problem, especially if you adhere to the recommended <em>one class per file</em> rule. But sometimes circular references are unavoidable. For example, when class 'A' refers to class 'B' and 'B' refers to 'A', one of them has to be defined first.</p> <p>The Angular <a href="../../api/core/forwardref"><code>forwardRef()</code></a> function creates an <em>indirect</em> reference that Angular can resolve later.</p> <p>You face a similar problem when a class makes <em>a reference to itself</em>. For example, in its <code>providers</code> array. The <code>providers</code> array is a property of the <a href="../../api/core/component"><code>@Component()</code></a> decorator function, which must appear before the class definition. You can break such circular references by using <a href="../../api/core/forwardref"><code>forwardRef</code></a>.</p> <pre data-language="ts">providers: [
  {
    provide: PARENT_MENU_ITEM,
    useExisting: forwardRef(() =&gt; MenuItem),
  },
],</pre><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/guide/di/di-in-action" class="_attribution-link">https://angular.dev/guide/di/di-in-action</a>
  </p>
</div>
