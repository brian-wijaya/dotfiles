<h1>downgradeInjectable</h1>
<router-outlet _ngcontent-ng-c1178817259></router-outlet><adev-main ngh="7"><router-outlet></router-outlet><adev-reference-page _nghost-ng-c972174807 ngh="6"><main _ngcontent-ng-c972174807 docsviewer class="docs-with-TOC" ngh="0"><div class="docs-api">
<header class="docs-reference-header"><section class="docs-reference-description"><p>A helper function to allow an Angular service to be accessible from AngularJS.</p></section></header><div class="docs-reference-section docs-reference-api-section">
<h2 id="api" class="docs-reference-section-heading">API</h2>
<pre data-language="ts">function downgradeInjectable(token: any, downgradedModule?: string): Function;</pre>
</div>
<div class="docs-reference-members"><div id="downgradeInjectable_0" class="docs-reference-member-card">
<header class="docs-reference-card-header"><h3>downgradeInjectable</h3>
<div><code>Function</code></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item ">
<div class="docs-function-definition">
<p>A helper function to allow an Angular service to be accessible from AngularJS.</p> <p><em>Part of the <a href="../../../api?query=upgrade%2Fstatic">upgrade/static</a> library for hybrid upgrade apps that support AOT compilation</em></p> <p>This helper function returns a factory function that provides access to the Angular service identified by the <code>token</code> parameter.</p>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">token</span><code>any</code><div class="docs-parameter-description"><p>an <code>InjectionToken</code> that identifies a service provided from Angular.</p></div>
</div>
<div class="docs-param-group">
<span class="docs-param-keyword">@param</span><span class="docs-param-name">downgradedModule</span><code>string</code><div class="docs-parameter-description"><p>the name of the downgraded module (if any) that the injectable "belongs to", as returned by a call to <a href="downgrademodule"><code>downgradeModule()</code></a>. It is the module, whose injector will be used for instantiating the injectable.<br> (This option is only necessary when using <a href="downgrademodule"><code>downgradeModule()</code></a> to downgrade more than one Angular module.)</p></div>
</div>
<div class="docs-return-type">
<span class="docs-param-keyword">@returns</span><code>Function</code>
</div>
<div class="docs-usage-notes">
<span class="docs-usage-notes-heading">Usage notes</span><div> <h3 id="examples"> Examples </h3> <p>First ensure that the service to be downgraded is provided in an <a href="../../core/ngmodule"><code>NgModule</code></a> that will be part of the upgrade application. For example, let's assume we have defined <code>HeroesService</code></p> <p>{@example upgrade/static/ts/full/module.ts region="ng2-heroes-service"}</p> <p>and that we have included this in our upgrade app <a href="../../core/ngmodule"><code>NgModule</code></a></p> <p>{@example upgrade/static/ts/full/module.ts region="ng2-module"}</p> <p>Now we can register the <a href="downgradeinjectable"><code>downgradeInjectable</code></a> factory function for the service on an AngularJS module.</p> <p>{@example upgrade/static/ts/full/module.ts region="downgrade-ng2-heroes-service"}</p> <p>Inside an AngularJS component's controller we can get hold of the downgraded service via the name we gave when downgrading.</p> <p>{@example upgrade/static/ts/full/module.ts region="example-app"}</p> <div class="docs-alert docs-alert-important"> <p> When using <a href="downgrademodule"><code>downgradeModule()</code></a>, downgraded injectables will not be available until the Angular module that provides them is instantiated. In order to be safe, you need to ensure that the downgraded injectables are not used anywhere <em>outside</em> the part of the app where it is guaranteed that their module has been instantiated.</p> <p> For example, it is <em>OK</em> to use a downgraded service in an upgraded component that is only used from a downgraded Angular component provided by the same Angular module as the injectable, but it is <em>not OK</em> to use it in an AngularJS component that may be used independently of Angular or use it in a downgraded Angular component from a different module.</p> </div>
</div>
</div>
</div></div>
</div></div>
<div class="docs-reference-section">
<h2 id="description" class="docs-reference-section-heading">Description</h2>
<div>
<p>A helper function to allow an Angular service to be accessible from AngularJS.</p> <p><em>Part of the <a href="../../../api?query=upgrade%2Fstatic">upgrade/static</a> library for hybrid upgrade apps that support AOT compilation</em></p> <p>This helper function returns a factory function that provides access to the Angular service identified by the <code>token</code> parameter.</p>
</div>
</div>
<div class="docs-reference-section">
<h2 id="usage-notes" class="docs-reference-section-heading">Usage Notes</h2>
<div> <h3 id="examples"> Examples </h3> <p>First ensure that the service to be downgraded is provided in an <a href="../../core/ngmodule"><code>NgModule</code></a> that will be part of the upgrade application. For example, let's assume we have defined <code>HeroesService</code></p> <pre data-language="ts">// This Angular service will be "downgraded" to be used in AngularJS
@Injectable()
export class HeroesService {
  heroes: Hero[] = [
    {name: 'superman', description: 'The man of steel'},
    {name: 'wonder woman', description: 'Princess of the Amazons'},
    {name: 'thor', description: 'The hammer-wielding god'},
  ];

  constructor(textFormatter: TextFormatter) {
    // Change all the hero names to title case, using the "upgraded" AngularJS service
    this.heroes.forEach((hero: Hero) =&gt; (hero.name = textFormatter.titleCase(hero.name)));
  }

  addHero() {
    this.heroes = this.heroes.concat([
      {name: 'Kamala Khan', description: 'Epic shape-shifting healer'},
    ]);
  }

  removeHero(hero: Hero) {
    this.heroes = this.heroes.filter((item: Hero) =&gt; item !== hero);
  }
}</pre>
<p>and that we have included this in our upgrade app <a href="../../core/ngmodule"><code>NgModule</code></a></p> <pre data-language="ts">// This NgModule represents the Angular pieces of the application
@NgModule({
  declarations: [Ng2HeroesComponent, Ng1HeroComponentWrapper],
  providers: [
    HeroesService,
    // Register an Angular provider whose value is the "upgraded" AngularJS service
    {provide: TextFormatter, useFactory: (i: any) =&gt; i.get('textFormatter'), deps: ['$injector']},
  ],
  // We must import `UpgradeModule` to get access to the AngularJS core services
  imports: [BrowserModule, UpgradeModule],
})
export class Ng2AppModule {
}</pre>
<p>Now we can register the <a href="downgradeinjectable"><code>downgradeInjectable</code></a> factory function for the service on an AngularJS module.</p> <pre data-language="ts">// Register an AngularJS service, whose value is the "downgraded" Angular injectable.
ng1AppModule.factory('heroesService', downgradeInjectable(HeroesService) as any);</pre>
<p>Inside an AngularJS component's controller we can get hold of the downgraded service via the name we gave when downgrading.</p> <pre data-language="ts">// This is our top level application component
ng1AppModule.component('exampleApp', {
  // We inject the "downgraded" HeroesService into this AngularJS component
  // (We don't need the `HeroesService` type for AngularJS DI - it just helps with TypeScript
  // compilation)
  controller: [
    'heroesService',
    function (heroesService: HeroesService) {
      this.heroesService = heroesService;
    },
  ],
  // This template makes use of the downgraded `ng2-heroes` component
  // Note that because its element is compiled by AngularJS we must use kebab-case attributes
  // for inputs and outputs
  template: `&lt;link rel="stylesheet" href="./styles.css"&gt;
          &lt;ng2-heroes [heroes]="$ctrl.heroesService.heroes" (add-hero)="$ctrl.heroesService.addHero()" (remove-hero)="$ctrl.heroesService.removeHero($event)"&gt;
            &lt;h1&gt;Heroes&lt;/h1&gt;
            &lt;p class="extra"&gt;There are {{ $ctrl.heroesService.heroes.length }} heroes.&lt;/p&gt;
          &lt;/ng2-heroes&gt;`,
});</pre>
<div class="docs-alert docs-alert-important"> <p> When using <a href="downgrademodule"><code>downgradeModule()</code></a>, downgraded injectables will not be available until the Angular module that provides them is instantiated. In order to be safe, you need to ensure that the downgraded injectables are not used anywhere <em>outside</em> the part of the app where it is guaranteed that their module has been instantiated.</p> <p> For example, it is <em>OK</em> to use a downgraded service in an upgraded component that is only used from a downgraded Angular component provided by the same Angular module as the injectable, but it is <em>not OK</em> to use it in an AngularJS component that may be used independently of Angular or use it in a downgraded Angular component from a different module.</p> </div>
</div>
</div>
</div></main></adev-reference-page></adev-main><div class="_attribution">
  <p class="_attribution-p">
    Super-powered by Google &copy;2010&ndash;2025.<br />Code licensed under an MIT-style License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://angular.dev/api/upgrade/static/downgradeInjectable" class="_attribution-link">https://angular.dev/api/upgrade/static/downgradeInjectable</a>
  </p>
</div>
