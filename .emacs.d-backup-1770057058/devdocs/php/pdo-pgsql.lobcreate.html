<div id="pdo-pgsql.lobcreate" class="refentry"> <div class="refnamediv"> <h1 class="refname">Pdo\Pgsql::lobCreate</h1> <p class="verinfo">(PHP 8 &gt;= 8.4.0)</p>
<p class="refpurpose"><span class="refname">Pdo\Pgsql::lobCreate</span> â€” <span class="dc-title">Creates a new large object</span></p> </div> <div class="refsect1 description" id="refsect1-pdo-pgsql.lobcreate-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public Pdo\Pgsql::lobCreate(): string|false</pre> <p class="simpara"> <span class="methodname"><strong>Pdo\Pgsql::lobCreate()</strong></span> creates a large object and returns the OID which refers to it. It can be opened to read or write data with <span class="methodname"><a href="pdo-pgsql.lobopen" class="methodname">Pdo\Pgsql::lobOpen()</a></span>. </p> <p class="simpara"> The OID can be stored in columns of type OID and be used to reference the large object, without causing the row to grow arbitrarily large. The large object will continue to live in the database until it is removed by calling <span class="methodname"><a href="pdo-pgsql.lobunlink" class="methodname">Pdo\Pgsql::lobUnlink()</a></span>. </p> <p class="simpara"> Large objects are cumbersome to use. Indeed, it is required that <span class="methodname"><a href="pdo-pgsql.lobunlink" class="methodname">Pdo\Pgsql::lobUnlink()</a></span> is called prior to deleting the last row referencing the OID in the entire database; otherwise, unreferenced large objects will remain on the server indefinitely. Moreover, large objects have no access controls. An alternative is the bytea column type, which can be up to 1GB in size, and this column type transparently manages the storage for optimal row size. </p> <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara"> This function, and all manipulations of the large object, must be called and carried out within a transaction. </span> </p></blockquote> </div> <div class="refsect1 parameters" id="refsect1-pdo-pgsql.lobcreate-parameters"> <h3 class="title">Parameters</h3> <p class="para">This function has no parameters.</p> </div> <div class="refsect1 returnvalues" id="refsect1-pdo-pgsql.lobcreate-returnvalues"> <h3 class="title">Return Values</h3> <p class="simpara"> Returns the OID of the newly created large object on success, or <strong><code><a href="https://www.php.net/manual/en/reserved.constants.php#constant.false">false</a></code></strong> on failure. </p> </div> <div class="refsect1 examples" id="refsect1-pdo-pgsql.lobcreate-examples"> <h3 class="title">Examples</h3> <div class="example" id="pdo-pgsql.lobcreate.example.basic"> <p><strong>Example #1 <span class="methodname"><strong>Pdo\Pgsql::lobCreate()</strong></span> example</strong></p> <div class="example-contents"><p> This example creates a new large object and copies the contents of a file into it. The OID is then stored into a table. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$db = new Pdo\Pgsql('pgsql:dbname=test host=localhost', $user, $pass);
$db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db-&gt;beginTransaction();
$oid = $db-&gt;lobCreate();
$stream = $db-&gt;lobOpen($oid, 'w');
$local = fopen($filename, 'rb');
stream_copy_to_stream($local, $stream);
$local = null;
$stream = null;
$stmt = $db-&gt;prepare("INSERT INTO BLOBS (ident, oid) VALUES (?, ?)");
$stmt-&gt;execute([$some_id, $oid]);
$db-&gt;commit();
?&gt;</pre> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-pdo-pgsql.lobcreate-seealso"> <h3 class="title">See Also</h3> <ul class="simplelist"> <li><span class="methodname"><a href="pdo-pgsql.lobopen" class="methodname" rel="rdfs-seeAlso">Pdo\Pgsql::lobOpen()</a> - Opens an existing large object stream</span></li> <li><span class="methodname"><a href="pdo-pgsql.lobunlink" class="methodname" rel="rdfs-seeAlso">Pdo\Pgsql::lobUnlink()</a> - Deletes the large object</span></li> <li><span class="function"><a href="function.pg-lo-create" class="function" rel="rdfs-seeAlso">pg_lo_create()</a> - Create a large object</span></li> <li><span class="function"><a href="function.pg-lo-open" class="function" rel="rdfs-seeAlso">pg_lo_open()</a> - Open a large object</span></li> </ul> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2025 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/pdo-pgsql.lobcreate.php" class="_attribution-link">https://www.php.net/manual/en/pdo-pgsql.lobcreate.php</a>
  </p>
</div>
