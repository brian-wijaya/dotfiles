<div id="domxpath.registerphpfunctionns" class="refentry"> <div class="refnamediv"> <h1 class="refname">DOMXPath::registerPhpFunctionNS</h1> <p class="verinfo">(PHP &gt;= 8.4.0)</p>
<p class="refpurpose"><span class="refname">DOMXPath::registerPhpFunctionNS</span> â€” <span class="dc-title">Register a PHP functions as namespaced XPath function</span></p> </div> <div class="refsect1 description" id="refsect1-domxpath.registerphpfunctionns-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public DOMXPath::registerPhpFunctionNS(string $namespaceURI, string $name, callable $callable): void</pre> <p class="simpara"> This method enables the ability to use a PHP function as a namespaced XPath function inside XPath expressions. </p> </div> <div class="refsect1 parameters" id="refsect1-domxpath.registerphpfunctionns-parameters"> <h3 class="title">Parameters</h3> <dl> <dt><code class="parameter">namespaceURI</code></dt> <dd> <span class="simpara"> The URI of the namespace. </span> </dd> <dt><code class="parameter">name</code></dt> <dd> <span class="simpara"> The local function name inside the namespace. </span> </dd> <dt><code class="parameter">callable</code></dt> <dd> <span class="simpara"> The PHP function to call when the XPath function gets called within the XPath expression. When a node list is passed as parameter to the callback, they are arrays containing the matched DOM nodes. </span> </dd> </dl> </div> <div class="refsect1 errors" id="domxpath.registerphpfunctions..errors"> <h3 class="title">Errors/Exceptions</h3> <ul class="itemizedlist"> <li class="listitem"> <span class="simpara"> Throws a <span class="exceptionname"><a href="class.valueerror" class="exceptionname">ValueError</a></span> if a callback name is not valid. </span> </li> <li class="listitem"> <span class="simpara"> Throws a <span class="exceptionname"><a href="class.valueerror" class="exceptionname">ValueError</a></span> if <code class="parameter">options</code> contains an invalid option. </span> </li> <li class="listitem"> <span class="simpara"> Throws a <span class="exceptionname"><a href="class.valueerror" class="exceptionname">ValueError</a></span> if <code class="parameter">overrideEncoding</code> is an unknown encoding. </span> </li> <li class="listitem"> <span class="simpara"> Throws a <span class="exceptionname"><a href="class.typeerror" class="exceptionname">TypeError</a></span> if a given callback is not callable. </span> </li> </ul> </div> <div class="refsect1 returnvalues" id="refsect1-domxpath.registerphpfunctionns-returnvalues"> <h3 class="title">Return Values</h3> <p class="simpara"> No value is returned. </p> </div> <div class="refsect1 examples" id="refsect1-domxpath.registerphpfunctionns-examples"> <h3 class="title">Examples</h3> <div class="example" id="example-1"> <p><strong>Example #1 Register a namespaced XPath function and call it from the XPath expression</strong></p> <div class="example-contents"> <pre class="annotation-interactive phpcode" data-language="php">&lt;?php

$xml = &lt;&lt;&lt;EOB
&lt;books&gt;
&lt;book&gt;
 &lt;title&gt;PHP Basics&lt;/title&gt;
 &lt;author&gt;Jim Smith&lt;/author&gt;
 &lt;author&gt;Jane Smith&lt;/author&gt;
&lt;/book&gt;
&lt;book&gt;
 &lt;title&gt;PHP Secrets&lt;/title&gt;
 &lt;author&gt;Jenny Smythe&lt;/author&gt;
&lt;/book&gt;
&lt;book&gt;
 &lt;title&gt;XML basics&lt;/title&gt;
 &lt;author&gt;Joe Black&lt;/author&gt;
&lt;/book&gt;
&lt;/books&gt;
EOB;

$doc = new DOMDocument();
$doc-&gt;loadXML($xml);

$xpath = new DOMXPath($doc);

// Register the my: namespace (required)
$xpath-&gt;registerNamespace("my", "urn:my.ns");

// Register PHP function
$xpath-&gt;registerPHPFunctionNS(
    'urn:my.ns',
    'substring',
    fn (array $arg1, int $start, int $length) =&gt; substr($arg1[0]-&gt;textContent, $start, $length)
);

// Call substr function on the book title
$nodes = $xpath-&gt;query('//book[my:substring(title, 0, 3) = "PHP"]');

echo "Found {$nodes-&gt;length} books starting with 'PHP':\n";
foreach ($nodes as $node) {
   $title  = $node-&gt;getElementsByTagName("title")-&gt;item(0)-&gt;nodeValue;
   $author = $node-&gt;getElementsByTagName("author")-&gt;item(0)-&gt;nodeValue;
   echo "$title by $author\n";
}

?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="annotation-interactive examplescode">
<pre class="examplescode">Found 2 books starting with 'PHP':
PHP Basics by Jim Smith
PHP Secrets by Jenny Smythe</pre> </div> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-domxpath.registerphpfunctionns-seealso"> <h3 class="title">See Also</h3> <ul class="simplelist"> <li><span class="methodname"><a href="domxpath.registernamespace" class="methodname" rel="rdfs-seeAlso">DOMXPath::registerNamespace()</a> - Registers the namespace with the DOMXPath object</span></li> <li><span class="methodname"><a href="domxpath.query" class="methodname" rel="rdfs-seeAlso">DOMXPath::query()</a> - Evaluates the given XPath expression</span></li> <li><span class="methodname"><a href="domxpath.evaluate" class="methodname" rel="rdfs-seeAlso">DOMXPath::evaluate()</a> - Evaluates the given XPath expression and returns a typed result if possible</span></li> <li><span class="methodname"><a href="xsltprocessor.registerphpfunctions" class="methodname" rel="rdfs-seeAlso">XSLTProcessor::registerPHPFunctions()</a> - Enables the ability to use PHP functions as XSLT functions</span></li> <li><span class="methodname"><a href="xsltprocessor.registerphpfunctionns" class="methodname" rel="rdfs-seeAlso">XSLTProcessor::registerPHPFunctionNS()</a> - Register a PHP function as namespaced XSLT function</span></li> </ul> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2025 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/domxpath.registerphpfunctionns.php" class="_attribution-link">https://www.php.net/manual/en/domxpath.registerphpfunctionns.php</a>
  </p>
</div>
