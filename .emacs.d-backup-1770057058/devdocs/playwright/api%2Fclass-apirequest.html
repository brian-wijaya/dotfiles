<header><h1>APIRequest</h1></header><p>Exposes API that can be used for the Web API testing. This class is used for creating <a title="APIRequestContext" href="class-apirequestcontext">APIRequestContext</a> instance which in turn can be used for sending web requests. An instance of this class can be obtained via <a href="class-playwright#playwright-request">playwright.request</a>. For more information see <a title="APIRequestContext" href="class-apirequestcontext">APIRequestContext</a>.</p>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="api-request-new-context">newContext<a href="#api-request-new-context" aria-label="Direct link to newContext" title="Direct link to newContext">​</a>
</h3>   <p>Creates new instances of <a title="APIRequestContext" href="class-apirequestcontext">APIRequestContext</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await apiRequest.newContext();
await apiRequest.newContext(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>baseURL</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Methods like <a href="class-apirequestcontext#api-request-context-get">apiRequestContext.get()</a> take the base URL into consideration by using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/URL" target="_blank" rel="noopener noreferrer"><code>URL()</code></a> constructor for building the corresponding URL. Examples:</p> <ul> <li>baseURL: <code>http://localhost:3000</code> and sending request to <code>/bar.html</code> results in <code>http://localhost:3000/bar.html</code>
</li> <li>baseURL: <code>http://localhost:3000/foo/</code> and sending request to <code>./bar.html</code> results in <code>http://localhost:3000/foo/bar.html</code>
</li> <li>baseURL: <code>http://localhost:3000/foo</code> (without trailing slash) and navigating to <code>./bar.html</code> results in <code>http://localhost:3000/bar.html</code>
</li> </ul> </li> <li> <p><code>clientCertificates</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; <em>(optional)</em> </p> <ul> <li> <p><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Exact origin that the certificate is valid for. Origin includes <code>https</code> protocol, a hostname and optionally a port.</p> </li> <li> <p><code>certPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the file with the certificate in PEM format.</p> </li> <li> <p><code>cert</code> <a href="https://nodejs.org/api/buffer.html#buffer_class_buffer" target="_blank" rel="noopener noreferrer" title="Buffer">Buffer</a> <em>(optional)</em></p> <p>Direct value of the certificate in PEM format.</p> </li> <li> <p><code>keyPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the file with the private key in PEM format.</p> </li> <li> <p><code>key</code> <a href="https://nodejs.org/api/buffer.html#buffer_class_buffer" target="_blank" rel="noopener noreferrer" title="Buffer">Buffer</a> <em>(optional)</em></p> <p>Direct value of the private key in PEM format.</p> </li> <li> <p><code>pfxPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the PFX or PKCS12 encoded private key and certificate chain.</p> </li> <li> <p><code>pfx</code> <a href="https://nodejs.org/api/buffer.html#buffer_class_buffer" target="_blank" rel="noopener noreferrer" title="Buffer">Buffer</a> <em>(optional)</em></p> <p>Direct value of the PFX or PKCS12 encoded private key and certificate chain.</p> </li> <li> <p><code>passphrase</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Passphrase for the private key (PEM or PFX).</p> </li> </ul> <p>TLS Client Authentication allows the server to request a client certificate and verify it.</p> <p><strong>Details</strong></p> <p>An array of client certificates to be used. Each certificate object must have either both <code>certPath</code> and <code>keyPath</code>, a single <code>pfxPath</code>, or their corresponding direct value equivalents (<code>cert</code> and <code>key</code>, or <code>pfx</code>). Optionally, <code>passphrase</code> property should be provided if the certificate is encrypted. The <code>origin</code> property should be provided with an exact match to the request origin that the certificate is valid for.</p> <p>Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an <code>origin</code> that does not match any of the domains you plan to visit.</p> <blockquote>
<div>
<span><svg viewbox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div>
<div><p>When using WebKit on macOS, accessing <code>localhost</code> will not pick up client certificates. You can make it work by replacing <code>localhost</code> with <code>local.playwright</code>.</p></div>
</blockquote> </li> <li> <p><code>extraHTTPHeaders</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt; <em>(optional)</em></p> <p>An object containing additional HTTP headers to be sent with every request. Defaults to none.</p> </li> <li> <p><code>failOnStatusCode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em> </p> <p>Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.</p> </li> <li> <p><code>httpCredentials</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>username</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>password</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Restrain sending http credentials on specific origin (scheme://host:port).</p> </li> <li> <p><code>send</code> "unauthorized" | "always" <em>(optional)</em></p> <p>This option only applies to the requests sent from corresponding <a title="APIRequestContext" href="class-apirequestcontext">APIRequestContext</a> and does not affect requests sent from the browser. <code>'always'</code> - <code>Authorization</code> header with basic authentication credentials will be sent with the each API request. <code>'unauthorized</code> - the credentials are only sent when 401 (Unauthorized) response with <code>WWW-Authenticate</code> header is received. Defaults to <code>'unauthorized'</code>.</p> </li> </ul> <p>Credentials for <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noopener noreferrer">HTTP authentication</a>. If no origin is specified, the username and password are sent to any servers upon unauthorized responses.</p> </li> <li> <p><code>ignoreHTTPSErrors</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Whether to ignore HTTPS errors when sending network requests. Defaults to <code>false</code>.</p> </li> <li> <p><code>maxRedirects</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em> </p> <p>Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to <code>20</code>. Pass <code>0</code> to not follow redirects. This can be overwritten for each request individually.</p> </li> <li> <p><code>proxy</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>server</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example <code>http://myproxy.com:3128</code> or <code>socks5://myproxy.com:3128</code>. Short form <code>myproxy.com:3128</code> is considered an HTTP proxy.</p> </li> <li> <p><code>bypass</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Optional comma-separated domains to bypass proxy, for example <code>".com, chromium.org, .domain.com"</code>.</p> </li> <li> <p><code>username</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Optional username to use if HTTP proxy requires authentication.</p> </li> <li> <p><code>password</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Optional password to use if HTTP proxy requires authentication.</p> </li> </ul> <p>Network proxy settings.</p> </li> <li> <p><code>storageState</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>cookies</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;</p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>domain</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>expires</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Unix time in seconds.</p> </li> <li> <p><code>httpOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>secure</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>sameSite</code> "Strict" | "Lax" | "None"</p> </li> </ul> </li> <li> <p><code>origins</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;</p> <ul> <li> <p><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>localStorage</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;</p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> </ul> </li> </ul> </li> </ul> <p>Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via <a href="class-browsercontext#browser-context-storage-state">browserContext.storageState()</a> or <a href="class-apirequestcontext#api-request-context-storage-state">apiRequestContext.storageState()</a>. Either a path to the file with saved storage, or the value returned by one of <a href="class-browsercontext#browser-context-storage-state">browserContext.storageState()</a> or <a href="class-apirequestcontext#api-request-context-storage-state">apiRequestContext.storageState()</a> methods.</p> </li> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Maximum time in milliseconds to wait for the response. Defaults to <code>30000</code> (30 seconds). Pass <code>0</code> to disable timeout.</p> </li> <li> <p><code>userAgent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Specific user agent to use in this context.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="APIRequestContext" href="class-apirequestcontext">APIRequestContext</a>&gt;
</li> </ul><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2025 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-apirequest" class="_attribution-link">https://playwright.dev/docs/api/class-apirequest</a>
  </p>
</div>
