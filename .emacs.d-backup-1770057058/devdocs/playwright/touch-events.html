<header><h1>Touch events (legacy)</h1></header><h2 id="introduction">Introduction<a href="#introduction" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a>
</h2> <p>Web applications that handle legacy <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touch_events" target="_blank" rel="noopener noreferrer">touch events</a> to respond to gestures like swipe, pinch, and tap can be tested by manually dispatching <a href="https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent" target="_blank" rel="noopener noreferrer">TouchEvent</a>s to the page. The examples below demonstrate how to use <a href="api/class-locator#locator-dispatch-event">locator.dispatchEvent()</a> and pass <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touch" target="_blank" rel="noopener noreferrer">Touch</a> points as arguments.</p> <p>Note that <a href="api/class-locator#locator-dispatch-event">locator.dispatchEvent()</a> does not set <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted" target="_blank" rel="noopener noreferrer"><code>Event.isTrusted</code></a> property. If your web page relies on it, make sure to disable <code>isTrusted</code> check during the test.</p> <h3 id="emulating-pan-gesture">Emulating pan gesture<a href="#emulating-pan-gesture" aria-label="Direct link to Emulating pan gesture" title="Direct link to Emulating pan gesture">​</a>
</h3> <p>In the example below, we emulate pan gesture that is expected to move the map. The app under test only uses <code>clientX/clientY</code> coordinates of the touch point, so we initialize just that. In a more complex scenario you may need to also set <code>pageX/pageY/screenX/screenY</code>, if your app needs them.</p> <pre tabindex="0" data-language="javascript">import { test, expect, devices, type Locator } from '@playwright/test';

test.use({ ...devices['Pixel 7'] });

async function pan(locator: Locator, deltaX?: number, deltaY?: number, steps?: number) {
  const { centerX, centerY } = await locator.evaluate((target: HTMLElement) =&gt; {
    const bounds = target.getBoundingClientRect();
    const centerX = bounds.left + bounds.width / 2;
    const centerY = bounds.top + bounds.height / 2;
    return { centerX, centerY };
  });

  // Providing only clientX and clientY as the app only cares about those.
  const touches = [{
    identifier: 0,
    clientX: centerX,
    clientY: centerY,
  }];
  await locator.dispatchEvent('touchstart',
      { touches, changedTouches: touches, targetTouches: touches });

  steps = steps ?? 5;
  deltaX = deltaX ?? 0;
  deltaY = deltaY ?? 0;
  for (let i = 1; i &lt;= steps; i++) {
    const touches = [{
      identifier: 0,
      clientX: centerX + deltaX * i / steps,
      clientY: centerY + deltaY * i / steps,
    }];
    await locator.dispatchEvent('touchmove',
        { touches, changedTouches: touches, targetTouches: touches });
  }

  await locator.dispatchEvent('touchend');
}

test(`pan gesture to move the map`, async ({ page }) =&gt; {
  await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z',
      { waitUntil: 'commit' });
  await page.getByRole('button', { name: 'Keep using web' }).click();
  await expect(page.getByRole('button', { name: 'Keep using web' })).not.toBeVisible();
  // Get the map element.
  const met = page.locator('[data-test-id="met"]');
  for (let i = 0; i &lt; 5; i++)
    await pan(met, 200, 100);
  // Ensure the map has been moved.
  await expect(met).toHaveScreenshot();
});</pre> <h3 id="emulating-pinch-gesture">Emulating pinch gesture<a href="#emulating-pinch-gesture" aria-label="Direct link to Emulating pinch gesture" title="Direct link to Emulating pinch gesture">​</a>
</h3> <p>In the example below, we emulate pinch gesture, i.e. two touch points moving closer to each other. It is expected to zoom out the map. The app under test only uses <code>clientX/clientY</code> coordinates of touch points, so we initialize just that. In a more complex scenario you may need to also set <code>pageX/pageY/screenX/screenY</code>, if your app needs them.</p> <pre tabindex="0" data-language="javascript">import { test, expect, devices, type Locator } from '@playwright/test';

test.use({ ...devices['Pixel 7'] });

async function pinch(locator: Locator,
  arg: { deltaX?: number, deltaY?: number, steps?: number, direction?: 'in' | 'out' }) {
  const { centerX, centerY } = await locator.evaluate((target: HTMLElement) =&gt; {
    const bounds = target.getBoundingClientRect();
    const centerX = bounds.left + bounds.width / 2;
    const centerY = bounds.top + bounds.height / 2;
    return { centerX, centerY };
  });

  const deltaX = arg.deltaX ?? 50;
  const steps = arg.steps ?? 5;
  const stepDeltaX = deltaX / (steps + 1);

  // Two touch points equally distant from the center of the element.
  const touches = [
    {
      identifier: 0,
      clientX: centerX - (arg.direction === 'in' ? deltaX : stepDeltaX),
      clientY: centerY,
    },
    {
      identifier: 1,
      clientX: centerX + (arg.direction === 'in' ? deltaX : stepDeltaX),
      clientY: centerY,
    },
  ];
  await locator.dispatchEvent('touchstart',
      { touches, changedTouches: touches, targetTouches: touches });

  // Move the touch points towards or away from each other.
  for (let i = 1; i &lt;= steps; i++) {
    const offset = (arg.direction === 'in' ? (deltaX - i * stepDeltaX) : (stepDeltaX * (i + 1)));
    const touches = [
      {
        identifier: 0,
        clientX: centerX - offset,
        clientY: centerY,
      },
      {
        identifier: 0,
        clientX: centerX + offset,
        clientY: centerY,
      },
    ];
    await locator.dispatchEvent('touchmove',
        { touches, changedTouches: touches, targetTouches: touches });
  }

  await locator.dispatchEvent('touchend', { touches: [], changedTouches: [], targetTouches: [] });
}

test(`pinch in gesture to zoom out the map`, async ({ page }) =&gt; {
  await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z',
      { waitUntil: 'commit' });
  await page.getByRole('button', { name: 'Keep using web' }).click();
  await expect(page.getByRole('button', { name: 'Keep using web' })).not.toBeVisible();
  // Get the map element.
  const met = page.locator('[data-test-id="met"]');
  for (let i = 0; i &lt; 5; i++)
    await pinch(met, { deltaX: 40, direction: 'in' });
  // Ensure the map has been zoomed out.
  await expect(met).toHaveScreenshot();
});</pre><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2025 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/touch-events" class="_attribution-link">https://playwright.dev/docs/touch-events</a>
  </p>
</div>
