<h1 id="header">bun patch</h1>
<div data-page-title="bun patch" data-page-href="/pm/cli/patch" id="content">
<span data-as="p"><code>bun patch</code> lets you persistently patch node_modules in a maintainable, git-friendly way.</span> <span data-as="p">Sometimes, you need to make a small change to a package in <code>node_modules/</code> to fix a bug or add a feature. <code>bun patch</code> makes it easy to do this without vendoring the entire package and reuse the patch across multiple installs, multiple projects, and multiple machines.</span> <span data-as="p">Features:</span> <ul> <li>Generates <code>.patch</code> files applied to dependencies in <code>node_modules</code> on install</li> <li>
<code>.patch</code> files can be committed to your repository, reused across multiple installs, projects, and machines</li> <li>
<code>"patchedDependencies"</code> in <code>package.json</code> keeps track of patched packages</li> <li>
<code>bun patch</code> lets you patch packages in <code>node_modules/</code> while preserving the integrity of Bun’s <a href="../global-cache">Global Cache</a>
</li> <li>Test your changes locally before committing them with <code>bun patch --commit &lt;pkg&gt;</code>
</li> <li>To preserve disk space and keep <code>bun install</code> fast, patched packages are committed to the Global Cache and shared across projects where possible</li> </ul> <h4 id="step-1-prepare-the-package-for-patching"><span>Step 1. Prepare the package for patching</span></h4> <span data-as="p">To get started, use <code>bun patch &lt;pkg&gt;</code> to prepare the package for patching:</span> <pre numberoflines="8" language="shellscript" data-language="typescript"># you can supply the package name
bun patch react

# ...and a precise version in case multiple versions are installed
bun patch react@17.0.2

# or the path to the package
bun patch node_modules/react
</pre> <div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">Don’t forget to call <code>bun patch &lt;pkg&gt;</code>! This ensures the package folder in <code>node_modules/</code> contains a fresh copy of the package with no symlinks/hardlinks to Bun’s cache.</span><span data-as="p">If you forget to do this, you might end up editing the package globally in the cache!</span>
</div>
</div> <h4 id="step-2-test-your-changes-locally"><span>Step 2. Test your changes locally</span></h4> <span data-as="p"><code>bun patch &lt;pkg&gt;</code> makes it safe to edit the <code>&lt;pkg&gt;</code> in <code>node_modules/</code> directly, while preserving the integrity of Bun’s <a href="../global-cache">Global Cache</a>. This works by re-creating an unlinked clone of the package in <code>node_modules/</code> and diffing it against the original package in the Global Cache.</span> <h4 id="step-3-commit-your-changes"><span>Step 3. Commit your changes</span></h4> <span data-as="p">Once you’re happy with your changes, run <code>bun patch --commit &lt;path or pkg&gt;</code>.</span> <span data-as="p">Bun will generate a patch file in <code>patches/</code>, update your <code>package.json</code> and lockfile, and Bun will start using the patched package:</span> <pre numberoflines="11" language="shellscript" data-language="typescript"># you can supply the path to the patched package
bun patch --commit node_modules/react

# ... or the package name and optionally the version
bun patch --commit react@17.0.2

# choose the directory to store the patch files
bun patch --commit react --patches-dir=mypatches

# `patch-commit` is available for compatibility with pnpm
bun patch-commit react
</pre> <hr> <h1 id="cli-usage"><span>CLI Usage</span></h1> <pre numberoflines="1" language="shellscript" data-language="typescript">bun patch &lt;package&gt;@&lt;version&gt;
</pre> <h3 id="patch-generation"><span>Patch Generation</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-commit">--commitboolean</code><div data-component-part="field-content"><span data-as="p">Install a package containing modifications in <code>dir</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-patches-dir">--patches-dirstring</code><div data-component-part="field-content"><span data-as="p">The directory to put the patch file in (only if —commit is used)</span></div>
</div> <h3 id="dependency-management"><span>Dependency Management</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-production">--productionboolean</code><div data-component-part="field-content"><span data-as="p">Don’t install devDependencies. Alias: <code>-p</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-ignore-scripts">--ignore-scriptsboolean</code><div data-component-part="field-content"><span data-as="p">Skip lifecycle scripts in the project’s <code>package.json</code> (dependency scripts are never run)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-trust">--trustboolean</code><div data-component-part="field-content"><span data-as="p">Add to <code>trustedDependencies</code> in the project’s <code>package.json</code> and install the package(s)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-global">--globalboolean</code><div data-component-part="field-content"><span data-as="p">Install globally. Alias: <code>-g</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-omit">--omitstring</code><div data-component-part="field-content"><span data-as="p">Exclude <code>dev</code>, <code>optional</code>, or <code>peer</code> dependencies from install</span></div>
</div> <h3 id="project-files-&amp;-lockfiles"><span>Project Files &amp; Lockfiles</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-yarn">--yarnboolean</code><div data-component-part="field-content"><span data-as="p">Write a <code>yarn.lock</code> file (yarn v1). Alias: <code>-y</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-no-save">--no-saveboolean</code><div data-component-part="field-content"><span data-as="p">Don’t update <code>package.json</code> or save a lockfile</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-save">--savebooleandefault:"true"</code><div data-component-part="field-content"><span data-as="p">Save to <code>package.json</code> (true by default)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-frozen-lockfile">--frozen-lockfileboolean</code><div data-component-part="field-content"><span data-as="p">Disallow changes to lockfile</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-save-text-lockfile">--save-text-lockfileboolean</code><div data-component-part="field-content"><span data-as="p">Save a text-based lockfile</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-lockfile-only">--lockfile-onlyboolean</code><div data-component-part="field-content"><span data-as="p">Generate a lockfile without installing dependencies</span></div>
</div> <h3 id="installation-control"><span>Installation Control</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-backend">--backendstringdefault:"clonefile"</code><div data-component-part="field-content"><span data-as="p">Platform-specific optimizations for installing dependencies. Possible values: <code>clonefile</code> (default), <code>hardlink</code>, <code>symlink</code>, <code>copyfile</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-linker">--linkerstring</code><div data-component-part="field-content"><span data-as="p">Linker strategy (one of <code>isolated</code> or <code>hoisted</code>)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-dry-run">--dry-runboolean</code><div data-component-part="field-content"><span data-as="p">Don’t install anything</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-force">--forceboolean</code><div data-component-part="field-content"><span data-as="p">Always request the latest versions from the registry &amp; reinstall all dependencies. Alias: <code>-f</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-no-verify">--no-verifyboolean</code><div data-component-part="field-content"><span data-as="p">Skip verifying integrity of newly downloaded packages</span></div>
</div> <h3 id="network-&amp;-registry"><span>Network &amp; Registry</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-ca">--castring</code><div data-component-part="field-content"><span data-as="p">Provide a Certificate Authority signing certificate</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-cafile">--cafilestring</code><div data-component-part="field-content"><span data-as="p">Same as <code>—ca</code>, but as a file path to the certificate</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-registry">--registrystring</code><div data-component-part="field-content"><span data-as="p">Use a specific registry by default, overriding <code>.npmrc</code>, <code>bunfig.toml</code>, and environment variables</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-network-concurrency">--network-concurrencynumberdefault:"48"</code><div data-component-part="field-content"><span data-as="p">Maximum number of concurrent network requests (default 48)</span></div>
</div> <h3 id="performance-&amp;-resource"><span>Performance &amp; Resource</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-concurrent-scripts">--concurrent-scriptsnumberdefault:"5"</code><div data-component-part="field-content"><span data-as="p">Maximum number of concurrent jobs for lifecycle scripts (default 5)</span></div>
</div> <h3 id="caching"><span>Caching</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-cache-dir">--cache-dirstring</code><div data-component-part="field-content"><span data-as="p">Store &amp; load cached data from a specific directory path</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-no-cache">--no-cacheboolean</code><div data-component-part="field-content"><span data-as="p">Ignore manifest cache entirely</span></div>
</div> <h3 id="output-&amp;-logging"><span>Output &amp; Logging</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-silent">--silentboolean</code><div data-component-part="field-content"><span data-as="p">Don’t log anything</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-quiet">--quietboolean</code><div data-component-part="field-content"><span data-as="p">Only show tarball name when packing</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-verbose">--verboseboolean</code><div data-component-part="field-content"><span data-as="p">Excessively verbose logging</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-no-progress">--no-progressboolean</code><div data-component-part="field-content"><span data-as="p">Disable the progress bar</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-no-summary">--no-summaryboolean</code><div data-component-part="field-content"><span data-as="p">Don’t print a summary</span></div>
</div> <h3 id="platform-targeting"><span>Platform Targeting</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-cpu">--cpustring</code><div data-component-part="field-content"><span data-as="p">Override CPU architecture for optional dependencies (e.g., <code>x64</code>, <code>arm64</code>, <code>*</code> for all)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-os">--osstring</code><div data-component-part="field-content"><span data-as="p">Override operating system for optional dependencies (e.g., <code>linux</code>, <code>darwin</code>, <code>*</code> for all)</span></div>
</div> <h3 id="global-configuration-&amp;-context"><span>Global Configuration &amp; Context</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-config">--configstring</code><div data-component-part="field-content"><span data-as="p">Specify path to config file (<code>bunfig.toml</code>). Alias: <code>-c</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-cwd">--cwdstring</code><div data-component-part="field-content"><span data-as="p">Set a specific current working directory</span></div>
</div> <h3 id="help"><span>Help</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-help">--helpboolean</code><div data-component-part="field-content"><span data-as="p">Print this help menu. Alias: <code>-h</code></span></div>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/pm/cli/patch" class="_attribution-link">https://bun.com/docs/pm/cli/patch</a>
  </p>
</div>
