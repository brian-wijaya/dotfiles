<h1 id="header">Watch a directory for changes</h1>
<div data-page-title="Watch a directory for changes" data-page-href="/guides/read-file/watch" id="content">
<span data-as="p">Bun implements the <code>node:fs</code> module, including the <code>fs.watch</code> function for listening for file system changes.</span> <span data-as="p">This code block listens for changes to files in the current directory. By default this operation is <em>shallow</em>, meaning that changes to files in subdirectories will not be detected.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { watch } from "fs";

const watcher = watch(import.meta.dir, (event, filename) =&gt; {
  console.log(`Detected ${event} in ${filename}`);
});
</pre> <hr> <span data-as="p">To listen to changes in subdirectories, pass the <code>recursive: true</code> option to <code>fs.watch</code>.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { watch } from "fs";

const watcher = watch(import.meta.dir, { recursive: true }, (event, relativePath) =&gt; {
  console.log(`Detected ${event} in ${relativePath}`);
});
</pre> <hr> <span data-as="p">Using the <code>node:fs/promises</code> module, you can listen for changes using <code>for await...of</code> instead of a callback.</span> <pre numberoflines="6" language="typescript" data-language="typescript">import { watch } from "fs/promises";

const watcher = watch(import.meta.dir);
for await (const event of watcher) {
  console.log(`Detected ${event.eventType} in ${event.filename}`);
}
</pre> <hr> <span data-as="p">To stop listening for changes, call <code>watcher.close()</code>. Itâ€™s common to do this when the process receives a <code>SIGINT</code> signal, such as when the user presses Ctrl-C.</span> <pre numberoflines="13" language="typescript" data-language="typescript">import { watch } from "fs";

const watcher = watch(import.meta.dir, (event, filename) =&gt; {
  console.log(`Detected ${event} in ${filename}`);
});

process.on("SIGINT", () =&gt; {
  // close watcher when Ctrl-C is pressed
  console.log("Closing watcher...");
  watcher.close();

  process.exit(0);
});
</pre> <hr> <span data-as="p">Refer to <a href="../../runtime/binary-data#typedarray">API &gt; Binary data &gt; Typed arrays</a> for more information on working with <code>Uint8Array</code> and other binary data formats in Bun.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/read-file/watch" class="_attribution-link">https://bun.com/docs/guides/read-file/watch</a>
  </p>
</div>
