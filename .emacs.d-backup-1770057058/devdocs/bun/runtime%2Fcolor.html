<h1 id="header">Color</h1>
<div data-page-title="Color" data-page-href="/runtime/color" id="content">
<span data-as="p"><code>Bun.color(input, outputFormat?)</code> leverages Bun’s CSS parser to parse, normalize, and convert colors from user input to a variety of output formats, including:</span> <div data-table-wrapper="true"><div><table> <thead><tr>
<th>Format</th>
<th>Example</th>
</tr></thead> <tbody>
<tr>
<td><code>"css"</code></td>
<td><code>"red"</code></td>
</tr>
<tr>
<td><code>"ansi"</code></td>
<td><code>"\x1b[38;2;255;0;0m"</code></td>
</tr>
<tr>
<td><code>"ansi-16"</code></td>
<td><code>"\x1b[38;5;\tm"</code></td>
</tr>
<tr>
<td><code>"ansi-256"</code></td>
<td><code>"\x1b[38;5;196m"</code></td>
</tr>
<tr>
<td><code>"ansi-16m"</code></td>
<td><code>"\x1b[38;2;255;0;0m"</code></td>
</tr>
<tr>
<td><code>"number"</code></td>
<td><code>0x1a2b3c</code></td>
</tr>
<tr>
<td><code>"rgb"</code></td>
<td><code>"rgb(255, 99, 71)"</code></td>
</tr>
<tr>
<td><code>"rgba"</code></td>
<td><code>"rgba(255, 99, 71, 0.5)"</code></td>
</tr>
<tr>
<td><code>"hsl"</code></td>
<td><code>"hsl(120, 50%, 50%)"</code></td>
</tr>
<tr>
<td><code>"hex"</code></td>
<td><code>"#1a2b3c"</code></td>
</tr>
<tr>
<td><code>"HEX"</code></td>
<td><code>"#1A2B3C"</code></td>
</tr>
<tr>
<td><code>"{rgb}"</code></td>
<td><code>{ r: 255, g: 99, b: 71 }</code></td>
</tr>
<tr>
<td><code>"{rgba}"</code></td>
<td><code>{ r: 255, g: 99, b: 71, a: 1 }</code></td>
</tr>
<tr>
<td><code>"[rgb]"</code></td>
<td><code>[ 255, 99, 71 ]</code></td>
</tr>
<tr>
<td><code>"[rgba]"</code></td>
<td><code>[ 255, 99, 71, 255]</code></td>
</tr>
</tbody> </table></div></div> <span data-as="p">There are many different ways to use this API:</span> <ul> <li>Validate and normalize colors to persist in a database (<code>number</code> is the most database-friendly)</li> <li>Convert colors to different formats</li> <li>Colorful logging beyond the 16 colors many use today (use <code>ansi</code> if you don’t want to figure out what the user’s terminal supports, otherwise use <code>ansi-16</code>, <code>ansi-256</code>, or <code>ansi-16m</code> for how many colors the terminal supports)</li> <li>Format colors for use in CSS injected into HTML</li> <li>Get the <code>r</code>, <code>g</code>, <code>b</code>, and <code>a</code> color components as JavaScript objects or numbers from a CSS color string</li> </ul> <span data-as="p">You can think of this as an alternative to the popular npm packages <a href="https://github.com/Qix-/color" target="_blank" rel="noreferrer"><code>color</code></a> and <a href="https://github.com/bgrins/TinyColor" target="_blank" rel="noreferrer"><code>tinycolor2</code></a> except with full support for parsing CSS color strings and zero dependencies built directly into Bun.</span> <h3 id="flexible-input"><span>Flexible input</span></h3> <span data-as="p">You can pass in any of the following:</span> <ul> <li>Standard CSS color names like <code>"red"</code>
</li> <li>Numbers like <code>0xff0000</code>
</li> <li>Hex strings like <code>"#f00"</code>
</li> <li>RGB strings like <code>"rgb(255, 0, 0)"</code>
</li> <li>RGBA strings like <code>"rgba(255, 0, 0, 1)"</code>
</li> <li>HSL strings like <code>"hsl(0, 100%, 50%)"</code>
</li> <li>HSLA strings like <code>"hsla(0, 100%, 50%, 1)"</code>
</li> <li>RGB objects like <code>{ r: 255, g: 0, b: 0 }</code>
</li> <li>RGBA objects like <code>{ r: 255, g: 0, b: 0, a: 1 }</code>
</li> <li>RGB arrays like <code>[255, 0, 0]</code>
</li> <li>RGBA arrays like <code>[255, 0, 0, 255]</code>
</li> <li>LAB strings like <code>"lab(50% 50% 50%)"</code>
</li> <li>… anything else that CSS can parse as a single color value</li> </ul> <h3 id="format-colors-as-css"><span>Format colors as CSS</span></h3> <span data-as="p">The <code>"css"</code> format outputs valid CSS for use in stylesheets, inline styles, CSS variables, css-in-js, etc. It returns the most compact representation of the color as a string.</span> <pre numberoflines="12" language="typescript" data-language="typescript">Bun.color("red", "css"); // "red"
Bun.color(0xff0000, "css"); // "#f000"
Bun.color("#f00", "css"); // "red"
Bun.color("#ff0000", "css"); // "red"
Bun.color("rgb(255, 0, 0)", "css"); // "red"
Bun.color("rgba(255, 0, 0, 1)", "css"); // "red"
Bun.color("hsl(0, 100%, 50%)", "css"); // "red"
Bun.color("hsla(0, 100%, 50%, 1)", "css"); // "red"
Bun.color({ r: 255, g: 0, b: 0 }, "css"); // "red"
Bun.color({ r: 255, g: 0, b: 0, a: 1 }, "css"); // "red"
Bun.color([255, 0, 0], "css"); // "red"
Bun.color([255, 0, 0, 255], "css"); // "red"
</pre> <span data-as="p">If the input is unknown or fails to parse, <code>Bun.color</code> returns <code>null</code>.</span> <h3 id="format-colors-as-ansi-for-terminals"><span>Format colors as ANSI (for terminals)</span></h3> <span data-as="p">The <code>"ansi"</code> format outputs ANSI escape codes for use in terminals to make text colorful.</span> <pre numberoflines="12" language="typescript" data-language="typescript">Bun.color("red", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color(0xff0000, "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("#f00", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("#ff0000", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("rgb(255, 0, 0)", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("rgba(255, 0, 0, 1)", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("hsl(0, 100%, 50%)", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color("hsla(0, 100%, 50%, 1)", "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color({ r: 255, g: 0, b: 0 }, "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color({ r: 255, g: 0, b: 0, a: 1 }, "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color([255, 0, 0], "ansi"); // "\u001b[38;2;255;0;0m"
Bun.color([255, 0, 0, 255], "ansi"); // "\u001b[38;2;255;0;0m"
</pre> <span data-as="p">This gets the color depth of stdout and automatically chooses one of <code>"ansi-16m"</code>, <code>"ansi-256"</code>, <code>"ansi-16"</code> based on the environment variables. If stdout doesn’t support any form of ANSI color, it returns an empty string. As with the rest of Bun’s color API, if the input is unknown or fails to parse, it returns <code>null</code>.</span> <h4 id="24-bit-ansi-colors-ansi-16m"><span>24-bit ANSI colors (<code>ansi-16m</code>)</span></h4> <span data-as="p">The <code>"ansi-16m"</code> format outputs 24-bit ANSI colors for use in terminals to make text colorful. 24-bit color means you can display 16 million colors on supported terminals, and requires a modern terminal that supports it.</span> <span data-as="p">This converts the input color to RGBA, and then outputs that as an ANSI color.</span> <pre numberoflines="4" language="typescript" data-language="typescript">Bun.color("red", "ansi-16m"); // "\x1b[38;2;255;0;0m"
Bun.color(0xff0000, "ansi-16m"); // "\x1b[38;2;255;0;0m"
Bun.color("#f00", "ansi-16m"); // "\x1b[38;2;255;0;0m"
Bun.color("#ff0000", "ansi-16m"); // "\x1b[38;2;255;0;0m"
</pre> <h4 id="256-ansi-colors-ansi-256"><span>256 ANSI colors (<code>ansi-256</code>)</span></h4> <span data-as="p">The <code>"ansi-256"</code> format approximates the input color to the nearest of the 256 ANSI colors supported by some terminals.</span> <pre numberoflines="4" language="typescript" data-language="typescript">Bun.color("red", "ansi-256"); // "\u001b[38;5;196m"
Bun.color(0xff0000, "ansi-256"); // "\u001b[38;5;196m"
Bun.color("#f00", "ansi-256"); // "\u001b[38;5;196m"
Bun.color("#ff0000", "ansi-256"); // "\u001b[38;5;196m"
</pre> <span data-as="p">To convert from RGBA to one of the 256 ANSI colors, we ported the algorithm that <a href="https://github.com/tmux/tmux/blob/dae2868d1227b95fd076fb4a5efa6256c7245943/colour.c#L44-L55" target="_blank" rel="noreferrer"><code>tmux</code> uses</a>.</span> <h4 id="16-ansi-colors-ansi-16"><span>16 ANSI colors (<code>ansi-16</code>)</span></h4> <span data-as="p">The <code>"ansi-16"</code> format approximates the input color to the nearest of the 16 ANSI colors supported by most terminals.</span> <pre numberoflines="4" language="typescript" data-language="typescript">Bun.color("red", "ansi-16"); // "\u001b[38;5;\tm"
Bun.color(0xff0000, "ansi-16"); // "\u001b[38;5;\tm"
Bun.color("#f00", "ansi-16"); // "\u001b[38;5;\tm"
Bun.color("#ff0000", "ansi-16"); // "\u001b[38;5;\tm"
</pre> <span data-as="p">This works by first converting the input to a 24-bit RGB color space, then to <code>ansi-256</code>, and then we convert that to the nearest 16 ANSI color.</span> <h3 id="format-colors-as-numbers"><span>Format colors as numbers</span></h3> <span data-as="p">The <code>"number"</code> format outputs a 24-bit number for use in databases, configuration, or any other use case where a compact representation of the color is desired.</span> <pre numberoflines="8" language="typescript" data-language="typescript">Bun.color("red", "number"); // 16711680
Bun.color(0xff0000, "number"); // 16711680
Bun.color({ r: 255, g: 0, b: 0 }, "number"); // 16711680
Bun.color([255, 0, 0], "number"); // 16711680
Bun.color("rgb(255, 0, 0)", "number"); // 16711680
Bun.color("rgba(255, 0, 0, 1)", "number"); // 16711680
Bun.color("hsl(0, 100%, 50%)", "number"); // 16711680
Bun.color("hsla(0, 100%, 50%, 1)", "number"); // 16711680
</pre> <h3 id="get-the-red,-green,-blue,-and-alpha-channels"><span>Get the red, green, blue, and alpha channels</span></h3> <span data-as="p">You can use the <code>"{rgba}"</code>, <code>"{rgb}"</code>, <code>"[rgba]"</code> and <code>"[rgb]"</code> formats to get the red, green, blue, and alpha channels as objects or arrays.</span> <h4 id="{rgba}-object"><span><code>{rgba}</code> object</span></h4> <span data-as="p">The <code>"{rgba}"</code> format outputs an object with the red, green, blue, and alpha channels.</span> <pre numberoflines="10" language="typescript" data-language="typescript">type RGBAObject = {
  // 0 - 255
  r: number;
  // 0 - 255
  g: number;
  // 0 - 255
  b: number;
  // 0 - 1
  a: number;
};
</pre> <span data-as="p">Example:</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "{rgba}"); // { r: 128, g: 128, b: 128, a: 1 }
Bun.color("red", "{rgba}"); // { r: 255, g: 0, b: 0, a: 1 }
Bun.color(0xff0000, "{rgba}"); // { r: 255, g: 0, b: 0, a: 1 }
Bun.color({ r: 255, g: 0, b: 0 }, "{rgba}"); // { r: 255, g: 0, b: 0, a: 1 }
Bun.color([255, 0, 0], "{rgba}"); // { r: 255, g: 0, b: 0, a: 1 }
</pre> <span data-as="p">To behave similarly to CSS, the <code>a</code> channel is a decimal number between <code>0</code> and <code>1</code>.</span> <span data-as="p">The <code>"{rgb}"</code> format is similar, but it doesn’t include the alpha channel.</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "{rgb}"); // { r: 128, g: 128, b: 128 }
Bun.color("red", "{rgb}"); // { r: 255, g: 0, b: 0 }
Bun.color(0xff0000, "{rgb}"); // { r: 255, g: 0, b: 0 }
Bun.color({ r: 255, g: 0, b: 0 }, "{rgb}"); // { r: 255, g: 0, b: 0 }
Bun.color([255, 0, 0], "{rgb}"); // { r: 255, g: 0, b: 0 }
</pre> <h4 id="[rgba]-array"><span><code>[rgba]</code> array</span></h4> <span data-as="p">The <code>"[rgba]"</code> format outputs an array with the red, green, blue, and alpha channels.</span> <pre numberoflines="2" language="typescript" data-language="typescript">// All values are 0 - 255
type RGBAArray = [number, number, number, number];
</pre> <span data-as="p">Example:</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "[rgba]"); // [128, 128, 128, 255]
Bun.color("red", "[rgba]"); // [255, 0, 0, 255]
Bun.color(0xff0000, "[rgba]"); // [255, 0, 0, 255]
Bun.color({ r: 255, g: 0, b: 0 }, "[rgba]"); // [255, 0, 0, 255]
Bun.color([255, 0, 0], "[rgba]"); // [255, 0, 0, 255]
</pre> <span data-as="p">Unlike the <code>"{rgba}"</code> format, the alpha channel is an integer between <code>0</code> and <code>255</code>. This is useful for typed arrays where each channel must be the same underlying type.</span> <span data-as="p">The <code>"[rgb]"</code> format is similar, but it doesn’t include the alpha channel.</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "[rgb]"); // [128, 128, 128]
Bun.color("red", "[rgb]"); // [255, 0, 0]
Bun.color(0xff0000, "[rgb]"); // [255, 0, 0]
Bun.color({ r: 255, g: 0, b: 0 }, "[rgb]"); // [255, 0, 0]
Bun.color([255, 0, 0], "[rgb]"); // [255, 0, 0]
</pre> <h3 id="format-colors-as-hex-strings"><span>Format colors as hex strings</span></h3> <span data-as="p">The <code>"hex"</code> format outputs a lowercase hex string for use in CSS or other contexts.</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "hex"); // "#808080"
Bun.color("red", "hex"); // "#ff0000"
Bun.color(0xff0000, "hex"); // "#ff0000"
Bun.color({ r: 255, g: 0, b: 0 }, "hex"); // "#ff0000"
Bun.color([255, 0, 0], "hex"); // "#ff0000"
</pre> <span data-as="p">The <code>"HEX"</code> format is similar, but it outputs a hex string with uppercase letters instead of lowercase letters.</span> <pre numberoflines="5" language="typescript" data-language="typescript">Bun.color("hsl(0, 0%, 50%)", "HEX"); // "#808080"
Bun.color("red", "HEX"); // "#FF0000"
Bun.color(0xff0000, "HEX"); // "#FF0000"
Bun.color({ r: 255, g: 0, b: 0 }, "HEX"); // "#FF0000"
Bun.color([255, 0, 0], "HEX"); // "#FF0000"
</pre> <h3 id="bundle-time-client-side-color-formatting"><span>Bundle-time client-side color formatting</span></h3> <span data-as="p">Like many of Bun’s APIs, you can use macros to invoke <code>Bun.color</code> at bundle-time for use in client-side JavaScript builds:</span> <pre numberoflines="3" language="typescript" data-language="typescript">import { color } from "bun" with { type: "macro" };

console.log(color("#f00", "css"));
</pre> <span data-as="p">Then, build the client-side code:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun build ./client-side.ts
</pre> <span data-as="p">This will output the following to <code>client-side.js</code>:</span> <pre numberoflines="2" language="javascript" data-language="typescript">// client-side.ts
console.log("red");
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/runtime/color" class="_attribution-link">https://bun.com/docs/runtime/color</a>
  </p>
</div>
