<h1 id="header">Use snapshot testing in `bun test`</h1>
<div data-page-title="Use snapshot testing in `bun test`" data-page-href="/guides/test/snapshot" id="content">
<span data-as="p">Bun’s test runner supports Jest-style snapshot testing via <code>.toMatchSnapshot()</code>.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { test, expect } from "bun:test";

test("snapshot", () =&gt; {
  expect({ foo: "bar" }).toMatchSnapshot();
});
</pre> <hr> <span data-as="p">The first time this test is executed, Bun will evaluate the value passed into <code>expect()</code> and write it to disk in a directory called <code>__snapshots__</code> that lives alongside the test file. (Note the <code>snapshots: +1 added</code> line in the output.)</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test test/snap
</pre> <pre numberoflines="9" language="text" data-language="typescript">test/snap.test.ts:
✓ snapshot [1.48ms]

 1 pass
 0 fail
 snapshots: +1 added
 1 expect() calls
Ran 1 tests across 1 files. [82.00ms]
</pre> <hr> <span data-as="p">The <code>__snapshots__</code> directory contains a <code>.snap</code> file for each test file in the directory.</span> <pre numberoflines="5" language="text" data-language="typescript">test
├── __snapshots__
│   └── snap.test.ts.snap
└── snap.test.ts
</pre> <hr> <span data-as="p">The <code>snap.test.ts.snap</code> file is a JavaScript file that exports a serialized version of the value passed into <code>expect()</code>. The <code>{foo: "bar"}</code> object has been serialized to JSON.</span> <pre numberoflines="7" language="javascript" data-language="typescript">// Bun Snapshot v1, https://bun.com/docs/test/snapshots

exports[`snapshot 1`] = `
{
  "foo": "bar",
}
`;
</pre> <hr> <span data-as="p">Later, when this test file is executed again, Bun will read the snapshot file and compare it to the value passed into <code>expect()</code>. If the values are different, the test will fail.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test
</pre> <pre numberoflines="9" language="text" data-language="typescript">bun test v1.3.3 (9c68abdb)
test/snap.test.ts:
✓ snapshot [1.05ms]

 1 pass
 0 fail
 1 snapshots, 1 expect() calls
Ran 1 tests across 1 files. [101.00ms]
</pre> <hr> <span data-as="p">To update snapshots, use the <code>--update-snapshots</code> flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --update-snapshots
</pre> <pre numberoflines="10" language="text" data-language="typescript">bun test v1.3.3 (9c68abdb)
test/snap.test.ts:
✓ snapshot [0.86ms]

 1 pass
 0 fail
 snapshots: +1 added  # the snapshot was regenerated
 1 expect() calls
Ran 1 tests across 1 files. [102.00ms]
</pre> <hr> <span data-as="p">See <a href="../../test/snapshots">Docs &gt; Test Runner &gt; Snapshots</a> for complete documentation on snapshots with the Bun test runner.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/test/snapshot" class="_attribution-link">https://bun.com/docs/guides/test/snapshot</a>
  </p>
</div>
