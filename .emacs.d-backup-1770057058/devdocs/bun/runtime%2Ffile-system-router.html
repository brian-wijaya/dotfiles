<h1 id="header">File System Router</h1>
<div data-page-title="File System Router" data-page-href="/runtime/file-system-router" id="content">
<span data-as="p">This API is primarily intended for library authors. At the moment only Next.js-style file-system routing is supported, but other styles may be added in the future.</span> <h2 id="next-js-style"><span>Next.js-style</span></h2> <span data-as="p">The <code>FileSystemRouter</code> class can resolve routes against a <code>pages</code> directory. (The Next.js 13 <code>app</code> directory is not yet supported.) Consider the following <code>pages</code> directory:</span> <pre numberoflines="8" language="text" data-language="typescript">pages
├── index.tsx
├── settings.tsx
├── blog
│   ├── [slug].tsx
│   └── index.tsx
└── [[...catchall]].tsx
</pre> <span data-as="p">The <code>FileSystemRouter</code> can be used to resolve routes against this directory:</span> <pre numberoflines="17" language="typescript" data-language="typescript">const router = new Bun.FileSystemRouter({
  style: "nextjs",
  dir: "./pages",
  origin: "https://mydomain.com",
  assetPrefix: "_next/static/"
});

router.match("/");

// =&gt;
{
  filePath: "/path/to/pages/index.tsx",
  kind: "exact",
  name: "/",
  pathname: "/",
  src: "https://mydomain.com/_next/static/pages/index.tsx"
}
</pre> <span data-as="p">Query parameters will be parsed and returned in the <code>query</code> property.</span> <pre numberoflines="13" language="typescript" data-language="typescript">router.match("/settings?foo=bar");

// =&gt;
{
  filePath: "/Users/colinmcd94/Documents/bun/fun/pages/settings.tsx",
  kind: "dynamic",
  name: "/settings",
  pathname: "/settings?foo=bar",
  src: "https://mydomain.com/_next/static/pages/settings.tsx",
  query: {
    foo: "bar"
  }
}
</pre> <span data-as="p">The router will automatically parse URL parameters and return them in the <code>params</code> property:</span> <pre numberoflines="13" language="typescript" data-language="typescript">router.match("/blog/my-cool-post");

// =&gt;
{
  filePath: "/Users/colinmcd94/Documents/bun/fun/pages/blog/[slug].tsx",
  kind: "dynamic",
  name: "/blog/[slug]",
  pathname: "/blog/my-cool-post",
  src: "https://mydomain.com/_next/static/pages/blog/[slug].tsx",
  params: {
    slug: "my-cool-post"
  }
}
</pre> <span data-as="p">The <code>.match()</code> method also accepts <code>Request</code> and <code>Response</code> objects. The <code>url</code> property will be used to resolve the route.</span> <pre numberoflines="1" language="typescript" data-language="typescript">router.match(new Request("https://example.com/blog/my-cool-post"));
</pre> <span data-as="p">The router will read the directory contents on initialization. To re-scan the files, use the <code>.reload()</code> method.</span> <pre numberoflines="1" language="typescript" data-language="typescript">router.reload();
</pre> <h2 id="reference"><span>Reference</span></h2> <pre numberoflines="23" language="typescript" data-language="typescript">interface Bun {
  class FileSystemRouter {
    constructor(params: {
      dir: string;
      style: "nextjs";
      origin?: string;
      assetPrefix?: string;
      fileExtensions?: string[];
    });

    reload(): void;

    match(path: string | Request | Response): {
      filePath: string;
      kind: "exact" | "catch-all" | "optional-catch-all" | "dynamic";
      name: string;
      pathname: string;
      src: string;
      params?: Record&lt;string, string&gt;;
      query?: Record&lt;string, string&gt;;
    } | null
  }
}
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/runtime/file-system-router" class="_attribution-link">https://bun.com/docs/runtime/file-system-router</a>
  </p>
</div>
