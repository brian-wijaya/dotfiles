<h1 id="header">Use Drizzle ORM with Bun</h1>
<div data-page-title="Use Drizzle ORM with Bun" data-page-href="/guides/ecosystem/drizzle" id="content">
<span data-as="p">Drizzle is an ORM that supports both a SQL-like “query builder” API and an ORM-like <a href="https://orm.drizzle.team/docs/rqb" target="_blank" rel="noreferrer">Queries API</a>. It supports the <code>bun:sqlite</code> built-in module.</span> <hr> <span data-as="p">Let’s get started by creating a fresh project with <code>bun init</code> and installing Drizzle.</span> <pre numberoflines="3" language="shellscript" data-language="typescript">bun init -y
bun add drizzle-orm
bun add -D drizzle-kit
</pre> <hr> <span data-as="p">Then we’ll connect to a SQLite database using the <code>bun:sqlite</code> module and create the Drizzle database instance.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { drizzle } from "drizzle-orm/bun-sqlite";
import { Database } from "bun:sqlite";

const sqlite = new Database("sqlite.db");
export const db = drizzle(sqlite);
</pre> <hr> <span data-as="p">To see the database in action, add these lines to <code>index.ts</code>.</span> <pre numberoflines="6" language="typescript" data-language="typescript">import { db } from "./db";
import { sql } from "drizzle-orm";

const query = sql`select "hello world" as text`;
const result = db.get&lt;{ text: string }&gt;(query);
console.log(result);
</pre> <hr> <span data-as="p">Then run <code>index.ts</code> with Bun. Bun will automatically create <code>sqlite.db</code> and execute the query.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun run index.ts
</pre> <pre numberoflines="4" language="text" data-language="typescript">{
  text: "hello world"
}
</pre> <hr> <span data-as="p">Lets give our database a proper schema. Create a <code>schema.ts</code> file and define a <code>movies</code> table.</span> <pre numberoflines="7" language="typescript" data-language="typescript">import { sqliteTable, text, integer } from "drizzle-orm/sqlite-core";

export const movies = sqliteTable("movies", {
  id: integer("id").primaryKey(),
  title: text("name"),
  releaseYear: integer("release_year"),
});
</pre> <hr> <span data-as="p">We can use the <code>drizzle-kit</code> CLI to generate an initial SQL migration.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bunx drizzle-kit generate --dialect sqlite --schema ./schema.ts
</pre> <hr> <span data-as="p">This creates a new <code>drizzle</code> directory containing a <code>.sql</code> migration file and <code>meta</code> directory.</span> <pre numberoflines="6" language="text" data-language="typescript">drizzle
├── 0000_ordinary_beyonder.sql
└── meta
    ├── 0000_snapshot.json
    └── _journal.json
</pre> <hr> <span data-as="p">We can execute these migrations with a simple <code>migrate.ts</code> script.</span> <span data-as="p">This script creates a new connection to a SQLite database that writes to <code>sqlite.db</code>, then executes all unexecuted migrations in the <code>drizzle</code> directory.</span> <pre numberoflines="8" language="typescript" data-language="typescript">import { migrate } from "drizzle-orm/bun-sqlite/migrator";

import { drizzle } from "drizzle-orm/bun-sqlite";
import { Database } from "bun:sqlite";

const sqlite = new Database("sqlite.db");
const db = drizzle(sqlite);
migrate(db, { migrationsFolder: "./drizzle" });
</pre> <hr> <span data-as="p">We can run this script with <code>bun</code> to execute the migration.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun run migrate.ts
</pre> <hr> <span data-as="p">Now that we have a database, let’s add some data to it. Create a <code>seed.ts</code> file with the following contents.</span> <pre numberoflines="19" language="typescript" data-language="typescript">import { db } from "./db";
import * as schema from "./schema";

await db.insert(schema.movies).values([
  {
    title: "The Matrix",
    releaseYear: 1999,
  },
  {
    title: "The Matrix Reloaded",
    releaseYear: 2003,
  },
  {
    title: "The Matrix Revolutions",
    releaseYear: 2003,
  },
]);

console.log(`Seeding complete.`);
</pre> <hr> <span data-as="p">Then run this file.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun run seed.ts
</pre> <pre numberoflines="2" language="text" data-language="typescript">Seeding complete.
</pre> <hr> <span data-as="p">We finally have a database with a schema and some sample data. Let’s use Drizzle to query it. Replace the contents of <code>index.ts</code> with the following.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import * as schema from "./schema";
import { db } from "./db";

const result = await db.select().from(schema.movies);
console.log(result);
</pre> <hr> <span data-as="p">Then run the file. You should see the three movies we inserted.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun run index.ts
</pre> <pre numberoflines="16" language="text" data-language="typescript">[
  {
    id: 1,
    title: "The Matrix",
    releaseYear: 1999
  }, {
    id: 2,
    title: "The Matrix Reloaded",
    releaseYear: 2003
  }, {
    id: 3,
    title: "The Matrix Revolutions",
    releaseYear: 2003
  }
]
</pre> <hr> <span data-as="p">Refer to the <a href="https://orm.drizzle.team/docs/overview" target="_blank" rel="noreferrer">Drizzle website</a> for complete documentation.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/ecosystem/drizzle" class="_attribution-link">https://bun.com/docs/guides/ecosystem/drizzle</a>
  </p>
</div>
