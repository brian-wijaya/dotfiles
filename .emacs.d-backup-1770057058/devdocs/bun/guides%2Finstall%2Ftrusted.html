<h1 id="header">Add a trusted dependency</h1>
<div data-page-title="Add a trusted dependency" data-page-href="/guides/install/trusted" id="content">
<span data-as="p">Unlike other npm clients, Bun does not execute arbitrary lifecycle scripts for installed dependencies, such as <code>postinstall</code> and <code>node-gyp</code> builds. These scripts represent a potential security risk, as they can execute arbitrary code on your machine.</span> <div data-callout-type="note">

<div data-component-part="callout-content"><span data-as="p">Bun includes a default allowlist of popular packages containing <code>postinstall</code> scripts that are known to be safe. You can see this list <a href="https://github.com/oven-sh/bun/blob/main/src/install/default-trusted-dependencies.txt" target="_blank" rel="noreferrer">here</a>. This default list only applies to packages installed from npm. For packages from other sources (such as <code>file:</code>, <code>link:</code>, <code>git:</code>, or <code>github:</code> dependencies), you must explicitly add them to <code>trustedDependencies</code>.</span></div>
</div> <hr> <span data-as="p">If you are seeing one of the following errors, you are probably trying to use a package that uses <code>postinstall</code> to work properly:</span> <ul> <li><code>error: could not determine executable to run for package</code></li> <li><code>InvalidExe</code></li> </ul> <hr> <span data-as="p">To allow Bun to execute lifecycle scripts for a specific package, add the package to <code>trustedDependencies</code> in your package.json file. You can do this automatically by running the command <code>bun pm trust &lt;pkg&gt;</code>.</span> <div data-callout-type="note">

<div data-component-part="callout-content"><span data-as="p">Note that this only allows lifecycle scripts for the specific package listed in <code>trustedDependencies</code>, <em>not</em> the dependencies of that dependency!</span></div>
</div> <pre numberoflines="5" language="json" data-language="typescript">{
  "name": "my-app",
  "version": "1.0.0",
  "trustedDependencies": ["my-trusted-package"] 
}
</pre> <hr> <span data-as="p">Once this is added, run a fresh install. Bun will re-install your dependencies and properly install</span> <pre numberoflines="3" language="shellscript" data-language="typescript">rm -rf node_modules
rm bun.lock
bun install
</pre> <hr> <span data-as="p">See <a href="../../pm/lifecycle">Docs &gt; Package manager &gt; Trusted dependencies</a> for complete documentation of trusted dependencies.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/install/trusted" class="_attribution-link">https://bun.com/docs/guides/install/trusted</a>
  </p>
</div>
