<h1 id="header">Upload files via HTTP using FormData</h1>
<div data-page-title="Upload files via HTTP using FormData" data-page-href="/guides/http/file-uploads" id="content">
<span data-as="p">To upload files via HTTP with Bun, use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noreferrer"><code>FormData</code></a> API. Let’s start with a HTTP server that serves a simple HTML web form.</span> <pre numberoflines="18" language="typescript" data-language="typescript">const server = Bun.serve({
  port: 4000,
  async fetch(req) {
    const url = new URL(req.url);

    // return index.html for root path
    if (url.pathname === "/")
      return new Response(Bun.file("index.html"), {
        headers: {
          "Content-Type": "text/html",
        },
      });

    return new Response("Not Found", { status: 404 });
  },
});

console.log(`Listening on http://localhost:${server.port}`);
</pre> <hr> <span data-as="p">We can define our HTML form in another file, <code>index.html</code>.</span> <pre numberoflines="14" language="html" data-language="typescript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;Form&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="/action" method="post" enctype="multipart/form-data"&gt;
      &lt;input type="text" name="name" placeholder="Name" /&gt;
      &lt;input type="file" name="profilePicture" /&gt;
      &lt;input type="submit" value="Submit" /&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre> <hr> <span data-as="p">At this point, we can run the server and visit <a href="http://localhost:4000" target="_blank" rel="noreferrer"><code>localhost:4000</code></a> to see our form.</span> <pre numberoflines="2" language="shellscript" data-language="typescript">bun run index.ts
Listening on http://localhost:4000
</pre> <hr> <span data-as="p">Our form will send a <code>POST</code> request to the <code>/action</code> endpoint with the form data. Let’s handle that request in our server.</span> <span data-as="p">First we use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/formData" target="_blank" rel="noreferrer"><code>.formData()</code></a> method on the incoming <code>Request</code> to asynchronously parse its contents to a <code>FormData</code> instance. Then we can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData/get" target="_blank" rel="noreferrer"><code>.get()</code></a> method to extract the value of the <code>name</code> and <code>profilePicture</code> fields. Here <code>name</code> corresponds to a <code>string</code> and <code>profilePicture</code> is a <code>Blob</code>.</span> <span data-as="p">Finally, we write the <code>Blob</code> to disk using <a href="../../runtime/file-io#writing-files-bun-write"><code>Bun.write()</code></a>.</span> <pre numberoflines="27" language="typescript" data-language="typescript">const server = Bun.serve({
  port: 4000,
  async fetch(req) {
    const url = new URL(req.url);

    // return index.html for root path
    if (url.pathname === "/")
      return new Response(Bun.file("index.html"), {
        headers: {
          "Content-Type": "text/html",
        },
      });

    // parse formdata at /action
    if (url.pathname === "/action") { 
      const formdata = await req.formData(); 
      const name = formdata.get("name"); 
      const profilePicture = formdata.get("profilePicture"); 
      if (!profilePicture) throw new Error("Must upload a profile picture."); 
      // write profilePicture to disk
      await Bun.write("profilePicture.png", profilePicture); 
      return new Response("Success"); 
    } 

    return new Response("Not Found", { status: 404 });
  },
});
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/http/file-uploads" class="_attribution-link">https://bun.com/docs/guides/http/file-uploads</a>
  </p>
</div>
