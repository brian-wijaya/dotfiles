<h1 id="header">Environment Variables</h1>
<div data-page-title="Environment Variables" data-page-href="/runtime/environment-variables" id="content">
<span data-as="p">Bun reads your <code>.env</code> files automatically and provides idiomatic ways to read and write your environment variables programmatically. Plus, some aspects of Bun’s runtime behavior can be configured with Bun-specific environment variables.</span> <h2 id="setting-environment-variables"><span>Setting environment variables</span></h2> <span data-as="p">Bun reads the following files automatically (listed in order of increasing precedence).</span> <ul> <li><code>.env</code></li> <li>
<code>.env.production</code>, <code>.env.development</code>, <code>.env.test</code> (depending on value of <code>NODE_ENV</code>)</li> <li><code>.env.local</code></li> </ul> <pre numberoflines="2" language="ini" data-language="typescript">FOO=hello
BAR=world
</pre> <span data-as="p">Variables can also be set via the command line.</span> <pre dir="ltr" data-orientation="horizontal" data-language="typescript">Linux/macOSWindowsFOO=helloworld bun run dev
</pre> <details><summary aria-controls="cross-platform-solution-with-windows accordion children" aria-expanded="false" data-component-part="accordion-button">

<div contenteditable="false" data-component-part="accordion-title-container"><p data-component-part="accordion-title">Cross-platform solution with Windows</p></div></summary><div id="cross-platform-solution-with-windows accordion children" role="region" aria-labelledby="cross-platform-solution-with-windows" data-component-part="accordion-content">
<span data-as="p">For a cross-platform solution, you can use <a href="shell">bun shell</a>. For example, the <code>bun exec</code> command.</span><pre numberoflines="1" language="shellscript" data-language="typescript">bun exec 'FOO=helloworld bun run dev'
</pre>
<span data-as="p">On Windows, <code>package.json</code> scripts called with <code>bun run</code> will automatically use the <strong>bun shell</strong>, making the following also cross-platform.</span><pre numberoflines="3" language="json" data-language="typescript">"scripts": {
  "dev": "NODE_ENV=development bun --watch app.ts",
},
</pre>
</div></details> <span data-as="p">Or programmatically by assigning a property to <code>process.env</code>.</span> <pre numberoflines="1" language="typescript" data-language="typescript">process.env.FOO = "hello";
</pre> <hr> <h2 id="manually-specifying-env-files"><span>Manually specifying <code>.env</code> files</span></h2> <span data-as="p">Bun supports <code>--env-file</code> to override which specific <code>.env</code> file to load. You can use <code>--env-file</code> when running scripts in bun’s runtime, or when running package.json scripts.</span> <pre numberoflines="3" language="shellscript" data-language="typescript">bun --env-file=.env.1 src/index.ts

bun --env-file=.env.abc --env-file=.env.def run build
</pre> <h2 id="disabling-automatic-env-loading"><span>Disabling automatic <code>.env</code> loading</span></h2> <span data-as="p">Use <code>--no-env-file</code> to disable Bun’s automatic <code>.env</code> file loading. This is useful in production environments or CI/CD pipelines where you want to rely solely on system environment variables.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun run --no-env-file index.ts
</pre> <span data-as="p">This can also be configured in <code>bunfig.toml</code>:</span> <pre numberoflines="2" language="toml" data-language="typescript"># Disable loading .env files
env = false
</pre> <span data-as="p">Explicitly provided environment files via <code>--env-file</code> will still be loaded even when default loading is disabled.</span> <hr> <h2 id="quotation-marks"><span>Quotation marks</span></h2> <span data-as="p">Bun supports double quotes, single quotes, and template literal backticks:</span> <pre numberoflines="3" language="ini" data-language="typescript">FOO='hello'
FOO="hello"
FOO=`hello`
</pre> <h3 id="expansion"><span>Expansion</span></h3> <span data-as="p">Environment variables are automatically <em>expanded</em>. This means you can reference previously-defined variables in your environment variables.</span> <pre numberoflines="2" language="ini" data-language="typescript">FOO=world
BAR=hello$FOO
</pre> <pre numberoflines="1" language="typescript" data-language="typescript">process.env.BAR; // =&gt; "helloworld"
</pre> <span data-as="p">This is useful for constructing connection strings or other compound values.</span> <pre numberoflines="5" language="ini" data-language="typescript">DB_USER=postgres
DB_PASSWORD=secret
DB_HOST=localhost
DB_PORT=5432
DB_URL=postgres://$DB_USER:$DB_PASSWORD@$DB_HOST:$DB_PORT/$DB_NAME
</pre> <span data-as="p">This can be disabled by escaping the <code>$</code> with a backslash.</span> <pre numberoflines="2" language="ini" data-language="typescript">FOO=world
BAR=hello\$FOO
</pre> <pre numberoflines="1" language="typescript" data-language="typescript">process.env.BAR; // =&gt; "hello$FOO"
</pre> <h3 id="dotenv"><span><code>dotenv</code></span></h3> <span data-as="p">Generally speaking, you won’t need <code>dotenv</code> or <code>dotenv-expand</code> anymore, because Bun reads <code>.env</code> files automatically.</span> <h2 id="reading-environment-variables"><span>Reading environment variables</span></h2> <span data-as="p">The current environment variables can be accessed via <code>process.env</code>.</span> <pre numberoflines="1" language="typescript" data-language="typescript">process.env.API_TOKEN; // =&gt; "secret"
</pre> <span data-as="p">Bun also exposes these variables via <code>Bun.env</code> and <code>import.meta.env</code>, which is a simple alias of <code>process.env</code>.</span> <pre numberoflines="2" language="typescript" data-language="typescript">Bun.env.API_TOKEN; // =&gt; "secret"
import.meta.env.API_TOKEN; // =&gt; "secret"
</pre> <span data-as="p">To print all currently-set environment variables to the command line, run <code>bun --print process.env</code>. This is useful for debugging.</span> <pre numberoflines="4" language="shellscript" data-language="typescript">bun --print process.env
BAZ=stuff
FOOBAR=aaaaaa
&lt;lots more lines&gt;
</pre> <h2 id="typescript"><span>TypeScript</span></h2> <span data-as="p">In TypeScript, all properties of <code>process.env</code> are typed as <code>string | undefined</code>.</span> <pre numberoflines="2" language="typescript" data-language="typescript">Bun.env.whatever;
// string | undefined
</pre> <span data-as="p">To get autocompletion and tell TypeScript to treat a variable as a non-optional string, we’ll use <a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-interfaces" target="_blank" rel="noreferrer">interface merging</a>.</span> <pre numberoflines="5" language="typescript" data-language="typescript">declare module "bun" {
  interface Env {
    AWESOME: string;
  }
}
</pre> <span data-as="p">Add this line to any file in your project. It will globally add the <code>AWESOME</code> property to <code>process.env</code> and <code>Bun.env</code>.</span> <pre numberoflines="1" language="typescript" data-language="typescript">process.env.AWESOME; // =&gt; string
</pre> <h2 id="configuring-bun"><span>Configuring Bun</span></h2> <span data-as="p">These environment variables are read by Bun and configure aspects of its behavior.</span> <div data-table-wrapper="true"><div><table>
<thead><tr>
<th>Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>NODE_TLS_REJECT_UNAUTHORIZED</code></td>
<td>
<code>NODE_TLS_REJECT_UNAUTHORIZED=0</code> disables SSL certificate validation. This is useful for testing and debugging, but you should be very hesitant to use this in production. Note: This environment variable was originally introduced by Node.js and we kept the name for compatibility.</td>
</tr>
<tr>
<td><code>BUN_CONFIG_VERBOSE_FETCH</code></td>
<td>If <code>BUN_CONFIG_VERBOSE_FETCH=curl</code>, then fetch requests will log the url, method, request headers and response headers to the console. This is useful for debugging network requests. This also works with <code>node:http</code>. <code>BUN_CONFIG_VERBOSE_FETCH=1</code> is equivalent to <code>BUN_CONFIG_VERBOSE_FETCH=curl</code> except without the <code>curl</code> output.</td>
</tr>
<tr>
<td><code>BUN_RUNTIME_TRANSPILER_CACHE_PATH</code></td>
<td>The runtime transpiler caches the transpiled output of source files larger than 50 kb. This makes CLIs using Bun load faster. If <code>BUN_RUNTIME_TRANSPILER_CACHE_PATH</code> is set, then the runtime transpiler will cache transpiled output to the specified directory. If <code>BUN_RUNTIME_TRANSPILER_CACHE_PATH</code> is set to an empty string or the string <code>"0"</code>, then the runtime transpiler will not cache transpiled output. If <code>BUN_RUNTIME_TRANSPILER_CACHE_PATH</code> is unset, then the runtime transpiler will cache transpiled output to the platform-specific cache directory.</td>
</tr>
<tr>
<td><code>TMPDIR</code></td>
<td>Bun occasionally requires a directory to store intermediate assets during bundling or other operations. If unset, defaults to the platform-specific temporary directory: <code>/tmp</code> on Linux, <code>/private/tmp</code> on macOS.</td>
</tr>
<tr>
<td><code>NO_COLOR</code></td>
<td>If <code>NO_COLOR=1</code>, then ANSI color output is <a href="https://no-color.org/" target="_blank" rel="noreferrer">disabled</a>.</td>
</tr>
<tr>
<td><code>FORCE_COLOR</code></td>
<td>If <code>FORCE_COLOR=1</code>, then ANSI color output is force enabled, even if <code>NO_COLOR</code> is set.</td>
</tr>
<tr>
<td><code>BUN_CONFIG_MAX_HTTP_REQUESTS</code></td>
<td>Control the maximum number of concurrent HTTP requests sent by fetch and <code>bun install</code>. Defaults to <code>256</code>. If you are running into rate limits or connection issues, you can reduce this number.</td>
</tr>
<tr>
<td><code>BUN_CONFIG_NO_CLEAR_TERMINAL_ON_RELOAD</code></td>
<td>If <code>BUN_CONFIG_NO_CLEAR_TERMINAL_ON_RELOAD=true</code>, then <code>bun --watch</code> will not clear the console on reload</td>
</tr>
<tr>
<td><code>DO_NOT_TRACK</code></td>
<td>Disable uploading crash reports to <code>bun.report</code> on crash. On macOS &amp; Windows, crash report uploads are enabled by default. Otherwise, telemetry is not sent yet as of May 21st, 2024, but we are planning to add telemetry in the coming weeks. If <code>DO_NOT_TRACK=1</code>, then auto-uploading crash reports and telemetry are both <a href="https://do-not-track.dev/" target="_blank" rel="noreferrer">disabled</a>.</td>
</tr>
<tr>
<td><code>BUN_OPTIONS</code></td>
<td>Prepends command-line arguments to any Bun execution. For example, <code>BUN_OPTIONS="--hot"</code> makes <code>bun run dev</code> behave like <code>bun --hot run dev</code>
</td>
</tr>
</tbody>
</table></div></div> <h2 id="runtime-transpiler-caching"><span>Runtime transpiler caching</span></h2> <span data-as="p">For files larger than 50 KB, Bun caches transpiled output into <code>$BUN_RUNTIME_TRANSPILER_CACHE_PATH</code> or the platform-specific cache directory. This makes CLIs using Bun load faster.</span> <span data-as="p">This transpiler cache is global and shared across all projects. It is safe to delete the cache at any time. It is a content-addressable cache, so it will never contain duplicate entries. It is also safe to delete the cache while a Bun process is running.</span> <span data-as="p">It is recommended to disable this cache when using ephemeral filesystems like Docker. Bun’s Docker images automatically disable this cache.</span> <h3 id="disable-the-runtime-transpiler-cache"><span>Disable the runtime transpiler cache</span></h3> <span data-as="p">To disable the runtime transpiler cache, set <code>BUN_RUNTIME_TRANSPILER_CACHE_PATH</code> to an empty string or the string <code>"0"</code>.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">BUN_RUNTIME_TRANSPILER_CACHE_PATH=0 bun run dev
</pre> <h3 id="what-does-it-cache"><span>What does it cache?</span></h3> <span data-as="p">It caches:</span> <ul> <li>The transpiled output of source files larger than 50 KB.</li> <li>The sourcemap for the transpiled output of the file</li> </ul> <span data-as="p">The file extension <code>.pile</code> is used for these cached files.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/runtime/environment-variables" class="_attribution-link">https://bun.com/docs/runtime/environment-variables</a>
  </p>
</div>
