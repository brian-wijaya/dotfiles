<h1 id="header">Proxy HTTP requests using fetch()</h1>
<div data-page-title="Proxy HTTP requests using fetch()" data-page-href="/guides/http/proxy" id="content">
<span data-as="p">In Bun, <code>fetch</code> supports sending requests through an HTTP or HTTPS proxy. This is useful on corporate networks or when you need to ensure a request is sent through a specific IP address.</span> <pre numberoflines="4" language="typescript" data-language="typescript">await fetch("https://example.com", {
  // The URL of the proxy server
  proxy: "https://username:password@proxy.example.com:8080",
});
</pre> <hr> <span data-as="p">The <code>proxy</code> option can be a URL string or an object with <code>url</code> and optional <code>headers</code>. The URL can include the username and password if the proxy requires authentication. It can be <code>http://</code> or <code>https://</code>.</span> <hr> <h2 id="custom-proxy-headers"><span>Custom proxy headers</span></h2> <span data-as="p">To send custom headers to the proxy server (useful for proxy authentication tokens, custom routing, etc.), use the object format:</span> <pre numberoflines="9" language="typescript" data-language="typescript">await fetch("https://example.com", {
  proxy: {
    url: "https://proxy.example.com:8080",
    headers: {
      "Proxy-Authorization": "Bearer my-token",
      "X-Proxy-Region": "us-east-1",
    },
  },
});
</pre> <span data-as="p">The <code>headers</code> property accepts a plain object or a <code>Headers</code> instance. These headers are sent directly to the proxy server in <code>CONNECT</code> requests (for HTTPS targets) or in the proxy request (for HTTP targets).</span> <span data-as="p">If you provide a <code>Proxy-Authorization</code> header, it will override any credentials specified in the proxy URL.</span> <hr> <h2 id="environment-variables"><span>Environment variables</span></h2> <span data-as="p">You can also set the <code>$HTTP_PROXY</code> or <code>$HTTPS_PROXY</code> environment variable to the proxy URL. This is useful when you want to use the same proxy for all requests.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">HTTPS_PROXY=https://username:password@proxy.example.com:8080 bun run index.ts
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/http/proxy" class="_attribution-link">https://bun.com/docs/guides/http/proxy</a>
  </p>
</div>
