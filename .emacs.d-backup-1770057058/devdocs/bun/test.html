<h1 id="header">Test runner</h1>
<div data-page-title="Test runner" data-page-href="/test/index" id="content">
<span data-as="p">Bun ships with a fast, built-in, Jest-compatible test runner. Tests are executed with the Bun runtime, and support the following features.</span> <ul> <li>TypeScript and JSX</li> <li>Lifecycle hooks</li> <li>Snapshot testing</li> <li>UI &amp; DOM testing</li> <li>Watch mode with <code>--watch</code>
</li> <li>Script pre-loading with <code>--preload</code>
</li> </ul> <div data-callout-type="note">

<div data-component-part="callout-content"><span data-as="p">Bun aims for compatibility with Jest, but not everything is implemented. To track compatibility, see <a href="https://github.com/oven-sh/bun/issues/1825" target="_blank" rel="noreferrer">this tracking issue</a>.</span></div>
</div> <h2 id="run-tests"><span>Run tests</span></h2> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test
</pre> <span data-as="p">Tests are written in JavaScript or TypeScript with a Jest-like API. Refer to <a href="test/writing-tests">Writing tests</a> for full documentation.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { expect, test } from "bun:test";

test("2 + 2", () =&gt; {
  expect(2 + 2).toBe(4);
});
</pre> <span data-as="p">The runner recursively searches the working directory for files that match the following patterns:</span> <ul> <li><code>*.test.{js|jsx|ts|tsx}</code></li> <li><code>*_test.{js|jsx|ts|tsx}</code></li> <li><code>*.spec.{js|jsx|ts|tsx}</code></li> <li><code>*_spec.{js|jsx|ts|tsx}</code></li> </ul> <span data-as="p">You can filter the set of <em>test files</em> to run by passing additional positional arguments to <code>bun test</code>. Any test file with a path that matches one of the filters will run. Commonly, these filters will be file or directory names; glob patterns are not yet supported.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test &lt;filter&gt; &lt;filter&gt; ...
</pre> <span data-as="p">To filter by <em>test name</em>, use the <code>-t</code>/<code>--test-name-pattern</code> flag.</span> <pre numberoflines="2" language="shellscript" data-language="typescript"># run all tests or test suites with "addition" in the name
bun test --test-name-pattern addition
</pre> <span data-as="p">To run a specific file in the test runner, make sure the path starts with <code>./</code> or <code>/</code> to distinguish it from a filter name.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test ./test/specific-file.test.ts
</pre> <span data-as="p">The test runner runs all tests in a single process. It loads all <code>--preload</code> scripts (see <a href="test/lifecycle">Lifecycle</a> for details), then runs all tests. If a test fails, the test runner will exit with a non-zero exit code.</span> <h2 id="ci/cd-integration"><span>CI/CD integration</span></h2> <span data-as="p"><code>bun test</code> supports a variety of CI/CD integrations.</span> <h3 id="github-actions"><span>GitHub Actions</span></h3> <span data-as="p"><code>bun test</code> automatically detects if it’s running inside GitHub Actions and will emit GitHub Actions annotations to the console directly.</span> <span data-as="p">No configuration is needed, other than installing <code>bun</code> in the workflow and running <code>bun test</code>.</span> <h4 id="how-to-install-bun-in-a-github-actions-workflow"><span>How to install <code>bun</code> in a GitHub Actions workflow</span></h4> <span data-as="p">To use <code>bun test</code> in a GitHub Actions workflow, add the following step:</span> <pre numberoflines="13" language="yaml" data-language="typescript">jobs:
  build:
    name: build-app
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install bun
        uses: oven-sh/setup-bun@v2
      - name: Install dependencies # (assuming your project has dependencies)
        run: bun install # You can use npm/yarn/pnpm instead if you prefer
      - name: Run tests
        run: bun test
</pre> <span data-as="p">From there, you’ll get GitHub Actions annotations.</span> <h3 id="junit-xml-reports-gitlab,-etc"><span>JUnit XML reports (GitLab, etc.)</span></h3> <span data-as="p">To use <code>bun test</code> with a JUnit XML reporter, you can use the <code>--reporter=junit</code> in combination with <code>--reporter-outfile</code>.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --reporter=junit --reporter-outfile=./bun.xml
</pre> <span data-as="p">This will continue to output to stdout/stderr as usual, and also write a JUnit XML report to the given path at the very end of the test run.</span> <span data-as="p">JUnit XML is a popular format for reporting test results in CI/CD pipelines.</span> <h2 id="timeouts"><span>Timeouts</span></h2> <span data-as="p">Use the <code>--timeout</code> flag to specify a <em>per-test</em> timeout in milliseconds. If a test times out, it will be marked as failed. The default value is <code>5000</code>.</span> <pre numberoflines="2" language="shellscript" data-language="typescript"># default value is 5000
bun test --timeout 20
</pre> <h2 id="concurrent-test-execution"><span>Concurrent test execution</span></h2> <span data-as="p">By default, Bun runs all tests sequentially within each test file. You can enable concurrent execution to run async tests in parallel, significantly speeding up test suites with independent tests.</span> <h3 id="concurrent-flag"><span><code>--concurrent</code> flag</span></h3> <span data-as="p">Use the <code>--concurrent</code> flag to run all tests concurrently within their respective files:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --concurrent
</pre> <span data-as="p">When this flag is enabled, all tests will run in parallel unless explicitly marked with <code>test.serial</code>.</span> <h3 id="max-concurrency-flag"><span><code>--max-concurrency</code> flag</span></h3> <span data-as="p">Control the maximum number of tests running simultaneously with the <code>--max-concurrency</code> flag:</span> <pre numberoflines="5" language="shellscript" data-language="typescript"># Limit to 4 concurrent tests
bun test --concurrent --max-concurrency 4

# Default: 20
bun test --concurrent
</pre> <span data-as="p">This helps prevent resource exhaustion when running many concurrent tests. The default value is 20.</span> <h3 id="test-concurrent"><span><code>test.concurrent</code></span></h3> <span data-as="p">Mark individual tests to run concurrently, even when the <code>--concurrent</code> flag is not used:</span> <pre numberoflines="17" language="typescript" data-language="typescript">import { test, expect } from "bun:test";

// These tests run in parallel with each other
test.concurrent("concurrent test 1", async () =&gt; {
  await fetch("/api/endpoint1");
  expect(true).toBe(true);
});

test.concurrent("concurrent test 2", async () =&gt; {
  await fetch("/api/endpoint2");
  expect(true).toBe(true);
});

// This test runs sequentially
test("sequential test", () =&gt; {
  expect(1 + 1).toBe(2);
});
</pre> <h3 id="test-serial"><span><code>test.serial</code></span></h3> <span data-as="p">Force tests to run sequentially, even when the <code>--concurrent</code> flag is enabled:</span> <pre numberoflines="25" language="typescript" data-language="typescript">import { test, expect } from "bun:test";

let sharedState = 0;

// These tests must run in order
test.serial("first serial test", () =&gt; {
  sharedState = 1;
  expect(sharedState).toBe(1);
});

test.serial("second serial test", () =&gt; {
  // Depends on the previous test
  expect(sharedState).toBe(1);
  sharedState = 2;
});

// This test can run concurrently if --concurrent is enabled
test("independent test", () =&gt; {
  expect(true).toBe(true);
});

// Chaining test qualifiers
test.failing.each([1, 2, 3])("chained qualifiers %d", input =&gt; {
  expect(input).toBe(0); // This test is expected to fail for each input
});
</pre> <h2 id="rerun-tests"><span>Rerun tests</span></h2> <span data-as="p">Use the <code>--rerun-each</code> flag to run each test multiple times. This is useful for detecting flaky or non-deterministic test failures.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --rerun-each 100
</pre> <h2 id="randomize-test-execution-order"><span>Randomize test execution order</span></h2> <span data-as="p">Use the <code>--randomize</code> flag to run tests in a random order. This helps detect tests that depend on shared state or execution order.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --randomize
</pre> <span data-as="p">When using <code>--randomize</code>, the seed used for randomization will be displayed in the test summary:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --randomize
</pre> <pre numberoflines="6" language="text" data-language="typescript"># ... test output ...
 --seed=12345
 2 pass
 8 fail
Ran 10 tests across 2 files. [50.00ms]
</pre> <h3 id="reproducible-random-order-with-seed"><span>Reproducible random order with <code>--seed</code></span></h3> <span data-as="p">Use the <code>--seed</code> flag to specify a seed for the randomization. This allows you to reproduce the same test order when debugging order-dependent failures.</span> <pre numberoflines="2" language="shellscript" data-language="typescript"># Reproduce a previous randomized run
bun test --seed 123456
</pre> <span data-as="p">The <code>--seed</code> flag implies <code>--randomize</code>, so you don’t need to specify both. Using the same seed value will always produce the same test execution order, making it easier to debug intermittent failures caused by test interdependencies.</span> <h2 id="bail-out-with-bail"><span>Bail out with <code>--bail</code></span></h2> <span data-as="p">Use the <code>--bail</code> flag to abort the test run early after a pre-determined number of test failures. By default Bun will run all tests and report all failures, but sometimes in CI environments it’s preferable to terminate earlier to reduce CPU usage.</span> <pre numberoflines="5" language="shellscript" data-language="typescript"># bail after 1 failure
bun test --bail

# bail after 10 failure
bun test --bail=10
</pre> <h2 id="watch-mode"><span>Watch mode</span></h2> <span data-as="p">Similar to <code>bun run</code>, you can pass the <code>--watch</code> flag to <code>bun test</code> to watch for changes and re-run tests.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --watch
</pre> <h2 id="lifecycle-hooks"><span>Lifecycle hooks</span></h2> <span data-as="p">Bun supports the following lifecycle hooks:</span> <div data-table-wrapper="true"><div><table>
<thead><tr>
<th>Hook</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>beforeAll</code></td>
<td>Runs once before all tests.</td>
</tr>
<tr>
<td><code>beforeEach</code></td>
<td>Runs before each test.</td>
</tr>
<tr>
<td><code>afterEach</code></td>
<td>Runs after each test.</td>
</tr>
<tr>
<td><code>afterAll</code></td>
<td>Runs once after all tests.</td>
</tr>
</tbody>
</table></div></div> <span data-as="p">These hooks can be defined inside test files, or in a separate file that is preloaded with the <code>--preload</code> flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --preload ./setup.ts
</pre> <span data-as="p">See <a href="test/lifecycle">Test &gt; Lifecycle</a> for complete documentation.</span> <h2 id="mocks"><span>Mocks</span></h2> <span data-as="p">Create mock functions with the <code>mock</code> function.</span> <pre numberoflines="9" language="typescript" data-language="typescript">import { test, expect, mock } from "bun:test";
const random = mock(() =&gt; Math.random());

test("random", () =&gt; {
  const val = random();
  expect(val).toBeGreaterThan(0);
  expect(random).toHaveBeenCalled();
  expect(random).toHaveBeenCalledTimes(1);
});
</pre> <span data-as="p">Alternatively, you can use <code>jest.fn()</code>, it behaves identically.</span> <pre numberoflines="5" language="typescript" data-language="typescript">import { test, expect, mock } from "bun:test"; 
import { test, expect, jest } from "bun:test"; 

const random = mock(() =&gt; Math.random()); 
const random = jest.fn(() =&gt; Math.random()); 
</pre> <span data-as="p">See <a href="test/mocks">Test &gt; Mocks</a> for complete documentation.</span> <h2 id="snapshot-testing"><span>Snapshot testing</span></h2> <span data-as="p">Snapshots are supported by <code>bun test</code>.</span> <pre numberoflines="6" language="typescript" data-language="typescript">// example usage of toMatchSnapshot
import { test, expect } from "bun:test";

test("snapshot", () =&gt; {
  expect({ a: 1 }).toMatchSnapshot();
});
</pre> <span data-as="p">To update snapshots, use the <code>--update-snapshots</code> flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --update-snapshots
</pre> <span data-as="p">See <a href="test/snapshots">Test &gt; Snapshots</a> for complete documentation.</span> <h2 id="ui-&amp;-dom-testing"><span>UI &amp; DOM testing</span></h2> <span data-as="p">Bun is compatible with popular UI testing libraries:</span> <ul> <li><a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noreferrer">HappyDOM</a></li> <li><a href="https://testing-library.com/docs/dom-testing-library/intro/" target="_blank" rel="noreferrer">DOM Testing Library</a></li> <li><a href="https://testing-library.com/docs/react-testing-library/intro" target="_blank" rel="noreferrer">React Testing Library</a></li> </ul> <span data-as="p">See <a href="test/dom">Test &gt; DOM Testing</a> for complete documentation.</span> <h2 id="performance"><span>Performance</span></h2> <span data-as="p">Bun’s test runner is fast.</span>  <h2 id="ai-agent-integration"><span>AI Agent Integration</span></h2> <span data-as="p">When using Bun’s test runner with AI coding assistants, you can enable quieter output to improve readability and reduce context noise. This feature minimizes test output verbosity while preserving essential failure information.</span> <h3 id="environment-variables"><span>Environment Variables</span></h3> <span data-as="p">Set any of the following environment variables to enable AI-friendly output:</span> <ul> <li>
<code>CLAUDECODE=1</code> - For Claude Code</li> <li>
<code>REPL_ID=1</code> - For Replit</li> <li>
<code>AGENT=1</code> - Generic AI agent flag</li> </ul> <h3 id="behavior"><span>Behavior</span></h3> <span data-as="p">When an AI agent environment is detected:</span> <ul> <li>Only test failures are displayed in detail</li> <li>Passing, skipped, and todo test indicators are hidden</li> <li>Summary statistics remain intact</li> </ul> <pre numberoflines="4" language="shellscript" data-language="typescript"># Example: Enable quiet output for Claude Code
CLAUDECODE=1 bun test

# Still shows failures and summary, but hides verbose passing test output
</pre> <span data-as="p">This feature is particularly useful in AI-assisted development workflows where reduced output verbosity improves context efficiency while maintaining visibility into test failures.</span> <hr> <h1 id="cli-usage"><span>CLI Usage</span></h1> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test &lt;patterns&gt;
</pre> <h3 id="execution-control"><span>Execution Control</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-timeout">--timeoutnumberdefault:"5000"</code><div data-component-part="field-content"><span data-as="p">Set the per-test timeout in milliseconds (default 5000)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-rerun-each">--rerun-eachnumber</code><div data-component-part="field-content"><span data-as="p">Re-run each test file <code>NUMBER</code> times, helps catch certain bugs</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-concurrent">--concurrentboolean</code><div data-component-part="field-content"><span data-as="p">Treat all tests as <code>test.concurrent()</code> tests</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-randomize">--randomizeboolean</code><div data-component-part="field-content"><span data-as="p">Run tests in random order</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-seed">--seednumber</code><div data-component-part="field-content"><span data-as="p">Set the random seed for test randomization</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-bail">--bailnumberdefault:"1"</code><div data-component-part="field-content"><span data-as="p">Exit the test suite after <code>NUMBER</code> failures. If you do not specify a number, it defaults to 1.</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-max-concurrency">--max-concurrencynumberdefault:"20"</code><div data-component-part="field-content"><span data-as="p">Maximum number of concurrent tests to execute at once (default 20)</span></div>
</div> <h3 id="test-filtering"><span>Test Filtering</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-todo">--todoboolean</code><div data-component-part="field-content"><span data-as="p">Include tests that are marked with <code>test.todo()</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-test-name-pattern">--test-name-patternstring</code><div data-component-part="field-content"><span data-as="p">Run only tests with a name that matches the given regex. Alias: <code>-t</code></span></div>
</div> <h3 id="reporting"><span>Reporting</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-reporter">--reporterstring</code><div data-component-part="field-content"><span data-as="p">Test output reporter format. Available: <code>junit</code> (requires —reporter-outfile), <code>dots</code>. Default: console output.</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-reporter-outfile">--reporter-outfilestring</code><div data-component-part="field-content"><span data-as="p">Output file path for the reporter format (required with —reporter)</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-dots">--dotsboolean</code><div data-component-part="field-content"><span data-as="p">Enable dots reporter. Shorthand for —reporter=dots</span></div>
</div> <h3 id="coverage"><span>Coverage</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-coverage">--coverageboolean</code><div data-component-part="field-content"><span data-as="p">Generate a coverage profile</span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-coverage-reporter">--coverage-reporterstringdefault:"text"</code><div data-component-part="field-content"><span data-as="p">Report coverage in <code>text</code> and/or <code>lcov</code>. Defaults to <code>text</code></span></div>
</div> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-coverage-dir">--coverage-dirstringdefault:"coverage"</code><div data-component-part="field-content"><span data-as="p">Directory for coverage files. Defaults to <code>coverage</code></span></div>
</div> <h3 id="snapshots"><span>Snapshots</span></h3> <div>
<code class="flex font-mono text-sm group/param-head param-head break-all relative" id="param-update-snapshots">--update-snapshotsboolean</code><div data-component-part="field-content"><span data-as="p">Update snapshot files. Alias: <code>-u</code></span></div>
</div> <h2 id="examples"><span>Examples</span></h2> <span data-as="p">Run all test files:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test
</pre> <span data-as="p">Run all test files with “foo” or “bar” in the file name:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test foo bar
</pre> <span data-as="p">Run all test files, only including tests whose names includes “baz”:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --test-name-pattern baz
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/test" class="_attribution-link">https://bun.com/docs/test</a>
  </p>
</div>
