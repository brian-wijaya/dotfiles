<h1 id="header">Migrate from Jest to Bun's test runner</h1>
<div data-page-title="Migrate from Jest to Bun's test runner" data-page-href="/guides/test/migrate-from-jest" id="content">
<span data-as="p">In many cases, Bun’s test runner can run Jest test suites with no code changes. Just run <code>bun test</code> instead of <code>npx jest</code>, <code>yarn test</code>, etc.</span> <pre numberoflines="3" language="shellscript" data-language="typescript">npx jest
yarn test
bun test
</pre> <hr> <span data-as="p">There’s often no need for code changes.</span> <ul> <li>Bun internally re-writes imports from <code>@jest/globals</code> to use the <code>bun:test</code> equivalents.</li> <li>If you’re relying on Jest to inject <code>test</code>, <code>expect</code>, etc. as globals, Bun does that too.</li> </ul> <span data-as="p">But if you’d rather switch to the <code>bun:test</code> imports, you can do that too.</span> <pre numberoflines="2" language="typescript" data-language="typescript">import { test, expect } from "@jest/globals"; 
import { test, expect } from "bun:test"; 
</pre> <hr> <span data-as="p">Since Bun v1.2.19, you can enable <strong>TypeScript support</strong> for global test functions with a single triple-slash directive. This makes migrating from Jest even easier since you only need to add the directive once in your entire project:</span> <span data-as="p">Add this directive to <em>just one file</em> in your project, such as:</span> <ul> <li>A <code>global.d.ts</code> file in your project root</li> <li>Your test <code>preload.ts</code> setup file (if using <code>preload</code> in bunfig.toml)</li> <li>Any single <code>.ts</code> file that TypeScript includes in your compilation</li> </ul> <pre numberoflines="1" language="typescript" data-language="typescript">/// &lt;reference types="bun-types/test-globals" /&gt;
</pre> <hr> <span data-as="p">Once added, all test files in your project automatically get TypeScript support for Jest globals:</span> <pre numberoflines="13" language="typescript" data-language="typescript">describe("my test suite", () =&gt; {
  test("should work", () =&gt; {
    expect(1 + 1).toBe(2);
  });

  beforeAll(() =&gt; {
    // setup code
  });

  afterEach(() =&gt; {
    // cleanup code
  });
});
</pre> <hr> <span data-as="p">Bun implements the vast majority of Jest’s matchers, but compatibility isn’t 100% yet. Refer to the full compatibility table at <a href="../../test/writing-tests#matchers">Docs &gt; Test runner &gt; Writing tests</a>.</span> <span data-as="p">Some notable missing features:</span> <ul> <li><code>expect().toHaveReturned()</code></li> </ul> <hr> <span data-as="p">If you’re using <code>testEnvironment: "jsdom"</code> to run your tests in a browser-like environment, you should follow the <a href="happy-dom">DOM testing with Bun and happy-dom</a> guide to inject browser APIs into the global scope. This guide relies on <a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noreferrer"><code>happy-dom</code></a>, which is a leaner and faster alternative to <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noreferrer"><code>jsdom</code></a>.</span> <span data-as="p">At the moment jsdom does not work in Bun due to its internal use of V8 APIs. Track support for it <a href="https://github.com/oven-sh/bun/issues/3554" target="_blank" rel="noreferrer">here</a>.</span> <pre numberoflines="2" language="toml" data-language="typescript">[test]
preload = ["./happy-dom.ts"]
</pre> <hr> <span data-as="p">Replace <code>bail</code> in your Jest config with the <code>--bail</code> CLI flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --bail=3
</pre> <hr> <span data-as="p">Replace <code>collectCoverage</code> with the <code>--coverage</code> CLI flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --coverage
</pre> <hr> <span data-as="p">Replace <code>testTimeout</code> with the <code>--test-timeout</code> CLI flag.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun test --timeout 10000
</pre> <hr> <span data-as="p">Many other flags become irrelevant or obsolete when using <code>bun test</code>.</span> <ul> <li>
<code>transform</code> — Bun supports TypeScript &amp; JSX. Other file types can be configured with <a href="../../runtime/plugins">Plugins</a>.</li> <li><code>extensionsToTreatAsEsm</code></li> <li>
<code>haste</code> — Bun uses it’s own internal source maps</li> <li>
<code>watchman</code>, <code>watchPlugins</code>, <code>watchPathIgnorePatterns</code> — use <code>--watch</code> to run tests in watch mode</li> <li>
<code>verbose</code> — set <code>logLevel: "debug"</code> in <a href="../../runtime/bunfig#loglevel"><code>bunfig.toml</code></a>
</li> </ul> <hr> <span data-as="p">Settings that aren’t mentioned here are not supported or have no equivalent. Please <a href="https://github.com/oven-sh/bun" target="_blank" rel="noreferrer">file a feature request</a> if something important is missing.</span> <hr> <span data-as="p">See also:</span> <ul> <li><a href="todo-tests">Mark a test as a todo</a></li> <li><a href="../../test/writing-tests">Docs &gt; Test runner &gt; Writing tests</a></li> </ul>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/test/migrate-from-jest" class="_attribution-link">https://bun.com/docs/guides/test/migrate-from-jest</a>
  </p>
</div>
