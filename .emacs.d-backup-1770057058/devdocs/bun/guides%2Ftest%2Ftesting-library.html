<h1 id="header">Using Testing Library with Bun</h1>
<div data-page-title="Using Testing Library with Bun" data-page-href="/guides/test/testing-library" id="content">
<span data-as="p">You can use <a href="https://testing-library.com/" target="_blank" rel="noreferrer">Testing Library</a> with Bun’s test runner.</span> <hr> <span data-as="p">As a prerequisite to using Testing Library you will need to install <a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noreferrer">Happy Dom</a>. (<a href="happy-dom">see Bun’s Happy DOM guide for more information</a>).</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun add -D @happy-dom/global-registrator
</pre> <hr> <span data-as="p">Next you should install the Testing Library packages you are planning on using. For example, if you are setting up testing for React your installs may look like this. You will also need to install <code>@testing-library/jest-dom</code> to get matchers working later.</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun add -D @testing-library/react @testing-library/dom @testing-library/jest-dom
</pre> <hr> <span data-as="p">Next you will need to create a preload script for Happy DOM and for Testing Library. For more details about the Happy DOM setup script see <a href="happy-dom">Bun’s Happy DOM guide</a>.</span> <pre numberoflines="3" language="typescript" data-language="typescript">import { GlobalRegistrator } from "@happy-dom/global-registrator";

GlobalRegistrator.register();
</pre> <hr> <span data-as="p">For Testing Library, you will want to extend Bun’s <code>expect</code> function with Testing Library’s matchers. Optionally, to better match the behavior of test-runners like Jest, you may want to run cleanup after each test.</span> <pre numberoflines="10" language="typescript" data-language="typescript">import { afterEach, expect } from "bun:test";
import { cleanup } from "@testing-library/react";
import * as matchers from "@testing-library/jest-dom/matchers";

expect.extend(matchers);

// Optional: cleans up `render` after each test
afterEach(() =&gt; {
  cleanup();
});
</pre> <hr> <span data-as="p">Next, add these preload scripts to your <code>bunfig.toml</code> (you can also have everything in a single <code>preload.ts</code> script if you prefer).</span> <pre numberoflines="2" language="toml" data-language="typescript">[test]
preload = ["./happydom.ts", "./testing-library.ts"]
</pre> <hr> <span data-as="p">If you are using TypeScript you will also need to make use of declaration merging in order to get the new matcher types to show up in your editor. To do this, create a type declaration file that extends <code>Matchers</code> like this.</span> <pre numberoflines="7" language="typescript" data-language="typescript">import { TestingLibraryMatchers } from "@testing-library/jest-dom/matchers";
import { Matchers, AsymmetricMatchers } from "bun:test";

declare module "bun:test" {
  interface Matchers&lt;T&gt; extends TestingLibraryMatchers&lt;typeof expect.stringContaining, T&gt; {}
  interface AsymmetricMatchers extends TestingLibraryMatchers {}
}
</pre> <hr> <span data-as="p">You should now be able to use Testing Library in your tests</span> <pre numberoflines="9" language="tsx" data-language="typescript">import { test, expect } from "bun:test";
import { screen, render } from "@testing-library/react";
import { MyComponent } from "./myComponent";

test("Can use Testing Library", () =&gt; {
  render(MyComponent);
  const myComponent = screen.getByTestId("my-component");
  expect(myComponent).toBeInTheDocument();
});
</pre> <hr> <span data-as="p">Refer to the <a href="https://testing-library.com/" target="_blank" rel="noreferrer">Testing Library docs</a>, <a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noreferrer">Happy DOM repo</a> and <a href="../../test/dom">Docs &gt; Test runner &gt; DOM</a> for complete documentation on writing browser tests with Bun.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/test/testing-library" class="_attribution-link">https://bun.com/docs/guides/test/testing-library</a>
  </p>
</div>
