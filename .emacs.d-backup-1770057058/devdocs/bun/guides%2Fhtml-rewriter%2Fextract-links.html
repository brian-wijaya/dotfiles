<h1 id="header">Extract links from a webpage using HTMLRewriter</h1>
<div data-page-title="Extract links from a webpage using HTMLRewriter" data-page-href="/guides/html-rewriter/extract-links" id="content">
<h2 id="extract-links-from-a-webpage"><span>Extract links from a webpage</span></h2> <span data-as="p">Bun’s <a href="../../runtime/html-rewriter">HTMLRewriter</a> API can be used to efficiently extract links from HTML content. It works by chaining together CSS selectors to match the elements, text, and attributes you want to process. This is a simple example of how to extract links from a webpage. You can pass <code>.transform</code> a <code>Response</code>, <code>Blob</code>, or <code>string</code>.</span> <pre numberoflines="20" language="typescript" data-language="typescript">async function extractLinks(url: string) {
  const links = new Set&lt;string&gt;();
  const response = await fetch(url);

  const rewriter = new HTMLRewriter().on("a[href]", {
    element(el) {
      const href = el.getAttribute("href");
      if (href) {
        links.add(href);
      }
    },
  });

  // Wait for the response to be processed
  await rewriter.transform(response).blob();
  console.log([...links]); // ["https://bun.com", "/docs", ...]
}

// Extract all links from the Bun website
await extractLinks("https://bun.com");
</pre> <hr> <h2 id="convert-relative-urls-to-absolute"><span>Convert relative URLs to absolute</span></h2> <span data-as="p">When scraping websites, you often want to convert relative URLs (like <code>/docs</code>) to absolute URLs. Here’s how to handle URL resolution:</span> <pre numberoflines="25" language="typescript" data-language="typescript">async function extractLinksFromURL(url: string) {
  const response = await fetch(url);
  const links = new Set&lt;string&gt;();

  const rewriter = new HTMLRewriter().on("a[href]", {
    element(el) {
      const href = el.getAttribute("href");
      if (href) {
        // Convert relative URLs to absolute
        try { 
          const absoluteURL = new URL(href, url).href; 
          links.add(absoluteURL);
        } catch { 
          links.add(href); 
        } 
      }
    },
  });

  // Wait for the response to be processed
  await rewriter.transform(response).blob();
  return [...links];
}

const websiteLinks = await extractLinksFromURL("https://example.com");
</pre> <hr> <span data-as="p">See <a href="../../runtime/html-rewriter">Docs &gt; API &gt; HTMLRewriter</a> for complete documentation on HTML transformation with Bun.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/html-rewriter/extract-links" class="_attribution-link">https://bun.com/docs/guides/html-rewriter/extract-links</a>
  </p>
</div>
