<h1 id="header">Spy on methods in `bun test`</h1>
<div data-page-title="Spy on methods in `bun test`" data-page-href="/guides/test/spy-on" id="content">
<span data-as="p">Use the <code>spyOn</code> utility to track method calls with Bunâ€™s test runner.</span> <pre numberoflines="10" language="typescript" data-language="typescript">import { test, expect, spyOn } from "bun:test";

const leo = {
  name: "Leonardo",
  sayHi(thing: string) {
    console.log(`Sup I'm ${this.name} and I like ${thing}`);
  },
};

const spy = spyOn(leo, "sayHi");
</pre> <hr> <span data-as="p">Once the spy is created, it can be used to write <code>expect</code> assertions relating to method calls.</span> <pre numberoflines="17" language="typescript" data-language="typescript">import { test, expect, spyOn } from "bun:test";

const leo = {
  name: "Leonardo",
  sayHi(thing: string) {
    console.log(`Sup I'm ${this.name} and I like ${thing}`);
  },
};

const spy = spyOn(leo, "sayHi");

test("turtles", () =&gt; { 
  expect(spy).toHaveBeenCalledTimes(0); 
  leo.sayHi("pizza"); 
  expect(spy).toHaveBeenCalledTimes(1); 
  expect(spy.mock.calls).toEqual([["pizza"]]); 
}); 
</pre> <hr> <span data-as="p">See <a href="../../test/mocks">Docs &gt; Test Runner &gt; Mocks</a> for complete documentation on mocking with the Bun test runner.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/test/spy-on" class="_attribution-link">https://bun.com/docs/guides/test/spy-on</a>
  </p>
</div>
