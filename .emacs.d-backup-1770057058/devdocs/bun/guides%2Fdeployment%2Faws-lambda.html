<h1 id="header">Deploy a Bun application on AWS Lambda</h1>
<div data-page-title="Deploy a Bun application on AWS Lambda" data-page-href="/guides/deployment/aws-lambda" id="content">
<span data-as="p"><a href="https://aws.amazon.com/lambda/" target="_blank" rel="noreferrer">AWS Lambda</a> is a serverless compute service that lets you run code without provisioning or managing servers.</span> <span data-as="p">In this guide, we will deploy a Bun HTTP server to AWS Lambda using a <code>Dockerfile</code>.</span> <div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">Before continuing, make sure you have:</span><ul> <li>A Bun application ready for deployment</li> <li>An <a href="https://aws.amazon.com/" target="_blank" rel="noreferrer">AWS account</a>
</li> <li>
<a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html" target="_blank" rel="noreferrer">AWS CLI</a> installed and configured</li> <li>
<a href="https://docs.docker.com/get-started/get-docker/" target="_blank" rel="noreferrer">Docker</a> installed and added to your <code>PATH</code>
</li> </ul>
</div>
</div> <hr> <div role="list">
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>1</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create a new Dockerfile</p>
<div data-component-part="step-content">
<span data-as="p">Make sure you‚Äôre in the directory containing your project, then create a new <code>Dockerfile</code> in the root of your project. This file contains the instructions to initialize the container, copy your local project files into it, install dependencies, and start the application.</span><pre numberoflines="26" language="docker" data-language="typescript"># Use the official AWS Lambda adapter image to handle the Lambda runtime
FROM public.ecr.aws/awsguru/aws-lambda-adapter:0.9.0 AS aws-lambda-adapter

# Use the official Bun image to run the application
FROM oven/bun:debian AS bun_latest

# Copy the Lambda adapter into the container
COPY --from=aws-lambda-adapter /lambda-adapter /opt/extensions/lambda-adapter

# Set the port to 8080. This is required for the AWS Lambda adapter.
ENV PORT=8080

# Set the work directory to `/var/task`. This is the default work directory for Lambda.
WORKDIR "/var/task"

# Copy the package.json and bun.lock into the container
COPY package.json bun.lock ./

# Install the dependencies
RUN bun install --production --frozen-lockfile

# Copy the rest of the application into the container
COPY . /var/task

# Run the application.
CMD ["bun", "index.ts"]
</pre>
<div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">Make sure that the start command corresponds to your application‚Äôs entry point. This can also be <code>CMD ["bun", "run", "start"]</code> if you have a start script in your <code>package.json</code>.</span><span data-as="p">This image installs dependencies and runs your app with Bun inside a container. If your app doesn‚Äôt have dependencies, you can omit the <code>RUN bun install --production --frozen-lockfile</code> line.</span>
</div>
</div>
<span data-as="p">Create a new <code>.dockerignore</code> file in the root of your project. This file contains the files and directories that should be <em>excluded</em> from the container image, such as <code>node_modules</code>. This makes your builds faster and smaller:</span><pre numberoflines="10" language="docker" data-language="typescript">node_modules
Dockerfile*
.dockerignore
.git
.gitignore
README.md
LICENSE
.vscode
.env
# Any other files or directories you want to exclude
</pre>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>2</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Build the Docker image</p>
<div data-component-part="step-content">
<span data-as="p">Make sure you‚Äôre in the directory containing your <code>Dockerfile</code>, then build the Docker image. In this case, we‚Äôll call the image <code>bun-lambda-demo</code> and tag it as <code>latest</code>.</span><pre numberoflines="2" language="shellscript" data-language="typescript"># cd /path/to/your/app
docker build --provenance=false --platform linux/amd64 -t bun-lambda-demo:latest .
</pre>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>3</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create an ECR repository</p>
<div data-component-part="step-content">
<span data-as="p">To push the image to AWS Lambda, we first need to create an <a href="https://aws.amazon.com/ecr/" target="_blank" rel="noreferrer">ECR repository</a> to push the image to.</span><span data-as="p">By running the following command, we:</span><ul> <li>Create an ECR repository named <code>bun-lambda-demo</code> in the <code>us-east-1</code> region</li> <li>Get the repository URI, and export the repository URI as an environment variable. This is optional, but make the next steps easier.</li> </ul>
<pre numberoflines="2" language="shellscript" data-language="typescript">export ECR_URI=$(aws ecr create-repository --repository-name bun-lambda-demo --region us-east-1 --query 'repository.repositoryUri' --output text)
echo $ECR_URI
</pre>
<pre numberoflines="2" language="text" data-language="typescript">[id].dkr.ecr.us-east-1.amazonaws.com/bun-lambda-demo
</pre>
<div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">If you‚Äôre using IAM Identity Center (SSO) or have configured AWS CLI with profiles, you‚Äôll need to add the <code>--profile</code> flag to your AWS CLI commands.</span><span data-as="p">For example, if your profile is named <code>my-sso-app</code>, use <code>--profile my-sso-app</code>. Check your AWS CLI configuration with <code>aws configure list-profiles</code> to see available profiles.</span><pre numberoflines="2" language="shellscript" data-language="typescript">export ECR_URI=$(aws ecr create-repository --repository-name bun-lambda-demo --region us-east-1 --profile my-sso-app --query 'repository.repositoryUri' --output text)
echo $ECR_URI
</pre>
</div>
</div>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>4</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Authenticate with the ECR repository</p>
<div data-component-part="step-content">
<span data-as="p">Log in to the ECR repository:</span><pre numberoflines="1" language="shellscript" data-language="typescript">aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin $ECR_URI
</pre>
<pre numberoflines="2" language="text" data-language="typescript">Login Succeeded
</pre>
<div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">If using a profile, use the <code>--profile</code> flag:</span><pre numberoflines="1" language="shellscript" data-language="typescript">aws ecr get-login-password --region us-east-1 --profile my-sso-app | docker login --username AWS --password-stdin $ECR_URI
</pre>
</div>
</div>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>5</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Tag and push the docker image to the ECR repository</p>
<div data-component-part="step-content">
<span data-as="p">Make sure you‚Äôre in the directory containing your <code>Dockerfile</code>, then tag the docker image with the ECR repository URI.</span><pre numberoflines="1" language="shellscript" data-language="typescript">docker tag bun-lambda-demo:latest ${ECR_URI}:latest
</pre>
<span data-as="p">Then, push the image to the ECR repository.</span><pre numberoflines="1" language="shellscript" data-language="typescript">docker push ${ECR_URI}:latest
</pre>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>6</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create an AWS Lambda function</p>
<div data-component-part="step-content">
<span data-as="p">Go to <strong>AWS Console</strong> &gt; <strong>Lambda</strong> &gt; <a href="https://us-east-1.console.aws.amazon.com/lambda/home?region=us-east-1#/create/function?intent=authorFromImage" target="_blank" rel="noreferrer"><strong>Create Function</strong></a> &gt; Select <strong>Container image</strong></span><div data-callout-type="warning">

<div data-component-part="callout-content">Make sure you‚Äôve selected the right region, this URL defaults to <code>us-east-1</code>.</div>
</div>

<span data-as="p">Give the function a name, like <code>my-bun-function</code>.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>7</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Select the container image</p>
<div data-component-part="step-content">
<span data-as="p">Then, go to the <strong>Container image URI</strong> section, click on <strong>Browse images</strong>. Select the image we just pushed to the ECR repository.</span>
<span data-as="p">Then, select the <code>latest</code> image, and click on <strong>Select image</strong>.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>8</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Configure the function</p>
<div data-component-part="step-content">
<span data-as="p">To get a public URL for the function, we need to go to <strong>Additional configurations</strong> &gt; <strong>Networking</strong> &gt; <strong>Function URL</strong>.</span><span data-as="p">Set this to <strong>Enable</strong>, with Auth Type <strong>NONE</strong>.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>9</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create the function</p>
<div data-component-part="step-content">
<span data-as="p">Click on <strong>Create function</strong> at the bottom of the page, this will create the function.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>10</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Get the function URL</p>
<div data-component-part="step-content">
<span data-as="p">Once the function has been created you‚Äôll be redirected to the function‚Äôs page, where you can see the function URL in the <strong>‚ÄúFunction URL‚Äù</strong> section.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>11</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Test the function</p>
<div data-component-part="step-content">
<span data-as="p">ü•≥ Your app is now live! To test the function, you can either go to the <strong>Test</strong> tab, or call the function URL directly.</span><pre numberoflines="1" language="shellscript" data-language="typescript">curl -X GET https://[your-function-id].lambda-url.us-east-1.on.aws/
</pre>
<pre numberoflines="2" language="text" data-language="typescript">Hello from Bun on Lambda!
</pre>
</div>
</div>
</div>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/deployment/aws-lambda" class="_attribution-link">https://bun.com/docs/guides/deployment/aws-lambda</a>
  </p>
</div>
