<h1 id="header">Cookies</h1>
<div data-page-title="Cookies" data-page-href="/runtime/cookies" id="content">
<span data-as="p">Bun provides native APIs for working with HTTP cookies through <code>Bun.Cookie</code> and <code>Bun.CookieMap</code>. These APIs offer fast, easy-to-use methods for parsing, generating, and manipulating cookies in HTTP requests and responses.</span> <h2 id="cookiemap-class"><span>CookieMap class</span></h2> <span data-as="p"><code>Bun.CookieMap</code> provides a Map-like interface for working with collections of cookies. It implements the <code>Iterable</code> interface, allowing you to use it with <code>for...of</code> loops and other iteration methods.</span> <pre numberoflines="17" language="typescript" data-language="typescript">// Empty cookie map
const cookies = new Bun.CookieMap();

// From a cookie string
const cookies1 = new Bun.CookieMap("name=value; foo=bar");

// From an object
const cookies2 = new Bun.CookieMap({
  session: "abc123",
  theme: "dark",
});

// From an array of name/value pairs
const cookies3 = new Bun.CookieMap([
  ["session", "abc123"],
  ["theme", "dark"],
]);
</pre> <h3 id="in-http-servers"><span>In HTTP servers</span></h3> <span data-as="p">In Bun’s HTTP server, the <code>cookies</code> property on the request object (in <code>routes</code>) is an instance of <code>CookieMap</code>:</span> <pre numberoflines="26" language="typescript" data-language="typescript">const server = Bun.serve({
  routes: {
    "/": req =&gt; {
      // Access request cookies
      const cookies = req.cookies;

      // Get a specific cookie
      const sessionCookie = cookies.get("session");
      if (sessionCookie != null) {
        console.log(sessionCookie);
      }

      // Check if a cookie exists
      if (cookies.has("theme")) {
        // ...
      }

      // Set a cookie, it will be automatically applied to the response
      cookies.set("visited", "true");

      return new Response("Hello");
    },
  },
});

console.log("Server listening at: " + server.url);
</pre> <h3 id="methods"><span>Methods</span></h3> <h4 id="get-name:-string-:-string-|-null"><span><code>get(name: string): string | null</code></span></h4> <span data-as="p">Retrieves a cookie by name. Returns <code>null</code> if the cookie doesn’t exist.</span> <pre numberoflines="6" language="typescript" data-language="typescript">// Get by name
const cookie = cookies.get("session");

if (cookie != null) {
  console.log(cookie);
}
</pre> <h4 id="has-name:-string-:-boolean"><span><code>has(name: string): boolean</code></span></h4> <span data-as="p">Checks if a cookie with the given name exists.</span> <pre numberoflines="4" language="typescript" data-language="typescript">// Check if cookie exists
if (cookies.has("session")) {
  // Cookie exists
}
</pre> <h4 id="set-name:-string,-value:-string-:-void"><span><code>set(name: string, value: string): void</code></span></h4> <h4 id="set-options:-cookieinit-:-void"><span><code>set(options: CookieInit): void</code></span></h4> <h4 id="set-cookie:-cookie-:-void"><span><code>set(cookie: Cookie): void</code></span></h4> <span data-as="p">Adds or updates a cookie in the map. Cookies default to <code>{ path: "/", sameSite: "lax" }</code>.</span> <pre numberoflines="14" language="typescript" data-language="typescript">// Set by name and value
cookies.set("session", "abc123");

// Set using options object
cookies.set({
  name: "theme",
  value: "dark",
  maxAge: 3600,
  secure: true,
});

// Set using Cookie instance
const cookie = new Bun.Cookie("visited", "true");
cookies.set(cookie);
</pre> <h4 id="delete-name:-string-:-void"><span><code>delete(name: string): void</code></span></h4> <h4 id="delete-options:-cookiestoredeleteoptions-:-void"><span><code>delete(options: CookieStoreDeleteOptions): void</code></span></h4> <span data-as="p">Removes a cookie from the map. When applied to a Response, this adds a cookie with an empty string value and an expiry date in the past. A cookie will only delete successfully on the browser if the domain and path is the same as it was when the cookie was created.</span> <pre numberoflines="9" language="typescript" data-language="typescript">// Delete by name using default domain and path.
cookies.delete("session");

// Delete with domain/path options.
cookies.delete({
  name: "session",
  domain: "example.com",
  path: "/admin",
});
</pre> <h4 id="tojson-:-record&lt;string,-string&gt;"><span><code>toJSON(): Record&lt;string, string&gt;</code></span></h4> <span data-as="p">Converts the cookie map to a serializable format.</span> <pre numberoflines="1" language="typescript" data-language="typescript">const json = cookies.toJSON();
</pre> <h4 id="tosetcookieheaders-:-string[]"><span><code>toSetCookieHeaders(): string[]</code></span></h4> <span data-as="p">Returns an array of values for Set-Cookie headers that can be used to apply all cookie changes.</span> <span data-as="p">When using <code>Bun.serve()</code>, you don’t need to call this method explicitly. Any changes made to the <code>req.cookies</code> map are automatically applied to the response headers. This method is primarily useful when working with other HTTP server implementations.</span> <pre numberoflines="20" language="javascript" data-language="typescript">import { createServer } from "node:http";
import { CookieMap } from "bun";

const server = createServer((req, res) =&gt; {
  const cookieHeader = req.headers.cookie || "";
  const cookies = new CookieMap(cookieHeader);

  cookies.set("view-count", Number(cookies.get("view-count") || "0") + 1);
  cookies.delete("session");

  res.writeHead(200, {
    "Content-Type": "text/plain",
    "Set-Cookie": cookies.toSetCookieHeaders(),
  });
  res.end(`Found ${cookies.size} cookies`);
});

server.listen(3000, () =&gt; {
  console.log("Server running at http://localhost:3000/");
});
</pre> <h3 id="iteration"><span>Iteration</span></h3> <span data-as="p"><code>CookieMap</code> provides several methods for iteration:</span> <pre numberoflines="24" language="typescript" data-language="typescript">// Iterate over [name, cookie] entries
for (const [name, value] of cookies) {
  console.log(`${name}: ${value}`);
}

// Using entries()
for (const [name, value] of cookies.entries()) {
  console.log(`${name}: ${value}`);
}

// Using keys()
for (const name of cookies.keys()) {
  console.log(name);
}

// Using values()
for (const value of cookies.values()) {
  console.log(value);
}

// Using forEach
cookies.forEach((value, name) =&gt; {
  console.log(`${name}: ${value}`);
});
</pre> <h3 id="properties"><span>Properties</span></h3> <h4 id="size:-number"><span><code>size: number</code></span></h4> <span data-as="p">Returns the number of cookies in the map.</span> <pre numberoflines="1" language="typescript" data-language="typescript">console.log(cookies.size); // Number of cookies
</pre> <h2 id="cookie-class"><span>Cookie class</span></h2> <span data-as="p"><code>Bun.Cookie</code> represents an HTTP cookie with its name, value, and attributes.</span> <pre numberoflines="25" language="typescript" data-language="typescript">import { Cookie } from "bun";

// Create a basic cookie
const cookie = new Bun.Cookie("name", "value");

// Create a cookie with options
const secureSessionCookie = new Bun.Cookie("session", "abc123", {
  domain: "example.com",
  path: "/admin",
  expires: new Date(Date.now() + 86400000), // 1 day
  httpOnly: true,
  secure: true,
  sameSite: "strict",
});

// Parse from a cookie string
const parsedCookie = new Bun.Cookie("name=value; Path=/; HttpOnly");

// Create from an options object
const objCookie = new Bun.Cookie({
  name: "theme",
  value: "dark",
  maxAge: 3600,
  secure: true,
});
</pre> <h3 id="constructors"><span>Constructors</span></h3> <pre numberoflines="11" language="typescript" data-language="typescript">// Basic constructor with name/value
new Bun.Cookie(name: string, value: string);

// Constructor with name, value, and options
new Bun.Cookie(name: string, value: string, options: CookieInit);

// Constructor from cookie string
new Bun.Cookie(cookieString: string);

// Constructor from cookie object
new Bun.Cookie(options: CookieInit);
</pre> <h3 id="properties-2"><span>Properties</span></h3> <pre numberoflines="10" language="typescript" data-language="typescript">cookie.name; // string - Cookie name
cookie.value; // string - Cookie value
cookie.domain; // string | null - Domain scope (null if not specified)
cookie.path; // string - URL path scope (defaults to "/")
cookie.expires; // number | undefined - Expiration timestamp (ms since epoch)
cookie.secure; // boolean - Require HTTPS
cookie.sameSite; // "strict" | "lax" | "none" - SameSite setting
cookie.partitioned; // boolean - Whether the cookie is partitioned (CHIPS)
cookie.maxAge; // number | undefined - Max age in seconds
cookie.httpOnly; // boolean - Accessible only via HTTP (not JavaScript)
</pre> <h3 id="methods-2"><span>Methods</span></h3> <h4 id="isexpired-:-boolean"><span><code>isExpired(): boolean</code></span></h4> <span data-as="p">Checks if the cookie has expired.</span> <pre numberoflines="15" language="typescript" data-language="typescript">// Expired cookie (Date in the past)
const expiredCookie = new Bun.Cookie("name", "value", {
  expires: new Date(Date.now() - 1000),
});
console.log(expiredCookie.isExpired()); // true

// Valid cookie (Using maxAge instead of expires)
const validCookie = new Bun.Cookie("name", "value", {
  maxAge: 3600, // 1 hour in seconds
});
console.log(validCookie.isExpired()); // false

// Session cookie (no expiration)
const sessionCookie = new Bun.Cookie("name", "value");
console.log(sessionCookie.isExpired()); // false
</pre> <h4 id="serialize-:-string"><span><code>serialize(): string</code></span></h4> <h4 id="tostring-:-string"><span><code>toString(): string</code></span></h4> <span data-as="p">Returns a string representation of the cookie suitable for a <code>Set-Cookie</code> header.</span> <pre numberoflines="13" language="typescript" data-language="typescript">const cookie = new Bun.Cookie("session", "abc123", {
  domain: "example.com",
  path: "/admin",
  expires: new Date(Date.now() + 86400000),
  secure: true,
  httpOnly: true,
  sameSite: "strict",
});

console.log(cookie.serialize());
// =&gt; "session=abc123; Domain=example.com; Path=/admin; Expires=Sun, 19 Mar 2025 15:03:26 GMT; Secure; HttpOnly; SameSite=strict"
console.log(cookie.toString());
// =&gt; "session=abc123; Domain=example.com; Path=/admin; Expires=Sun, 19 Mar 2025 15:03:26 GMT; Secure; HttpOnly; SameSite=strict"
</pre> <h4 id="tojson-:-cookieinit"><span><code>toJSON(): CookieInit</code></span></h4> <span data-as="p">Converts the cookie to a plain object suitable for JSON serialization.</span> <pre numberoflines="18" language="typescript" data-language="typescript">const cookie = new Bun.Cookie("session", "abc123", {
  secure: true,
  httpOnly: true,
});

const json = cookie.toJSON();
// =&gt; {
//   name: "session",
//   value: "abc123",
//   path: "/",
//   secure: true,
//   httpOnly: true,
//   sameSite: "lax",
//   partitioned: false
// }

// Works with JSON.stringify
const jsonString = JSON.stringify(cookie);
</pre> <h3 id="static-methods"><span>Static methods</span></h3> <h4 id="cookie-parse-cookiestring:-string-:-cookie"><span><code>Cookie.parse(cookieString: string): Cookie</code></span></h4> <span data-as="p">Parses a cookie string into a <code>Cookie</code> instance.</span> <pre numberoflines="7" language="typescript" data-language="typescript">const cookie = Bun.Cookie.parse("name=value; Path=/; Secure; SameSite=Lax");

console.log(cookie.name); // "name"
console.log(cookie.value); // "value"
console.log(cookie.path); // "/"
console.log(cookie.secure); // true
console.log(cookie.sameSite); // "lax"
</pre> <h4 id="cookie-from-name:-string,-value:-string,-options:-cookieinit-:-cookie"><span><code>Cookie.from(name: string, value: string, options?: CookieInit): Cookie</code></span></h4> <span data-as="p">Factory method to create a cookie.</span> <pre numberoflines="5" language="typescript" data-language="typescript">const cookie = Bun.Cookie.from("session", "abc123", {
  httpOnly: true,
  secure: true,
  maxAge: 3600,
});
</pre> <h2 id="types"><span>Types</span></h2> <pre numberoflines="77" language="typescript" data-language="typescript">interface CookieInit {
  name?: string;
  value?: string;
  domain?: string;
  /** Defaults to '/'. To allow the browser to set the path, use an empty string. */
  path?: string;
  expires?: number | Date | string;
  secure?: boolean;
  /** Defaults to `lax`. */
  sameSite?: CookieSameSite;
  httpOnly?: boolean;
  partitioned?: boolean;
  maxAge?: number;
}

interface CookieStoreDeleteOptions {
  name: string;
  domain?: string | null;
  path?: string;
}

interface CookieStoreGetOptions {
  name?: string;
  url?: string;
}

type CookieSameSite = "strict" | "lax" | "none";

class Cookie {
  constructor(name: string, value: string, options?: CookieInit);
  constructor(cookieString: string);
  constructor(cookieObject?: CookieInit);

  readonly name: string;
  value: string;
  domain?: string;
  path: string;
  expires?: Date;
  secure: boolean;
  sameSite: CookieSameSite;
  partitioned: boolean;
  maxAge?: number;
  httpOnly: boolean;

  isExpired(): boolean;

  serialize(): string;
  toString(): string;
  toJSON(): CookieInit;

  static parse(cookieString: string): Cookie;
  static from(name: string, value: string, options?: CookieInit): Cookie;
}

class CookieMap implements Iterable&lt;[string, string]&gt; {
  constructor(init?: string[][] | Record&lt;string, string&gt; | string);

  get(name: string): string | null;

  toSetCookieHeaders(): string[];

  has(name: string): boolean;
  set(name: string, value: string, options?: CookieInit): void;
  set(options: CookieInit): void;
  delete(name: string): void;
  delete(options: CookieStoreDeleteOptions): void;
  delete(name: string, options: Omit&lt;CookieStoreDeleteOptions, "name"&gt;): void;
  toJSON(): Record&lt;string, string&gt;;

  readonly size: number;

  entries(): IterableIterator&lt;[string, string]&gt;;
  keys(): IterableIterator&lt;string&gt;;
  values(): IterableIterator&lt;string&gt;;
  forEach(callback: (value: string, key: string, map: CookieMap) =&gt; void): void;
  [Symbol.iterator](): IterableIterator&lt;[string, string]&gt;;
}
</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/runtime/cookies" class="_attribution-link">https://bun.com/docs/runtime/cookies</a>
  </p>
</div>
