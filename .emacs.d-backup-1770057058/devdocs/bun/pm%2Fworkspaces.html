<h1 id="header">Workspaces</h1>
<div data-page-title="Workspaces" data-page-href="/pm/workspaces" id="content">
<span data-as="p">Bun supports <a href="https://docs.npmjs.com/cli/v9/using-npm/workspaces?v=true#description" target="_blank" rel="noreferrer"><code>workspaces</code></a> in <code>package.json</code>. Workspaces make it easy to develop complex software as a <em>monorepo</em> consisting of several independent packages.</span> <span data-as="p">It’s common for a monorepo to have the following structure:</span> <pre numberoflines="19" language="text" data-language="typescript">&lt;root&gt;
├── README.md
├── bun.lock
├── package.json
├── tsconfig.json
└── packages
    ├── pkg-a
    │   ├── index.ts
    │   ├── package.json
    │   └── tsconfig.json
    ├── pkg-b
    │   ├── index.ts
    │   ├── package.json
    │   └── tsconfig.json
    └── pkg-c
        ├── index.ts
        ├── package.json
        └── tsconfig.json
</pre> <span data-as="p">In the root <code>package.json</code>, the <code>"workspaces"</code> key is used to indicate which subdirectories should be considered packages/workspaces within the monorepo. It’s conventional to place all the workspace in a directory called <code>packages</code>.</span> <pre numberoflines="8" language="json" data-language="typescript">{
  "name": "my-project",
  "version": "1.0.0",
  "workspaces": ["packages/*"],
  "devDependencies": {
    "example-package-in-monorepo": "workspace:*"
  }
}
</pre> <div data-callout-type="note">

<div data-component-part="callout-content"><span data-as="p"><strong>Glob support</strong> — Bun supports full glob syntax in <code>"workspaces"</code>, including negative patterns (e.g. <code>!**/excluded/**</code>). See <a href="../runtime/glob#supported-glob-patterns">here</a> for a comprehensive list of supported syntax.</span></div>
</div> <pre numberoflines="5" language="json" data-language="typescript">{
  "name": "my-project",
  "version": "1.0.0",
  "workspaces": ["packages/**", "!packages/**/test/**", "!packages/**/template/**"]
}
</pre> <span data-as="p">Each workspace has it’s own <code>package.json</code>. When referencing other packages in the monorepo, semver or workspace protocols (e.g. <code>workspace:*</code>) can be used as the version field in your <code>package.json</code>.</span> <pre numberoflines="7" language="json" data-language="typescript">{
  "name": "pkg-a",
  "version": "1.0.0",
  "dependencies": {
    "pkg-b": "workspace:*"
  }
}
</pre> <span data-as="p"><code>bun install</code> will install dependencies for all workspaces in the monorepo, de-duplicating packages if possible. If you only want to install dependencies for specific workspaces, you can use the <code>--filter</code> flag.</span> <pre numberoflines="5" language="shellscript" data-language="typescript"># Install dependencies for all workspaces starting with `pkg-` except for `pkg-c`
bun install --filter "pkg-*" --filter "!pkg-c"

# Paths can also be used. This is equivalent to the command above.
bun install --filter "./packages/pkg-*" --filter "!pkg-c" # or --filter "!./packages/pkg-c"
</pre> <span data-as="p">When publishing, <code>workspace:</code> versions are replaced by the package’s <code>package.json</code> version,</span> <pre numberoflines="4" language="text" data-language="typescript">"workspace:*" -&gt; "1.0.1"
"workspace:^" -&gt; "^1.0.1"
"workspace:~" -&gt; "~1.0.1"
</pre> <span data-as="p">Setting a specific version takes precedence over the package’s <code>package.json</code> version,</span> <pre numberoflines="2" language="text" data-language="typescript">"workspace:1.0.2" -&gt; "1.0.2" // Even if current version is 1.0.1
</pre> <span data-as="p">Workspaces have a couple major benefits.</span> <ul> <li>
<strong>Code can be split into logical parts.</strong> If one package relies on another, you can simply add it as a dependency in <code>package.json</code>. If package <code>b</code> depends on <code>a</code>, <code>bun install</code> will install your local <code>packages/a</code> directory into <code>node_modules</code> instead of downloading it from the npm registry.</li> <li>
<strong>Dependencies can be de-duplicated.</strong> If <code>a</code> and <code>b</code> share a common dependency, it will be <em>hoisted</em> to the root <code>node_modules</code> directory. This reduces redundant disk usage and minimizes “dependency hell” issues associated with having multiple versions of a package installed simultaneously.</li> <li>
<strong>Run scripts in multiple packages.</strong> You can use the <a href="filter"><code>--filter</code> flag</a> to easily run <code>package.json</code> scripts in multiple packages in your workspace, , or <code>--workspaces</code> to run scripts across all workspaces.</li> </ul> <h2 id="share-versions-with-catalogs"><span>Share versions with Catalogs</span></h2> <span data-as="p">When many packages need the same dependency versions, catalogs let you define those versions once in the root <code>package.json</code> and reference them from your workspaces using the <code>catalog:</code> protocol. Updating the catalog automatically updates every package that references it. See <a href="catalogs">Catalogs</a> for details.</span> <div data-callout-type="note">

<div data-component-part="callout-content">
<span data-as="p">⚡️ <strong>Speed</strong> — Installs are fast, even for big monorepos. Bun installs the <a href="https://github.com/remix-run/remix" target="_blank" rel="noreferrer">Remix</a> monorepo in about <code>500ms</code> on Linux.</span><ul> <li>28x faster than <code>npm install</code>
</li> <li>12x faster than <code>yarn install</code> (v1)</li> <li>8x faster than <code>pnpm install</code>
</li> </ul>
</div>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/pm/workspaces" class="_attribution-link">https://bun.com/docs/pm/workspaces</a>
  </p>
</div>
