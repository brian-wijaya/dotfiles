<h1 id="header">Mock functions in `bun test`</h1>
<div data-page-title="Mock functions in `bun test`" data-page-href="/guides/test/mock-functions" id="content">
<span data-as="p">Create mocks with the <code>mock</code> function from <code>bun:test</code>.</span> <pre numberoflines="3" language="typescript" data-language="typescript">import { test, expect, mock } from "bun:test";

const random = mock(() =&gt; Math.random());
</pre> <hr> <span data-as="p">The mock function can accept arguments.</span> <pre numberoflines="3" language="typescript" data-language="typescript">import { test, expect, mock } from "bun:test";

const random = mock((multiplier: number) =&gt; multiplier * Math.random());
</pre> <hr> <span data-as="p">The result of <code>mock()</code> is a new function thatâ€™s been decorated with some additional properties.</span> <pre numberoflines="15" language="typescript" data-language="typescript">import { mock } from "bun:test";

const random = mock((multiplier: number) =&gt; multiplier * Math.random());

random(2);
random(10);

random.mock.calls;
// [[ 2 ], [ 10 ]]

random.mock.results;
//  [
//    { type: "return", value: 0.6533907460954099 },
//    { type: "return", value: 0.6452713933037312 }
//  ]
</pre> <hr> <span data-as="p">These extra properties make it possible to write <code>expect</code> assertions about usage of the mock function, including how many times it was called, the arguments, and the return values.</span> <pre numberoflines="14" language="typescript" data-language="typescript">import { test, expect, mock } from "bun:test";

const random = mock((multiplier: number) =&gt; multiplier * Math.random());

test("random", async () =&gt; {
  const a = random(1);
  const b = random(2);
  const c = random(3);

  expect(random).toHaveBeenCalled();
  expect(random).toHaveBeenCalledTimes(3);
  expect(random.mock.calls).toEqual([[1], [2], [3]]);
  expect(random.mock.results[0]).toEqual({ type: "return", value: a });
});
</pre> <hr> <span data-as="p">See <a href="../../test/mocks">Docs &gt; Test Runner &gt; Mocks</a> for complete documentation on mocking with the Bun test runner.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/test/mock-functions" class="_attribution-link">https://bun.com/docs/guides/test/mock-functions</a>
  </p>
</div>
