<h1 id="header">Bun Redis with Upstash</h1>
<div data-page-title="Bun Redis with Upstash" data-page-href="/guides/ecosystem/upstash" id="content">
<span data-as="p"><a href="https://upstash.com/" target="_blank" rel="noreferrer">Upstash</a> is a fully managed Redis database as a service. Upstash works with the Redis® API, which means you can use Bun’s native Redis client to connect to your Upstash database.</span> <div data-callout-type="note">

<div data-component-part="callout-content">TLS is enabled by default for all Upstash Redis databases.</div>
</div> <hr> <div role="list">
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>1</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create a new project</p>
<div data-component-part="step-content">
<span data-as="p">Create a new project by running <code>bun init</code>:</span><pre numberoflines="2" language="shellscript" data-language="typescript">bun init bun-upstash-redis
cd bun-upstash-redis
</pre>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>2</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Create an Upstash Redis database</p>
<div data-component-part="step-content">
<span data-as="p">Go to the <a href="https://console.upstash.com/" target="_blank" rel="noreferrer">Upstash dashboard</a> and create a new Redis database. After completing the <a href="https://upstash.com/docs/redis/overall/getstarted" target="_blank" rel="noreferrer">getting started guide</a>, you’ll see your database page with connection information.</span><span data-as="p">The database page displays two connection methods; HTTP and TLS. For Bun’s Redis client, you need the <strong>TLS</strong> connection details. This URL starts with <code>rediss://</code>.</span>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>3</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Connect using Bun's Redis client</p>
<div data-component-part="step-content">
<span data-as="p">You can connect to Upstash by setting environment variables with Bun’s default <code>redis</code> client.</span><span data-as="p">Set the <code>REDIS_URL</code> environment variable in your <code>.env</code> file using the Redis endpoint (not the REST URL):</span><pre numberoflines="1" language="ini" data-language="typescript">REDIS_URL=rediss://********@********.upstash.io:6379
</pre>
<span data-as="p">Bun’s Redis client reads connection information from <code>REDIS_URL</code> by default:</span><pre numberoflines="4" language="typescript" data-language="typescript">import { redis } from "bun";

// Reads from process.env.REDIS_URL automatically
await redis.set("counter", "0"); 
</pre>
<span data-as="p">Alternatively, you can create a custom client using <code>RedisClient</code>:</span><pre numberoflines="3" language="typescript" data-language="typescript">import { RedisClient } from "bun";

const redis = new RedisClient(process.env.REDIS_URL); 
</pre>
</div>
</div>
</div>
<div role="listitem">

<div data-component-part="step-number" contenteditable="false"><div>4</div></div>
<div>
<p contenteditable="false" data-component-part="step-title">Use the Redis client</p>
<div data-component-part="step-content">
<span data-as="p">You can now use the Redis client to interact with your Upstash Redis database:</span><pre numberoflines="16" language="typescript" data-language="typescript">import { redis } from "bun";

// Get a value
let counter = await redis.get("counter");

// Set a value if it doesn't exist
if (!counter) {
	await redis.set("counter", "0");
}

// Increment the counter
await redis.incr("counter");

// Get the updated value
counter = await redis.get("counter");
console.log(counter);
</pre>
<pre numberoflines="2" language="text" data-language="typescript">1
</pre>
<span data-as="p">The Redis client automatically handles connections in the background. No need to manually connect or disconnect for basic operations.</span>
</div>
</div>
</div>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/guides/ecosystem/upstash" class="_attribution-link">https://bun.com/docs/guides/ecosystem/upstash</a>
  </p>
</div>
