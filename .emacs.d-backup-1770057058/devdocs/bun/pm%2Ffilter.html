<h1 id="header">bun --filter</h1>
<div data-page-title="bun --filter" data-page-href="/pm/filter" id="content">
<span data-as="p">The <code>--filter</code> (or <code>-F</code>) flag is used for selecting packages by pattern in a monorepo. Patterns can be used to match package names or package paths, with full glob syntax support.</span> <span data-as="p">Currently <code>--filter</code> is supported by <code>bun install</code> and <code>bun outdated</code>, and can also be used to run scripts for multiple packages at once.</span> <hr> <h2 id="matching"><span>Matching</span></h2> <h3 id="package-name-filter-&lt;pattern&gt;"><span>Package Name <code>--filter &lt;pattern&gt;</code></span></h3> <span data-as="p">Name patterns select packages based on the package name, as specified in <code>package.json</code>. For example, if you have packages <code>pkg-a</code>, <code>pkg-b</code> and <code>other</code>, you can match all packages with <code>*</code>, only <code>pkg-a</code> and <code>pkg-b</code> with <code>pkg*</code>, and a specific package by providing the full name of the package.</span> <h3 id="package-path-filter-/&lt;glob&gt;"><span>Package Path <code>--filter ./&lt;glob&gt;</code></span></h3> <span data-as="p">Path patterns are specified by starting the pattern with <code>./</code>, and will select all packages in directories that match the pattern. For example, to match all packages in subdirectories of <code>packages</code>, you can use <code>--filter './packages/**'</code>. To match a package located in <code>packages/foo</code>, use <code>--filter ./packages/foo</code>.</span> <hr> <h2 id="bun-install-and-bun-outdated"><span><code>bun install</code> and <code>bun outdated</code></span></h2> <span data-as="p">Both <code>bun install</code> and <code>bun outdated</code> support the <code>--filter</code> flag.</span> <span data-as="p"><code>bun install</code> by default will install dependencies for all packages in the monorepo. To install dependencies for specific packages, use <code>--filter</code>.</span> <span data-as="p">Given a monorepo with workspaces <code>pkg-a</code>, <code>pkg-b</code>, and <code>pkg-c</code> under <code>./packages</code>:</span> <pre numberoflines="8" language="shellscript" data-language="typescript"># Install dependencies for all workspaces except `pkg-c`
bun install --filter '!pkg-c'

# Install dependencies for packages in `./packages` (`pkg-a`, `pkg-b`, `pkg-c`)
bun install --filter './packages/*'

# Save as above, but exclude the root package.json
bun install --filter '!./' --filter './packages/*'
</pre> <span data-as="p">Similarly, <code>bun outdated</code> will display outdated dependencies for all packages in the monorepo, and <code>--filter</code> can be used to restrict the command to a subset of the packages:</span> <pre numberoflines="5" language="shellscript" data-language="typescript"># Display outdated dependencies for workspaces starting with `pkg-`
bun outdated --filter 'pkg-*'

# Display outdated dependencies for only the root package.json
bun outdated --filter './'
</pre> <span data-as="p">For more information on both these commands, see <a href="cli/install"><code>bun install</code></a> and <a href="cli/outdated"><code>bun outdated</code></a>.</span> <hr> <h2 id="running-scripts-with-filter"><span>Running scripts with <code>--filter</code></span></h2> <span data-as="p">Use the <code>--filter</code> flag to execute scripts in multiple packages at once:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun --filter &lt;pattern&gt; &lt;script&gt;
</pre> <span data-as="p">Say you have a monorepo with two packages: <code>packages/api</code> and <code>packages/frontend</code>, both with a <code>dev</code> script that will start a local development server. Normally, you would have to open two separate terminal tabs, cd into each package directory, and run <code>bun dev</code>:</span> <pre numberoflines="6" language="shellscript" data-language="typescript">cd packages/api
bun dev

# in another terminal
cd packages/frontend
bun dev
</pre> <span data-as="p">Using <code>--filter</code>, you can run the <code>dev</code> script in both packages at once:</span> <pre numberoflines="1" language="shellscript" data-language="typescript">bun --filter '*' dev
</pre> <span data-as="p">Both commands will be run in parallel, and you will see a nice terminal UI showing their respective outputs:</span>  <h3 id="running-scripts-in-workspaces"><span>Running scripts in workspaces</span></h3> <span data-as="p">Filters respect your <a href="workspaces">workspace configuration</a>: If you have a <code>package.json</code> file that specifies which packages are part of the workspace, <code>--filter</code> will be restricted to only these packages. Also, in a workspace you can use <code>--filter</code> to run scripts in packages that are located anywhere in the workspace:</span> <pre numberoflines="6" language="shellscript" data-language="typescript"># Packages
# src/foo
# src/bar

# in src/bar: runs myscript in src/foo, no need to cd!
bun run --filter foo myscript
</pre> <h3 id="dependency-order"><span>Dependency Order</span></h3> <span data-as="p">Bun will respect package dependency order when running scripts. Say you have a package <code>foo</code> that depends on another package <code>bar</code> in your workspace, and both packages have a <code>build</code> script. When you run <code>bun --filter '*' build</code>, you will notice that <code>foo</code> will only start running once <code>bar</code> is done.</span>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; bun.com, oven-sh, Jarred Sumner<br>Licensed under the MIT License.<br>
    <a href="https://bun.com/docs/pm/filter" class="_attribution-link">https://bun.com/docs/pm/filter</a>
  </p>
</div>
