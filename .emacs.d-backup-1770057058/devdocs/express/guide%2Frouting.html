<main> <h1 id="routing" data-level="1">Routing</h1> <p><em>Routing</em> refers to how an application’s endpoints (URIs) respond to client requests. For an introduction to routing, see <a href="../starter/basic-routing">Basic routing</a>.</p> <p>You define routing using methods of the Express <code class="language-plaintext highlighter-rouge">app</code> object that correspond to HTTP methods; for example, <code class="language-plaintext highlighter-rouge">app.get()</code> to handle GET requests and <code class="language-plaintext highlighter-rouge">app.post</code> to handle POST requests. For a full list, see <a href="../5x/api#app.METHOD">app.METHOD</a>. You can also use <a href="../5x/api#app.all">app.all()</a> to handle all HTTP methods and <a href="../5x/api#app.use">app.use()</a> to specify middleware as the callback function (See <a href="using-middleware">Using middleware</a> for details).</p> <p>These routing methods specify a callback function (sometimes called “handler functions”) called when the application receives a request to the specified route (endpoint) and HTTP method. In other words, the application “listens” for requests that match the specified route(s) and method(s), and when it detects a match, it calls the specified callback function.</p> <p>In fact, the routing methods can have more than one callback function as arguments. With multiple callback functions, it is important to provide <code class="language-plaintext highlighter-rouge">next</code> as an argument to the callback function and then call <code class="language-plaintext highlighter-rouge">next()</code> within the body of the function to hand off control to the next callback.</p> <p>The following code is an example of a very basic route.</p> <div class="highlight"><pre class="highlight" data-language="javascript">const express = require('express')
const app = express()

// respond with "hello world" when a GET request is made to the homepage
app.get('/', (req, res) =&gt; {
  res.send('hello world')
})
</pre></div> <h2 id="route-methods">Route methods</h2> <p>A route method is derived from one of the HTTP methods, and is attached to an instance of the <code class="language-plaintext highlighter-rouge">express</code> class.</p> <p>The following code is an example of routes that are defined for the <code class="language-plaintext highlighter-rouge">GET</code> and the <code class="language-plaintext highlighter-rouge">POST</code> methods to the root of the app.</p> <div class="highlight"><pre class="highlight" data-language="javascript">// GET method route
app.get('/', (req, res) =&gt; {
  res.send('GET request to the homepage')
})

// POST method route
app.post('/', (req, res) =&gt; {
  res.send('POST request to the homepage')
})
</pre></div> <p>Express supports methods that correspond to all HTTP request methods: <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">post</code>, and so on. For a full list, see <a href="../5x/api#app.METHOD">app.METHOD</a>.</p> <p>There is a special routing method, <code class="language-plaintext highlighter-rouge">app.all()</code>, used to load middleware functions at a path for <em>all</em> HTTP request methods. For example, the following handler is executed for requests to the route <code class="language-plaintext highlighter-rouge">"/secret"</code> whether using <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">PUT</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, or any other HTTP request method supported in the <a href="https://nodejs.org/api/http.html#http_http_methods">http module</a>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.all('/secret', (req, res, next) =&gt; {
  console.log('Accessing the secret section ...')
  next() // pass control to the next handler
})
</pre></div> <h2 id="route-paths">Route paths</h2> <p>Route paths, in combination with a request method, define the endpoints at which requests can be made. Route paths can be strings, string patterns, or regular expressions.</p> <div class="doc-box doc-notice"> <p class="doc-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" height="24" width="24" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg> Caution</p> <p>In express 5, the characters <code class="language-plaintext highlighter-rouge">?</code>, <code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">[]</code>, and <code class="language-plaintext highlighter-rouge">()</code> are handled differently than in version 4, please review the <a href="migrating-5#path-syntax">migration guide</a> for more information.</p> </div> <div class="doc-box doc-notice"> <p class="doc-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" height="24" width="24" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg> Caution</p> <p>In express 4, regular expression characters such as <code class="language-plaintext highlighter-rouge">$</code> need to be escaped with a <code class="language-plaintext highlighter-rouge">\</code>.</p> </div> <div class="doc-box doc-info"> <p class="doc-title"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" height="24" width="24" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg> Note </p> <p>Express uses <a href="https://www.npmjs.com/package/path-to-regexp">path-to-regexp</a> for matching the route paths; see the path-to-regexp documentation for all the possibilities in defining route paths. <a href="https://bjohansebas.github.io/playground-router/">Express Playground Router</a> is a handy tool for testing basic Express routes, although it does not support pattern matching.</p> </div> <div class="doc-box doc-warn"> <p class="doc-title"><svg viewbox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 7C11.7348 7 11.4804 7.10536 11.2929 7.29289C11.1054 7.48043 11 7.73478 11 8V12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12V8C13 7.73478 12.8946 7.48043 12.7071 7.29289C12.5196 7.10536 12.2652 7 12 7ZM12 15C11.8022 15 11.6089 15.0586 11.4444 15.1685C11.28 15.2784 11.1518 15.4346 11.0761 15.6173C11.0004 15.8 10.9806 16.0011 11.0192 16.1951C11.0578 16.3891 11.153 16.5673 11.2929 16.7071C11.4327 16.847 11.6109 16.9422 11.8049 16.9808C11.9989 17.0194 12.2 16.9996 12.3827 16.9239C12.5654 16.8482 12.7216 16.72 12.8315 16.5556C12.9414 16.3911 13 16.1978 13 16C13 15.7348 12.8946 15.4804 12.7071 15.2929C12.5196 15.1054 12.2652 15 12 15ZM21.71 7.56L16.44 2.29C16.2484 2.10727 15.9948 2.00368 15.73 2H8.27C8.00523 2.00368 7.75163 2.10727 7.56 2.29L2.29 7.56C2.10727 7.75163 2.00368 8.00523 2 8.27V15.73C2.00368 15.9948 2.10727 16.2484 2.29 16.44L7.56 21.71C7.75163 21.8927 8.00523 21.9963 8.27 22H15.73C15.9948 21.9963 16.2484 21.8927 16.44 21.71L21.71 16.44C21.8927 16.2484 21.9963 15.9948 22 15.73V8.27C21.9963 8.00523 21.8927 7.75163 21.71 7.56ZM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4H15.31L20 8.69V15.31Z"></path></svg> Warning</p> <p>Query strings are not part of the route path.</p> </div> <h3 id="route-paths-based-on-strings">Route paths based on strings</h3> <p>This route path will match requests to the root route, <code class="language-plaintext highlighter-rouge">/</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/', (req, res) =&gt; {
  res.send('root')
})
</pre></div> <p>This route path will match requests to <code class="language-plaintext highlighter-rouge">/about</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/about', (req, res) =&gt; {
  res.send('about')
})
</pre></div> <p>This route path will match requests to <code class="language-plaintext highlighter-rouge">/random.text</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/random.text', (req, res) =&gt; {
  res.send('random.text')
})
</pre></div> <h3 id="route-paths-based-on-string-patterns">Route paths based on string patterns</h3> <div class="doc-box doc-notice"> <p class="doc-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" height="24" width="24" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg> Caution</p> <p>The string patterns in Express 5 no longer work. Please refer to the <a href="migrating-5#path-syntax">migration guide</a> for more information.</p> </div> <p>This route path will match <code class="language-plaintext highlighter-rouge">acd</code> and <code class="language-plaintext highlighter-rouge">abcd</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/ab?cd', (req, res) =&gt; {
  res.send('ab?cd')
})
</pre></div> <p>This route path will match <code class="language-plaintext highlighter-rouge">abcd</code>, <code class="language-plaintext highlighter-rouge">abbcd</code>, <code class="language-plaintext highlighter-rouge">abbbcd</code>, and so on.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/ab+cd', (req, res) =&gt; {
  res.send('ab+cd')
})
</pre></div> <p>This route path will match <code class="language-plaintext highlighter-rouge">abcd</code>, <code class="language-plaintext highlighter-rouge">abxcd</code>, <code class="language-plaintext highlighter-rouge">abRANDOMcd</code>, <code class="language-plaintext highlighter-rouge">ab123cd</code>, and so on.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/ab*cd', (req, res) =&gt; {
  res.send('ab*cd')
})
</pre></div> <p>This route path will match <code class="language-plaintext highlighter-rouge">/abe</code> and <code class="language-plaintext highlighter-rouge">/abcde</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/ab(cd)?e', (req, res) =&gt; {
  res.send('ab(cd)?e')
})
</pre></div> <h3 id="route-paths-based-on-regular-expressions">Route paths based on regular expressions</h3> <p>This route path will match anything with an “a” in it.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get(/a/, (req, res) =&gt; {
  res.send('/a/')
})
</pre></div> <p>This route path will match <code class="language-plaintext highlighter-rouge">butterfly</code> and <code class="language-plaintext highlighter-rouge">dragonfly</code>, but not <code class="language-plaintext highlighter-rouge">butterflyman</code>, <code class="language-plaintext highlighter-rouge">dragonflyman</code>, and so on.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get(/.*fly$/, (req, res) =&gt; {
  res.send('/.*fly$/')
})
</pre></div> <h2 id="route-parameters">Route parameters</h2> <p>Route parameters are named URL segments that are used to capture the values specified at their position in the URL. The captured values are populated in the <code class="language-plaintext highlighter-rouge">req.params</code> object, with the name of the route parameter specified in the path as their respective keys.</p> <div class="highlight"><pre class="highlight" data-language="javascript">Route path: /users/:userId/books/:bookId
Request URL: http://localhost:3000/users/34/books/8989
req.params: { "userId": "34", "bookId": "8989" }
</pre></div> <p>To define routes with route parameters, simply specify the route parameters in the path of the route as shown below.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/users/:userId/books/:bookId', (req, res) =&gt; {
  res.send(req.params)
})
</pre></div> <div class="doc-box doc-notice"> <p>The name of route parameters must be made up of “word characters” ([A-Za-z0-9_]).</p> </div> <p>Since the hyphen (<code class="language-plaintext highlighter-rouge">-</code>) and the dot (<code class="language-plaintext highlighter-rouge">.</code>) are interpreted literally, they can be used along with route parameters for useful purposes.</p> <div class="highlight"><pre class="highlight" data-language="javascript">Route path: /flights/:from-:to
Request URL: http://localhost:3000/flights/LAX-SFO
req.params: { "from": "LAX", "to": "SFO" }
</pre></div> <div class="highlight"><pre class="highlight" data-language="javascript">Route path: /plantae/:genus.:species
Request URL: http://localhost:3000/plantae/Prunus.persica
req.params: { "genus": "Prunus", "species": "persica" }
</pre></div> <div class="doc-box doc-notice"> <p class="doc-title"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1.5" height="24" width="24" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg> Caution</p> <p>In express 5, Regexp characters are not supported in route paths, for more information please refer to the <a href="migrating-5#path-syntax">migration guide</a>.</p> </div> <p>To have more control over the exact string that can be matched by a route parameter, you can append a regular expression in parentheses (<code class="language-plaintext highlighter-rouge">()</code>):</p> <div class="highlight"><pre class="highlight" data-language="javascript">Route path: /user/:userId(\d+)
Request URL: http://localhost:3000/user/42
req.params: {"userId": "42"}
</pre></div> <div class="doc-box doc-warn"> <p class="doc-title"><svg viewbox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 7C11.7348 7 11.4804 7.10536 11.2929 7.29289C11.1054 7.48043 11 7.73478 11 8V12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12V8C13 7.73478 12.8946 7.48043 12.7071 7.29289C12.5196 7.10536 12.2652 7 12 7ZM12 15C11.8022 15 11.6089 15.0586 11.4444 15.1685C11.28 15.2784 11.1518 15.4346 11.0761 15.6173C11.0004 15.8 10.9806 16.0011 11.0192 16.1951C11.0578 16.3891 11.153 16.5673 11.2929 16.7071C11.4327 16.847 11.6109 16.9422 11.8049 16.9808C11.9989 17.0194 12.2 16.9996 12.3827 16.9239C12.5654 16.8482 12.7216 16.72 12.8315 16.5556C12.9414 16.3911 13 16.1978 13 16C13 15.7348 12.8946 15.4804 12.7071 15.2929C12.5196 15.1054 12.2652 15 12 15ZM21.71 7.56L16.44 2.29C16.2484 2.10727 15.9948 2.00368 15.73 2H8.27C8.00523 2.00368 7.75163 2.10727 7.56 2.29L2.29 7.56C2.10727 7.75163 2.00368 8.00523 2 8.27V15.73C2.00368 15.9948 2.10727 16.2484 2.29 16.44L7.56 21.71C7.75163 21.8927 8.00523 21.9963 8.27 22H15.73C15.9948 21.9963 16.2484 21.8927 16.44 21.71L21.71 16.44C21.8927 16.2484 21.9963 15.9948 22 15.73V8.27C21.9963 8.00523 21.8927 7.75163 21.71 7.56ZM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4H15.31L20 8.69V15.31Z"></path></svg> Warning</p> <p>Because the regular expression is usually part of a literal string, be sure to escape any <code class="language-plaintext highlighter-rouge">\</code> characters with an additional backslash, for example <code class="language-plaintext highlighter-rouge">\\d+</code>.</p> </div> <div class="doc-box doc-warn"> <p class="doc-title"><svg viewbox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 7C11.7348 7 11.4804 7.10536 11.2929 7.29289C11.1054 7.48043 11 7.73478 11 8V12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12V8C13 7.73478 12.8946 7.48043 12.7071 7.29289C12.5196 7.10536 12.2652 7 12 7ZM12 15C11.8022 15 11.6089 15.0586 11.4444 15.1685C11.28 15.2784 11.1518 15.4346 11.0761 15.6173C11.0004 15.8 10.9806 16.0011 11.0192 16.1951C11.0578 16.3891 11.153 16.5673 11.2929 16.7071C11.4327 16.847 11.6109 16.9422 11.8049 16.9808C11.9989 17.0194 12.2 16.9996 12.3827 16.9239C12.5654 16.8482 12.7216 16.72 12.8315 16.5556C12.9414 16.3911 13 16.1978 13 16C13 15.7348 12.8946 15.4804 12.7071 15.2929C12.5196 15.1054 12.2652 15 12 15ZM21.71 7.56L16.44 2.29C16.2484 2.10727 15.9948 2.00368 15.73 2H8.27C8.00523 2.00368 7.75163 2.10727 7.56 2.29L2.29 7.56C2.10727 7.75163 2.00368 8.00523 2 8.27V15.73C2.00368 15.9948 2.10727 16.2484 2.29 16.44L7.56 21.71C7.75163 21.8927 8.00523 21.9963 8.27 22H15.73C15.9948 21.9963 16.2484 21.8927 16.44 21.71L21.71 16.44C21.8927 16.2484 21.9963 15.9948 22 15.73V8.27C21.9963 8.00523 21.8927 7.75163 21.71 7.56ZM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4H15.31L20 8.69V15.31Z"></path></svg> Warning</p> <p>In Express 4.x, <a href="https://github.com/expressjs/express/issues/2495">the <code class="language-plaintext highlighter-rouge">*</code> character in regular expressions is not interpreted in the usual way</a>. As a workaround, use <code class="language-plaintext highlighter-rouge">{0,}</code> instead of <code class="language-plaintext highlighter-rouge">*</code>. This will likely be fixed in Express 5.</p> </div> <h2 id="route-handlers">Route handlers</h2> <p>You can provide multiple callback functions that behave like <a href="using-middleware">middleware</a> to handle a request. The only exception is that these callbacks might invoke <code class="language-plaintext highlighter-rouge">next('route')</code> to bypass the remaining route callbacks. You can use this mechanism to impose pre-conditions on a route, then pass control to subsequent routes if there’s no reason to proceed with the current route.</p> <p>Route handlers can be in the form of a function, an array of functions, or combinations of both, as shown in the following examples.</p> <p>A single callback function can handle a route. For example:</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/example/a', (req, res) =&gt; {
  res.send('Hello from A!')
})
</pre></div> <p>More than one callback function can handle a route (make sure you specify the <code class="language-plaintext highlighter-rouge">next</code> object). For example:</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.get('/example/b', (req, res, next) =&gt; {
  console.log('the response will be sent by the next function ...')
  next()
}, (req, res) =&gt; {
  res.send('Hello from B!')
})
</pre></div> <p>An array of callback functions can handle a route. For example:</p> <div class="highlight"><pre class="highlight" data-language="javascript">const cb0 = function (req, res, next) {
  console.log('CB0')
  next()
}

const cb1 = function (req, res, next) {
  console.log('CB1')
  next()
}

const cb2 = function (req, res) {
  res.send('Hello from C!')
}

app.get('/example/c', [cb0, cb1, cb2])
</pre></div> <p>A combination of independent functions and arrays of functions can handle a route. For example:</p> <div class="highlight"><pre class="highlight" data-language="javascript">const cb0 = function (req, res, next) {
  console.log('CB0')
  next()
}

const cb1 = function (req, res, next) {
  console.log('CB1')
  next()
}

app.get('/example/d', [cb0, cb1], (req, res, next) =&gt; {
  console.log('the response will be sent by the next function ...')
  next()
}, (req, res) =&gt; {
  res.send('Hello from D!')
})
</pre></div> <h2 id="response-methods">Response methods</h2> <p>The methods on the response object (<code class="language-plaintext highlighter-rouge">res</code>) in the following table can send a response to the client, and terminate the request-response cycle. If none of these methods are called from a route handler, the client request will be left hanging.</p> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="../5x/api#res.download">res.download()</a></td> <td>Prompt a file to be downloaded.</td> </tr> <tr> <td><a href="../5x/api#res.end">res.end()</a></td> <td>End the response process.</td> </tr> <tr> <td><a href="../5x/api#res.json">res.json()</a></td> <td>Send a JSON response.</td> </tr> <tr> <td><a href="../5x/api#res.jsonp">res.jsonp()</a></td> <td>Send a JSON response with JSONP support.</td> </tr> <tr> <td><a href="../5x/api#res.redirect">res.redirect()</a></td> <td>Redirect a request.</td> </tr> <tr> <td><a href="../5x/api#res.render">res.render()</a></td> <td>Render a view template.</td> </tr> <tr> <td><a href="../5x/api#res.send">res.send()</a></td> <td>Send a response of various types.</td> </tr> <tr> <td><a href="../5x/api#res.sendFile">res.sendFile()</a></td> <td>Send a file as an octet stream.</td> </tr> <tr> <td><a href="../5x/api#res.sendStatus">res.sendStatus()</a></td> <td>Set the response status code and send its string representation as the response body.</td> </tr> </tbody> </table> <h2 id="app-route">app.route()</h2> <p>You can create chainable route handlers for a route path by using <code class="language-plaintext highlighter-rouge">app.route()</code>. Because the path is specified at a single location, creating modular routes is helpful, as is reducing redundancy and typos. For more information about routes, see: <a href="../5x/api#router">Router() documentation</a>.</p> <p>Here is an example of chained route handlers that are defined by using <code class="language-plaintext highlighter-rouge">app.route()</code>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">app.route('/book')
  .get((req, res) =&gt; {
    res.send('Get a random book')
  })
  .post((req, res) =&gt; {
    res.send('Add a book')
  })
  .put((req, res) =&gt; {
    res.send('Update the book')
  })
</pre></div> <h2 id="express-router">express.Router</h2> <p>Use the <code class="language-plaintext highlighter-rouge">express.Router</code> class to create modular, mountable route handlers. A <code class="language-plaintext highlighter-rouge">Router</code> instance is a complete middleware and routing system; for this reason, it is often referred to as a “mini-app”.</p> <p>The following example creates a router as a module, loads a middleware function in it, defines some routes, and mounts the router module on a path in the main app.</p> <p>Create a router file named <code class="language-plaintext highlighter-rouge">birds.js</code> in the app directory, with the following content:</p> <div class="highlight"><pre class="highlight" data-language="javascript">const express = require('express')
const router = express.Router()

// middleware that is specific to this router
const timeLog = (req, res, next) =&gt; {
  console.log('Time: ', Date.now())
  next()
}
router.use(timeLog)

// define the home page route
router.get('/', (req, res) =&gt; {
  res.send('Birds home page')
})
// define the about route
router.get('/about', (req, res) =&gt; {
  res.send('About birds')
})

module.exports = router
</pre></div> <p>Then, load the router module in the app:</p> <div class="highlight"><pre class="highlight" data-language="javascript">const birds = require('./birds')

// ...

app.use('/birds', birds)
</pre></div> <p>The app will now be able to handle requests to <code class="language-plaintext highlighter-rouge">/birds</code> and <code class="language-plaintext highlighter-rouge">/birds/about</code>, as well as call the <code class="language-plaintext highlighter-rouge">timeLog</code> middleware function that is specific to the route.</p> <p>But if the parent route <code class="language-plaintext highlighter-rouge">/birds</code> has path parameters, it will not be accessible by default from the sub-routes. To make it accessible, you will need to pass the <code class="language-plaintext highlighter-rouge">mergeParams</code> option to the Router constructor <a href="../5x/api#app.use">reference</a>.</p> <div class="highlight"><pre class="highlight" data-language="javascript">const router = express.Router({ mergeParams: true })
</pre></div>  <a role="button" class="edit-github-btn" href="https://github.com/expressjs/expressjs.com/edit/gh-pages/en/guide/routing.md"> <svg viewbox="0 0 256 250" width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path> </svg> Edit this page </a> </main><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2017 StrongLoop, IBM, and other expressjs.com contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v3.0.<br>
    <a href="https://expressjs.com/en/guide/routing.html" class="_attribution-link">https://expressjs.com/en/guide/routing.html</a>
  </p>
</div>
