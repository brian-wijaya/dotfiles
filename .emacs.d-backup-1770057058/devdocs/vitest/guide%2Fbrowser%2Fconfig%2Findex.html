<h1 id="browser-config-reference" tabindex="-1">Browser Config Reference </h1>
<p>You can change the browser configuration by updating the <code>test.browser</code> field in your <a href="../../../config/index">config file</a>. An example of a simple config file:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.config.ts">vitest.config.ts</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    browser: {
      enabled: true,
      provider: 'playwright',
      instances: [
        {
          browser: 'chromium',
          setupFile: './chromium-setup.js',
        },
      ],
    },
  },
})</pre>
</div>
</div>
<p>Please, refer to the <a href="../../../config/index">"Config Reference"</a> article for different config examples.</p>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p><em>All listed options</em> on this page are located within a <code>test</code> property inside the configuration:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.config.js">vitest.config.js</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export default defineConfig({
  test: {
    browser: {},
  },
})</pre>
</div>
</div>
</div>
<h2 id="browser-enabled" tabindex="-1">browser.enabled </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser</code>, <code>--browser.enabled=false</code>
</li>
</ul>
<p>Run all tests inside a browser by default. Note that <code>--browser</code> only works if you have at least one <a href="#browser-instances"><code>browser.instances</code></a> item.</p>
<h2 id="browser-instances" tabindex="-1">browser.instances </h2>
<ul>
<li>
<strong>Type:</strong> <code>BrowserConfig</code>
</li>
<li>
<strong>Default:</strong> <code>[{ browser: name }]</code>
</li>
</ul>
<p>Defines multiple browser setups. Every config has to have at least a <code>browser</code> field. The config supports your providers configurations:</p>
<ul>
<li><a href="../playwright">Configuring Playwright</a></li>
<li><a href="../webdriverio">Configuring WebdriverIO</a></li>
</ul>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>To have a better type safety when using built-in providers, you should reference one of these types (for provider that you are using) in your <a href="../../../config/index">config file</a>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">/// &lt;reference types="@vitest/browser/providers/playwright" /&gt;
/// &lt;reference types="@vitest/browser/providers/webdriverio" /&gt;</pre>
</div>
</div>
<p>In addition to that, you can also specify most of the <a href="../../../config/index">project options</a> (not marked with a <span text-sm text-orange cursor-not-allowed title="Not supported in workspace project config"> * </span> icon) and some of the <code>browser</code> options like <code>browser.testerHtmlPath</code>.</p>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Every browser config inherits options from the root config:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.config.ts">vitest.config.ts</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark has-highlighted vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export default defineConfig({
  test: {
    setupFile: ['./root-setup-file.js'],
    browser: {
      enabled: true,
      testerHtmlPath: './custom-path.html',
      instances: [
        {
          // will have both setup files: "root" and "browser"
          setupFile: ['./browser-setup-file.js'],
          // implicitly has "testerHtmlPath" from the root config //
          // testerHtmlPath: './custom-path.html', //
        },
      ],
    },
  },
})</pre>
</div>
</div>
<p>During development, Vitest supports only one <a href="#browser-headless">non-headless</a> configuration. You can limit the headed project yourself by specifying <code>headless: false</code> in the config, or by providing the <code>--browser.headless=false</code> flag, or by filtering projects with <code>--project=chromium</code> flag.</p>
<p>For more examples, refer to the <a href="../multiple-setups">"Multiple Setups" guide</a>.</p>
</div>
<p>List of available <code>browser</code> options:</p>
<ul>
<li><a href="#browser-headless"><code>browser.headless</code></a></li>
<li><a href="#browser-locators"><code>browser.locators</code></a></li>
<li><a href="#browser-viewport"><code>browser.viewport</code></a></li>
<li><a href="#browser-testerhtmlpath"><code>browser.testerHtmlPath</code></a></li>
<li><a href="#browser-screenshotdirectory"><code>browser.screenshotDirectory</code></a></li>
<li><a href="#browser-screenshotfailures"><code>browser.screenshotFailures</code></a></li>
</ul>
<p>By default, Vitest creates an array with a single element which uses the <a href="#browser-name"><code>browser.name</code></a> field as a <code>browser</code>. Note that this behaviour will be removed with Vitest 4.</p>
<p>Under the hood, Vitest transforms these instances into separate <a href="../../../advanced/api/test-project">test projects</a> sharing a single Vite server for better caching performance.</p>
<h2 id="browser-name" tabindex="-1">browser.name <span class="VPBadge danger">deprecated</span> </h2>
<ul>
<li>
<strong>Type:</strong> <code>string</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser=safari</code>
</li>
</ul>
<div class="danger custom-block">
<strong class="custom-block-title">DANGER</strong><p>This API is deprecated an will be removed in Vitest 4. Please, use <a href="#browser-instances"><code>browser.instances</code></a> option instead.</p>
</div>
<p>Run all tests in a specific browser. Possible options in different providers:</p>
<ul>
<li>
<code>webdriverio</code>: <code>firefox</code>, <code>chrome</code>, <code>edge</code>, <code>safari</code>
</li>
<li>
<code>playwright</code>: <code>firefox</code>, <code>webkit</code>, <code>chromium</code>
</li>
<li>custom: any string that will be passed to the provider</li>
</ul>
<h2 id="browser-headless" tabindex="-1">browser.headless </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>process.env.CI</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser.headless</code>, <code>--browser.headless=false</code>
</li>
</ul>
<p>Run the browser in a <code>headless</code> mode. If you are running Vitest in CI, it will be enabled by default.</p>
<h2 id="browser-isolate" tabindex="-1">browser.isolate </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser.isolate</code>, <code>--browser.isolate=false</code>
</li>
</ul>
<p>Run every test in a separate iframe.</p>
<h2 id="browser-testerhtmlpath" tabindex="-1">browser.testerHtmlPath </h2>
<ul><li>
<strong>Type:</strong> <code>string</code>
</li></ul>
<p>A path to the HTML entry point. Can be relative to the root of the project. This file will be processed with <a href="https://vite.dev/guide/api-plugin#transformindexhtml" target="_blank" rel="noreferrer"><code>transformIndexHtml</code></a> hook.</p>
<h2 id="browser-api" tabindex="-1">browser.api </h2>
<ul>
<li>
<strong>Type:</strong> <code>number | { port?, strictPort?, host? }</code>
</li>
<li>
<strong>Default:</strong> <code>63315</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser.api=63315</code>, <code>--browser.api.port=1234, --browser.api.host=example.com</code>
</li>
</ul>
<p>Configure options for Vite server that serves code in the browser. Does not affect <a href="#api"><code>test.api</code></a> option. By default, Vitest assigns port <code>63315</code> to avoid conflicts with the development server, allowing you to run both in parallel.</p>
<h2 id="browser-provider" tabindex="-1">browser.provider <span class="VPBadge warning">experimental</span> </h2>
<ul>
<li>
<strong>Type:</strong> <code>'webdriverio' | 'playwright' | 'preview' | string</code>
</li>
<li>
<strong>Default:</strong> <code>'preview'</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser.provider=playwright</code>
</li>
</ul>
<div class="danger custom-block">
<strong class="custom-block-title">ADVANCED API</strong><p>The provider API is highly experimental and can change between patches. If you just need to run tests in a browser, use the <a href="#browser-instances"><code>browser.instances</code></a> option instead.</p>
</div>
<p>Path to a provider that will be used when running browser tests. Vitest provides three providers which are <code>preview</code> (default), <code>webdriverio</code> and <code>playwright</code>. Custom providers should be exported using <code>default</code> export and have this shape:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export interface BrowserProvider {
  name: string
  supportsParallelism: boolean
  getSupportedBrowsers: () =&gt; readonly string[]
  beforeCommand?: (command: string, args: unknown[]) =&gt; Awaitable&lt;void&gt;
  afterCommand?: (command: string, args: unknown[]) =&gt; Awaitable&lt;void&gt;
  getCommandsContext: (sessionId: string) =&gt; Record&lt;string, unknown&gt;
  openPage: (sessionId: string, url: string, beforeNavigate?: () =&gt; Promise&lt;void&gt;) =&gt; Promise&lt;void&gt;
  getCDPSession?: (sessionId: string) =&gt; Promise&lt;CDPSession&gt;
  close: () =&gt; Awaitable&lt;void&gt;
  initialize(
    ctx: TestProject,
    options: BrowserProviderInitializationOptions
  ): Awaitable&lt;void&gt;
}</pre>
</div>
<h2 id="browser-provideroptions" tabindex="-1">browser.providerOptions <span class="VPBadge danger">deprecated</span> </h2>
<ul><li>
<strong>Type:</strong> <code>BrowserProviderOptions</code>
</li></ul>
<div class="danger custom-block">
<strong class="custom-block-title">DANGER</strong><p>This API is deprecated an will be removed in Vitest 4. Please, use <a href="#browser-instances"><code>browser.instances</code></a> option instead.</p>
</div>
<p>Options that will be passed down to provider when calling <code>provider.initialize</code>.</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    browser: {
      providerOptions: {
        launch: {
          devtools: true,
        },
      },
    },
  },
})</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>To have a better type safety when using built-in providers, you should reference one of these types (for provider that you are using) in your <a href="../../../config/index">config file</a>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">/// &lt;reference types="@vitest/browser/providers/playwright" /&gt;
/// &lt;reference types="@vitest/browser/providers/webdriverio" /&gt;</pre>
</div>
</div>
<h2 id="browser-ui" tabindex="-1">browser.ui </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>!isCI</code>
</li>
<li>
<strong>CLI:</strong> <code>--browser.ui=false</code>
</li>
</ul>
<p>Should Vitest UI be injected into the page. By default, injects UI iframe during development.</p>
<h2 id="browser-viewport" tabindex="-1">browser.viewport </h2>
<ul>
<li>
<strong>Type:</strong> <code>{ width, height }</code>
</li>
<li>
<strong>Default:</strong> <code>414x896</code>
</li>
</ul>
<p>Default iframe's viewport.</p>
<h2 id="browser-locators" tabindex="-1">browser.locators </h2>
<p>Options for built-in <a href="../locators">browser locators</a>.</p>
<h3 id="browser-locators-testidattribute" tabindex="-1">browser.locators.testIdAttribute </h3>
<ul>
<li>
<strong>Type:</strong> <code>string</code>
</li>
<li>
<strong>Default:</strong> <code>data-testid</code>
</li>
</ul>
<p>Attribute used to find elements with <code>getByTestId</code> locator.</p>
<h2 id="browser-screenshotdirectory" tabindex="-1">browser.screenshotDirectory </h2>
<ul>
<li>
<strong>Type:</strong> <code>string</code>
</li>
<li>
<strong>Default:</strong> <code>__screenshots__</code> in the test file directory</li>
</ul>
<p>Path to the screenshots directory relative to the <code>root</code>.</p>
<h2 id="browser-screenshotfailures" tabindex="-1">browser.screenshotFailures </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>!browser.ui</code>
</li>
</ul>
<p>Should Vitest take screenshots if the test fails.</p>
<h2 id="browser-orchestratorscripts" tabindex="-1">browser.orchestratorScripts </h2>
<ul>
<li>
<strong>Type:</strong> <code>BrowserScript[]</code>
</li>
<li>
<strong>Default:</strong> <code>[]</code>
</li>
</ul>
<p>Custom scripts that should be injected into the orchestrator HTML before test iframes are initiated. This HTML document only sets up iframes and doesn't actually import your code.</p>
<p>The script <code>src</code> and <code>content</code> will be processed by Vite plugins. Script should be provided in the following shape:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export interface BrowserScript {
  /**
   * If "content" is provided and type is "module", this will be its identifier.
   *
   * If you are using TypeScript, you can add `.ts` extension here for example.
   * @default `injected-${index}.js`
   */
  id?: string
  /**
   * JavaScript content to be injected. This string is processed by Vite plugins if type is "module".
   *
   * You can use `id` to give Vite a hint about the file extension.
   */
  content?: string
  /**
   * Path to the script. This value is resolved by Vite so it can be a node module or a file path.
   */
  src?: string
  /**
   * If the script should be loaded asynchronously.
   */
  async?: boolean
  /**
   * Script type.
   * @default 'module'
   */
  type?: string
}</pre>
</div>
<h2 id="browser-testerscripts" tabindex="-1">browser.testerScripts </h2>
<ul>
<li>
<strong>Type:</strong> <code>BrowserScript[]</code>
</li>
<li>
<strong>Default:</strong> <code>[]</code>
</li>
</ul>
<div class="danger custom-block">
<strong class="custom-block-title">DANGER</strong><p>This API is deprecated an will be removed in Vitest 4. Please, use <a href="#browser-testerhtmlpath"><code>browser.testerHtmlPath</code></a> field instead.</p>
</div>
<p>Custom scripts that should be injected into the tester HTML before the tests environment is initiated. This is useful to inject polyfills required for Vitest browser implementation. It is recommended to use <a href="#setupfiles"><code>setupFiles</code></a> in almost all cases instead of this.</p>
<p>The script <code>src</code> and <code>content</code> will be processed by Vite plugins.</p>
<h2 id="browser-commands" tabindex="-1">browser.commands </h2>
<ul>
<li>
<strong>Type:</strong> <code>Record&lt;string, BrowserCommand&gt;</code>
</li>
<li>
<strong>Default:</strong> <code>{ readFile, writeFile, ... }</code>
</li>
</ul>
<p>Custom <a href="../commands">commands</a> that can be imported during browser tests from <code>@vitest/browser/commands</code>.</p>
<h2 id="browser-connecttimeout" tabindex="-1">browser.connectTimeout </h2>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>60_000</code>
</li>
</ul>
<p>The timeout in milliseconds. If connection to the browser takes longer, the test suite will fail.</p>
<div class="info custom-block">
<strong class="custom-block-title">INFO</strong><p>This is the time it should take for the browser to establish the WebSocket connection with the Vitest server. In normal circumstances, this timeout should never be reached.</p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021-Present Anthony Fu<br>&copy; 2021-Present Matias Capeletto<br>Licensed under the MIT License.<br>
    <a href="https://vitest.dev/guide/browser/config/" class="_attribution-link">https://vitest.dev/guide/browser/config/</a>
  </p>
</div>
