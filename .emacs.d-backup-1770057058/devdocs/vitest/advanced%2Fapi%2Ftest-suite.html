<h1 id="testsuite" tabindex="-1">TestSuite </h1>
<p>The <code>TestSuite</code> class represents a single suite. This class is only available in the main thread. Refer to the <a href="../runner#tasks">"Runner API"</a> if you are working with runtime tasks.</p>
<p>The <code>TestSuite</code> instance always has a <code>type</code> property with the value of <code>suite</code>. You can use it to distinguish between different task types:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">if (task.type === 'suite') {
  task // TestSuite
}</pre>
</div>
<h2 id="project" tabindex="-1">project </h2>
<p>This references the <a href="test-project"><code>TestProject</code></a> that the test belongs to.</p>
<h2 id="module" tabindex="-1">module </h2>
<p>This is a direct reference to the <a href="test-module"><code>TestModule</code></a> where the test is defined.</p>
<h2 id="name" tabindex="-1">name </h2>
<p>This is a suite name that was passed to the <code>describe</code> function.</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { describe } from 'vitest'


describe('the validation logic', () =&gt; {
  // ...
})</pre>
</div>
<h2 id="fullname" tabindex="-1">fullName </h2>
<p>The name of the suite including all parent suites separated with <code>&gt;</code> symbol. This suite has a full name "the validation logic &gt; validating cities":</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { describe, test } from 'vitest'



describe('the validation logic', () =&gt; {
  describe('validating cities', () =&gt; {
    // ...
  })
})</pre>
</div>
<h2 id="id" tabindex="-1">id </h2>
<p>This is suite's unique identifier. This ID is deterministic and will be the same for the same suite across multiple runs. The ID is based on the <a href="test-project">project</a> name, module ID and suite order.</p>
<p>The ID looks like this:</p>
<div class="language- vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">1223128da3_0_0_0
^^^^^^^^^^ the file hash
           ^ suite index
             ^ nested suite index
               ^ test index</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>You can generate file hash with <code>generateFileHash</code> function from <code>vitest/node</code> which is available since Vitest 3:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { generateFileHash } from 'vitest/node'

const hash = generateFileHash(
  '/file/path.js', // relative path
  undefined, // the project name or `undefined` is not set
)</pre>
</div>
</div>
<div class="danger custom-block">
<strong class="custom-block-title">DANGER</strong><p>Don't try to parse the ID. It can have a minus at the start: <code>-1223128da3_0_0_0</code>.</p>
</div>
<h2 id="location" tabindex="-1">location </h2>
<p>The location in the module where the suite was defined. Locations are collected only if <a href="../../config/index#includetasklocation"><code>includeTaskLocation</code></a> is enabled in the config. Note that this option is automatically enabled if <code>--reporter=html</code>, <code>--ui</code> or <code>--browser</code> flags are used.</p>
<p>The location of this suite will be equal to <code>{ line: 3, column: 1 }</code>:</p>
<div class="language-ts vp-adaptive-theme line-numbers-mode">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { describe } from 'vitest'

describe('the validation works correctly', () =&gt; {
  // ...
})</pre>
</div>
<h2 id="parent" tabindex="-1">parent </h2>
<p>Parent suite. If the suite was called directly inside the <a href="test-module">module</a>, the parent will be the module itself.</p>
<h2 id="options" tabindex="-1">options </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TaskOptions {
  readonly each: boolean | undefined
  readonly fails: boolean | undefined
  readonly concurrent: boolean | undefined
  readonly shuffle: boolean | undefined
  readonly retry: number | undefined
  readonly repeats: number | undefined
  readonly mode: 'run' | 'only' | 'skip' | 'todo'
}</pre>
</div>
<p>The options that suite was collected with.</p>
<h2 id="children" tabindex="-1">children </h2>
<p>This is a <a href="test-collection">collection</a> of all suites and tests inside the current suite.</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">for (const task of suite.children) {
  if (task.type === 'test') {
    console.log('test', task.fullName)
  }
  else {
    // task is TaskSuite
    console.log('suite', task.name)
  }
}</pre>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Note that <code>suite.children</code> will only iterate the first level of nesting, it won't go deeper. If you need to iterate over all tests or suites, use <a href="test-collection#alltests"><code>children.allTests()</code></a> or <a href="test-collection#allsuites"><code>children.allSuites()</code></a>. If you need to iterate over everything, use recursive function:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function visit(collection: TestCollection) {
  for (const task of collection) {
    if (task.type === 'suite') {
      // report a suite
      visit(task.children)
    }
    else {
      // report a test
    }
  }
}</pre>
</div>
</div>
<h2 id="ok" tabindex="-1">ok </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function ok(): boolean</pre>
</div>
<p>Checks if the suite has any failed tests. This will also return <code>false</code> if suite failed during collection. In that case, check the <a href="#errors"><code>errors()</code></a> for thrown errors.</p>
<h2 id="state" tabindex="-1">state </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function state(): TestSuiteState</pre>
</div>
<p>Checks the running state of the suite. Possible return values:</p>
<ul>
<li>
<strong>pending</strong>: the tests in this suite did not finish running yet.</li>
<li>
<strong>failed</strong>: this suite has failed tests or they couldn't be collected. If <a href="#errors"><code>errors()</code></a> is not empty, it means the suite failed to collect tests.</li>
<li>
<strong>passed</strong>: every test inside this suite has passed.</li>
<li>
<strong>skipped</strong>: this suite was skipped during collection.</li>
</ul>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Note that <a href="test-module">test module</a> also has a <code>state</code> method that returns the same values, but it can also return an additional <code>queued</code> state if the module wasn't executed yet.</p>
</div>
<h2 id="errors" tabindex="-1">errors </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function errors(): TestError[]</pre>
</div>
<p>Errors that happened outside of the test run during collection, like syntax errors.</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { describe } from 'vitest'

describe('collection failed', () =&gt; {
  throw new Error('a custom error')
})</pre>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Note that errors are serialized into simple objects: <code>instanceof Error</code> will always return <code>false</code>.</p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021-Present Anthony Fu<br>&copy; 2021-Present Matias Capeletto<br>Licensed under the MIT License.<br>
    <a href="https://vitest.dev/advanced/api/test-suite" class="_attribution-link">https://vitest.dev/advanced/api/test-suite</a>
  </p>
</div>
