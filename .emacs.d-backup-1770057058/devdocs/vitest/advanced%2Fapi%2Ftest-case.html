<h1 id="testcase" tabindex="-1">TestCase </h1>
<p>The <code>TestCase</code> class represents a single test. This class is only available in the main thread. Refer to the <a href="../runner#tasks">"Runner API"</a> if you are working with runtime tasks.</p>
<p>The <code>TestCase</code> instance always has a <code>type</code> property with the value of <code>test</code>. You can use it to distinguish between different task types:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">if (task.type === 'test') {
  task // TestCase
}</pre>
</div>
<h2 id="project" tabindex="-1">project </h2>
<p>This references the <a href="test-project"><code>TestProject</code></a> that the test belongs to.</p>
<h2 id="module" tabindex="-1">module </h2>
<p>This is a direct reference to the <a href="test-module"><code>TestModule</code></a> where the test is defined.</p>
<h2 id="name" tabindex="-1">name </h2>
<p>This is a test name that was passed to the <code>test</code> function.</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { test } from 'vitest'


test('the validation works correctly', () =&gt; {
  // ...
})</pre>
</div>
<h2 id="fullname" tabindex="-1">fullName </h2>
<p>The name of the test including all parent suites separated with <code>&gt;</code> symbol. This test has a full name "the validation logic &gt; the validation works correctly":</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { describe, test } from 'vitest'



describe('the validation logic', () =&gt; {
  test('the validation works correctly', () =&gt; {
    // ...
  })
})</pre>
</div>
<h2 id="id" tabindex="-1">id </h2>
<p>This is test's unique identifier. This ID is deterministic and will be the same for the same test across multiple runs. The ID is based on the <a href="test-project">project</a> name, module ID and test order.</p>
<p>The ID looks like this:</p>
<div class="language- vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">1223128da3_0_0
^^^^^^^^^^ the file hash
           ^ suite index
             ^ test index</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>You can generate file hash with <code>generateFileHash</code> function from <code>vitest/node</code> which is available since Vitest 3:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { generateFileHash } from 'vitest/node'

const hash = generateFileHash(
  '/file/path.js', // relative path
  undefined, // the project name or `undefined` is not set
)</pre>
</div>
</div>
<div class="danger custom-block">
<strong class="custom-block-title">DANGER</strong><p>Don't try to parse the ID. It can have a minus at the start: <code>-1223128da3_0_0_0</code>.</p>
</div>
<h2 id="location" tabindex="-1">location </h2>
<p>The location in the module where the test was defined. Locations are collected only if <a href="../../config/index#includetasklocation"><code>includeTaskLocation</code></a> is enabled in the config. Note that this option is automatically enabled if <code>--reporter=html</code>, <code>--ui</code> or <code>--browser</code> flags are used.</p>
<p>The location of this test will be equal to <code>{ line: 3, column: 1 }</code>:</p>
<div class="language-ts vp-adaptive-theme line-numbers-mode">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { test } from 'vitest'

test('the validation works correctly', () =&gt; {
  // ...
})</pre>
</div>
<h2 id="parent" tabindex="-1">parent </h2>
<p>Parent <a href="test-suite">suite</a>. If the test was called directly inside the <a href="test-module">module</a>, the parent will be the module itself.</p>
<h2 id="options" tabindex="-1">options </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TaskOptions {
  readonly each: boolean | undefined
  readonly fails: boolean | undefined
  readonly concurrent: boolean | undefined
  readonly shuffle: boolean | undefined
  readonly retry: number | undefined
  readonly repeats: number | undefined
  readonly mode: 'run' | 'only' | 'skip' | 'todo'
}</pre>
</div>
<p>The options that test was collected with.</p>
<h2 id="ok" tabindex="-1">ok </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function ok(): boolean</pre>
</div>
<p>Checks if the test did not fail the suite. If the test is not finished yet or was skipped, it will return <code>true</code>.</p>
<h2 id="meta" tabindex="-1">meta </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function meta(): TaskMeta</pre>
</div>
<p>Custom metadata that was attached to the test during its execution. The meta can be attached by assigning a property to the <code>ctx.task.meta</code> object during a test run:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { test } from 'vitest'

test('the validation works correctly', ({ task }) =&gt; {
  // ...

  task.meta.decorated = false
})</pre>
</div>
<p>If the test did not finish running yet, the meta will be an empty object.</p>
<h2 id="result" tabindex="-1">result </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function result(): TestResult</pre>
</div>
<p>Test results. If test is not finished yet or was just collected, it will be equal to <code>TestResultPending</code>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export interface TestResultPending {
  /**
   * The test was collected, but didn't finish running yet.
   */
  readonly state: 'pending'
  /**
   * Pending tests have no errors.
   */
  readonly errors: undefined
}</pre>
</div>
<p>If the test was skipped, the return value will be <code>TestResultSkipped</code>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TestResultSkipped {
  /**
   * The test was skipped with `skip` or `todo` flag.
   * You can see which one was used in the `options.mode` option.
   */
  readonly state: 'skipped'
  /**
   * Skipped tests have no errors.
   */
  readonly errors: undefined
  /**
   * A custom note passed down to `ctx.skip(note)`.
   */
  readonly note: string | undefined
}</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>If the test was skipped because another test has <code>only</code> flag, the <code>options.mode</code> will be equal to <code>skip</code>.</p>
</div>
<p>If the test failed, the return value will be <code>TestResultFailed</code>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TestResultFailed {
  /**
   * The test failed to execute.
   */
  readonly state: 'failed'
  /**
   * Errors that were thrown during the test execution.
   */
  readonly errors: ReadonlyArray&lt;TestError&gt;
}</pre>
</div>
<p>If the test passed, the return value will be <code>TestResultPassed</code>:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TestResultPassed {
  /**
   * The test passed successfully.
   */
  readonly state: 'passed'
  /**
   * Errors that were thrown during the test execution.
   */
  readonly errors: ReadonlyArray&lt;TestError&gt; | undefined
}</pre>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Note that the test with <code>passed</code> state can still have errors attached - this can happen if <code>retry</code> was triggered at least once.</p>
</div>
<h2 id="diagnostic" tabindex="-1">diagnostic </h2>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">function diagnostic(): TestDiagnostic | undefined</pre>
</div>
<p>Useful information about the test like duration, memory usage, etc:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">interface TestDiagnostic {
  /**
   * If the duration of the test is above `slowTestThreshold`.
   */
  readonly slow: boolean
  /**
   * The amount of memory used by the test in bytes.
   * This value is only available if the test was executed with `logHeapUsage` flag.
   */
  readonly heap: number | undefined
  /**
   * The time it takes to execute the test in ms.
   */
  readonly duration: number
  /**
   * The time in ms when the test started.
   */
  readonly startTime: number
  /**
   * The amount of times the test was retried.
   */
  readonly retryCount: number
  /**
   * The amount of times the test was repeated as configured by `repeats` option.
   * This value can be lower if the test failed during the repeat and no `retry` is configured.
   */
  readonly repeatCount: number
  /**
   * If test passed on a second retry.
   */
  readonly flaky: boolean
}</pre>
</div>
<div class="info custom-block">
<strong class="custom-block-title">INFO</strong><p><code>diagnostic()</code> will return <code>undefined</code> if the test was not scheduled to run yet.</p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021-Present Anthony Fu<br>&copy; 2021-Present Matias Capeletto<br>Licensed under the MIT License.<br>
    <a href="https://vitest.dev/advanced/api/test-case" class="_attribution-link">https://vitest.dev/advanced/api/test-case</a>
  </p>
</div>
