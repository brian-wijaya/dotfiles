<h1 id="configuring-playwright" tabindex="-1">Configuring Playwright </h1>
<p>By default, TypeScript doesn't recognize providers options and extra <code>expect</code> properties. Make sure to reference <code>@vitest/browser/providers/playwright</code> so TypeScript can pick up definitions for custom options:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.shims.d.ts">vitest.shims.d.ts</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">/// &lt;reference types="@vitest/browser/providers/playwright" /&gt;</pre>
</div>
</div>
<p>Alternatively, you can also add it to <code>compilerOptions.types</code> field in your <code>tsconfig.json</code> file. Note that specifying anything in this field will disable <a href="https://www.typescriptlang.org/tsconfig/#types" target="_blank" rel="noreferrer">auto loading</a> of <code>@types/*</code> packages.</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="tsconfig.json">tsconfig.json</span></div>
<div class="language-json vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">{
  "compilerOptions": {
    "types": ["@vitest/browser/providers/playwright"]
  }
}</pre>
</div>
</div>
<p>Vitest opens a single page to run all tests in the same file. You can configure the <code>launch</code> and <code>context</code> properties in <code>instances</code>:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.config.ts">vitest.config.ts</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    browser: {
      instances: [
        {
          browser: 'firefox',
          launch: {},
          context: {},
        },
      ],
    },
  },
})</pre>
</div>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Before Vitest 3, these options were located on <code>test.browser.providerOptions</code> property:</p>
<div class="vp-code-block-title">
<div class="vp-code-block-title-bar"><span class="vp-code-block-title-text" data-title="vitest.config.ts">vitest.config.ts</span></div>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">export default defineConfig({
  test: {
    browser: {
      providerOptions: {
        launch: {},
        context: {},
      },
    },
  },
})</pre>
</div>
</div>
<p><code>providerOptions</code> is deprecated in favour of <code>instances</code>.</p>
</div>
<h2 id="launch" tabindex="-1">launch </h2>
<p>These options are directly passed down to <code>playwright[browser].launch</code> command. You can read more about the command and available arguments in the <a href="https://playwright.dev/docs/api/class-browsertype#browser-type-launch" target="_blank" rel="noreferrer">Playwright documentation</a>.</p>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Vitest will ignore <code>launch.headless</code> option. Instead, use <a href="config#browser-headless"><code>test.browser.headless</code></a>.</p>
<p>Note that Vitest will push debugging flags to <code>launch.args</code> if <a href="../cli#inspect"><code>--inspect</code></a> is enabled.</p>
</div>
<h2 id="context" tabindex="-1">context </h2>
<p>Vitest creates a new context for every test file by calling <a href="https://playwright.dev/docs/api/class-browsercontext" target="_blank" rel="noreferrer"><code>browser.newContext()</code></a>. You can configure this behaviour by specifying <a href="https://playwright.dev/docs/api/class-apirequest#api-request-new-context" target="_blank" rel="noreferrer">custom arguments</a>.</p>
<div class="tip custom-block">
<strong class="custom-block-title">TIP</strong><p>Note that the context is created for every <em>test file</em>, not every <em>test</em> like in playwright test runner.</p>
</div>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>Vitest awlays sets <code>ignoreHTTPSErrors</code> to <code>true</code> in case your server is served via HTTPS and <code>serviceWorkers</code> to <code>'allow'</code> to support module mocking via <a href="https://mswjs.io" target="_blank" rel="noreferrer">MSW</a>.</p>
<p>It is also recommended to use <a href="config#browser-headless"><code>test.browser.viewport</code></a> instead of specifying it here as it will be lost when tests are running in headless mode.</p>
</div>
<h2 id="actiontimeout-3-0-0" tabindex="-1">
<code>actionTimeout</code> <span class="VPBadge info">3.0.0+ </span> </h2>
<ul><li>
<strong>Default:</strong> no timeout, 1 second before 3.0.0</li></ul>
<p>This value configures the default timeout it takes for Playwright to wait until all accessibility checks pass and <a href="interactivity-api">the action</a> is actually done.</p>
<p>You can also configure the action timeout per-action:</p>
<div class="language-ts vp-adaptive-theme">
<pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" data-language="javascript">import { page, userEvent } from '@vitest/browser/context'

await userEvent.click(page.getByRole('button'), {
  timeout: 1_000,
})</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021-Present Anthony Fu<br>&copy; 2021-Present Matias Capeletto<br>Licensed under the MIT License.<br>
    <a href="https://vitest.dev/guide/browser/playwright" class="_attribution-link">https://vitest.dev/guide/browser/playwright</a>
  </p>
</div>
