<h1>isPromise</h1>

<p>Checks if a given value is a <code>Promise</code> instance.</p>

<pre data-language='typescript'><code class='typescript'>const result = isPromise(value);
</code></pre>

<h2>Usage</h2>

<h4><code>isPromise(value)</code></h4>

<p>Use <code>isPromise</code> when you want to check if a value is a <code>Promise</code> instance. It&#39;s useful when you need to distinguish <code>Promise</code> objects from other values in asynchronous code, or when you need to conditionally use <code>await</code>.</p>

<pre data-language='typescript'><code class='typescript'>import { isPromise } from &#39;es-toolkit/predicate&#39;;

// Promise instances
const promise1 = new Promise(resolve =&gt; resolve(&#39;done&#39;));
const promise2 = Promise.resolve(42);
const promise3 = Promise.reject(new Error(&#39;failed&#39;));

console.log(isPromise(promise1)); // true
console.log(isPromise(promise2)); // true
console.log(isPromise(promise3)); // true

// Non-Promise values
console.log(isPromise({})); // false
console.log(isPromise(&#39;hello&#39;)); // false
console.log(isPromise(42)); // false
console.log(isPromise(null)); // false
console.log(isPromise(undefined)); // false
</code></pre>

<p>It&#39;s useful when executing logic conditionally in asynchronous functions.</p>

<pre data-language='typescript'><code class='typescript'>// Check if value is a Promise and handle appropriately
async function processValue(input: unknown) {
  if (isPromise(input)) {
    // TypeScript infers input as Promise&lt;any&gt;
    const result = await input;
    console.log(&#39;Promise result:&#39;, result);
    return result;
  }

  // Non-Promise values are returned immediately
  console.log(&#39;Regular value:&#39;, input);
  return input;
}

// Handle API responses
function handleApiCall(response: unknown) {
  if (isPromise(response)) {
    return response.then(data =&gt; ({ success: true, data })).catch(error =&gt; ({ success: false, error: error.message }));
  }

  // Already resolved value
  return { success: true, data: response };
}

// Use in utility function
function toPromise&lt;T&gt;(value: T | Promise&lt;T&gt;): Promise&lt;T&gt; {
  if (isPromise(value)) {
    return value;
  }

  return Promise.resolve(value);
}
</code></pre>

<p>You can distinguish between Promise-like objects and actual Promises.</p>

<pre data-language='typescript'><code class='typescript'>// thenable objects are not Promises
const thenable = {
  then: (resolve: Function) =&gt; resolve(&#39;not a promise&#39;),
};

console.log(isPromise(thenable)); // false

// async function results are Promises
async function asyncFunction() {
  return &#39;async result&#39;;
}

console.log(isPromise(asyncFunction())); // true

// Regular functions are not Promises
function normalFunction() {
  return &#39;normal result&#39;;
}

console.log(isPromise(normalFunction())); // false
</code></pre>

<p>It can also be used for error handling.</p>

<pre data-language='typescript'><code class='typescript'>function safeExecute(fn: () =&gt; any) {
  try {
    const result = fn();

    if (isPromise(result)) {
      return result.catch(error =&gt; {
        console.error(&#39;Error in async function:&#39;, error);
        return null;
      });
    }

    return result;
  } catch (error) {
    console.error(&#39;Error in sync function:&#39;, error);
    return null;
  }
}

// Timeout handling
function withTimeout&lt;T&gt;(valueOrPromise: T | Promise&lt;T&gt;, timeoutMs: number) {
  if (!isPromise(valueOrPromise)) {
    return valueOrPromise;
  }

  const timeoutPromise = new Promise((_, reject) =&gt; {
    setTimeout(() =&gt; reject(new Error(&#39;Timeout&#39;)), timeoutMs);
  });

  return Promise.race([valueOrPromise, timeoutPromise]);
}
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>value</code> (<code>unknown</code>): The value to check if it&#39;s a Promise instance.</li>
</ul>

<h4>Returns</h4>

<p>(<code>value is Promise&lt;any&gt;</code>): Returns <code>true</code> if the value is a Promise instance, <code>false</code> otherwise.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/predicate/isPromise.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/predicate/isPromise.html
    </a>
  </p>
</div>
