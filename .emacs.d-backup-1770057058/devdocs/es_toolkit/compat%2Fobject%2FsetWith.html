<h1>setWith (Lodash Compatibility)</h1>

<p>::: warning Use direct assignment instead</p>

<p>This <code>setWith</code> function internally calls the <code>updateWith</code> function and operates slowly due to complex path processing and customizer logic.</p>

<p>Use faster and more modern direct assignment or destructuring assignment instead.</p>

<p>:::</p>

<p>Sets a value at the specified path while controlling how objects are created with a customizer function.</p>

<pre data-language='typescript'><code class='typescript'>const result = setWith(obj, path, value, customizer);
</code></pre>

<h2>Usage</h2>

<h4><code>setWith(object, path, value, customizer)</code></h4>

<p>Use <code>setWith</code> when you want to set a value at a specific path in an object while controlling the type of intermediate objects created with a customizer function. If the customizer returns <code>undefined</code>, the default logic (array for array indices, object otherwise) is used.</p>

<pre data-language='typescript'><code class='typescript'>import { setWith } from &#39;es-toolkit/compat&#39;;

// Basic usage (no customizer)
const obj1 = {};
setWith(obj1, &#39;a.b.c&#39;, 4);
console.log(obj1);
// Result: { a: { b: { c: 4 } } }

// Customizer forcing array creation
const obj2 = {};
setWith(obj2, &#39;[0][1]&#39;, &#39;value&#39;, () =&gt; []);
console.log(obj2);
// Result: { &#39;0&#39;: [undefined, &#39;value&#39;] }

// Customize only under specific conditions
const obj3 = {};
setWith(obj3, &#39;a[0].b.c&#39;, &#39;nested&#39;, (value, key) =&gt; {
  // Return empty object only for numeric keys (array indices)
  return typeof key === &#39;string&#39; &amp;&amp; /^\d+$/.test(key) ? {} : undefined;
});
console.log(obj3);
// Result: { a: { &#39;0&#39;: { b: { c: &#39;nested&#39; } } } }

// Use Object constructor as customizer
const obj4 = {};
setWith(obj4, &#39;x[0].y&#39;, 42, Object);
console.log(obj4);
// Result: { x: { &#39;0&#39;: { y: 42 } } }

// Complex customizer logic
const obj5 = {};
setWith(obj5, &#39;data.items[0].props.config&#39;, &#39;value&#39;, (value, key, object) =&gt; {
  console.log(&#39;Creating:&#39;, key, &#39;in&#39;, object);

  // Use Map for specific keys
  if (key === &#39;props&#39;) {
    return new Map();
  }

  // Array for numeric keys
  if (typeof key === &#39;string&#39; &amp;&amp; /^\d+$/.test(key)) {
    return [];
  }

  // Regular object by default
  return {};
});

// Use WeakMap as intermediate object
const obj6 = {};
setWith(obj6, &#39;cache.user.profile&#39;, &#39;data&#39;, (value, key) =&gt; {
  if (key === &#39;cache&#39;) {
    return new WeakMap();
  }
  return undefined; // Use default behavior
});
</code></pre>

<p>The customizer function receives three parameters.</p>

<pre data-language='typescript'><code class='typescript'>import { setWith } from &#39;es-toolkit/compat&#39;;

const obj = {};
setWith(obj, &#39;a.b[0].c&#39;, &#39;value&#39;, (nsValue, key, nsObject) =&gt; {
  console.log(&#39;nsValue:&#39;, nsValue); // Current value (usually undefined)
  console.log(&#39;key:&#39;, key); // Key to create
  console.log(&#39;nsObject:&#39;, nsObject); // Parent object

  // Return different object types based on specific conditions
  return key === &#39;b&#39; ? [] : {};
});
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>object</code> (<code>T</code>): The object to set the value in.</li>
<li><code>path</code> (<code>PropertyPath</code>): The path of the property to set.</li>
<li><code>value</code> (<code>any</code>): The value to set.</li>
<li><code>customizer</code> (<code>(nsValue: any, key: string, nsObject: T) =&gt; any</code>, optional): Function to customize the creation of intermediate objects.</li>
</ul>

<h4>Returns</h4>

<p>(<code>T | R</code>): Returns the modified object.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/compat/object/setWith.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/compat/object/setWith.html
    </a>
  </p>
</div>
