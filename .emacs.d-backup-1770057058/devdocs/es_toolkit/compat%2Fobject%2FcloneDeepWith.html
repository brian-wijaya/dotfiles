<h1>cloneDeepWith (Lodash compatibility)</h1>

<p>::: warning Implementing custom logic is recommended</p>

<p>This <code>cloneDeepWith</code> function is relatively slow due to complex customizer function and deep copy processing.</p>

<p>Instead, use <code>cloneDeep</code> and implement custom logic directly.</p>

<p>:::</p>

<p>Creates a deep copy of an object using a customizer function.</p>

<pre data-language='typescript'><code class='typescript'>const cloned = cloneDeepWith(value, customizer);
</code></pre>

<h2>Usage</h2>

<h4><code>cloneDeepWith(value, customizer?)</code></h4>

<p>Use <code>cloneDeepWith</code> when you want to customize how deep copying works. The customizer function controls how specific values are copied.</p>

<pre data-language='typescript'><code class='typescript'>import { cloneDeepWith } from &#39;es-toolkit/compat&#39;;

// Basic usage (without customizer)
const obj = {
  a: 1,
  b: {
    c: 2,
  },
};
const cloned = cloneDeepWith(obj);
// Returns: { a: 1, b: { c: 2 } } (completely new instances)

// Special handling for Date objects
const obj2 = {
  name: &#39;test&#39;,
  createdAt: new Date(&#39;2023-01-01&#39;),
  nested: {
    updatedAt: new Date(&#39;2023-12-31&#39;),
  },
};
const cloned2 = cloneDeepWith(obj2, value =&gt; {
  if (value instanceof Date) {
    // Convert Date to timestamp number
    return value.getTime();
  }
  // Returning undefined uses default deep copy behavior
});
// Returns: {
//   name: &#39;test&#39;,
//   createdAt: 1672531200000,
//   nested: { updatedAt: 1703980800000 }
// }

// Transforming array elements
const arr = [1, [2, 3], { a: 4, b: [5, 6] }];
const clonedArr = cloneDeepWith(arr, value =&gt; {
  if (typeof value === &#39;number&#39;) {
    return value * 10;
  }
});
// Returns: [10, [20, 30], { a: 40, b: [50, 60] }]

// Handling functions
const objWithFunc = {
  data: { count: 1 },
  increment: function () {
    this.data.count++;
  },
};
const clonedWithFunc = cloneDeepWith(objWithFunc, value =&gt; {
  if (typeof value === &#39;function&#39;) {
    // Convert function to string
    return value.toString();
  }
});
// Returns: {
//   data: { count: 1 },
//   increment: &quot;function() { this.data.count++; }&quot;
// }
</code></pre>

<p>Combining circular references and customizer:</p>

<pre data-language='typescript'><code class='typescript'>import { cloneDeepWith } from &#39;es-toolkit/compat&#39;;

const obj = { a: 1, b: { c: 2 } };
obj.b.self = obj; // circular reference

const cloned = cloneDeepWith(obj, value =&gt; {
  if (typeof value === &#39;number&#39;) {
    return value + 100;
  }
});

console.log(cloned.a); // 101
console.log(cloned.b.c); // 102
console.log(cloned.b.self === cloned); // true (circular reference preserved)
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>value</code> (<code>T</code>): The value to deep clone.</li>
<li><code>customizer</code> (<code>function</code>, optional): A function that determines how to copy. In the form <code>(value: any, key?: string, object?: any, stack?: Map&lt;any, any&gt;) =&gt; any</code>.</li>
</ul>

<h4>Returns</h4>

<p>(<code>T</code>): Returns the deep copy processed by the customizer.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/compat/object/cloneDeepWith.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/compat/object/cloneDeepWith.html
    </a>
  </p>
</div>
