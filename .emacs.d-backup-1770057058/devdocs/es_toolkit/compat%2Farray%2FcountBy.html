<h1>countBy (Lodash compatible)</h1>

<p>::: warning Use <code>countBy</code> from <code>es-toolkit</code> instead</p>

<p>This <code>countBy</code> function operates slowly due to complex transformation function processing and type conversion.</p>

<p>Use the faster and more modern <span>countBy</span> from <code>es-toolkit</code> instead.</p>

<p>:::</p>

<p>Counts the occurrences of elements in an array or object, grouped by a criterion.</p>

<pre data-language='typescript'><code class='typescript'>const counts = countBy(collection, iteratee);
</code></pre>

<h2>Usage</h2>

<h4><code>countBy(collection, iteratee?)</code></h4>

<p>Use <code>countBy</code> when you want to group elements of an array or object by some criterion and count how many elements are in each group. The value returned by the iteratee function becomes the key, and the count of elements with that key becomes the value.</p>

<pre data-language='typescript'><code class='typescript'>import { countBy } from &#39;es-toolkit/compat&#39;;

// Group numbers by floor value
countBy([6.1, 4.2, 6.3], Math.floor);
// Returns: { &#39;4&#39;: 1, &#39;6&#39;: 2 }

// Group strings by length
countBy([&#39;one&#39;, &#39;two&#39;, &#39;three&#39;], &#39;length&#39;);
// Returns: { &#39;3&#39;: 2, &#39;5&#39;: 1 }

// Group users by age range
const users = [
  { name: &#39;Alice&#39;, age: 25 },
  { name: &#39;Bob&#39;, age: 35 },
  { name: &#39;Charlie&#39;, age: 25 },
];
countBy(users, user =&gt; Math.floor(user.age / 10) * 10);
// Returns: { &#39;20&#39;: 2, &#39;30&#39;: 1 }
</code></pre>

<p>Works with objects too.</p>

<pre data-language='typescript'><code class='typescript'>import { countBy } from &#39;es-toolkit/compat&#39;;

// Classify object values by type
const obj = { a: 1, b: &#39;string&#39;, c: 2, d: &#39;text&#39; };
countBy(obj, value =&gt; typeof value);
// Returns: { &#39;number&#39;: 2, &#39;string&#39;: 2 }
</code></pre>

<p>When used without an iteratee function, groups by the value itself.</p>

<pre data-language='typescript'><code class='typescript'>import { countBy } from &#39;es-toolkit/compat&#39;;

// Group by value itself
countBy([1, 2, 1, 3, 2, 1]);
// Returns: { &#39;1&#39;: 3, &#39;2&#39;: 2, &#39;3&#39;: 1 }

// Group boolean values
countBy([true, false, true, true]);
// Returns: { &#39;true&#39;: 3, &#39;false&#39;: 1 }
</code></pre>

<p><code>null</code> or <code>undefined</code> collections return an empty object.</p>

<pre data-language='typescript'><code class='typescript'>import { countBy } from &#39;es-toolkit/compat&#39;;

countBy(null);
// Returns: {}

countBy(undefined);
// Returns: {}
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>collection</code> (<code>ArrayLike&lt;T&gt; | object | null | undefined</code>): The array or object to process.</li>
<li><code>iteratee</code> (<code>ValueIteratee&lt;T&gt;</code>, optional): The function that defines the grouping criterion for each element. Can be a function, property name, or partial object.</li>
</ul>

<h4>Returns</h4>

<p>(<code>Record&lt;string, number&gt;</code>): Returns an object with keys for each group and values representing the count of elements in that group.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/compat/array/countBy.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/compat/array/countBy.html
    </a>
  </p>
</div>
