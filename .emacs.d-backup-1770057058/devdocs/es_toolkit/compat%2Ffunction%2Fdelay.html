<h1>delay (Lodash Compatibility)</h1>

<p>::: warning Use <code>setTimeout</code></p>

<p>This <code>delay</code> function is a simple wrapper around <code>setTimeout</code>, but has slight overhead due to additional type validation and number conversion.</p>

<p>Use the faster and standard <code>setTimeout</code> directly instead.</p>

<p>:::</p>

<p>Sets a timer to execute a function after a specified amount of time.</p>

<pre data-language='typescript'><code class='typescript'>const timerId = delay(func, wait, ...args);
</code></pre>

<h2>Usage</h2>

<h4><code>delay(func, wait, ...args)</code></h4>

<p>Use <code>delay</code> when you want to defer function execution by a specific amount of time. It&#39;s useful for animation timing, delaying user feedback, or scheduling asynchronous operations.</p>

<pre data-language='typescript'><code class='typescript'>import { delay } from &#39;es-toolkit/compat&#39;;

// Basic usage
const timerId = delay(() =&gt; {
  console.log(&#39;Executed after 1 second&#39;);
}, 1000);

// Using with arguments
delay(
  (name, age) =&gt; {
    console.log(`Hello, ${name}, age ${age}!`);
  },
  2000,
  &#39;John Doe&#39;,
  30
);
// After 2 seconds: Prints &quot;Hello, John Doe, age 30!&quot;
</code></pre>

<p>Comparison with <code>setTimeout</code>:</p>

<pre data-language='typescript'><code class='typescript'>// Using delay
import { delay } from &#39;es-toolkit/compat&#39;;

const timerId1 = delay(myFunction, 1000, &#39;arg1&#39;, &#39;arg2&#39;);

// Using setTimeout (faster, standard)
const timerId2 = setTimeout(myFunction, 1000, &#39;arg1&#39;, &#39;arg2&#39;);

// Or with arrow function
const timerId3 = setTimeout(() =&gt; myFunction(&#39;arg1&#39;, &#39;arg2&#39;), 1000);
</code></pre>

<p>Animation sequence:</p>

<pre data-language='typescript'><code class='typescript'>import { delay } from &#39;es-toolkit/compat&#39;;

class AnimationSequence {
  constructor(element) {
    this.element = element;
  }

  fadeInSequence() {
    // Start immediately
    this.element.style.opacity = &#39;0&#39;;
    this.element.style.display = &#39;block&#39;;

    // Start fade-in after 100ms
    delay(() =&gt; {
      this.element.style.transition = &#39;opacity 500ms ease-in&#39;;
      this.element.style.opacity = &#39;1&#39;;
    }, 100);

    // Scale animation after 1 second
    delay(() =&gt; {
      this.element.style.transform = &#39;scale(1.1)&#39;;
    }, 1000);

    // Back to original size after 1.5 seconds
    delay(() =&gt; {
      this.element.style.transform = &#39;scale(1)&#39;;
    }, 1500);
  }
}
</code></pre>

<p>Canceling timers:</p>

<pre data-language='typescript'><code class='typescript'>import { delay } from &#39;es-toolkit/compat&#39;;

class TimerManager {
  constructor() {
    this.timers = new Map();
  }

  setDelayedTask(id, task, delayMs) {
    // Cancel existing timer if it exists
    this.cancelTask(id);

    const timerId = delay(task, delayMs);
    this.timers.set(id, timerId);

    return timerId;
  }

  cancelTask(id) {
    const timerId = this.timers.get(id);
    if (timerId) {
      clearTimeout(timerId);
      this.timers.delete(id);
      return true;
    }
    return false;
  }

  cancelAllTasks() {
    this.timers.forEach(timerId =&gt; clearTimeout(timerId));
    this.timers.clear();
  }
}

const timerManager = new TimerManager();

// Schedule tasks
timerManager.setDelayedTask(
  &#39;save&#39;,
  () =&gt; {
    console.log(&#39;Auto-saved&#39;);
  },
  5000
);

timerManager.setDelayedTask(
  &#39;cleanup&#39;,
  () =&gt; {
    console.log(&#39;Cleanup completed&#39;);
  },
  10000
);

// Cancel a specific task if needed
// timerManager.cancelTask(&#39;save&#39;);

// Clean up all timers when page unloads
window.addEventListener(&#39;beforeunload&#39;, () =&gt; {
  timerManager.cancelAllTasks();
});
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>func</code> (<code>Function</code>): The function to execute after the delay.</li>
<li><code>wait</code> (<code>number</code>): The number of milliseconds to delay.</li>
<li><code>args</code> (<code>...any[]</code>): The arguments to pass to the function when it executes.</li>
</ul>

<h4>Returns</h4>

<p>(<code>number</code>): Returns the timer ID. Can be canceled with <code>clearTimeout()</code>.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/compat/function/delay.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/compat/function/delay.html
    </a>
  </p>
</div>
