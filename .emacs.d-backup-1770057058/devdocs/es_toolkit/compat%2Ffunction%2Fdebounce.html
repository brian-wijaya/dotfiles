<h1>debounce (Lodash compatibility)</h1>

<p>::: warning Use <span><code>debounce</code></span> from <code>es-toolkit</code></p>

<p>This <code>debounce</code> function has overhead due to complex <code>maxWait</code> handling and Lodash-compatible option structure.</p>

<p>Instead, use the faster and more modern <span><code>debounce</code></span> from <code>es-toolkit</code>.</p>

<p>:::</p>

<p>Creates a debounced function that delays invoking the provided function until after <code>wait</code> milliseconds have elapsed since the last time it was invoked.</p>

<pre data-language='typescript'><code class='typescript'>const debouncedFunction = debounce(func, wait, options);
</code></pre>

<h2>Usage</h2>

<h4><code>debounce(func, wait, options)</code></h4>

<p>Use <code>debounce</code> when you want to delay function invocation. It&#39;s useful for preventing excessive calls in search inputs, scroll events, button clicks, etc.</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

// Basic usage
const searchFunction = debounce(query =&gt; {
  console.log(&#39;Searching:&#39;, query);
}, 300);

// Only executes if not called again within 300ms
searchFunction(&#39;React&#39;); // Not executed
searchFunction(&#39;Vue&#39;); // Not executed
searchFunction(&#39;Angular&#39;); // Logs &quot;Searching: Angular&quot; after 300ms
</code></pre>

<p>Comparison with main library debounce:</p>

<pre data-language='typescript'><code class='typescript'>// compat version (Lodash compatible, additional options like maxWait)
import { debounce } from &#39;es-toolkit/compat&#39;;
const debouncedCompat = debounce(func, 300, {
  leading: true,
  trailing: false,
  maxWait: 1000
});

// Main library version (faster, simpler)
import { debounce } from &#39;es-toolkit&#39;;
const debouncedMain = debounce(func, 300, {
  edges: [&#39;leading&#39;] // Uses edges instead of leading/trailing
});
</code></pre>

<p>Leading and trailing options:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

const func = () =&gt; console.log(&#39;Executed&#39;);

// leading: true - Execute immediately on first call
const leadingDebounce = debounce(func, 1000, { leading: true });
leadingDebounce(); // Immediately logs &quot;Executed&quot;
leadingDebounce(); // Wait 1 second
// No additional execution after 1 second

// trailing: true (default) - Execute after delay following last call
const trailingDebounce = debounce(func, 1000, { trailing: true });
trailingDebounce(); // Wait 1 second
trailingDebounce(); // Wait 1 second (cancels previous timer)
// Logs &quot;Executed&quot; after 1 second

// Both true - Execute at start and end
const bothDebounce = debounce(func, 1000, {
  leading: true,
  trailing: true,
});
bothDebounce(); // Immediately logs &quot;Executed&quot;
bothDebounce(); // Wait 1 second
// Logs &quot;Executed&quot; after 1 second (trailing)
</code></pre>

<p>maxWait option:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

// Guarantees execution at least every 2 seconds
const debouncedWithMaxWait = debounce(() =&gt; console.log(&#39;Saved&#39;), 500, { maxWait: 2000 });

// Even with rapid consecutive calls, executes every 2 seconds
setInterval(() =&gt; {
  debouncedWithMaxWait();
}, 100); // Calls every 100ms but logs &quot;Saved&quot; every 2 seconds
</code></pre>

<p>Real-world search example:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

class SearchComponent {
  constructor() {
    this.searchInput = document.getElementById(&#39;search&#39;);

    // Debounce user input by 300ms
    this.debouncedSearch = debounce(this.performSearch.bind(this), 300, {
      leading: false, // Don&#39;t search immediately on input start
      trailing: true, // Search after input stops
    });

    this.searchInput.addEventListener(&#39;input&#39;, e =&gt; {
      this.debouncedSearch(e.target.value);
    });
  }

  performSearch(query) {
    if (query.length &lt; 2) return;

    console.log(&#39;API call:&#39;, query);
    // fetch(`/api/search?q=${query}`)...
  }
}
</code></pre>

<p>Scroll event optimization:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

// Debounce scroll events by 100ms, but execute at least every 500ms
const optimizedScrollHandler = debounce(
  () =&gt; {
    const scrollTop = window.pageYOffset;
    console.log(&#39;Scroll position:&#39;, scrollTop);

    // Header hide/show logic
    if (scrollTop &gt; 100) {
      document.header.classList.add(&#39;hidden&#39;);
    } else {
      document.header.classList.remove(&#39;hidden&#39;);
    }
  },
  100,
  { maxWait: 500 }
);

window.addEventListener(&#39;scroll&#39;, optimizedScrollHandler);
</code></pre>

<p>API call throttling:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

class AutoSave {
  constructor() {
    // Debounce by 500ms, save at least every 5 seconds
    this.debouncedSave = debounce(this.saveToServer.bind(this), 500, { maxWait: 5000 });
  }

  onTextChange(content) {
    this.pendingContent = content;
    this.debouncedSave();
  }

  saveToServer() {
    if (!this.pendingContent) return;

    console.log(&#39;Saving to server:&#39;, this.pendingContent);
    // fetch(&#39;/api/save&#39;, { ... })

    this.pendingContent = null;
  }
}
</code></pre>

<p>cancel and flush methods:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

const debouncedFunc = debounce(() =&gt; {
  console.log(&#39;Executed&#39;);
}, 1000);

debouncedFunc(); // Waiting 1 second

// Cancel pending execution
debouncedFunc.cancel();

// Or execute immediately
debouncedFunc(); // Start waiting 1 second
debouncedFunc.flush(); // Immediately logs &quot;Executed&quot; and cancels timer
</code></pre>

<p>Preventing duplicate button clicks:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

const handleSubmit = debounce(
  async formData =&gt; {
    console.log(&#39;Submitting form...&#39;);
    try {
      const response = await fetch(&#39;/api/submit&#39;, {
        method: &#39;POST&#39;,
        body: formData,
      });
      console.log(&#39;Submission complete&#39;);
    } catch (error) {
      console.error(&#39;Submission failed:&#39;, error);
    }
  },
  1000,
  { leading: true, trailing: false } // Only handle first click
);

document.getElementById(&#39;submit-btn&#39;).addEventListener(&#39;click&#39;, e =&gt; {
  const formData = new FormData(e.target.form);
  handleSubmit(formData);
});
</code></pre>

<p>Resize event handling:</p>

<pre data-language='typescript'><code class='typescript'>import { debounce } from &#39;es-toolkit/compat&#39;;

const handleResize = debounce(
  () =&gt; {
    const width = window.innerWidth;
    const height = window.innerHeight;

    console.log(&#39;Window resized:&#39;, { width, height });

    // Recalculate layout
    recalculateLayout();
  },
  250,
  { leading: false, trailing: true }
);

window.addEventListener(&#39;resize&#39;, handleResize);

// Cleanup on page unload
window.addEventListener(&#39;beforeunload&#39;, () =&gt; {
  handleResize.cancel();
});
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>func</code> (<code>Function</code>): The function to debounce.</li>
<li><code>wait</code> (<code>number</code>, optional): The number of milliseconds to delay. Defaults to <code>0</code>.</li>
<li><code>options</code> (<code>DebounceSettings</code>, optional): An options object.

<ul>
<li><code>leading</code> (<code>boolean</code>): If <code>true</code>, executes the function at the start of the delay. Defaults to <code>false</code>.</li>
<li><code>trailing</code> (<code>boolean</code>): If <code>true</code>, executes the function at the end of the delay. Defaults to <code>true</code>.</li>
<li><code>maxWait</code> (<code>number</code>): The maximum time the function execution can be delayed. Defaults to <code>Infinity</code>.</li>
</ul></li>
</ul>

<h4>Returns</h4>

<p>(<code>DebouncedFunc</code>): Returns the debounced function. It includes <code>cancel()</code> and <code>flush()</code> methods.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/compat/function/debounce.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/compat/function/debounce.html
    </a>
  </p>
</div>
