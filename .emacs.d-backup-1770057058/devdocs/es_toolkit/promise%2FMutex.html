<h1>Mutex</h1>

<p>Ensures that multiple asynchronous tasks do not execute simultaneously.</p>

<pre data-language='typescript'><code class='typescript'>const mutex = new Mutex();
</code></pre>

<h2>Usage</h2>

<h4><code>Mutex()</code></h4>

<p>Use <code>Mutex</code> when you want to prevent multiple asynchronous tasks from running concurrently. It&#39;s useful in situations where you need to control concurrency, such as database connections, file system access, or API call rate limiting.</p>

<pre data-language='typescript'><code class='typescript'>import { Mutex } from &#39;es-toolkit&#39;;

const mutex = new Mutex();

// API call rate limiting example
async function callAPI() {
  await mutex.acquire();
  try {
    // Prevents multiple API calls from happening simultaneously
    const response = await fetch(&#39;/api/data&#39;);
    return response.json();
  } finally {
    mutex.release();
  }
}

// File system access example
async function writeToFile(data: string) {
  await mutex.acquire();
  try {
    // Prevents concurrent writes to the same file
    await fs.writeFile(&#39;data.txt&#39;, data);
    console.log(&#39;File write completed&#39;);
  } finally {
    mutex.release();
  }
}

// Even if multiple tasks are called simultaneously, they execute sequentially
callAPI();
callAPI(); // Waits until the first task completes
writeToFile(); // Waits until all previous tasks complete
</code></pre>

<h4>Properties</h4>

<ul>
<li><code>isLocked</code> (<code>boolean</code>): Whether the mutex is currently in use. If <code>true</code>, it means there&#39;s already an asynchronous task running.</li>
</ul>

<h4>Methods</h4>

<ul>
<li><code>acquire</code> (<code>() =&gt; Promise&lt;void&gt;</code>): Acquires permission to execute an asynchronous task, or waits until permission is granted.</li>
<li><code>release</code> (<code>() =&gt; void</code>): Allows the next waiting task to execute.</li>
</ul>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/promise/Mutex.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/promise/Mutex.html
    </a>
  </p>
</div>
