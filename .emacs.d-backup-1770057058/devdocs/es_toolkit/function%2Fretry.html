<h1>retry</h1>

<p>Retries a Promise-returning function until it succeeds.</p>

<pre data-language='typescript'><code class='typescript'>const result = await retry(asyncFunc, options);
</code></pre>

<h2>Usage</h2>

<h4><code>retry(func, options?)</code></h4>

<p>Use <code>retry</code> when you want to automatically retry an asynchronous function that fails. This is useful for operations that can temporarily fail, such as API calls or network requests.</p>

<p>You can configure the number of retries, retry interval, and cancellation signal. The retry interval can be a fixed value or a function that dynamically calculates based on the retry count.</p>

<pre data-language='typescript'><code class='typescript'>import { retry } from &#39;es-toolkit/function&#39;;

// Basic usage (infinite retries)
const data1 = await retry(async () =&gt; {
  const response = await fetch(&#39;/api/data&#39;);
  if (!response.ok) throw new Error(&#39;Failed to fetch&#39;);
  return response.json();
});

// Limit retry count
const data2 = await retry(async () =&gt; {
  return await fetchData();
}, 3);

// Set retry interval (100ms)
const data3 = await retry(
  async () =&gt; {
    return await fetchData();
  },
  {
    retries: 3,
    delay: 100,
  }
);

// Dynamic retry interval (exponential backoff)
const data4 = await retry(
  async () =&gt; {
    return await fetchData();
  },
  {
    retries: 5,
    delay: attempts =&gt; Math.min(100 * Math.pow(2, attempts), 5000),
  }
);
</code></pre>

<p>You can also cancel retries using AbortSignal.</p>

<pre data-language='typescript'><code class='typescript'>import { retry } from &#39;es-toolkit/function&#39;;

const controller = new AbortController();

// Cancel retry after 5 seconds
setTimeout(() =&gt; controller.abort(), 5000);

try {
  const data = await retry(
    async () =&gt; {
      return await fetchData();
    },
    {
      retries: 10,
      delay: 1000,
      signal: controller.signal,
    }
  );
  console.log(data);
} catch (error) {
  console.log(&#39;Retry was canceled or failed:&#39;, error);
}
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>func</code> (<code>() =&gt; Promise&lt;T&gt;</code>): The asynchronous function to retry.</li>
<li><code>options</code> (<code>number | RetryOptions</code>, optional): The number of retries or options object.

<ul>
<li><code>retries</code> (<code>number</code>, optional): The number of times to retry. Defaults to <code>Infinity</code> for infinite retries.</li>
<li><code>delay</code> (<code>number | (attempts: number) =&gt; number</code>, optional): The retry interval (in milliseconds). Can be a number or a function. Defaults to <code>0</code>.</li>
<li><code>signal</code> (<code>AbortSignal</code>, optional): A signal that can cancel retries.</li>
</ul></li>
</ul>

<h4>Returns</h4>

<p>(<code>Promise&lt;T&gt;</code>): Returns the result of the successfully executed function.</p>

<h4>Throws</h4>

<p>Throws the last error when the retry count is exceeded or when canceled by AbortSignal.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/function/retry.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/function/retry.html
    </a>
  </p>
</div>
