<h1>isJSONValue</h1>

<p>Checks if a value is a valid JSON value.</p>

<pre data-language='typescript'><code class='typescript'>const result = isJSONValue(value);
</code></pre>

<h2>Usage</h2>

<h4><code>isJSONValue(value)</code></h4>

<p>Use <code>isJSONValue</code> when you want to check if a value can be JSON-serialized. According to JSON specifications, valid values are <code>null</code>, objects, arrays, strings, numbers, and booleans. This function is the foundation for other JSON-related type guards.</p>

<pre data-language='typescript'><code class='typescript'>import { isJSONValue } from &#39;es-toolkit/predicate&#39;;

// Primitive JSON values
console.log(isJSONValue(null)); // true
console.log(isJSONValue(&#39;hello&#39;)); // true
console.log(isJSONValue(42)); // true
console.log(isJSONValue(true)); // true
console.log(isJSONValue(false)); // true

// Objects and arrays (all internal values must also be valid)
console.log(isJSONValue({ name: &#39;John&#39;, age: 30 })); // true
console.log(isJSONValue([1, 2, 3, &#39;text&#39;])); // true
console.log(isJSONValue([])); // true (empty array)
console.log(isJSONValue({})); // true (empty object)

// Nested structures
const complexData = {
  user: {
    name: &#39;Alice&#39;,
    active: true,
    scores: [95, 87, 92],
  },
  metadata: null,
};
console.log(isJSONValue(complexData)); // true
</code></pre>

<p>Accurately distinguishes values that cannot be JSON-serialized. Functions, <code>undefined</code>, <code>Symbol</code>, class instances, etc. are not supported by JSON specifications and return <code>false</code>:</p>

<pre data-language='typescript'><code class='typescript'>// undefined is not supported in JSON
console.log(isJSONValue(undefined)); // false

// Functions cannot be JSON-serialized
console.log(isJSONValue(() =&gt; {})); // false
console.log(isJSONValue(function () {})); // false

// Symbol is not supported in JSON
console.log(isJSONValue(Symbol(&#39;test&#39;))); // false

// Date objects must be converted to strings in JSON
console.log(isJSONValue(new Date())); // false

// RegExp objects are not supported in JSON
console.log(isJSONValue(/pattern/)); // false

// Objects/arrays containing functions or undefined
console.log(isJSONValue({ name: &#39;John&#39;, greet: () =&gt; {} })); // false
console.log(isJSONValue([1, 2, undefined])); // false

// BigInt is not supported in JSON
console.log(isJSONValue(BigInt(123))); // false
</code></pre>

<p>Useful for data validation before JSON serialization:</p>

<pre data-language='typescript'><code class='typescript'>// Safe JSON serialization
function safeJsonStringify(data: unknown): string | null {
  if (isJSONValue(data)) {
    // Data is guaranteed to be a valid JSON value
    return JSON.stringify(data);
  }

  console.warn(&#39;Data is not JSON-serializable&#39;);
  return null;
}

// API request data validation
function sendApiRequest(data: unknown) {
  if (isJSONValue(data)) {
    const jsonPayload = JSON.stringify(data);
    // Send API request
    console.log(&#39;Data to send:&#39;, jsonPayload);
    return fetch(&#39;/api/data&#39;, {
      method: &#39;POST&#39;,
      headers: { &#39;Content-Type&#39;: &#39;application/json&#39; },
      body: jsonPayload,
    });
  }

  throw new Error(&#39;API data must be JSON-serializable&#39;);
}

// localStorage validation before saving
function saveToStorage(key: string, value: unknown) {
  if (isJSONValue(value)) {
    localStorage.setItem(key, JSON.stringify(value));
    return true;
  }

  console.error(&#39;Cannot save non-JSON-serializable data type to localStorage&#39;);
  return false;
}

// Configuration file validation
function validateConfig(config: unknown) {
  if (isJSONValue(config)) {
    return {
      isValid: true,
      config,
      serialized: JSON.stringify(config),
    };
  }

  return {
    isValid: false,
    config: null,
    error: &#39;Config must be a valid JSON value&#39;,
  };
}
</code></pre>

<p>Can be combined with other type guards.</p>

<pre data-language='typescript'><code class='typescript'>// Specific JSON type checking
function processJsonData(data: unknown) {
  if (!isJSONValue(data)) {
    throw new Error(&#39;Invalid JSON value&#39;);
  }

  // Now data is guaranteed to be a valid JSON value
  if (isJSONObject(data)) {
    console.log(&#39;Is a JSON object:&#39;, Object.keys(data));
  } else if (isJSONArray(data)) {
    console.log(&#39;Is a JSON array:&#39;, data.length, &#39;items&#39;);
  } else {
    console.log(&#39;Is a primitive JSON value:&#39;, typeof data, data);
  }
}

// Nested data validation
const testData = {
  valid: { name: &#39;test&#39;, values: [1, 2, 3] },
  invalid: { name: &#39;test&#39;, callback: () =&gt; {} },
};

console.log(isJSONValue(testData.valid)); // true
console.log(isJSONValue(testData.invalid)); // false
</code></pre>

<p>Edge cases:</p>

<pre data-language='typescript'><code class='typescript'>// Special number values
console.log(isJSONValue(Infinity)); // false (converted to null in JSON)
console.log(isJSONValue(-Infinity)); // false
console.log(isJSONValue(NaN)); // false (converted to null in JSON)

// Empty values
console.log(isJSONValue(&#39;&#39;)); // true (empty string)
console.log(isJSONValue(0)); // true
console.log(isJSONValue(false)); // true

// Objects with prototypes
const obj = Object.create({ inherited: &#39;value&#39; });
obj.own = &#39;property&#39;;
console.log(isJSONValue(obj)); // true (treated as plain object)
</code></pre>

<h4>Parameters</h4>

<ul>
<li><code>value</code> (<code>unknown</code>): The value to check if it&#39;s a valid JSON value.</li>
</ul>

<h4>Returns</h4>

<p>(<code>value is Record&lt;string, any&gt; | any[] | string | number | boolean | null</code>): Returns <code>true</code> if the value is a valid JSON value, <code>false</code> otherwise.</p>
<div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024-2025, Viva Republica<br>
      Licensed under the MIT License.

    <br>
    <a href="https://es-toolkit.slash.page/reference/predicate/isJSONValue.html" class="_attribution-link">
      https://es-toolkit.slash.page/reference/predicate/isJSONValue.html
    </a>
  </p>
</div>
