<header><h1>Security</h1></header><h2 class="anchor anchorWithStickyNavbar_hhKX" id="audits">Audits<a href="#audits" class="hash-link" aria-label="Direct link to Audits" title="Direct link to Audits">​</a>
</h2> <p>Yarn doesn't run audits by default when running <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Install the project dependencies
" href="../cli/install"><span class="token_Ye2a" data-type="path">install</span></a></code></span>, as this should rather be performed in a cron task. You can however perform audits whenever you want by running <a href="../cli/npm/audit"><span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Perform a vulnerability audit against the installed packages
" href="../cli/npm/audit"><span class="token_Ye2a" data-type="path">npm</span> <span class="token_Ye2a" data-type="path">audit</span></a></code></span></a>.</p> <div class="theme-admonition theme-admonition-info admonition_w2cE alert alert--info">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div>
<div class="admonitionContent_SoUl"><p>Our implementation has a couple of differences with the npm one. Like most other Yarn commands, <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Perform a vulnerability audit against the installed packages
" href="../cli/npm/audit"><span class="token_Ye2a" data-type="path">npm</span> <span class="token_Ye2a" data-type="path">audit</span></a></code></span>, by default, only applies on the direct dependencies from the current workspace. To get a report on the whole project, use the <code>-A,--all</code> and/or <code>-R,--recursive</code> flags.</p></div>
</div> <div class="theme-admonition theme-admonition-tip admonition_w2cE alert alert--success">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div>
<div class="admonitionContent_SoUl"><p>You can exclude your <code data-tooltip-id="tooltip" data-tooltip-content="Set of dependencies that must be made available to the current package in order for it to work properly as a workspace."><a class="key_FEvO" href="../configuration/manifest#devDependencies">devDependencies</a></code> (and their transitive dependencies) from the report by running the command with <code>--environment production</code>.</p></div>
</div> <h2 class="anchor anchorWithStickyNavbar_hhKX" id="hardened-mode">Hardened mode<a href="#hardened-mode" class="hash-link" aria-label="Direct link to Hardened mode" title="Direct link to Hardened mode">​</a>
</h2> <p>The hardened mode can be set (or disabled) using either the <code data-tooltip-id="tooltip" data-tooltip-content="Define whether Yarn should attempt to check for malicious changes."><a class="key_FEvO" href="../configuration/yarnrc#enableHardenedMode">enableHardenedMode</a></code> setting or by defining <code>YARN_ENABLE_HARDENED_MODE=1|0</code> in your environment variables, but in most cases you won't even have to think about it - the hardened mode is enabled by default when Yarn detects it runs in a pull request from a public GitHub repository.</p> <p>Under this mode, Yarn will automatically enable the <code>--check-resolutions</code> and <code>--refresh-lockfile</code> flags when running <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Install the project dependencies
" href="../cli/install"><span class="token_Ye2a" data-type="path">install</span></a></code></span>, which should protect you against most attacks caused by <a href="https://snyk.io/blog/why-npm-lockfiles-can-be-a-security-blindspot-for-injecting-malicious-modules/" target="_blank" rel="noopener noreferrer">lockfile poisoning</a>, at the cost of a little bit of install speed.</p> <div class="theme-admonition theme-admonition-danger admonition_w2cE alert alert--danger">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div>
<div class="admonitionContent_SoUl"><p>The hardened mode makes installs significantly slower as Yarn has to query the registry to make sure the information contained in the lockfile are accurate. If your CI pipeline runs multiple jobs, we recommend disabling the hardened mode in all but one of them so as to limit the performance impact.</p></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/features/security" class="_attribution-link">https://yarnpkg.com/features/security</a>
  </p>
</div>
