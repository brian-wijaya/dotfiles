<header><h1>Extensibility</h1></header><h2 class="anchor anchorWithStickyNavbar_hhKX" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a>
</h2> <p>Many Yarn users have many different use cases, and while we try to find satisfying solutions to most common problems, our team may not have the bandwidth to research and maintain some of the most exotic ones. To avoid blocking you should you face a novel situation that Yarn doesn't support out of the box yet, we provide a very powerful API that you can leverage in your own custom plugins.</p> <p>Plugins are, in essence, small scripts listed in your configuration that Yarn will dynamically require at startup.</p> <h2 class="anchor anchorWithStickyNavbar_hhKX" id="what-can-plugins-do">What can plugins do?<a href="#what-can-plugins-do" class="hash-link" aria-label="Direct link to What can plugins do?" title="Direct link to What can plugins do?">​</a>
</h2> <ul> <li> <p><strong>Plugins can add new resolvers.</strong> Resolvers are the components tasked from converting dependency ranges (for example <code>^1.2.0</code>) into fully-qualified package references (for example <code>npm:1.2.0</code>). By implementing a resolver, you can tell Yarn which versions are valid candidates to a specific range.</p> </li> <li> <p><strong>Plugins can add new fetchers.</strong> Fetchers are the components that take the fully-qualified package references we mentioned in the previous step (for example <code>npm:1.2.0</code>) and know how to obtain the actual package data they reference. Fetchers can work with remote sources (for example the npm registry), but can also find the packages directly from their location on the disk (or any other data source).</p> </li> <li> <p><strong>Plugins can add new linkers.</strong> Once all the packages have been located and are ready for installation, Yarn will call the linkers to generate the files needed for the install targets to work properly. As an example, the PnP linker generates a Node.js loader file, the node-modules linker generates a <code>node_modules</code> folder, and an hypothetical Python linker would generate a virtualenv.</p> </li> <li> <p><strong>Plugins can add new commands.</strong> Each plugin can ship as many commands as they see fit, which will be injected into our CLI (also making them available through <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <span class="path_tCL7"><span class="token_Ye2a" data-type="path">--help</span></span></code></span>). Because the Yarn plugins are dynamically linked with the running Yarn process, they have access to the full Yarn API, just like any other official command. This lets you experiment with your own custom logic, should Yarn be missing something you need.</p> </li> <li> <p><strong>Plugins can register to some events.</strong> Yarn has a concept known as "hooks", where events are periodically triggered during the lifecycle of the package manager. Plugins can register to those hooks in order to add their own logic depending on what the core allows. For example, the <code>afterAllInstalled</code> hook will be called each time an install is performed.</p> </li> </ul> <h2 class="anchor anchorWithStickyNavbar_hhKX" id="how-to-write-a-plugin">How to write a plugin?<a href="#how-to-write-a-plugin" class="hash-link" aria-label="Direct link to How to write a plugin?" title="Direct link to How to write a plugin?">​</a>
</h2> <p>We have a tutorial for this! Head over to <a href="../advanced/plugin-tutorial">Plugin Tutorial</a>.</p> <div class="theme-admonition theme-admonition-tip admonition_w2cE alert alert--success">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div>
<div class="admonitionContent_SoUl">
<p>You'll want to use the Yarn API from your hooks and commands - learning it may look scary, but you have access to the best examples there is: Yarn itself!</p>
<p>For example, the implementation of <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Install a single workspace and its dependencies
" href="../cli/workspaces/focus"><span class="token_Ye2a" data-type="path">workspaces</span> <span class="token_Ye2a" data-type="path">focus</span></a></code></span> is only about <a href="https://github.com/yarnpkg/berry/blob/master/packages/plugin-workspace-tools/sources/commands/focus.ts" target="_blank" rel="noopener noreferrer">a hundred lines of code</a>, making it a good starting point if you wish to implement partial installs according to your own logic.</p>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/features/extensibility" class="_attribution-link">https://yarnpkg.com/features/extensibility</a>
  </p>
</div>
