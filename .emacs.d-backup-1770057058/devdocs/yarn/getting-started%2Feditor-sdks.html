<header><h1>Editor SDKs</h1></header><p>Smart IDEs (such as VSCode or IntelliJ) require special configuration for TypeScript to work when using <a href="../features/pnp" target="_blank" rel="noopener noreferrer">Plug'n'Play installs</a>. This page is a collection of settings for each editor we've looked into.</p> <p>The editor SDKs and settings can be generated using <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Run a package in a temporary environment
" href="../cli/dlx"><span class="token_Ye2a" data-type="path">dlx</span></a> <span class="token_Ye2a" data-type="positional">@yarnpkg/sdks</span></code></span>. Its detailed documentation can be found on the <a href="../cli/sdks/default" target="_blank" rel="noopener noreferrer">dedicated page</a>.</p> <div class="theme-admonition theme-admonition-info admonition_w2cE alert alert--info">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div>
<div class="admonitionContent_SoUl">
<p><strong>Why are SDKs needed with Yarn PnP?</strong></p>
<p>Yarn PnP works by generating a <a href="https://nodejs.org/api/esm.html#loaders" target="_blank" rel="noopener noreferrer">Node.js loader</a>, which has to be injected within the Node.js runtime. Many IDE extensions execute the packages they wrap (Prettier, TypeScript, ...) without consideration for loaders.</p>
<p>The SDKs workaround that by generating indirection packages. When required, these indirection automatically setup the loader before forwarding the <code>require</code> calls to the real packages.</p>
</div>
</div> <h2 class="anchor anchorWithStickyNavbar_hhKX" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a>
</h2> <p>Generate both the base SDK and the editor settings:</p>  <p>Generate the base SDK, but no editor settings:</p>  <p>Update all installed SDKs &amp; editor settings:</p>  <h2 class="anchor anchorWithStickyNavbar_hhKX" id="tools-currently-supported">Tools currently supported<a href="#tools-currently-supported" class="hash-link" aria-label="Direct link to Tools currently supported" title="Direct link to Tools currently supported">​</a>
</h2> <div class="theme-admonition theme-admonition-warning admonition_w2cE alert alert--warning">
<div class="admonitionHeading_zjKb">
<span class="admonitionIcon_xnvX"><svg viewbox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div>
<div class="admonitionContent_SoUl"><p>The <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Run a package in a temporary environment
" href="../cli/dlx"><span class="token_Ye2a" data-type="path">dlx</span></a> <span class="token_Ye2a" data-type="positional">@yarnpkg/sdks</span></code></span> command will look at the content of your <em>root</em> <code>package.json</code> to figure out the SDKs you need - it won't look at the dependencies from any other workspaces.</p></div>
</div> <table>
<thead><tr>
<th>Supported extension</th>
<th>Enabled if ... is found in your <code>package.json</code> dependencies</th>
</tr></thead>
<tbody>
<tr>
<td>Builtin VSCode TypeScript Server</td>
<td><a href="https://yarnpkg.com/package/typescript" target="_blank" rel="noopener noreferrer">typescript</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=astro-build.astro-vscode" target="_blank" rel="noopener noreferrer">astro-vscode</a></td>
<td><a href="https://astro.build/" target="_blank" rel="noopener noreferrer">astro</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">vscode-eslint</a></td>
<td><a href="https://yarnpkg.com/package/eslint" target="_blank" rel="noopener noreferrer">eslint</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener noreferrer">prettier-vscode</a></td>
<td><a href="https://yarnpkg.com/package/prettier" target="_blank" rel="noopener noreferrer">prettier</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=meta.relay" target="_blank" rel="noopener noreferrer">relay</a></td>
<td><a href="https://relay.dev/" target="_blank" rel="noopener noreferrer">relay</a></td>
</tr>
</tbody>
</table> <p>If you'd like to contribute more, <a href="https://github.com/yarnpkg/berry/blob/master/packages/yarnpkg-sdks/sources/generateSdk.ts" target="_blank" rel="noopener noreferrer">take a look here!</a></p> <h2 class="anchor anchorWithStickyNavbar_hhKX" id="editor-setup">Editor setup<a href="#editor-setup" class="hash-link" aria-label="Direct link to Editor setup" title="Direct link to Editor setup">​</a>
</h2> <h3 class="anchor anchorWithStickyNavbar_hhKX" id="coc-nvim">CoC nvim<a href="#coc-nvim" class="hash-link" aria-label="Direct link to CoC nvim" title="Direct link to CoC nvim">​</a>
</h3> <ol> <li> <p>Install <a href="https://github.com/lbrayner/vim-rzip" target="_blank" rel="noopener noreferrer">vim-rzip</a></p> </li> <li> <p>Run the following command, which will generate a <code>.vim/coc-settings.json</code> file:</p> </li> </ol> <div class="language-bash codeBlockContainer_iUqV theme-code-block"><div class="codeBlockContent_Xs1n">
<pre tabindex="0" class="prism-code language-bash codeBlock_hDG7 thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks vim</pre>
<div class="buttonGroup_ipu6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FbbJ" aria-hidden="true"><svg viewbox="0 0 24 24" class="copyButtonIcon_Nh6j"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewbox="0 0 24 24" class="copyButtonSuccessIcon_wXPl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div>
</div></div> <h3 class="anchor anchorWithStickyNavbar_hhKX" id="emacs">Emacs<a href="#emacs" class="hash-link" aria-label="Direct link to Emacs" title="Direct link to Emacs">​</a>
</h3> <p>The SDK comes with a typescript-language-server wrapper which enables you to use the ts-ls LSP client.</p> <ol> <li>Run the following command, which will generate a new directory called <code>.yarn/sdks</code>:</li> </ol> <div class="language-bash codeBlockContainer_iUqV theme-code-block"><div class="codeBlockContent_Xs1n">
<pre tabindex="0" class="prism-code language-bash codeBlock_hDG7 thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks base</pre>
<div class="buttonGroup_ipu6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FbbJ" aria-hidden="true"><svg viewbox="0 0 24 24" class="copyButtonIcon_Nh6j"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewbox="0 0 24 24" class="copyButtonSuccessIcon_wXPl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div>
</div></div> <ol start="2"> <li>Create a <code>.dir-locals.el</code> with the following content to enable Flycheck and LSP support, and make sure LSP is loaded after local variables are applied to trigger the <code>eval-after-load</code>:</li> </ol> <div class="language-lisp codeBlockContainer_iUqV theme-code-block"><div class="codeBlockContent_Xs1n">
<pre tabindex="0" class="prism-code language-lisp codeBlock_hDG7 thin-scrollbar" data-language="lisp">((typescript-mode
  . ((eval . (let ((project-directory (car (dir-locals-find-file default-directory))))
                (setq lsp-clients-typescript-server-args `("--tsserver-path" ,(concat project-directory ".yarn/sdks/typescript/bin/tsserver") "--stdio")))))))</pre>
<div class="buttonGroup_ipu6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FbbJ" aria-hidden="true"><svg viewbox="0 0 24 24" class="copyButtonIcon_Nh6j"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewbox="0 0 24 24" class="copyButtonSuccessIcon_wXPl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div>
</div></div> <h3 class="anchor anchorWithStickyNavbar_hhKX" id="neovim-native-lsp">Neovim Native LSP<a href="#neovim-native-lsp" class="hash-link" aria-label="Direct link to Neovim Native LSP" title="Direct link to Neovim Native LSP">​</a>
</h3> <ol> <li> <p>Install <a href="https://github.com/lbrayner/vim-rzip" target="_blank" rel="noopener noreferrer">vim-rzip</a></p> </li> <li> <p>Run the following command, which will generate a new directory called <code>.yarn/sdks</code>:</p> </li> </ol> <div class="language-bash codeBlockContainer_iUqV theme-code-block"><div class="codeBlockContent_Xs1n">
<pre tabindex="0" class="prism-code language-bash codeBlock_hDG7 thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks base</pre>
<div class="buttonGroup_ipu6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FbbJ" aria-hidden="true"><svg viewbox="0 0 24 24" class="copyButtonIcon_Nh6j"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewbox="0 0 24 24" class="copyButtonSuccessIcon_wXPl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div>
</div></div> <p>TypeScript support should then work out of the box with <a href="https://github.com/neovim/nvim-lspconfig" target="_blank" rel="noopener noreferrer">nvim-lspconfig</a> and <a href="https://github.com/theia-ide/typescript-language-server" target="_blank" rel="noopener noreferrer">theia-ide/typescript-language-server</a>.</p> <h3 class="anchor anchorWithStickyNavbar_hhKX" id="vscode">VSCode<a href="#vscode" class="hash-link" aria-label="Direct link to VSCode" title="Direct link to VSCode">​</a>
</h3> <ol> <li> <p>Install the <a href="https://marketplace.visualstudio.com/items?itemName=arcanis.vscode-zipfs" target="_blank" rel="noopener noreferrer">ZipFS</a> extension, which is maintained by the Yarn team.</p> </li> <li> <p>Run the following command, which will generate a <code>.vscode/settings.json</code> file:</p> </li> </ol> <div class="language-bash codeBlockContainer_iUqV theme-code-block"><div class="codeBlockContent_Xs1n">
<pre tabindex="0" class="prism-code language-bash codeBlock_hDG7 thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks vscode</pre>
<div class="buttonGroup_ipu6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FbbJ" aria-hidden="true"><svg viewbox="0 0 24 24" class="copyButtonIcon_Nh6j"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewbox="0 0 24 24" class="copyButtonSuccessIcon_wXPl"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div>
</div></div> <ol start="3"> <li> <p>For safety reason VSCode requires you to explicitly activate the custom TS settings:</p> <ol> <li>Press <kbd>ctrl+shift+p</kbd> in a TypeScript file</li> <li>Choose "Select TypeScript Version"</li> <li>Pick "Use Workspace Version"</li> </ol> </li> </ol> <p>Your VSCode project is now configured to use the exact same version of TypeScript as the one you usually use, except that it will be able to properly resolve the type definitions.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/getting-started/editor-sdks" class="_attribution-link">https://yarnpkg.com/getting-started/editor-sdks</a>
  </p>
</div>
