<h1>vgcfgrestore(8) — Linux manual page</h1>   <pre>
<span class="headline"><i>VGCFGRESTORE</i>(8)          System Manager's Manual         <i>VGCFGRESTORE</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       vgcfgrestore — Restore volume group configuration
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>vgcfgrestore </b><i>option_args position_args</i>
           [ <i>option_args</i> ]
           [ <i>position_args</i> ]

           <b>--commandprofile </b><i>String</i>
           <b>--config </b><i>String</i>
        <b>-d</b>|<b>--debug</b>
           <b>--devices </b><i>PV</i>
           <b>--devicesfile </b><i>String</i>
           <b>--driverloaded y</b>|<b>n</b>
        <b>-f</b>|<b>--file </b><i>String</i>
           <b>--force</b>
        <b>-h</b>|<b>--help</b>
           <b>--journal </b><i>String</i>
        <b>-l</b>|<b>--list</b>
           <b>--lockopt </b><i>String</i>
           <b>--longhelp</b>
        <b>-M</b>|<b>--metadatatype lvm2</b>
           <b>--nohints</b>
           <b>--nolocking</b>
           <b>--profile </b><i>String</i>
        <b>-q</b>|<b>--quiet</b>
        <b>-t</b>|<b>--test</b>
        <b>-v</b>|<b>--verbose</b>
           <b>--version</b>
        <b>-y</b>|<b>--yes</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       vgcfgrestore  restores  the  metadata of a VG from a text back up
       file produced by <b>vgcfgbackup</b>. This writes VG  metadata  onto  the
       devices specified in back up file.

       A  back  up file can be specified with <b>--file</b>.  If no backup file
       is specified, the most recent one is used. Use <b>--list </b>for a  list
       of the available back up and archive files of a VG.

       WARNING:  When a VG contains thin pools, changes to thin metadata
       cannot be reverted, and data loss may occur if thin metadata  has
       changed. The force option is required to restore in this case.
</pre> <h2>
USAGE </h2>
<pre>
       Restore VG metadata from last backup.

       <b>vgcfgrestore </b><i>VG</i>
           [ COMMON_OPTIONS ]

       —

       Restore VG metadata from specified file.

       <b>vgcfgrestore -f</b>|<b>--file </b><i>String VG</i>
           [ COMMON_OPTIONS ]

       —

       List all VG metadata backups.

       <b>vgcfgrestore -l</b>|<b>--list </b><i>VG</i>
           [ COMMON_OPTIONS ]

       —

       List one VG metadata backup file.

       <b>vgcfgrestore -l</b>|<b>--list -f</b>|<b>--file </b><i>String</i>
           [ COMMON_OPTIONS ]
           [ <i>VG</i> ]

       —

       Common options for command:
           [ <b>-M</b>|<b>--metadatatype lvm2 </b>]
           [    <b>--force </b>]

       Common options for lvm:
           [ <b>-d</b>|<b>--debug </b>]
           [ <b>-h</b>|<b>--help </b>]
           [ <b>-q</b>|<b>--quiet </b>]
           [ <b>-t</b>|<b>--test </b>]
           [ <b>-v</b>|<b>--verbose </b>]
           [ <b>-y</b>|<b>--yes </b>]
           [    <b>--commandprofile </b><i>String</i> ]
           [    <b>--config </b><i>String</i> ]
           [    <b>--devices </b><i>PV</i> ]
           [    <b>--devicesfile </b><i>String</i> ]
           [    <b>--driverloaded y</b>|<b>n </b>]
           [    <b>--journal </b><i>String</i> ]
           [    <b>--lockopt </b><i>String</i> ]
           [    <b>--longhelp </b>]
           [    <b>--nohints </b>]
           [    <b>--nolocking </b>]
           [    <b>--profile </b><i>String</i> ]
           [    <b>--version </b>]
</pre> <h2>
OPTIONS </h2>
<pre>

       <b>--commandprofile </b><i>String</i>
              The command profile to use for command configuration.  See
              <a href="../man5/lvm.conf.5">lvm.conf(5)</a> for more information about profiles.

       <b>--config </b><i>String</i>
              Config   settings   for   the   command.   These  override
              <a href="../man5/lvm.conf.5">lvm.conf(5)</a> settings.  The String arg uses the same format
              as <a href="../man5/lvm.conf.5">lvm.conf(5)</a>, or  may  use  section/field  syntax.   See
              <a href="../man5/lvm.conf.5">lvm.conf(5)</a> for more information about config.

       <b>-d</b>|<b>--debug </b>...
              Set  debug level. Repeat from 1 to 6 times to increase the
              detail of messages sent to the log file and/or syslog  (if
              configured).

       <b>--devices </b><i>PV</i>
              Devices  that  the  command  can  use.  This option can be
              repeated or accepts a comma  separated  list  of  devices.
              This overrides the devices file.

       <b>--devicesfile </b><i>String</i>
              A file listing devices that LVM should use.  The file must
              exist   in  <i>/etc/lvm/devices/</i>  and  is  managed  with  the
              <a href="lvmdevices.8">lvmdevices(8)</a> command.   This  overrides  the  <a href="../man5/lvm.conf.5">lvm.conf(5)</a>
              <b>devices/devicesfile  </b>and <b>devices/use_devicesfile </b>settings.

       <b>--driverloaded y</b>|<b>n</b>
              If set to no, the command will not attempt to use  device-
              mapper.  For testing and debugging.

       <b>-f</b>|<b>--file </b><i>String</i>
              Read  metadata  backup  from the named file.  Usually this
              file was created by vgcfgbackup.

       <b>--force </b>...
              Force metadata restore even with thin pool LVs.  Use  with
              extreme  caution.  Most changes to thin metadata cannot be
              reverted.  You may lose data if you restore metadata  that
              does not match the thin pool kernel metadata precisely.

       <b>-h</b>|<b>--help</b>
              Display help text.

       <b>--journal </b><i>String</i>
              Record   information   in   the   systemd  journal.   This
              information is in addition to information enabled  by  the
              lvm.conf log/journal setting.  command: record information
              about  the  command.   output:  record the default command
              output.  debug: record full command debugging.

       <b>-l</b>|<b>--list</b>
              List metadata backup and archive files pertaining  to  the
              VG.  May be used with --file. Does not restore the VG.

       <b>--lockopt </b><i>String</i>
              Used  to  pass options for special cases to lvmlockd.  See
              <a href="lvmlockd.8">lvmlockd(8)</a> for more information.

       <b>--longhelp</b>
              Display long help text.

       <b>-M</b>|<b>--metadatatype lvm2</b>
              Specifies the type of on-disk metadata to use.   <b>lvm2  </b>(or
              just <b>2</b>) is the current, standard format.  <b>lvm1 </b>(or just <b>1</b>)
              is no longer used.

       <b>--nohints</b>
              Do  not  use  the  hints file to locate devices for PVs. A
              command may read more devices to find PVs when  hints  are
              not  used.  The  command  will still perform standard hint
              file invalidation where appropriate.

       <b>--nolocking</b>
              Disable locking.

       <b>--profile </b><i>String</i>
              An  alias  for  --commandprofile   or   --metadataprofile,
              depending on the command.

       <b>-q</b>|<b>--quiet </b>...
              Suppress  output  and  log messages. Overrides --debug and
              --verbose.  Repeat once to also suppress any prompts  with
              answer 'no'.

       <b>-t</b>|<b>--test</b>
              Run in test mode. Commands will not update metadata.  This
              is  implemented  by  disabling  all  metadata  writing but
              nevertheless returning success to  the  calling  function.
              This  may  lead  to  unusual error messages in multi-stage
              operations if a tool relies on reading  back  metadata  it
              believes has changed but hasn't.

       <b>-v</b>|<b>--verbose </b>...
              Set  verbose  level.  Repeat from 1 to 4 times to increase
              the detail of messages sent to stdout and stderr.

       <b>--version</b>
              Display version information.

       <b>-y</b>|<b>--yes</b>
              Do not prompt for confirmation  interactively  but  always
              assume  the  answer  yes.  Use with extreme caution.  (For
              automatic no, see -qq.)
</pre> <h2>
VARIABLES </h2>
<pre>
       <i>VG</i>     Volume Group name.  See <a href="lvm.8">lvm(8)</a> for valid names.

       <i>String</i> See the option description for information about the
              string content.

       <i>Size</i>[UNIT]
              Size is an input number that accepts an optional unit.
              Input units are always treated as base two values,
              regardless of capitalization, e.g. 'k' and 'K' both refer
              to 1024.  The default input unit is specified by letter,
              followed by |UNIT.  UNIT represents other possible input
              units: <b>b</b>|<b>B </b>is bytes, <b>s</b>|<b>S </b>is sectors of 512 bytes, <b>k</b>|<b>K </b>is
              KiB, <b>m</b>|<b>M </b>is MiB, <b>g</b>|<b>G </b>is GiB, <b>t</b>|<b>T </b>is TiB, <b>p</b>|<b>P </b>is PiB, <b>e</b>|<b>E</b>
              is EiB.  (This should not be confused with the output
              control --units, where capital letters mean multiple of
              1000.)
</pre> <h2>
ENVIRONMENT VARIABLES </h2>
<pre>
       See <a href="lvm.8">lvm(8)</a> for information about environment variables used by
       lvm.  For example, LVM_VG_NAME can generally be substituted for a
       required VG parameter.
</pre> <h2>
NOTES </h2>
<pre>
       To replace PVs, <b>vgdisplay --partial --verbose </b>will show the UUIDs
       and sizes of any PVs that are no longer present. If a PV in the
       VG is lost and you wish to substitute another of the same size,
       use <b>pvcreate --restorefile filename --uuid uuid </b>(plus additional
       arguments as appropriate) to initialise it with the same UUID as
       the missing PV. Repeat for all other missing PVs in the VG.  Then
       use <b>vgcfgrestore --file filename </b>to restore the VG's metadata.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="lvm.8">lvm(8)</a>, <a href="../man5/lvm.conf.5">lvm.conf(5)</a>, <a href="lvmconfig.8">lvmconfig(8)</a>, <a href="lvmdevices.8">lvmdevices(8)</a>,

       <a href="pvchange.8">pvchange(8)</a>, <a href="pvck.8">pvck(8)</a>, <a href="pvcreate.8">pvcreate(8)</a>, <a href="pvdisplay.8">pvdisplay(8)</a>, <a href="pvmove.8">pvmove(8)</a>,
       <a href="pvremove.8">pvremove(8)</a>, <a href="pvresize.8">pvresize(8)</a>, <a href="pvs.8">pvs(8)</a>, <a href="pvscan.8">pvscan(8)</a>,

       <a href="vgcfgbackup.8">vgcfgbackup(8)</a>, <a href="vgcfgrestore.8">vgcfgrestore(8)</a>, <a href="vgchange.8">vgchange(8)</a>, <a href="vgck.8">vgck(8)</a>,
       <a href="vgcreate.8">vgcreate(8)</a>, <a href="vgconvert.8">vgconvert(8)</a>, <a href="vgdisplay.8">vgdisplay(8)</a>, <a href="vgexport.8">vgexport(8)</a>,
       <a href="vgextend.8">vgextend(8)</a>, <a href="vgimport.8">vgimport(8)</a>, <a href="vgimportclone.8">vgimportclone(8)</a>, <a href="vgimportdevices.8">vgimportdevices(8)</a>,
       <a href="vgmerge.8">vgmerge(8)</a>, <a href="vgmknodes.8">vgmknodes(8)</a>, <a href="vgreduce.8">vgreduce(8)</a>, <a href="vgremove.8">vgremove(8)</a>, <a href="vgrename.8">vgrename(8)</a>,
       <a href="vgs.8">vgs(8)</a>, <a href="vgscan.8">vgscan(8)</a>, <a href="vgsplit.8">vgsplit(8)</a>,

       <a href="lvcreate.8">lvcreate(8)</a>, <a href="lvchange.8">lvchange(8)</a>, <a href="lvconvert.8">lvconvert(8)</a>, <a href="lvdisplay.8">lvdisplay(8)</a>,
       <a href="lvextend.8">lvextend(8)</a>, <a href="lvreduce.8">lvreduce(8)</a>, <a href="lvremove.8">lvremove(8)</a>, <a href="lvrename.8">lvrename(8)</a>, <a href="lvresize.8">lvresize(8)</a>,
       <a href="lvs.8">lvs(8)</a>, <a href="lvscan.8">lvscan(8)</a>,

       <a href="lvm-fullreport.8">lvm-fullreport(8)</a>, <a href="lvm-lvpoll.8">lvm-lvpoll(8)</a>, <a href="blkdeactivate.8">blkdeactivate(8)</a>, <a href="lvmdump.8">lvmdump(8)</a>,

       <a href="dmeventd.8">dmeventd(8)</a>, <a href="lvmpolld.8">lvmpolld(8)</a>, <a href="lvmlockd.8">lvmlockd(8)</a>, <a href="lvmlockctl.8">lvmlockctl(8)</a>,
       <a href="cmirrord.8">cmirrord(8)</a>, <a href="lvmdbusd.8">lvmdbusd(8)</a>, <a href="fsadm.8">fsadm(8)</a>,

       <a href="../man7/lvmsystemid.7">lvmsystemid(7)</a>, <a href="../man7/lvmreport.7">lvmreport(7)</a>, <a href="../man7/lvmcache.7">lvmcache(7)</a>, <a href="../man7/lvmraid.7">lvmraid(7)</a>,
       <a href="../man7/lvmthin.7">lvmthin(7)</a>, <a href="../man7/lvmvdo.7">lvmvdo(7)</a>, <a href="../man7/lvmautoactivation.7">lvmautoactivation(7)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>lvm2</i> (Logical Volume Manager 2) project.
       Information about the project can be found at 
       ⟨<a href="http://www.sourceware.org/lvm2/">http://www.sourceware.org/lvm2/</a>⟩.  If you have a bug report for
       this manual page, see ⟨<a href="https://github.com/lvmteam/lvm2/issues">https://github.com/lvmteam/lvm2/issues</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨git://sourceware.org/git/lvm2.git⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-11.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Red Hat, Inc.     LVM TOOLS 2.03.25(2)-git (2024-05-16)  <i>VGCFGRESTORE</i>(8)</span>
</pre>  <p>Pages that refer to this page: <a href="lvchange.8">lvchange(8)</a>, <a href="lvconvert.8">lvconvert(8)</a>, <a href="lvcreate.8">lvcreate(8)</a>, <a href="lvdisplay.8">lvdisplay(8)</a>, <a href="lvextend.8">lvextend(8)</a>, <a href="lvm.8">lvm(8)</a>, <a href="lvmconfig.8">lvmconfig(8)</a>, <a href="lvmdevices.8">lvmdevices(8)</a>, <a href="lvmdiskscan.8">lvmdiskscan(8)</a>, <a href="lvm-fullreport.8">lvm-fullreport(8)</a>, <a href="lvm-lvpoll.8">lvm-lvpoll(8)</a>, <a href="lvreduce.8">lvreduce(8)</a>, <a href="lvremove.8">lvremove(8)</a>, <a href="lvrename.8">lvrename(8)</a>, <a href="lvresize.8">lvresize(8)</a>, <a href="lvs.8">lvs(8)</a>, <a href="lvscan.8">lvscan(8)</a>, <a href="pvchange.8">pvchange(8)</a>, <a href="pvck.8">pvck(8)</a>, <a href="pvcreate.8">pvcreate(8)</a>, <a href="pvdisplay.8">pvdisplay(8)</a>, <a href="pvmove.8">pvmove(8)</a>, <a href="pvremove.8">pvremove(8)</a>, <a href="pvresize.8">pvresize(8)</a>, <a href="pvs.8">pvs(8)</a>, <a href="pvscan.8">pvscan(8)</a>, <a href="vgcfgbackup.8">vgcfgbackup(8)</a>, <a href="vgcfgrestore.8">vgcfgrestore(8)</a>, <a href="vgchange.8">vgchange(8)</a>, <a href="vgck.8">vgck(8)</a>, <a href="vgconvert.8">vgconvert(8)</a>, <a href="vgcreate.8">vgcreate(8)</a>, <a href="vgdisplay.8">vgdisplay(8)</a>, <a href="vgexport.8">vgexport(8)</a>, <a href="vgextend.8">vgextend(8)</a>, <a href="vgimport.8">vgimport(8)</a>, <a href="vgimportclone.8">vgimportclone(8)</a>, <a href="vgimportdevices.8">vgimportdevices(8)</a>, <a href="vgmerge.8">vgmerge(8)</a>, <a href="vgmknodes.8">vgmknodes(8)</a>, <a href="vgreduce.8">vgreduce(8)</a>, <a href="vgremove.8">vgremove(8)</a>, <a href="vgrename.8">vgrename(8)</a>, <a href="vgs.8">vgs(8)</a>, <a href="vgscan.8">vgscan(8)</a>, <a href="vgsplit.8">vgsplit(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/vgcfgrestore.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/vgcfgrestore.8.html</a>
  </p>
</div>
