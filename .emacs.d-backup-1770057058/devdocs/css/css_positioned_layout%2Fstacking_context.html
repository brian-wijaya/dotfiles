<h1>Stacking context</h1>  <section class="content-section">  <p><strong>Stacking context</strong> is a three-dimensional conceptualization of HTML elements along an imaginary z-axis relative to the user, who is assumed to be facing the viewport or the webpage. The stacking context determines how elements are layered on top of one another along the z-axis (think of it as the "depth" dimension on your screen). Stacking context determines the visual order of how overlapping content is rendered.</p> <p>Elements within a stacking context are stacked independently from elements outside of that stacking context, ensuring elements in one stacking context don't interfere with the stacking order of elements in another. Each stacking context is completely independent of its siblings: only descendant elements are considered when stacking is processed.</p> <p>Each stacking context is self-contained. After an element's contents are stacked, the entire element is considered as a single unit in the stacking order of its parent stacking context.</p> <p>Within a stacking context, child elements are stacked according to the <code>z-index</code> values of all the siblings. The stacking contexts of these nested elements only have meaning in this parent. Stacking contexts are treated atomically as a single unit in the parent stacking context. Stacking contexts can be contained in other stacking contexts, and together create a hierarchy of stacking contexts.</p> <p>The hierarchy of stacking contexts is a subset of the hierarchy of HTML elements because only certain elements create stacking contexts. Elements that don't create their own stacking contexts are <em>assimilated</em> by the parent stacking context.</p> </section>    <mdn-survey></mdn-survey> <section class="content-section" aria-labelledby="features_creating_stacking_contexts"> <h2 id="features_creating_stacking_contexts" class="heading">Features creating stacking contexts</h2> <p>A stacking context is formed, anywhere in the document, by any element in the following scenarios:</p> <ul> <li> <p>Root element of the document (<code>&lt;html&gt;</code>).</p> </li> <li> <p>Element with a <a href="../position"><code>position</code></a> value <code>absolute</code> or <code>relative</code> and <a href="../z-index"><code>z-index</code></a> value other than <code>auto</code>.</p> </li> <li> <p>Element with a <a href="../position"><code>position</code></a> value <code>fixed</code> or <code>sticky</code>.</p> </li> <li> <p>Element with a <a href="../container-type"><code>container-type</code></a> value <code>size</code> or <code>inline-size</code> set (See <a href="../css_containment/container_queries">container queries</a>).</p> </li> <li> <p>Element that is a <a href="../css_flexible_box_layout/basic_concepts_of_flexbox">flex item</a> with a <a href="../z-index"><code>z-index</code></a> value other than <code>auto</code>.</p> </li> <li> <p>Element that is a <a href="stacking_context">grid item</a> with <a href="../z-index"><code>z-index</code></a> value other than <code>auto</code>.</p> </li> <li> <p>Element with an <a href="../opacity"><code>opacity</code></a> value less than <code>1</code>.</p> </li> <li> <p>Element with a <a href="../mix-blend-mode"><code>mix-blend-mode</code></a> value other than <code>normal</code>.</p> </li> <li> <p>Element with any of the following properties with a value other than <code>none</code>:</p> <ul> <li><a href="../transform"><code>transform</code></a></li> <li><a href="../scale"><code>scale</code></a></li> <li><a href="../rotate"><code>rotate</code></a></li> <li><a href="../translate"><code>translate</code></a></li> <li><a href="../filter"><code>filter</code></a></li> <li><a href="../backdrop-filter"><code>backdrop-filter</code></a></li> <li><a href="../perspective"><code>perspective</code></a></li> <li><a href="../clip-path"><code>clip-path</code></a></li> <li>
<a href="../mask"><code>mask</code></a> / <a href="../mask-image"><code>mask-image</code></a> / <a href="../mask-border"><code>mask-border</code></a>
</li> </ul> </li> <li> <p>Element with the <a href="../isolation"><code>isolation</code></a> value <code>isolate</code>.</p> </li> <li> <p>Element with a <a href="../will-change"><code>will-change</code></a> value specifying any property that would create a stacking context on non-initial value.</p> </li> <li> <p>Element with a <a href="../contain"><code>contain</code></a> value of <code>layout</code> or <code>paint</code>, or a composite value that includes either of these values (i.e., <code>contain: strict</code>, <code>contain: content</code>).</p> </li> <li> <p>Element placed into the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Top_layer">top layer</a> and its corresponding <a href="../::backdrop"><code>::backdrop</code></a>. Examples include <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API">fullscreen</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Popover_API">popover</a> elements.</p> </li> <li> <p>Element that has had stacking context-creating properties (such as <code>opacity</code>) animated using <a href="../@keyframes"><code>@keyframes</code></a>, with <a href="../animation-fill-mode"><code>animation-fill-mode</code></a> set to <a href="../animation-fill-mode#forwards"><code>forwards</code></a>.</p> </li> </ul> </section><section class="content-section" aria-labelledby="nested_stacking_contexts"> <h2 id="nested_stacking_contexts" class="heading">Nested stacking contexts</h2> <p>Stacking contexts can be contained in other stacking contexts, and they can together create a hierarchy of stacking contexts.</p> <p>The root element of a document is a stacking context which, in most cases, contains nested stacking contexts, many of which will contain additional stacking contexts. Within each stacking context, child elements are stacked according to the same rules explained in <a href="using_z-index">Using <code>z-index</code></a>. Importantly, the <code>z-index</code> values of its child stacking contexts only have meaning within its parent's stacking context. Stacking contexts are treated atomically as a single unit in the parent stacking context.</p> <p>To figure out the <em>rendering order</em> of stacked elements along the z-axis, think of each index value as a "version number" of sorts, where child elements represent minor version numbers underneath their parent's major version number.</p> <p>To demonstrate how the stacking order of each element participates in the stacking order of their ancestor stacking contexts, let's look at an example page with six container elements. There are three sibling <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/article"><code>&lt;article&gt;</code></a> elements. The last <code>&lt;article&gt;</code> contains three sibling <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/section"><code>&lt;section&gt;</code></a> elements, with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/Heading_Elements">&lt;h1&gt;</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/code"><code>&lt;code&gt;</code></a> of that third article appearing between the first and second sibling <code>&lt;section&gt;</code> elements.</p> <div class="code-example"><pre data-language="html">&lt;article id="container1"&gt;
  &lt;h1&gt;Article element #1&lt;/h1&gt;
  &lt;code&gt;
    position: relative;&lt;br /&gt;
    z-index: 5;
  &lt;/code&gt;
&lt;/article&gt;

&lt;article id="container2"&gt;
  &lt;h1&gt;Article Element #2&lt;/h1&gt;
  &lt;code&gt;
    position: relative;&lt;br /&gt;
    z-index: 2;
  &lt;/code&gt;
&lt;/article&gt;

&lt;article id="container3"&gt;
  &lt;section id="container4"&gt;
    &lt;h1&gt;Section Element #4&lt;/h1&gt;
    &lt;code&gt;
      position: relative;&lt;br /&gt;
      z-index: 6;
    &lt;/code&gt;
  &lt;/section&gt;

  &lt;h1&gt;Article Element #3&lt;/h1&gt;
  &lt;code&gt;
    position: absolute;&lt;br /&gt;
    z-index: 4;
  &lt;/code&gt;

  &lt;section id="container5"&gt;
    &lt;h1&gt;Section Element #5&lt;/h1&gt;
    &lt;code&gt;
      position: relative;&lt;br /&gt;
      z-index: 1;
    &lt;/code&gt;
  &lt;/section&gt;

  &lt;section id="container6"&gt;
    &lt;h1&gt;Section Element #6&lt;/h1&gt;
    &lt;code&gt;
      position: absolute;&lt;br /&gt;
      z-index: 3;
    &lt;/code&gt;
  &lt;/section&gt;
&lt;/article&gt;
</pre></div> <p>Every container element has an <a href="../opacity"><code>opacity</code></a> of less than <code>1</code> and a <a href="../position"><code>position</code></a> of either <code>relative</code> or <code>absolute</code> set. These property-value pairs create a stacking context when the element has <code>z-index</code> value other than <code>auto</code>.</p>  <div class="code-example"><pre data-language="css">section,
article {
  opacity: 0.85;
  position: relative;
}
#container1 {
  z-index: 5;
}
#container2 {
  z-index: 2;
}
#container3 {
  z-index: 4;
  position: absolute;
  top: 40px;
  left: 180px;
}
#container4 {
  z-index: 6;
}
#container5 {
  z-index: 1;
}
#container6 {
  z-index: 3;
  position: absolute;
  top: 20px;
  left: 180px;
}
</pre></div> <p>The CSS properties for colors, fonts, alignment, and <a href="../css_box_model/introduction_to_the_css_box_model">box-model</a> have been hidden for brevity.</p> <div class="code-example"><iframe class="sample-code-frame" title="Nested stacking contexts sample" id="frame_nested_stacking_contexts" width="100%" height="396" src="about:blank" data-live-path="/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context/" data-live-id="nested_stacking_contexts" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe></div> <p>The hierarchy of stacking contexts in the above example is as follows:</p> <pre data-language="plain">Root
│
├── ARTICLE #1
├── ARTICLE #2
└── ARTICLE #3
  │
  ├── SECTION #4
  ├────  ARTICLE #3 content
  ├── SECTION #5
  └── SECTION #6
</pre> <p>The three <code>&lt;section&gt;</code> elements are children of ARTICLE #3. Therefore, the stacking of the section elements is completely resolved within ARTICLE #3. Once stacking and rendering within ARTICLE #3 is completed, the whole ARTICLE #3 element is passed for stacking in the root element with respect to its sibling <code>&lt;article&gt;</code> elements.</p> <p>By comparing the <code>z-index</code> as "version numbers", we can see how an element with a <code>z-index</code> of <code>1</code> (SECTION #5) is stacked above an element with a <code>z-index</code> of <code>2</code> (ARTICLE #2), and how an element with a <code>z-index</code> of <code>6</code> (SECTION #4) is stacked below an element with a <code>z-index</code> of <code>5</code> (ARTICLE #1). SECTION #4 is rendered under ARTICLE #1 because ARTICLE #1's z-index (<code>5</code>) is valid within the stacking context of the root element, while SECTION #4's z-index (<code>6</code>) is valid within the stacking context of ARTICLE #3 (<code>z-index: 4</code>). So SECTION #4 is under ARTICLE #1 because SECTION #4 belongs to ARTICLE #3, which has a lower z-index value (<code>4-6</code> is less than <code>5-0</code>).</p> <p>For the same reason, ARTICLE #2 (<code>z-index: 2</code>) is rendered under SECTION #5 (<code>z-index</code>: 1) because SECTION #5 belongs to ARTICLE #3 (<code>z-index: 4</code>), which has a higher z-index value (<code>2-0</code> is less than <code>4-1</code>).</p> <p>ARTICLE #3's z-index is <code>4</code>, but this value is independent of the <code>z-index</code> of three sections nested inside it because they belong to a different stacking context.</p> <p>In our example (sorted according to the final rendering order):</p> <ul> <li>Root <ul> <li> <p>ARTICLE #2: (<code>z-index</code>: 2), which results in a rendering order of <code>2-0</code></p> </li> <li> <p>ARTICLE #3: (<code>z-index</code>: 4), which results in a rendering order of <code>4-0</code></p> <ul> <li>SECTION #5: (<code>z-index</code>: 1), stacked under an element (<code>z-index</code>: 4), which results in a rendering order of <code>4-1</code>
</li> <li>SECTION #6: (<code>z-index</code>: 3), stacked under an element (<code>z-index</code>: 4), which results in a rendering order of <code>4-3</code>
</li> <li>SECTION #4: (<code>z-index</code>: 6), stacked under an element (<code>z-index</code>: 4), which results in a rendering order of <code>4-6</code>
</li> </ul> </li> <li> <p>ARTICLE #1: (<code>z-index</code>: 5), which results in a rendering order of <code>5-0</code></p> </li> </ul> </li> </ul> </section><section class="content-section" aria-labelledby="additional_examples"> <h2 id="additional_examples" class="heading">Additional examples</h2> <p>Additional examples include a <a href="stacking_context/stacking_context_example_1">2-level hierarchy with <code>z-index</code> on the last level</a>, a <a href="stacking_context/stacking_context_example_2">2-level HTML hierarchy, <code>z-index</code> on all levels</a>, and a <a href="stacking_context/stacking_context_example_3">3-level HTML hierarchy, <code>z-index</code> on the second level</a>.</p> </section><section class="content-section" aria-labelledby="see_also"> <h2 id="see_also" class="heading">See also</h2> <ul> <li><a href="understanding_z-index">Understanding z-index</a></li> <li><a href="stacking_without_z-index">Stacking without the <code>z-index</code> property</a></li> <li><a href="stacking_floating_elements">Stacking floating elements</a></li> <li><a href="using_z-index">Using z-index</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Top_layer">Top layer</a></li> <li>
<a href="../css_positioned_layout">CSS positioned layout</a> module</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context</a>
  </p>
</div>
